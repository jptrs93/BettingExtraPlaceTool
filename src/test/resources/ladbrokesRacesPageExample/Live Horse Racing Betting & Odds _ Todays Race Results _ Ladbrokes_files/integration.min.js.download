iapiConf = {"casinoname":"ladbrokesvegas","loginServer":"login.ladbrokes.com","clientSkin":"ladbrokesvegas","clientType":"casino","clientPlatform":"flash","clientVersion":null,"systemId":"380","serviceType":"GamePlay","loginDomainRetryCount":"2","loginDomainRequestTimeout":"30","loginDomainRetryInterval":"1","fingerprintEnabled":"0","onlypostrequestsforlogout":null,"useIframeForGetLoggedInPlayer":"0","clientUrl_casino":"http:\/\/cache.download.banner.ladbrokes.com\/casinoclient.html"};
var iapiVersion="_version_",iapiERR_OK=0,iapiERR_NOK=-1,iapiERR_BLOCKED=-2,iapiCALLOUT_LOGIN="Login",iapiCALLOUT_EMAILLOGIN="EmailLogin",iapiCALLOUT_TEMPORARYTOKEN="GetTemporaryAuthenticationToken",iapiCALLOUT_LOGINANDGETTEMPTOKEN="LoginAndGetTempToken",iapiCALLOUT_EMAILLOGINANDGETTEMPTOKEN="EmailLoginAndGetTempToken",iapiCALLOUT_SESSIONVALIDATION="ValidateLoginSession",iapiCALLOUT_MESSAGES="GetWaitingMessages",iapiCALLOUT_SUBMITDIALOG="SubmitDialog",iapiCALLOUT_FORGOTPASSWORD="ForgotPassword",iapiCALLOUT_STARTFORGOTEMAIL=
"StartForgotEamil",iapiCALLOUT_COMPLETEFORGOTEMAIL="CompleteForgotEmail",iapiCALLOUT_ONLINEFORGOTPASSWORD="OnlineForgotPassword",iapiCALLOUT_GETLOGGEDINPLAYER="GetLoggedInPlayer",iapiCALLOUT_KEEPALIVE="KeepAlive",iapiCALLOUT_LOGOUT="Logout",iapiEVENT_TIMER=10,iapiUsername=null,iapiPassword=null,iapiEmail=null,iapiAdminUsername=null,iapiRealMode=1,iapiAuthenticationType=null,iapiDivname="iapidiv",iapiIframename="iapiiframe",iapiRealCookieIframe="iapirealcookieiframe",iapiFunCookieIframe="iapifuncookieiframe",
iapiGetLoggedInPlayerRequestIdReal=1234567890,iapiGetLoggedInPlayerRequestIdFun=9876543210,iapiClientParams=[],iapiWaitingMessagesId=0,iapiRememberMeLogin=null,iapiCalloutFunctions=[],iapiRequestIds=[],iapiLoginSuccess=!1,iapiSessionValid=0,iapiNextLogin=null,iapiLoginModeDownload=!1,iapiLoginModeFlash=!1,iapiFlashLoginClientType=null,iapiFlashLoginGameType=null,iapiMessagesSupported=!1,iapiMessagesAnswered=!1,iapiLoginTypes={SESSION_TOKEN:"sessionToken",EXTERNAL_TOKEN:"externalToken",ADMIN_USERNAME:"adminUsername",
NICKNAME:"nickname",EMAIL:"email"};function iapiLogin(a,b,c,d,e){iapiLoginModeFlash=iapiLoginModeDownload=!1;iapiAuthenticationType=iapiConf.authenticationType;iapiBaseLogin(a,b,c,d,e);return iapiERR_OK}function iapiEmailLogin(a,b,c,d,e){iapiLoginModeFlash=iapiLoginModeDownload=!1;iapiAuthenticationType=iapiLoginTypes.EMAIL;iapiBaseLogin(a,b,c,d,e);return iapiERR_OK}
function iapiLoginExternalToken(a,b,c){iapiLoginModeFlash=iapiLoginModeDownload=!1;iapiAuthenticationType=iapiLoginTypes.EXTERNAL_TOKEN;iapiBaseLogin(null,a,b,c);return iapiERR_OK}function iapiLoginUsernameExternalToken(a,b,c,d){iapiLoginModeFlash=iapiLoginModeDownload=!1;iapiAuthenticationType=iapiLoginTypes.EXTERNAL_TOKEN;iapiBaseLogin(a,b,c,d);return iapiERR_OK}
function iapiLoginAdminUsername(a,b,c,d,e){iapiLoginModeFlash=iapiLoginModeDownload=!1;iapiAuthenticationType=iapiLoginTypes.ADMIN_USERNAME;iapiAdminUsername=a;iapiBaseLogin(e,b,c,d);return iapiERR_OK}function iapiLoginSessionToken(a,b,c){iapiLoginModeFlash=iapiLoginModeDownload=!1;iapiAuthenticationType=iapiLoginTypes.SESSION_TOKEN;iapiBaseLogin(null,a,b,c);return iapiERR_OK}
function iapiLoginNickname(a,b,c,d){iapiLoginModeFlash=iapiLoginModeDownload=!1;iapiAuthenticationType=iapiLoginTypes.NICKNAME;iapiBaseLogin(a,b,c,d);return iapiERR_OK}
function iapiLaunchClient(a,b,c,d,e,f){if(iapiConf["clientUrl_"+a]){var g=iapiConf["clientUrl_"+a];b&&(g=iapiAddUrlParams(g,"game="+b));c&&(g=iapiAddUrlParams(g,"preferedmode="+c));iapiClientParams["clientParams_"+a]&&(g=iapiAddUrlParams(g,iapiClientParams["clientParams_"+a]));if(iapiLoginModeFlash){document.location=g;return}c="width=800,height=600";if(void 0!=e&&void 0!=f)if(-1==e&&-1==f){c="";if("Microsoft Internet Explorer"==navigator.appName||0<=navigator.userAgent.indexOf("Safari")&&0>navigator.userAgent.indexOf("Chrome"))c=
"left=0,top=0,";b=screen.width;e=screen.height;void 0!=screen.availWidth&&(b=screen.availWidth,e=screen.availHeight);"number"==typeof innerWidth&&"number"==typeof outerWidth&&(b-=outerWidth-innerWidth,e-=outerWidth-innerWidth);c+="width="+b+",height="+e}else c="width="+e+",height="+f;else iapiConf["windowSize_"+a]&&(b=iapiConf["windowSize_"+a][b],void 0==b&&(b=iapiConf["windowSize_"+a]["default"]),void 0!=b&&iapiConf.windowSizes[b]&&(c=iapiConf.windowSizes[b]));if(null!=d&&0<d.length){if(b=document.getElementById(d))return b.src=
g,iapiERR_OK}else d="";b="toolbar=no,menubar=no,scrollbars=no,resizable=no";iapiConf["windowParams_"+a]&&(b=iapiConf["windowParams_"+a]);windowParams=c+","+b;a=window.open(g,d,windowParams);return null==a||a.closed?iapiERR_BLOCKED:iapiERR_OK}return iapiERR_NOK}function iapiSetClientParams(a,b){iapiClientParams["clientParams_"+a]=b}
function iapiRequestTemporaryToken(a,b,c){var d="GetTemporaryAuthenticationToken.php?casinoname="+iapiConf.casinoname,d=void 0!=c?d+("&serviceType="+c):d+("&serviceType="+iapiConf.serviceType),d=void 0!=b?d+("&systemId="+b):d+("&systemId="+iapiConf.systemId);void 0!=a&&(d+="&realMode="+a);iapiMakeRedirectRequest(d,null,iapiCALLOUT_TEMPORARYTOKEN);return iapiERR_OK}
function iapiLoginAndGetTempToken(a,b,c,d,e,f,g){iapiClearRedirectRequests(iapiCALLOUT_LOGINANDGETTEMPTOKEN,c);e||(e=iapiConf.systemId);f||(f=iapiConf.serviceType);d&&iapiSetLanguageCode(d);c="LoginAndGetTempToken.php?casinoname="+iapiConf.casinoname+"&realMode="+c+"&systemId="+e+"&serviceType="+f;1==g&&(c+="&rememberMeLogin=1");g=[];iapiAuthenticationType=iapiConf.authenticationType;iapiAuthenticationType==iapiLoginTypes.EXTERNAL_TOKEN?(a&&(g.username=a),g.externalToken=b):iapiAuthenticationType==
iapiLoginTypes.SESSION_TOKEN?g.sessionToken=b:iapiAuthenticationType==iapiLoginTypes.ADMIN_USERNAME?(a&&(g.adminUsername=a),g.externalToken=b):iapiAuthenticationType==iapiLoginTypes.NICKNAME?(g.nickname=a,g.password=b,g.systemId=e):iapiAuthenticationType==iapiLoginTypes.EMAIL?(a&&(g.email=a),g.password=b):(g.username=a,g.password=b,iapiConf.iovationBlackbox&&(g.iovationBlackbox=iapiConf.iovationBlackbox));iapiMakeRedirectRequest(c,g,iapiCALLOUT_LOGINANDGETTEMPTOKEN);return iapiERR_OK}
function iapiEmailLoginAndGetTempToken(a,b,c,d,e,f,g){iapiConf.authenticationType=iapiLoginTypes.EMAIL;iapiLoginAndGetTempToken(a,b,c,d,e,f,g);iapiConf.authenticationType=null}function iapiLoginExternalTokenAndGetTempToken(a,b,c,d,e,f,g){iapiConf.authenticationType=iapiLoginTypes.EXTERNAL_TOKEN;iapiLoginAndGetTempToken(a,b,c,d,e,f,g);iapiConf.authenticationType=null}
function iapiDownloadLogin(a,b,c,d){iapiAuthenticationType=null;iapiLoginModeDownload=!0;iapiLoginModeFlash=!1;iapiBaseLogin(a,b,c,d);return iapiERR_OK}function iapiDownloadEmailLogin(a,b,c,d){iapiAuthenticationType=iapiLoginTypes.EMAIL;iapiLoginModeDownload=!0;iapiLoginModeFlash=!1;iapiBaseLogin(a,b,c,d);return iapiERR_OK}
function iapiFlashLogin(a,b,c,d,e,f){iapiAuthenticationType=null;iapiLoginModeFlash=!0;iapiLoginModeDownload=!1;iapiFlashLoginClientType=e;iapiFlashLoginGameType=f;iapiBaseLogin(a,b,c,d);return iapiERR_OK}function iapiFlashEmailLogin(a,b,c,d,e,f){iapiAuthenticationType=iapiLoginTypes.EMAIL;iapiLoginModeFlash=!0;iapiLoginModeDownload=!1;iapiFlashLoginClientType=e;iapiFlashLoginGameType=f;iapiBaseLogin(a,b,c,d);return iapiERR_OK}
function iapiLogout(a,b,c,d){iapiEmail=iapiPassword=iapiUsername=null;iapiClearRedirectRequests(iapiCALLOUT_LOGIN,b);var e=[];1==b?iapiWriteClientCookie("loginSuccess=0&errorCode=0&expire=-1",1):iapiWriteClientCookie("loginSuccess=0&errorCode=0&expire=-1",0);void 0==c&&(c=1==a?"all":"this");var f="Logout.php?allSessions="+a+"&casinoname="+iapiConf.casinoname+"&behaviour="+c;e.allSessions=a;e.casinoname=iapiConf.casinoname;e.behaviour=c;void 0!=b&&(f+="&realMode="+b,e.realMode=b);1==d&&(f+="&invalidateRememberMe=1",
e.invalidateRememberMe=1);iapiConf.onlypostrequestsforlogout?iapiMakeRedirectRequest("Logout.php",e,iapiCALLOUT_LOGOUT):iapiMakeRedirectRequest(f,null,iapiCALLOUT_LOGOUT);return iapiERR_OK}function iapiSetCallout(a,b){iapiCalloutFunctions[a]=b;return iapiERR_OK}
function iapiGetWaitingMessages(a,b){iapiClearRedirectRequests(iapiCALLOUT_MESSAGES,0);iapiClearRedirectRequests(iapiCALLOUT_MESSAGES,1);a||(a="login,bonus,alert");iapiMakeRedirectRequest("GetWaitingMessages.php?messageTypes="+a+"&casinoname="+iapiConf.casinoname+"&realMode="+b,null,iapiCALLOUT_MESSAGES);return iapiERR_OK}
function iapiAcceptPendingLimits(a,b){var c="SubmitDialog.php?dialogType=AcceptPendingLimits&casinoname="+iapiConf.casinoname;void 0!=b&&(c+="&realMode="+b);var d=[];d.action=a;iapiMakeRedirectRequest(c,d,iapiCALLOUT_SUBMITDIALOG);return iapiERR_OK}
function iapiBonusConfirmation(a,b,c){var d="SubmitDialog.php?dialogType=BonusConfirmation&casinoname="+iapiConf.casinoname;void 0!=c&&(d+="&realMode="+c);c=[];c.bonusIdentifier=a;c.accept=b?1:0;iapiMakeRedirectRequest(d,c,iapiCALLOUT_SUBMITDIALOG);return iapiERR_OK}
function iapiValidateTCVersion(a,b,c){var d="ValidateLoginSession.php?validationType=TCVersion&casinoname="+iapiConf.casinoname;void 0!=c&&(d+="&realMode="+c);c=[];c.termVersionReference=a;c.accept=b?1:0;iapiMakeRedirectRequest(d,c,iapiCALLOUT_SESSIONVALIDATION);return iapiERR_OK}
function iapiValidatePasswordChange(a,b,c,d){var e="ValidateLoginSession.php?validationType=PasswordChange&casinoname="+iapiConf.casinoname;void 0!=d&&(e+="&realMode="+d);d=[];d.oldPassword=a;d.newPassword=b;c&&(d.changePassword=1);iapiMakeRedirectRequest(e,d,iapiCALLOUT_SESSIONVALIDATION);return iapiERR_OK}
function iapiValidateConfirmationToken(a,b){var c="ValidateLoginSession.php?validationType=ConfirmationToken&casinoname="+iapiConf.casinoname;b&&(c+="&realMode="+b);var d=[];d.parameter=a;iapiMakeRedirectRequest(c,d,iapiCALLOUT_SESSIONVALIDATION);return iapiERR_OK}
function iapiValidateBirthdateToken(a,b){var c="ValidateLoginSession.php?validationType=Birthdate&casinoname="+iapiConf.casinoname;b&&(c+="&realMode="+b);var d=[];d.birthdate=a;iapiMakeRedirectRequest(c,d,iapiCALLOUT_SESSIONVALIDATION);return iapiERR_OK}
function iapiValidateActivationCode(a,b){var c="ValidateLoginSession.php?validationType=ActivationCode&casinoname="+iapiConf.casinoname;b&&(c+="&realMode="+b);var d=[];d.activationCode=a;iapiMakeRedirectRequest(c,d,iapiCALLOUT_SESSIONVALIDATION);return iapiERR_OK}
function iapiForgotPassword(a,b,c,d,e){d="ForgotPassword.php?casinoname="+iapiConf.casinoname+"&realMode="+d;var f=[];f.username=a;f.email=b;f.birthDate=c;e&&(f.verificationAnswer=e);iapiMakeRedirectRequest(d,f,iapiCALLOUT_FORGOTPASSWORD);return iapiERR_OK}function iapiStartForgotEmail(a,b,c){c="StartForgotEmail.php?casinoname="+iapiConf.casinoname+"&realMode="+c;var d=[];d.cellphone=a;d.birthdate=b;iapiMakeRedirectRequest(c,d,iapiCALLOUT_STARTFORGOTEMAIL);return iapiERR_OK}
function iapiCompleteForgotEmail(a,b,c){b="CompleteForgotEmail.php?casinoname="+iapiConf.casinoname+"&realMode="+b;var d=[];d.token=a;c&&(d.pin=c);iapiMakeRedirectRequest(b,d,iapiCALLOUT_COMPLETEFORGOTEMAIL);return iapiERR_OK}
function iapiOnlineForgotPassword(a,b,c,d,e,f){d="OnlineForgotPassword.php?casinoname="+iapiConf.casinoname+"&realMode="+d;var g=[];g.username=a;b&&(g.email=b);c&&(g.birthDate=c);e&&(g.verificationAnswer=e);f&&(g.newPassword=f);iapiMakeRedirectRequest(d,g,iapiCALLOUT_ONLINEFORGOTPASSWORD);return iapiERR_OK}function iapiGetLoggedInPlayer(a){iapiMakeRedirectRequest("GetLoggedInPlayer.php?casinoname="+iapiConf.casinoname+"&realMode="+a,null,iapiCALLOUT_GETLOGGEDINPLAYER);return iapiERR_OK}
function iapiKeepAlive(a,b){var c="KeepAlive.php?casinoname="+iapiConf.casinoname+"&realMode="+a;b&&(c+="&millisFromLastAction="+b);iapiMakeRedirectRequest(c,null,iapiCALLOUT_KEEPALIVE);return iapiERR_OK}function iapiSetAuthenticationType(a){iapiConf.authenticationType=a}function iapiSetClientSkin(a){iapiConf.clientSkin=a}function iapiSetClientType(a){iapiConf.clientType=a}function iapiSetClientUrl(a,b){iapiConf["clientUrl_"+a]=b}function iapiSetClientVersion(a){iapiConf.clientVersion=a}
function iapiSetClientChannel(a){iapiConf.clientChannel=a}function iapiSetGameType(a){iapiConf.gameType=a}function iapiSetGameTypePrefix(a){iapiConf.gameTypePrefix=a}function iapiSetClientPlatform(a){iapiConf.clientPlatform=a}function iapiSetSystemId(a){iapiConf.systemId=a}function iapiSetServiceType(a){iapiConf.serviceType=a}function iapiSetLanguageCode(a){iapiConf.languageCode=a}function iapiSetCallId(a){iapiConf.callId=a}function iapiSetDeliveryPlatform(a){iapiConf.deliveryPlatform=a}
function iapiSetDeviceBrowser(a){iapiConf.deviceBrowser=a}function iapiSetOsName(a){iapiConf.osName=a}function iapiSetOsVersion(a){iapiConf.osVersion=a}function iapiSetDeviceId(a){iapiConf.deviceId=a}function iapiSetDeviceType(a){iapiConf.deviceType=a}function iapiSetDeviceFamily(a){iapiConf.deviceFamily=a}function iapiSetSoftSerial(a){iapiConf.softSerial=a}function iapiSetIovationBlackbox(a){iapiConf.iovationBlackbox=a}function iapiEnableUserErrors(){iapiConf.errorLevel=1}
function iapiCallbackWaitingMessages(a){var b=iapiGetRequest(iapiWaitingMessagesId);if(b){var c={errorCode:6,errorText:"Invalid response.",playerMessage:""};a?c=a.errorCode?{errorCode:a.errorCode,errorText:a.errorText,playerMessage:a.playerMessage}:null:a=c;if(c&&6==c.errorCode&&b[3].length<iapiConf.loginDomainRetryCount){var c=(new Date).getTime()+Math.round(1E6*Math.random()),d=setTimeout("iapiRequestFailed("+c+")",1E3*iapiConf.loginDomainRetryInterval);iapiRegisterRequestId(c,iapiCALLOUT_MESSAGES,
d,b[3],b[4],b[5])}else iapiCalloutFunctions[iapiCALLOUT_MESSAGES]&&setTimeout(function(){iapiCalloutFunctions[iapiCALLOUT_MESSAGES](a)},iapiEVENT_TIMER)}}
function iapiBaseLogin(a,b,c,d,e){if(iapiHasRedirectRequest(iapiCALLOUT_LOGIN)&&iapiRealMode!=c)return iapiNextLogin=[a,b,c,d,e],iapiERR_OK;iapiAuthenticationType==iapiLoginTypes.EMAIL?iapiEmail=a:iapiUsername=a;iapiPassword=b;iapiRealMode=1==c?1:0;d&&iapiSetLanguageCode(d);iapiRememberMeLogin=e;iapiLoginSuccess=!1;iapiWriteClientCookie("loginInProgress=1",iapiRealMode);iapiContinueLogin();return iapiERR_OK}
function iapiContinueLogin(){iapiClearRedirectRequests(iapiCALLOUT_LOGIN,0);iapiClearRedirectRequests(iapiCALLOUT_LOGIN,1);var a="Login.php?casinoname="+iapiConf.casinoname,a=1==iapiRealMode?a+"&realMode=1":a+"&realMode=0";1==iapiRememberMeLogin&&(a+="&rememberMeLogin=1");var b=[];iapiAuthenticationType==iapiLoginTypes.EXTERNAL_TOKEN?(iapiUsername&&(b.username=iapiUsername),b.externalToken=iapiPassword):iapiAuthenticationType==iapiLoginTypes.EMAIL?(iapiEmail&&(b.email=iapiEmail),b.password=iapiPassword):
iapiAuthenticationType==iapiLoginTypes.SESSION_TOKEN?b.sessionToken=iapiPassword:iapiAuthenticationType==iapiLoginTypes.ADMIN_USERNAME?(iapiAdminUsername&&(b.adminUsername=iapiAdminUsername),b.username=iapiUsername,b.externalToken=iapiPassword):iapiAuthenticationType==iapiLoginTypes.NICKNAME?(b.nickname=iapiUsername,b.password=iapiPassword,b.systemId=iapiConf.systemId):(b.username=iapiUsername,b.password=iapiPassword,iapiConf.iovationBlackbox&&(b.iovationBlackbox=iapiConf.iovationBlackbox));iapiMakeRedirectRequest(a,
b,iapiCALLOUT_LOGIN)}function iapiWriteClientCookie(a,b){if(!iapiLoginModeDownload){var c=iapiConf.clientCookieUrl;if(c){0>c.indexOf("://")&&(c=location.protocol+"//"+c);var c=c+"?"+a+"&casinoname="+iapiConf.casinoname+"&realMode="+b,d=iapiRealCookieIframe;0==b&&(d=iapiFunCookieIframe);iapiCreateDiv(iapiDivname);iapiCreateIframe(iapiDivname,d);iapiGet(d,c)}}}
function iapiCreateDiv(a){if(!document.getElementById(a)){var b=document.createElement("div");b.setAttribute("id",a);b.setAttribute("style","DISPLAY:none;");document.body.appendChild(b)}}
function iapiCreateIframe(a,b){var c=document.getElementById(a);if(document.getElementById(b)){if(b==iapiIframename+"_"+iapiGetLoggedInPlayerRequestIdReal||b==iapiIframename+"_"+iapiGetLoggedInPlayerRequestIdFun)return!0;c.removeChild(document.getElementById(b))}var d;try{d=document.createElement("<iframe name='"+b+"'>")}catch(e){d=document.createElement("iframe")}d.setAttribute("id",b);d.setAttribute("name",b);d.setAttribute("style","DISPLAY: none; LEFT: 0px; POSITION: absolute; TOP: 0px");d.setAttribute("width",
"0px");d.setAttribute("height","0px");d.setAttribute("border","0px");d.setAttribute("frameborder","0");c.appendChild(d);return!1}
function iapiPost(a,b,c){a=encodeHTML(a);b=encodeURL(b);var d=document.getElementsByTagName("script")[0].getAttribute("nonce");b="<html><head></head><body><form id='formid' target='"+a+"' method='POST' action='"+b+"'>";for(var e in c)"function"!=typeof c[e]&&(b+="<input type='hidden' name='"+e+"' value='"+encodeHTML(c[e])+"'>");b+="</form><script type='text/javascript'";d&&(b+=" nonce="+d);iapiPostWindow(a,b+">setTimeout(function(){document.getElementById('formid').submit();},100);\x3c/script></body></html>")}
function iapiPostWindow(a,b){var c=document.getElementById(a);if(c)try{c.contentWindow.document.open(),c.contentWindow.document.write(b),c.contentWindow.document.close()}catch(e){var d="javascript:'<script>window.onload=function(){var ed=\\'"+escape(escape("<script>document.domain='"+document.domain+"';\x3c/script>"+b))+"\\';document.write(unescape(ed));document.close();};\x3c/script>'";c.src=d}}
function iapiMakeRedirectRequest(a,b,c,d){if(!d)d=[];else if(d.length>=iapiConf.loginDomainRetryCount||25<=d.length)return!1;var e=iapiConf.loginServer.split("|");if(d.length<e.length)for(var f in d){var g=d[f],h;for(h in e)if(e[h]==g&&"string"===typeof e[h]){e.splice(h,1);break}}c==iapiCALLOUT_LOGIN||c==iapiCALLOUT_LOGINANDGETTEMPTOKEN?"1"==iapiConf.fingerprintEnabled&&(iapiConf.fingerprint=FingerprintObject.getFingerprint(!iapiAuthenticationType||iapiAuthenticationType==iapiLoginTypes.NICKNAME)):
delete iapiConf.fingerprint;a=iapiAppendContextParameters(a);e=e[Math.floor(Math.random()*e.length)];d.push(e);requestUrl="https://"+e+"/"+a;f=(new Date).getTime()+Math.round(1E6*Math.random());c==iapiCALLOUT_GETLOGGEDINPLAYER&&(f=0<a.indexOf("realMode=1")?iapiGetLoggedInPlayerRequestIdReal:iapiGetLoggedInPlayerRequestIdFun,iapiGetRequest(f));requestUrl=c!=iapiCALLOUT_MESSAGES?requestUrl+("&redirectUrl="+escape(location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+(iapiConf.redirectUrl?
iapiConf.redirectUrl:"/")+"#requestId="+f)):requestUrl+("&cacheBreaker="+(new Date).getTime());1==iapiConf.errorLevel&&(requestUrl+="&errorLevel=1");g=setTimeout("iapiRequestFailed("+f+")",1E3*iapiConf.loginDomainRequestTimeout);iapiRegisterRequestId(f,c,g,d,a,b);if(c==iapiCALLOUT_MESSAGES)iapiWaitingMessagesId=f,iapiJsonp(requestUrl,"iapiCallbackWaitingMessages");else{a=iapiIframename+"_"+f;iapiCreateDiv(iapiDivname);d=iapiCreateIframe(iapiDivname,a);iapiMessagesSupported||initMessageListener();
if(iapiMessagesSupported&&(requestUrl+="&messagesSupported=1",d&&iapiMessagesAnswered&&(d=document.getElementById(a),d.contentWindow.postMessage)))return d.contentWindow.postMessage(c,"https://"+e),!0;b?iapiPost(a,requestUrl,b):iapiGet(a,requestUrl)}return!0}
function iapiAppendContextParameters(a){iapiConf=iapiConf||[];iapiLoginModeDownload?iapiConf.clientPlatform="download":iapiConf.clientPlatform||(iapiConf.clientPlatform="flash");for(var b="clientType clientPlatform clientVersion clientSkin clientChannel callId gameType gameTypePrefix softSerial deviceId deliveryPlatform deviceType osName osVersion deviceBrowser languageCode deviceFamily fingerprint".split(" "),c=0;c<b.length;c++){var d=b[c];iapiConf[d]&&(a=iapiAddUrlParams(a,d+"="+iapiConf[d]))}return a}
function iapiJsonp(a,b){scriptElement=document.createElement("SCRIPT");scriptElement.type="text/javascript";scriptElement.src=encodeURL(a)+"&jsoncallback="+b+"&responseType=json";document.getElementsByTagName("HEAD")[0].appendChild(scriptElement)}function iapiGet(a,b){var c=document.getElementById(a);c&&(c.src=encodeURL(b))}function iapiAddUrlParams(a,b){a=0<a.indexOf("?")?a+"&":a+"?";return a+b}
function iapiLoginFailedActions(a){iapiPassword=null;iapiLoginSuccess=!1;iapiSessionValid=0;var b=a.errorCode;iapiWriteClientCookie("loginSuccess=0&errorCode="+b,iapiRealMode);iapiCalloutFunctions.login&&setTimeout(function(){iapiCalloutFunctions.login(0,0,b,iapiRealMode)},iapiEVENT_TIMER);iapiCalloutFunctions[iapiCALLOUT_LOGIN]&&setTimeout(function(){iapiCalloutFunctions[iapiCALLOUT_LOGIN](a)},iapiEVENT_TIMER);iapiLoginModeDownload&&iapiDownloadHtcmd(0,0,b,"");iapiCheckNextLogin()}
function iapiTokenFailedActions(a){iapiCalloutFunctions.temporarytoken&&setTimeout(function(){iapiCalloutFunctions.temporarytoken(0,null)},iapiEVENT_TIMER);iapiCalloutFunctions[iapiCALLOUT_TEMPORARYTOKEN]&&setTimeout(function(){iapiCalloutFunctions[iapiCALLOUT_TEMPORARYTOKEN](a)},iapiEVENT_TIMER);iapiLoginModeDownload&&iapiDownloadHtcmd(1,iapiSessionValid,0,"")}
function iapiCheckNextLogin(){if(null!=iapiNextLogin){var a=iapiNextLogin[0],b=iapiNextLogin[1],c=iapiNextLogin[2],d=iapiNextLogin[3],e=iapiNextLogin[4];iapiNextLogin=null;setTimeout(function(){iapiLogin(a,b,c,d,e)},iapiEVENT_TIMER)}}function iapiDownloadHtcmd(a,b,c,d){a&&d&&(a="htcmd:login?username="+encodeURIComponent(iapiUsername),a=a+"&password="+encodeURIComponent(d),a=a+"&realmode="+iapiRealMode,document.location=a+"&type=3")}
function iapiRedirectCallback(a){var b=String(a.requestId),c=iapiGetRequest(b);if(c){var d=c[1],e=null;try{e=JSON.parse(a.redirectResponse)}catch(f){}b={errorCode:6,errorText:"Invalid response.",playerMessage:""};e?b=e.errorCode?{errorCode:e.errorCode,errorText:e.errorText,playerMessage:e.playerMessage}:null:e=b;b&&6==b.errorCode&&c[3].length<iapiConf.loginDomainRetryCount?(b=(new Date).getTime()+Math.round(1E6*Math.random()),a=setTimeout("iapiRequestFailed("+b+")",1E3*iapiConf.loginDomainRetryInterval),
iapiRegisterRequestId(b,d,a,c[3],c[4],c[5])):d==iapiCALLOUT_LOGIN?null==b?(iapiPassword=null,iapiLoginSuccess=!0,iapiError=null,iapiSessionValid=1,e.sessionValidationData&&(iapiSessionValid=0),iapiWriteClientCookie("loginSuccess=1&sessionValid="+iapiSessionValid+"&loginDomain="+iapiConf.loginServer,iapiRealMode),iapiCalloutFunctions.login&&setTimeout(function(){iapiCalloutFunctions.login(1,iapiSessionValid,0,iapiRealMode)},iapiEVENT_TIMER),iapiCalloutFunctions[iapiCALLOUT_LOGIN]&&setTimeout(function(){iapiCalloutFunctions[iapiCALLOUT_LOGIN](e)},
iapiEVENT_TIMER),iapiLoginModeDownload?iapiSessionValid?iapiRequestTemporaryToken(iapiRealMode):iapiDownloadHtcmd(1,0,0,""):iapiLoginModeFlash&&iapiSessionValid&&(c="real",iapiRealMode||(c="fun"),iapiLaunchClient(iapiFlashLoginClientType,iapiFlashLoginGameType,c)),iapiCheckNextLogin()):(iapiError=b,iapiLoginFailedActions(e)):d==iapiCALLOUT_TEMPORARYTOKEN?null==b&&e.sessionToken&&e.sessionToken.sessionToken?(iapiCalloutFunctions.temporarytoken&&setTimeout(function(){iapiCalloutFunctions.temporarytoken(1,
e.sessionToken.sessionToken)},iapiEVENT_TIMER),iapiCalloutFunctions[iapiCALLOUT_TEMPORARYTOKEN]&&setTimeout(function(){iapiCalloutFunctions[iapiCALLOUT_TEMPORARYTOKEN](e)},iapiEVENT_TIMER),iapiLoginModeDownload&&iapiDownloadHtcmd(1,1,0,e.sessionToken.sessionToken)):iapiTokenFailedActions(e):iapiCalloutFunctions[d]&&setTimeout(function(){iapiCalloutFunctions[d](e)},iapiEVENT_TIMER)}}
function iapiRequestFailed(a){if(a=iapiGetRequest(a)){var b=a[1];if(!iapiMakeRedirectRequest(a[4],a[5],b,a[3])){var c={errorCode:6,errorText:"Request timed out.",playerMessage:""};b==iapiCALLOUT_LOGIN?iapiCalloutFunctions[iapiCALLOUT_LOGIN]&&iapiLoginFailedActions(c):b==iapiCALLOUT_TEMPORARYTOKEN?iapiCalloutFunctions[iapiCALLOUT_TEMPORARYTOKEN]&&iapiTokenFailedActions(c):iapiCalloutFunctions[b]&&setTimeout(function(){iapiCalloutFunctions[b](c)},iapiEVENT_TIMER)}}}
function iapiRegisterRequestId(a,b,c,d,e,f){iapiRequestIds.push([a,b,c,d,e,f])}function iapiGetRequest(a){for(var b in iapiRequestIds)if(arr=iapiRequestIds[b],arr[0]==a)return iapiRequestIds.splice(b,1),arr[2]&&clearTimeout(arr[2]),(b=document.getElementById(iapiIframename+"_"+a))&&a!=iapiGetLoggedInPlayerRequestIdReal&&a!=iapiGetLoggedInPlayerRequestIdFun&&document.getElementById(iapiDivname).removeChild(b),arr;return null}
function iapiClearRedirectRequests(a,b){for(var c=0;c<iapiRequestIds.length;){arr=iapiRequestIds[c];if(arr[1]==a){var d=0;0<arr[4].indexOf("realMode=1")&&(d=1);if(d==b){iapiRequestIds.splice(c,1);arr[2]&&clearTimeout(arr[2]);(d=document.getElementById(iapiIframename+"_"+arr[0]))&&document.getElementById(iapiDivname).removeChild(d);continue}}c++}}function iapiHasRedirectRequest(a){for(var b=0;b<iapiRequestIds.length;){arr=iapiRequestIds[b];if(arr[1]==a)return!0;b++}return!1}
function initMessageListener(){window.postMessage&&(window.addEventListener?(window.addEventListener("message",iapiOnMessage,!1),iapiMessagesSupported=!0):window.attachEvent&&(window.attachEvent("onmessage",iapiOnMessage),iapiMessagesSupported=!0))}
function iapiOnMessage(a){var b=iapiConf.loginServer.split("|"),c=a.origin.replace("https://",""),c=b.indexOf(c);if(a.origin=="https://"+b[c]){for(var c=a.data.split("&"),b=[],d=0;d<c.length&&1E3>d;d++){var e=c[d].indexOf("=");0<e&&(b[c[d].substring(0,e)]=decodeURIComponent(c[d].substring(e+1).replace(/\+/g,"%20")))}if(document.getElementById(iapiDivname))for(d=0;d<document.getElementById(iapiDivname).childNodes.length&&1E3>d;d++)if(document.getElementById(iapiDivname).childNodes[d].contentWindow==
a.source){a=document.getElementById(iapiDivname).childNodes[d].id.split("_");0<a.length&&(b.requestId=a[1]);break}iapiMessagesAnswered=!0;iapiRedirectCallback(b)}}function iapiGetCookie(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return""}
function encodeHTML(a){var b=document.createElement("div");a=document.createTextNode(a);b.appendChild(a);return b.innerHTML.replace(/\'/g,"&#39;")}function encodeURL(a){a=JSON.stringify(a);a=a.substring(1,a.length-1);a=removeHex(a);return a.match(/^http/gi)?a.replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\"/g,"%22").replace(/\'/g,"%27"):""}function removeHex(a){return a.replace(/&#(\d+);/g,"").replace(/&#x([A-Za-z0-9]+);/g,"")}
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;c=+b||0;Infinity===Math.abs(c)&&(c=0);if(c>=e)return-1;for(c=Math.max(0<=c?c:e-Math.abs(c),0);c<e;){if(c in d&&d[c]===a)return c;c++}return-1});function inIframe(){try{return window.self!==window.top}catch(a){return!0}}
function pickyBrowserCookieSync(){var a=(/Safari/.test(navigator.userAgent)||/UCBrowser/.test(navigator.userAgent))&&/Apple Computer/.test(navigator.vendor),b=navigator.cookieEnabled?!0:!1;1!=iapiConf.safariSyncDisabled&&!inIframe()&&a&&b&&!iapiGetCookie("pasDomainSynced")&&(document.cookie="pasDomainSynced=1; max-age=31536000",a="https://"+iapiConf.loginServer+"/DomainSync.php?origin="+encodeURIComponent(window.location.href),window.location.hash&&(a+="&hash="+encodeURIComponent(window.location.hash)),
window.location.replace(a))}pickyBrowserCookieSync();
