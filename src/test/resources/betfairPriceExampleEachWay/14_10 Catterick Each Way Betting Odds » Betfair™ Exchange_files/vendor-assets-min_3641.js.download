/*! vendor-assets-min - 2018-02-21, 09:15 */

function buildHandicapArray(a){var b=a.map(function(a){return a.handicap}).sort(function(a,b){return a-b});return b.push(Math.max.apply(null,b)+1),b}function getBetProfit(a,b,c,d){if(d===betEngineConfigurations.bets.placedStatus.unmatched)return 0;switch(a){case betEngineConfigurations.bets.types.back:return(b-1)*c;case betEngineConfigurations.bets.types.lay:return c;default:return 0}}function getBetLiability(a,b,c){switch(a){case betEngineConfigurations.bets.types.back:return c;case betEngineConfigurations.bets.types.lay:return(b-1)*c;default:return 0}}function getBetOutcome(a,b,c,d,e){return c===betEngineConfigurations.bets.types.back?b>=a?d:-e:a>b?d:-e}function updatePnlSum(a,b,c,d,e,f){var g=getBetProfit(c,d,e,f),h=getBetLiability(c,d,e);return a.map(function(a){return getBetOutcome(a,b,c,g,h)})}function AHValueLineCalculator(a){function b(a){return a&&a.bestBacks?a.bestBacks.price:0}function c(a){return a&&a.bestLays?a.bestLays.price:0}function d(a){var d=b(a.homeRunner),e=c(a.awayRunner);return Math.min(d>0?1/d:1,1-(e>0?1/e:0))}function e(a){var d=c(a.homeRunner),e=b(a.awayRunner);return Math.max(d>0?1/d:0,1-(e>0?1/e:1))}function f(a,b){return Math.min(a,b)}function g(a,b){return Math.max(a,b)}function h(a){return Math.min(Math.max(a.prob,a.minLimit),a.maxLimit)}function i(a,b){return Math.abs(a-b)}function j(a){function b(a){return a.exchange&&a.exchange.availableToBack&&a.exchange.availableToBack[0]?a.exchange.availableToBack[0]:{price:0,size:0}}function c(a){return a.exchange&&a.exchange.availableToLay&&a.exchange.availableToLay[0]?a.exchange.availableToLay[0]:{price:0,size:0}}var d,e,f=null,g={};if(a&&a.runners&&a.runners.length%2===0)for(d=0,e=a.runners.length;e>d;d+=2)f=a.runners[d+1].handicap+"",g[f]={homeRunner:{bestBacks:b(a.runners[d]),bestLays:c(a.runners[d]),selectionId:a.runners[d].selectionId,handicap:a.runners[d].handicap},awayRunner:{bestBacks:b(a.runners[d+1]),bestLays:c(a.runners[d+1]),selectionId:a.runners[d+1].selectionId,handicap:a.runners[d+1].handicap},marketId:a.marketId};return g}var k,l,m=.01;k=function(a,b){var c={},j=null,k=[],l=0,m=function(a){var d=i(.5,a),e=i(.5,c[j].prob);return d+=b,e>d},n=function(a){var b,n,o,p,q,r,s=.51,t=1.1;if(!a)return!1;for(b=0;l>b;++b)c[k[b]].maxPrice=d(a[k[b]]),c[k[b]].minPrice=e(a[k[b]]);for(c[k[0]].minLimit=g(c[k[0]].minPrice,0),c[k[l-1]].maxLimit=f(c[k[l-1]].maxPrice,1),b=1;l-1>b;++b)c[k[b]].minLimit=g(c[k[b]].minPrice,c[k[b-1]].minLimit),c[k[l-1-b]].maxLimit=f(c[k[l-1-b]].maxPrice,c[k[l-b]].maxLimit);for(c[k[l-1]].minLimit=g(c[k[l-1]].minPrice,c[k[l-2]].minLimit),c[k[0]].maxLimit=f(c[k[0]].maxPrice,c[k[1]].maxLimit),b=0;l>b;++b)c[k[b]].prob=h(c[k[b]]);for(b=0;l>b;++b)p=i(.5,c[k[b]].prob),s>p&&(s=p,r=c[k[b]].prob);for(m(r)||(r=c[j].prob),b=0,n=l;n>b;++b)c[k[b]].prob==r&&(q=i(c[k[b]].maxPrice,c[k[b]].minPrice),t>q&&(t=q,o=k[b]));return j!=o&&(j=o,!0)},o=function(a){var b,d,e,f=1e3;if(a){for(b in a)a.hasOwnProperty(b)&&(d=Math.abs(0-Math.abs(b)),f>=d&&(f=d,e=b),k.push(parseFloat(b)));k.sort(function(a,b){return b-a}),l=k.length;for(b in a)a.hasOwnProperty(b)&&(c[b]={prob:null,maxPrice:null,minPrice:null,maxLimit:null,minLimit:null},parseFloat(b)>parseFloat(e)?c[b].prob=0:parseFloat(b)<parseFloat(e)?c[b].prob=1:parseFloat(b)==parseFloat(e)&&(c[b].prob=.1,j=parseFloat(b)));n(a)}};return o(a),{getCurrentData:function(){return c},getCurrentValueLine:function(){return j},update:n,destructor:function(){c=null,j=null,k=null}}},l=new k(j(a),m),this.update=function(a){return l.update(j(a))},this.getCurrentValueLine=l.getCurrentValueLine,this.getCurrentData=l.getCurrentData,this.destructor=l.destructor}function DefaultPriceLadder(){"use strict";this.maxPrice=1e3,this.minPrice=1.01,this.prices=[];for(var a=101;1e5>=a;)this.prices.push(a/100),a>=1e4?a+=1e3:a>=5e3?a+=500:a>=3e3?a+=200:a>=2e3?a+=100:a>=1e3?a+=50:a>=600?a+=20:a>=400?a+=10:a>=300?a+=5:a>=200?a+=2:a>=100&&(a+=1);this.isPrice=function(a){return!!a&&this.priceIndex(a)>=0},this.nudge=function(a,b){var c=this.priceIndex(a);return c>=0?this.prices[this.bounds(c+(b?1:-1))]:(c=-c-1,this.prices[this.bounds(c+(b?0:-1))])},this.bounds=function(a){return"number"!=typeof a?NaN:0>a?0:a>this.prices.length-1?this.prices.length-1:a},this.priceIndex=function(a){for(var b,c=0,d=this.prices.length;d>=c;)if(b=Math.floor((c+d)/2),a>this.prices[b])c=b+1;else{if(!(a<this.prices[b]))break;d=b-1}return parseFloat(a)===this.prices[b]?b:-(c+1)}}function shouldCalculateAHDLPnlTable(a){return a.bettingType===betEngineConfigurations.market.bettingTypes.doubleAsian&&a.isAsianHandicapMarketType||a.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS}!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.io=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=a("./lib/")},{"./lib/":2}],2:[function(a,b,c){b.exports=a("./socket"),b.exports.parser=a("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(a,b,c){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);b=b||{},a&&"object"==typeof a&&(b=a,a=null),a?(a=k(a),b.hostname=a.host,b.secure="https"==a.protocol||"wss"==a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=k(b.host).host),this.secure=null!=b.secure?b.secure:c.location&&"https:"==location.protocol,b.hostname&&!b.port&&(b.port=this.secure?"443":"80"),this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.jsonp=!1!==b.jsonp,this.forceBase64=!!b.forceBase64,this.enablesXDR=!!b.enablesXDR,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades,this.perMessageDeflate=!1!==b.perMessageDeflate&&(b.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=b.pfx||null,this.key=b.key||null,this.passphrase=b.passphrase||null,this.cert=b.cert||null,this.ca=b.ca||null,this.ciphers=b.ciphers||null,this.rejectUnauthorized=void 0===b.rejectUnauthorized||b.rejectUnauthorized;var e="object"==typeof c&&c;e.global===e&&b.extraHeaders&&Object.keys(b.extraHeaders).length>0&&(this.extraHeaders=b.extraHeaders),this.open()}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=a("./transports"),g=a("component-emitter"),h=a("debug")("engine.io-client:socket"),i=a("indexof"),j=a("engine.io-parser"),k=a("parseuri"),l=a("parsejson"),m=a("parseqs");b.exports=d,d.priorWebsocketSuccess=!1,g(d.prototype),d.protocol=j.protocol,d.Socket=d,d.Transport=a("./transport"),d.transports=a("./transports"),d.parser=a("engine.io-parser"),d.prototype.createTransport=function(a){h('creating transport "%s"',a);var b=e(this.query);b.EIO=j.protocol,b.transport=a,this.id&&(b.sid=this.id);var c=new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return c},d.prototype.open=function(){var a;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)a="websocket";else{if(0===this.transports.length){var b=this;return void setTimeout(function(){b.emit("error","No transports available")},0)}a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(c){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"==b.type&&"probe"==b.data){if(h('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),!k)return;d.priorWebsocketSuccess="websocket"==k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!=m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{h('probe transport "%s" failed',a);var c=new Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}function e(b){var d=new Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}function g(){e("socket closed")}function i(a){k&&a.name!=k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},d.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}},d.prototype.onPacket=function(a){if("opening"==this.readyState||"open"==this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var b=new Error("server error");b.code=a.data,this.onError(b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!=b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},d.prototype.ping=function(){var a=this;this.sendPacket("ping",function(){a.emit("ping")})},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(a,b,c){return this.sendPacket("message",a,b,c),this},d.prototype.sendPacket=function(a,b,c,d){if("function"==typeof b&&(d=b,b=void 0),"function"==typeof c&&(d=c,c=null),"closing"!=this.readyState&&"closed"!=this.readyState){c=c||{},c.compress=!1!==c.compress;var e={type:a,data:b,options:c};this.emit("packetCreate",e),this.writeBuffer.push(e),d&&this.once("flush",d),this.flush()}},d.prototype.close=function(){function a(){d.onClose("forced close"),h("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){d.once("upgrade",b),d.once("upgradeError",b)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){h('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b),c.writeBuffer=[],c.prevBufferLen=0}},d.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;c<d;c++)~i(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(a,b,c){function d(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.extraHeaders=a.extraHeaders}var e=a("engine.io-parser"),f=a("component-emitter");b.exports=d,f(d.prototype),d.prototype.onError=function(a,b){var c=new Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},d.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},d.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},d.prototype.send=function(a){if("open"!=this.readyState)throw new Error("Transport not open");this.write(a)},d.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},d.prototype.onData=function(a){var b=e.decodePacket(a,this.socket.binaryType);this.onPacket(b)},d.prototype.onPacket=function(a){this.emit("packet",a)},d.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(a,b,c){(function(b){function d(a){var c,d=!1,h=!1,i=!1!==a.jsonp;if(b.location){var j="https:"==location.protocol,k=location.port;k||(k=j?443:80),d=a.hostname!=location.hostname||k!=a.port,h=a.secure!=j}if(a.xdomain=d,a.xscheme=h,c=new e(a),"open"in c&&!a.forceJSONP)return new f(a);if(!i)throw new Error("JSONP disabled");return new g(a)}var e=a("xmlhttprequest-ssl"),f=a("./polling-xhr"),g=a("./polling-jsonp"),h=a("./websocket");c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(a,b,c){(function(c){function d(){}function e(a){f.call(this,a),this.query=this.query||{},h||(c.___eio||(c.___eio=[]),h=c.___eio),this.index=h.length;var b=this;h.push(function(a){b.onData(a)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)},!1)}var f=a("./polling"),g=a("component-inherit");b.exports=e;var h,i=/\n/g,j=/\\n/g;g(e,f),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),f.prototype.doClose.call(this)},e.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),b.async=!0,b.src=this.uri(),b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c?c.parentNode.insertBefore(b,c):(document.head||document.body).appendChild(b),this.script=b;var d="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);d&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(a){e.onError("jsonp polling iframe removal error",a)}try{var b='<iframe src="javascript:0" name="'+e.iframeId+'">';f=document.createElement(b)}catch(a){f=document.createElement("iframe"),f.name=e.iframeId,f.src="javascript:0"}f.id=e.iframeId,e.form.appendChild(f),e.iframe=f}var e=this;if(!this.form){var f,g=document.createElement("form"),h=document.createElement("textarea"),k=this.iframeId="eio_iframe_"+this.index;g.className="socketio",g.style.position="absolute",g.style.top="-1000px",g.style.left="-1000px",g.target=k,g.method="POST",g.setAttribute("accept-charset","utf-8"),h.name="d",g.appendChild(h),document.body.appendChild(g),this.form=g,this.area=h}this.form.action=this.uri(),d(),a=a.replace(j,"\\\n"),this.area.value=a.replace(i,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-inherit":16}],7:[function(a,b,c){(function(c){function d(){}function e(a){if(i.call(this,a),c.location){var b="https:"==location.protocol,d=location.port;d||(d=b?443:80),this.xd=a.hostname!=c.location.hostname||d!=a.port,this.xs=a.secure!=b}else this.extraHeaders=a.extraHeaders}function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!=a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.extraHeaders=a.extraHeaders,this.create()}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var h=a("xmlhttprequest-ssl"),i=a("./polling"),j=a("component-emitter"),k=a("component-inherit"),l=a("debug")("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=f,k(e,i),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,a.extraHeaders=this.extraHeaders,new f(a)},e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},e.prototype.doPoll=function(){l("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},j(f.prototype),f.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized;var b=this.xhr=new h(a),d=this;try{l("xhr open %s: %s",this.method,this.uri),b.open(this.method,this.uri,this.async);try{if(this.extraHeaders){b.setDisableHeaderCheck(!0);for(var e in this.extraHeaders)this.extraHeaders.hasOwnProperty(e)&&b.setRequestHeader(e,this.extraHeaders[e])}}catch(g){}if(this.supportsBinary&&(b.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?b.setRequestHeader("Content-type","application/octet-stream"):b.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(g){}"withCredentials"in b&&(b.withCredentials=!0),this.hasXDR()?(b.onload=function(){d.onLoad()},b.onerror=function(){d.onError(b.responseText)}):b.onreadystatechange=function(){4==b.readyState&&(200==b.status||1223==b.status?d.onLoad():setTimeout(function(){d.onError(b.status)},0))},l("xhr data %s",this.data),b.send(this.data)}catch(g){return void setTimeout(function(){d.onError(g)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},f.prototype.onError=function(a){this.emit("error",a),this.cleanup(!0)},f.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,a)try{this.xhr.abort()}catch(b){}c.document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(c){}if("application/octet-stream"===b)a=this.xhr.response;else if(this.supportsBinary)try{a=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(c){for(var d=new Uint8Array(this.xhr.response),e=[],f=0,g=d.length;f<g;f++)e.push(d[f]);a=String.fromCharCode.apply(null,e)}else a=this.xhr.responseText}catch(c){this.onError(c)}null!=a&&this.onData(a)},f.prototype.hasXDR=function(){return"undefined"!=typeof c.XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(a,b,c){function d(a){var b=a&&a.forceBase64;k&&!b||(this.supportsBinary=!1),e.call(this,a)}var e=a("../transport"),f=a("parseqs"),g=a("engine.io-parser"),h=a("component-inherit"),i=a("yeast"),j=a("debug")("engine.io-client:polling");b.exports=d;var k=function(){var b=a("xmlhttprequest-ssl"),c=new b({xdomain:!1});return null!=c.responseType}();h(d,e),d.prototype.name="polling",d.prototype.doOpen=function(){this.poll()},d.prototype.pause=function(a){function b(){j("paused"),c.readyState="paused",a()}var c=this;if(this.readyState="pausing",this.polling||!this.writable){var d=0;this.polling&&(j("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){j("pre-pause polling complete"),--d||b()})),this.writable||(j("we are currently writing - waiting to pause"),d++,this.once("drain",function(){j("pre-pause writing complete"),--d||b()}))}else b()},d.prototype.poll=function(){j("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},d.prototype.onData=function(a){var b=this;j("polling got data %s",a);var c=function(a,c,d){return"opening"==b.readyState&&b.onOpen(),"close"==a.type?(b.onClose(),!1):void b.onPacket(a)};g.decodePayload(a,this.socket.binaryType,c),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():j('ignoring poll - transport state "%s"',this.readyState))},d.prototype.doClose=function(){function a(){j("writing close packet"),b.write([{type:"close"}])}var b=this;"open"==this.readyState?(j("transport open - closing"),a()):(j("transport not open - deferring close"),this.once("open",a))},d.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0,b.emit("drain")},b=this;g.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";!1!==this.timestampRequests&&(a[this.timestampParam]=i()),this.supportsBinary||a.sid||(a.b64=1),a=f.encode(a),this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(c=":"+this.port),a.length&&(a="?"+a);var d=this.hostname.indexOf(":")!==-1;return b+"://"+(d?"["+this.hostname+"]":this.hostname)+c+this.path+a}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(a,b,c){(function(c){function d(a){var b=a&&a.forceBase64;b&&(this.supportsBinary=!1),this.perMessageDeflate=a.perMessageDeflate,e.call(this,a)}var e=a("../transport"),f=a("engine.io-parser"),g=a("parseqs"),h=a("component-inherit"),i=a("yeast"),j=a("debug")("engine.io-client:websocket"),k=c.WebSocket||c.MozWebSocket,l=k;if(!l&&"undefined"==typeof window)try{l=a("ws")}catch(m){}b.exports=d,h(d,e),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b=void 0,c={agent:this.agent,perMessageDeflate:this.perMessageDeflate};c.pfx=this.pfx,c.key=this.key,c.passphrase=this.passphrase,c.cert=this.cert,c.ca=this.ca,c.ciphers=this.ciphers,c.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(c.headers=this.extraHeaders),this.ws=k?new l(a):new l(a,b,c),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(d.prototype.onData=function(a){var b=this;setTimeout(function(){e.prototype.onData.call(b,a)},0)}),d.prototype.write=function(a){function b(){d.emit("flush"),setTimeout(function(){d.writable=!0,d.emit("drain")},0)}var d=this;this.writable=!1;for(var e=a.length,g=0,h=e;g<h;g++)!function(a){f.encodePacket(a,d.supportsBinary,function(f){if(!k){var g={};if(a.options&&(g.compress=a.options.compress),d.perMessageDeflate){var h="string"==typeof f?c.Buffer.byteLength(f):f.length;h<d.perMessageDeflate.threshold&&(g.compress=!1)}}try{k?d.ws.send(f):d.ws.send(f,g)}catch(i){j("websocket closed before onclose event")}--e||b()})}(a[g])},d.prototype.onClose=function(){e.prototype.onClose.call(this)},d.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(c=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=i()),this.supportsBinary||(a.b64=1),a=g.encode(a),a.length&&(a="?"+a);var d=this.hostname.indexOf(":")!==-1;return b+"://"+(d?"["+this.hostname+"]":this.hostname)+c+this.path+a},d.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===d.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(a,b,c){var d=a("has-cors");b.exports=function(a){var b=a.xdomain,c=a.xscheme,e=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||d))return new XMLHttpRequest}catch(f){}try{if("undefined"!=typeof XDomainRequest&&!c&&e)return new XDomainRequest}catch(f){}if(!b)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(f){}}},{"has-cors":22}],11:[function(a,b,c){function d(a,b,c){function d(a,e){if(d.count<=0)throw new Error("after called too many times");--d.count,a?(f=!0,b(a),b=c):0!==d.count||f||b(null,e)}var f=!1;return c=c||e,d.count=a,0===a?b():d}function e(){}b.exports=d},{}],12:[function(a,b,c){b.exports=function(a,b,c){var d=a.byteLength;if(b=b||0,c=c||d,a.slice)return a.slice(b,c);if(b<0&&(b+=d),c<0&&(c+=d),c>d&&(c=d),b>=d||b>=c||0===d)return new ArrayBuffer(0);for(var e=new Uint8Array(a),f=new Uint8Array(c-b),g=b,h=0;g<c;g++,h++)f[h]=e[g];return f.buffer}},{}],13:[function(a,b,c){!function(a){"use strict";c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;c<e;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3===2?f=f.substring(0,f.length-1)+"=":e%3===1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(b){var c,d,e,f,g,h=.75*b.length,i=b.length,j=0;"="===b[b.length-1]&&(h--,"="===b[b.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(c=0;c<i;c+=4)d=a.indexOf(b[c]),e=a.indexOf(b[c+1]),f=a.indexOf(b[c+2]),g=a.indexOf(b[c+3]),l[j++]=d<<2|e>>4,l[j++]=(15&e)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(a,b,c){(function(a){function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.buffer instanceof ArrayBuffer){var d=c.buffer;if(c.byteLength!==d.byteLength){var e=new Uint8Array(c.byteLength);e.set(new Uint8Array(d,c.byteOffset,c.byteLength)),d=e.buffer}a[b]=d}}}function d(a,b){b=b||{};var d=new f;c(a);for(var e=0;e<a.length;e++)d.append(a[e]);return b.type?d.getBlob(b.type):d.getBlob()}function e(a,b){return c(a),new Blob(a,b||{})}var f=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,g=function(){try{var a=new Blob(["hi"]);return 2===a.size}catch(b){return!1}}(),h=g&&function(){try{var a=new Blob([new Uint8Array([1,2])]);return 2===a.size}catch(b){return!1}}(),i=f&&f.prototype.append&&f.prototype.getBlob;b.exports=function(){return g?h?a.Blob:e:i?d:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],15:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),
b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],16:[function(a,b,c){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],17:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(b){}}function h(){var a;try{a=c.storage.debug}catch(b){}return a}function i(){try{return window.localStorage}catch(a){}}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:i(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":18}],18:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g));var i=e.log||c.log||console.log.bind(console);i.apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;e<d;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:25}],19:[function(a,b,c){(function(b){function d(a,b){var d="b"+c.packets[a.type]+a.data.data;return b(d)}function e(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength);g[0]=r[a.type];for(var h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,!0,d)},e.readAsArrayBuffer(a.data)}function g(a,b,d){if(!b)return c.encodeBase64Packet(a,d);if(q)return f(a,b,d);var e=new Uint8Array(1);e[0]=r[a.type];var g=new u([e.buffer,a.data]);return d(g)}function h(a,b,c){for(var d=new Array(a.length),e=m(a.length,c),f=function(a,c,e){b(c,function(b,c){d[a]=c,e(b,d)})},g=0;g<a.length;g++)f(g,a[g],e)}var i=a("./keys"),j=a("has-binary"),k=a("arraybuffer.slice"),l=a("base64-arraybuffer"),m=a("after"),n=a("utf8"),o=navigator.userAgent.match(/Android/i),p=/PhantomJS/i.test(navigator.userAgent),q=o||p;c.protocol=3;var r=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=i(r),t={type:"error",data:"parser error"},u=a("blob");c.encodePacket=function(a,c,f,h){"function"==typeof c&&(h=c,c=!1),"function"==typeof f&&(h=f,f=null);var i=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&i instanceof ArrayBuffer)return e(a,c,h);if(u&&i instanceof b.Blob)return g(a,c,h);if(i&&i.base64)return d(a,h);var j=r[a.type];return void 0!==a.data&&(j+=f?n.encode(String(a.data)):String(a.data)),h(""+j)},c.encodeBase64Packet=function(a,d){var e="b"+c.packets[a.type];if(u&&a.data instanceof b.Blob){var f=new FileReader;return f.onload=function(){var a=f.result.split(",")[1];d(e+a)},f.readAsDataURL(a.data)}var g;try{g=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(h){for(var i=new Uint8Array(a.data),j=new Array(i.length),k=0;k<i.length;k++)j[k]=i[k];g=String.fromCharCode.apply(null,j)}return e+=b.btoa(g),d(e)},c.decodePacket=function(a,b,d){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d)try{a=n.decode(a)}catch(e){return t}var f=a.charAt(0);return Number(f)==f&&s[f]?a.length>1?{type:s[f],data:a.substring(1)}:{type:s[f]}:t}var g=new Uint8Array(a),f=g[0],h=k(a,1);return u&&"blob"===b&&(h=new u([h])),{type:s[f],data:h}},c.decodeBase64Packet=function(a,c){var d=s[a.charAt(0)];if(!b.ArrayBuffer)return{type:d,data:{base64:!0,data:a.substr(1)}};var e=l.decode(a.substr(1));return"blob"===c&&u&&(e=new u([e])),{type:d,data:e}},c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,!!g&&b,!0,function(a){d(null,e(a))})}"function"==typeof b&&(d=b,b=null);var g=j(a);return b&&g?u&&!q?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void h(a,f,function(a,b){return d(b.join(""))}):d("0:")},c.decodePayload=function(a,b,d){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);"function"==typeof b&&(d=b,b=null);var e;if(""==a)return d(t,0,1);for(var f,g,h="",i=0,j=a.length;i<j;i++){var k=a.charAt(i);if(":"!=k)h+=k;else{if(""==h||h!=(f=Number(h)))return d(t,0,1);if(g=a.substr(i+1,f),h!=g.length)return d(t,0,1);if(g.length){if(e=c.decodePacket(g,b,!0),t.type==e.type&&t.data==e.data)return d(t,0,1);var l=d(e,i+f,j);if(!1===l)return}i+=f,h=""}}return""!=h?d(t,0,1):void 0},c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})}return a.length?void h(a,d,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+c.toString().length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b="string"==typeof a,c=a;if(b){for(var d=new Uint8Array(a.length),g=0;g<a.length;g++)d[g]=a.charCodeAt(g);c=d.buffer}b?e[f++]=0:e[f++]=1;for(var h=c.byteLength.toString(),g=0;g<h.length;g++)e[f++]=parseInt(h[g]);e[f++]=255;for(var d=new Uint8Array(c),g=0;g<d.length;g++)e[f++]=d[g]}),b(e.buffer)}):b(new ArrayBuffer(0))},c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);if(c[0]=1,"string"==typeof a){for(var d=new Uint8Array(a.length),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);a=d.buffer,c[0]=0}for(var f=a instanceof ArrayBuffer?a.byteLength:a.size,g=f.toString(),h=new Uint8Array(g.length+1),e=0;e<g.length;e++)h[e]=parseInt(g[e]);if(h[g.length]=255,u){var i=new u([c.buffer,h.buffer,a]);b(null,i)}})}h(a,d,function(a,c){return b(new u(c))})},c.decodePayloadAsBinary=function(a,b,d){"function"==typeof b&&(d=b,b=null);for(var e=a,f=[],g=!1;e.byteLength>0;){for(var h=new Uint8Array(e),i=0===h[0],j="",l=1;255!=h[l];l++){if(j.length>310){g=!0;break}j+=h[l]}if(g)return d(t,0,1);e=k(e,2+j.length),j=parseInt(j);var m=k(e,0,j);if(i)try{m=String.fromCharCode.apply(null,new Uint8Array(m))}catch(n){var o=new Uint8Array(m);m="";for(var l=0;l<o.length;l++)m+=String.fromCharCode(o[l])}f.push(m),e=k(e,j)}var p=f.length;f.forEach(function(a,e){d(c.decodePacket(a,b,!0),e,p)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(a,b,c){b.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b}},{}],21:[function(a,b,c){(function(c){function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&(a=a.toJSON());for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a("isarray");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:24}],22:[function(a,b,c){try{b.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(d){b.exports=!1}},{}],23:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],24:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],25:[function(a,b,c){function d(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]),d=(b[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b["long"]?f(a):e(a)}},{}],26:[function(a,b,c){(function(a){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,e=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,g=/^\s+/,h=/\s+$/;b.exports=function(b){return"string"==typeof b&&b?(b=b.replace(g,"").replace(h,""),a.JSON&&JSON.parse?JSON.parse(b):c.test(b.replace(d,"@").replace(e,"]").replace(f,""))?new Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],27:[function(a,b,c){c.encode=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b},c.decode=function(a){for(var b={},c=a.split("&"),d=0,e=c.length;d<e;d++){var f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}},{}],28:[function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){var b=a,c=a.indexOf("["),f=a.indexOf("]");c!=-1&&f!=-1&&(a=a.substring(0,c)+a.substring(c,f).replace(/:/g,";")+a.substring(f,a.length));for(var g=d.exec(a||""),h={},i=14;i--;)h[e[i]]=g[i]||"";return c!=-1&&f!=-1&&(h.source=b,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h}},{}],29:[function(b,c,d){(function(b){!function(e){function f(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function g(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=u(b>>>10&1023|55296),b=56320|1023&b),e+=u(b);return e}function h(a){if(a>=55296&&a<=57343)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value")}function i(a,b){return u(a>>b&63|128)}function j(a){if(0==(4294967168&a))return u(a);var b="";return 0==(4294965248&a)?b=u(a>>6&31|192):0==(4294901760&a)?(h(a),b=u(a>>12&15|224),b+=i(a,6)):0==(4292870144&a)&&(b=u(a>>18&7|240),b+=i(a,12),b+=i(a,6)),b+=u(63&a|128)}function k(a){for(var b,c=f(a),d=c.length,e=-1,g="";++e<d;)b=c[e],g+=j(b);return g}function l(){if(t>=s)throw Error("Invalid byte index");var a=255&r[t];if(t++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function m(){var a,b,c,d,e;if(t>s)throw Error("Invalid byte index");if(t==s)return!1;if(a=255&r[t],t++,0==(128&a))return a;if(192==(224&a)){var b=l();if(e=(31&a)<<6|b,e>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=l(),c=l(),e=(15&a)<<12|b<<6|c,e>=2048)return h(e),e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=l(),c=l(),d=l(),e=(15&a)<<18|b<<12|c<<6|d,e>=65536&&e<=1114111))return e;throw Error("Invalid UTF-8 detected")}function n(a){r=f(a),s=r.length,t=0;for(var b,c=[];(b=m())!==!1;)c.push(b);return g(c)}var o="object"==typeof d&&d,p="object"==typeof c&&c&&c.exports==o&&c,q="object"==typeof b&&b;q.global!==q&&q.window!==q||(e=q);var r,s,t,u=String.fromCharCode,v={version:"2.0.0",encode:k,decode:n};if("function"==typeof a&&"object"==typeof a.amd&&a.amd)a(function(){return v});else if(o&&!o.nodeType)if(p)p.exports=v;else{var w={},x=w.hasOwnProperty;for(var y in v)x.call(v,y)&&(o[y]=v[y])}else e.utf8=v}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],30:[function(a,b,c){"use strict";function d(a){var b="";do b=h[a%i]+b,a=Math.floor(a/i);while(a>0);return b}function e(a){var b=0;for(l=0;l<a.length;l++)b=b*i+j[a.charAt(l)];return b}function f(){var a=d(+new Date);return a!==g?(k=0,g=a):a+"."+d(k++)}for(var g,h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,j={},k=0,l=0;l<i;l++)j[h[l]]=l;f.encode=d,f.decode=e,b.exports=f},{}],31:[function(a,b,c){function d(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d=e(a),f=d.source,j=d.id,k=d.path,l=i[j]&&k in i[j].nsps,m=b.forceNew||b["force new connection"]||!1===b.multiplex||l;return m?(h("ignoring socket cache for %s",f),c=g(f,b)):(i[j]||(h("new io instance for %s",f),i[j]=g(f,b)),c=i[j]),c.socket(d.path)}var e=a("./url"),f=a("socket.io-parser"),g=a("./manager"),h=a("debug")("socket.io-client");b.exports=c=d;var i=c.managers={};c.protocol=f.protocol,c.connect=d,c.Manager=a("./manager"),c.Socket=a("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(a,b,c){function d(a,b){return this instanceof d?(a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(b.reconnection!==!1),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(b.randomizationFactor||.5),this.backoff=new m({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new h.Encoder,this.decoder=new h.Decoder,this.autoConnect=b.autoConnect!==!1,void(this.autoConnect&&this.open())):new d(a,b)}var e=a("engine.io-client"),f=a("./socket"),g=a("component-emitter"),h=a("socket.io-parser"),i=a("./on"),j=a("component-bind"),k=a("debug")("socket.io-client:manager"),l=a("indexof"),m=a("backo2"),n=Object.prototype.hasOwnProperty;b.exports=d,d.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)n.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)},d.prototype.updateSocketIds=function(){for(var a in this.nsps)n.call(this.nsps,a)&&(this.nsps[a].id=this.engine.id)},g(d.prototype),d.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},d.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this.backoff&&this.backoff.setMin(a),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(a){return arguments.length?(this._randomizationFactor=a,this.backoff&&this.backoff.setJitter(a),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this.backoff&&this.backoff.setMax(a),this):this._reconnectionDelayMax},d.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(a){if(k("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;k("opening %s",this.uri),this.engine=e(this.uri,this.opts);var b=this.engine,c=this;this.readyState="opening",this.skipReconnect=!1;var d=i(b,"open",function(){c.onopen(),a&&a()}),f=i(b,"error",function(b){if(k("connect_error"),c.cleanup(),c.readyState="closed",c.emitAll("connect_error",b),a){var d=new Error("Connection error");d.data=b,a(d)}else c.maybeReconnectOnOpen()});if(!1!==this._timeout){var g=this._timeout;k("connect attempt will timeout after %d",g);var h=setTimeout(function(){k("connect attempt timed out after %d",g),d.destroy(),b.close(),b.emit("error","timeout"),c.emitAll("connect_timeout",g)},g);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(d),this.subs.push(f),this},d.prototype.onopen=function(){k("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(i(a,"data",j(this,"ondata"))),this.subs.push(i(a,"ping",j(this,"onping"))),this.subs.push(i(a,"pong",j(this,"onpong"))),this.subs.push(i(a,"error",j(this,"onerror"))),this.subs.push(i(a,"close",j(this,"onclose"))),this.subs.push(i(this.decoder,"decoded",j(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(a){this.decoder.add(a)},d.prototype.ondecoded=function(a){this.emit("packet",a)},d.prototype.onerror=function(a){k("error",a),this.emitAll("error",a)},d.prototype.socket=function(a){function b(){~l(d.connecting,c)||d.connecting.push(c)}var c=this.nsps[a];if(!c){c=new f(this,a),this.nsps[a]=c;var d=this;c.on("connecting",b),c.on("connect",function(){c.id=d.engine.id}),this.autoConnect&&b()}return c},d.prototype.destroy=function(a){var b=l(this.connecting,a);~b&&this.connecting.splice(b,1),this.connecting.length||this.close()},d.prototype.packet=function(a){k("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(c){for(var d=0;d<c.length;d++)b.engine.write(c[d],a.options);b.encoding=!1,b.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},d.prototype.cleanup=function(){k("cleanup");for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){k("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(a){k("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)k("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();k("will wait %dms before reconnect attempt",b),this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(k("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(k("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(k("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}},d.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",a)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(a,b,c){function d(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}b.exports=d},{}],34:[function(a,b,c){function d(a,b){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var e=a("socket.io-parser"),f=a("component-emitter"),g=a("to-array"),h=a("./on"),i=a("component-bind"),j=a("debug")("socket.io-client:socket"),k=a("has-binary");b.exports=c=d;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},m=f.prototype.emit;f(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[h(a,"open",i(this,"onopen")),h(a,"packet",i(this,"onpacket")),h(a,"close",i(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},d.prototype.send=function(){var a=g(arguments);return a.unshift("message"),this.emit.apply(this,a),this},d.prototype.emit=function(a){if(l.hasOwnProperty(a))return m.apply(this,arguments),this;var b=g(arguments),c=e.EVENT;k(b)&&(c=e.BINARY_EVENT);var d={type:c,data:b};return d.options={},d.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof b[b.length-1]&&(j("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),delete this.flags,this},d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},d.prototype.onopen=function(){j("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:e.CONNECT})},d.prototype.onclose=function(a){j("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",a)},d.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case e.CONNECT:this.onconnect();break;case e.EVENT:this.onevent(a);break;case e.BINARY_EVENT:this.onevent(a);break;case e.ACK:this.onack(a);break;case e.BINARY_ACK:this.onack(a);break;case e.DISCONNECT:this.ondisconnect();break;case e.ERROR:this.emit("error",a.data)}},d.prototype.onevent=function(a){var b=a.data||[];j("emitting event %j",b),null!=a.id&&(j("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?m.apply(this,b):this.receiveBuffer.push(b)},d.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var d=g(arguments);j("sending ack %j",d);var f=k(d)?e.BINARY_ACK:e.ACK;b.packet({type:f,id:a,data:d})}}},d.prototype.onack=function(a){var b=this.acks[a.id];"function"==typeof b?(j("calling ack %s with %j",a.id,a.data),b.apply(this,a.data),delete this.acks[a.id]):j("bad ack %s",a.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)m.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){j("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(j("performing disconnect (%s)",this.nsp),this.packet({type:e.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(a){return this.flags=this.flags||{},this.flags.compress=a,this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(a,b,c){(function(c){function d(a,b){var d=a,b=b||c.location;null==a&&(a=b.protocol+"//"+b.host),"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?b.protocol+a:b.host+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a="undefined"!=typeof b?b.protocol+"//"+a:"https://"+a),f("parse %s",a),d=e(a)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";var g=d.host.indexOf(":")!==-1,h=g?"["+d.host+"]":d.host;return d.id=d.protocol+"://"+h+":"+d.port,d.href=d.protocol+"://"+h+(b&&b.port==d.port?"":":"+d.port),d}var e=a("parseuri"),f=a("debug")("socket.io-client:url");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{debug:39,parseuri:45}],36:[function(a,b,c){function d(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}b.exports=d,d.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=0==(1&Math.floor(10*b))?a-c:a+c}return 0|Math.min(a,this.max)},d.prototype.reset=function(){this.attempts=0},d.prototype.setMin=function(a){this.ms=a},d.prototype.setMax=function(a){this.max=a},d.prototype.setJitter=function(a){this.jitter=a}},{}],37:[function(a,b,c){var d=[].slice;b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw new Error("bind() requires a function");var c=d.call(arguments,2);return function(){return b.apply(a,c.concat(d.call(arguments)))}}},{}],38:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],39:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"./debug":40,dup:17}],40:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{dup:18,ms:44}],41:[function(a,b,c){(function(c){function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON());for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a("isarray");b.exports=d}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{isarray:43}],42:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{dup:23}],43:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{dup:24}],44:[function(a,b,c){arguments[4][25][0].apply(c,arguments)},{dup:25}],45:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{dup:28}],46:[function(a,b,c){(function(b){var d=a("isarray"),e=a("./is-buffer");c.deconstructPacket=function(a){function b(a){if(!a)return a;if(e(a)){var f={_placeholder:!0,num:c.length};return c.push(a),f}if(d(a)){for(var g=new Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){var g={};for(var i in a)g[i]=b(a[i]);return g}return a}var c=[],f=a.data,g=a;return g.data=b(f),g.attachments=c.length,{packet:g,buffers:c}},c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder){var e=b[a.num];return e}if(d(a)){for(var f=0;f<a.length;f++)a[f]=c(a[f]);return a}if(a&&"object"==typeof a){for(var g in a)a[g]=c(a[g]);return a}return a}return a.data=c(a.data),a.attachments=void 0,a},c.removeBlobs=function(a,c){function f(a,i,j){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){g++;var k=new FileReader;k.onload=function(){j?j[i]=this.result:h=this.result,--g||c(h)},k.readAsArrayBuffer(a)}else if(d(a))for(var l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))for(var m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||c(h)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{"./is-buffer":48,isarray:43}],47:[function(a,b,c){function d(){}function e(a){var b="",d=!1;return b+=a.type,c.BINARY_EVENT!=a.type&&c.BINARY_ACK!=a.type||(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=l.stringify(a.data)),k("encoded %j as %s",a,b),b}function f(a,b){function c(a){var c=n.deconstructPacket(a),d=e(c.packet),f=c.buffers;f.unshift(d),b(f)}n.removeBlobs(a,c)}function g(){this.reconstructor=null}function h(a){var b={},d=0;if(b.type=Number(a.charAt(0)),null==c.types[b.type])return j();if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(var e="";"-"!=a.charAt(++d)&&(e+=a.charAt(d),d!=a.length););if(e!=Number(e)||"-"!=a.charAt(d))throw new Error("Illegal attachments");b.attachments=Number(e)}if("/"==a.charAt(d+1))for(b.nsp="";++d;){
var f=a.charAt(d);if(","==f)break;if(b.nsp+=f,d==a.length)break}else b.nsp="/";var g=a.charAt(d+1);if(""!==g&&Number(g)==g){for(b.id="";++d;){var f=a.charAt(d);if(null==f||Number(f)!=f){--d;break}if(b.id+=a.charAt(d),d==a.length)break}b.id=Number(b.id)}if(a.charAt(++d))try{b.data=l.parse(a.substr(d))}catch(h){return j()}return k("decoded %s as %j",a,b),b}function i(a){this.reconPack=a,this.buffers=[]}function j(a){return{type:c.ERROR,data:"parser error"}}var k=a("debug")("socket.io-parser"),l=a("json3"),m=(a("isarray"),a("component-emitter")),n=a("./binary"),o=a("./is-buffer");c.protocol=4,c.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=d,c.Decoder=g,d.prototype.encode=function(a,b){if(k("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)f(a,b);else{var d=e(a);b([d])}},m(g.prototype),g.prototype.add=function(a){var b;if("string"==typeof a)b=h(a),c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type?(this.reconstructor=new i(b),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!o(a)&&!a.base64)throw new Error("Unknown type: "+a);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");b=this.reconstructor.takeBinaryData(a),b&&(this.reconstructor=null,this.emit("decoded",b))}},g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},i.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},i.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(a,b,c){(function(a){function c(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}b.exports=c}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],49:[function(a,b,c){arguments[4][15][0].apply(c,arguments)},{dup:15}],50:[function(b,c,d){(function(b){(function(){function e(a,b){function c(a){if(c[a]!==q)return c[a];var e;if("bug-string-char-index"==a)e="a"!="a"[0];else if("json"==a)e=c("json-stringify")&&c("json-parse");else{var g,h='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var i=b.stringify,k="function"==typeof i&&t;if(k){(g=function(){return 1}).toJSON=g;try{k="0"===i(0)&&"0"===i(new d)&&'""'==i(new f)&&i(s)===q&&i(q)===q&&i()===q&&"1"===i(g)&&"[1]"==i([g])&&"[null]"==i([q])&&"null"==i(null)&&"[null,null,null]"==i([q,s,null])&&i({a:[g,!0,!1,null,"\0\b\n\f\r\t"]})==h&&"1"===i(null,g)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new j((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==i(new j(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new j((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==i(new j((-1)))}catch(l){k=!1}}e=k}if("json-parse"==a){var m=b.parse;if("function"==typeof m)try{if(0===m("0")&&!m(!1)){g=m(h);var n=5==g.a.length&&1===g.a[0];if(n){try{n=!m('"\t"')}catch(l){}if(n)try{n=1!==m("01")}catch(l){}if(n)try{n=1!==m("1.")}catch(l){}}}}catch(l){n=!1}e=n}}return c[a]=!!e}a||(a=i.Object()),b||(b=i.Object());var d=a.Number||i.Number,f=a.String||i.String,h=a.Object||i.Object,j=a.Date||i.Date,k=a.SyntaxError||i.SyntaxError,l=a.TypeError||i.TypeError,m=a.Math||i.Math,n=a.JSON||i.JSON;"object"==typeof n&&n&&(b.stringify=n.stringify,b.parse=n.parse);var o,p,q,r=h.prototype,s=r.toString,t=new j((-0xc782b5b800cec));try{t=t.getUTCFullYear()==-109252&&0===t.getUTCMonth()&&1===t.getUTCDate()&&10==t.getUTCHours()&&37==t.getUTCMinutes()&&6==t.getUTCSeconds()&&708==t.getUTCMilliseconds()}catch(u){}if(!c("json")){var v="[object Function]",w="[object Date]",x="[object Number]",y="[object String]",z="[object Array]",A="[object Boolean]",B=c("bug-string-char-index");if(!t)var C=m.floor,D=[0,31,59,90,120,151,181,212,243,273,304,334],E=function(a,b){return D[b]+365*(a-1970)+C((a-1969+(b=+(b>1)))/4)-C((a-1901+b)/100)+C((a-1601+b)/400)};if((o=r.hasOwnProperty)||(o=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=s?o=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,o=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,o.call(this,a)}),p=function(a,b){var c,d,e,f=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,d=new c;for(e in d)o.call(d,e)&&f++;return c=d=null,f?p=2==f?function(a,b){var c,d={},e=s.call(a)==v;for(c in a)e&&"prototype"==c||o.call(d,c)||!(d[c]=1)||!o.call(a,c)||b(c)}:function(a,b){var c,d,e=s.call(a)==v;for(c in a)e&&"prototype"==c||!o.call(a,c)||(d="constructor"===c)||b(c);(d||o.call(a,c="constructor"))&&b(c)}:(d=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(a,b){var c,e,f=s.call(a)==v,h=!f&&"function"!=typeof a.constructor&&g[typeof a.hasOwnProperty]&&a.hasOwnProperty||o;for(c in a)f&&"prototype"==c||!h.call(a,c)||b(c);for(e=d.length;c=d[--e];h.call(a,c)&&b(c));}),p(a,b)},!c("json-stringify")){var F={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},G="000000",H=function(a,b){return(G+(b||0)).slice(-a)},I="\\u00",J=function(a){for(var b='"',c=0,d=a.length,e=!B||d>10,f=e&&(B?a.split(""):a);c<d;c++){var g=a.charCodeAt(c);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=F[g];break;default:if(g<32){b+=I+H(2,g.toString(16));break}b+=e?f[c]:a.charAt(c)}}return b+'"'},K=function(a,b,c,d,e,f,g){var h,i,j,k,m,n,r,t,u,v,B,D,F,G,I,L;try{h=b[a]}catch(M){}if("object"==typeof h&&h)if(i=s.call(h),i!=w||o.call(h,"toJSON"))"function"==typeof h.toJSON&&(i!=x&&i!=y&&i!=z||o.call(h,"toJSON"))&&(h=h.toJSON(a));else if(h>-1/0&&h<1/0){if(E){for(m=C(h/864e5),j=C(m/365.2425)+1970-1;E(j+1,0)<=m;j++);for(k=C((m-E(j,0))/30.42);E(j,k+1)<=m;k++);m=1+m-E(j,k),n=(h%864e5+864e5)%864e5,r=C(n/36e5)%24,t=C(n/6e4)%60,u=C(n/1e3)%60,v=n%1e3}else j=h.getUTCFullYear(),k=h.getUTCMonth(),m=h.getUTCDate(),r=h.getUTCHours(),t=h.getUTCMinutes(),u=h.getUTCSeconds(),v=h.getUTCMilliseconds();h=(j<=0||j>=1e4?(j<0?"-":"+")+H(6,j<0?-j:j):H(4,j))+"-"+H(2,k+1)+"-"+H(2,m)+"T"+H(2,r)+":"+H(2,t)+":"+H(2,u)+"."+H(3,v)+"Z"}else h=null;if(c&&(h=c.call(b,a,h)),null===h)return"null";if(i=s.call(h),i==A)return""+h;if(i==x)return h>-1/0&&h<1/0?""+h:"null";if(i==y)return J(""+h);if("object"==typeof h){for(G=g.length;G--;)if(g[G]===h)throw l();if(g.push(h),B=[],I=f,f+=e,i==z){for(F=0,G=h.length;F<G;F++)D=K(F,h,c,d,e,f,g),B.push(D===q?"null":D);L=B.length?e?"[\n"+f+B.join(",\n"+f)+"\n"+I+"]":"["+B.join(",")+"]":"[]"}else p(d||h,function(a){var b=K(a,h,c,d,e,f,g);b!==q&&B.push(J(a)+":"+(e?" ":"")+b)}),L=B.length?e?"{\n"+f+B.join(",\n"+f)+"\n"+I+"}":"{"+B.join(",")+"}":"{}";return g.pop(),L}};b.stringify=function(a,b,c){var d,e,f,h;if(g[typeof b]&&b)if((h=s.call(b))==v)e=b;else if(h==z){f={};for(var i,j=0,k=b.length;j<k;i=b[j++],h=s.call(i),(h==y||h==x)&&(f[i]=1));}if(c)if((h=s.call(c))==x){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else h==y&&(d=c.length<=10?c:c.slice(0,10));return K("",(i={},i[""]=a,i),e,f,d,"",[])}}if(!c("json-parse")){var L,M,N=f.fromCharCode,O={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},P=function(){throw L=M=null,k()},Q=function(){for(var a,b,c,d,e,f=M,g=f.length;L<g;)switch(e=f.charCodeAt(L)){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=B?f.charAt(L):f[L],L++,a;case 34:for(a="@",L++;L<g;)if(e=f.charCodeAt(L),e<32)P();else if(92==e)switch(e=f.charCodeAt(++L)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=O[e],L++;break;case 117:for(b=++L,c=L+4;L<c;L++)e=f.charCodeAt(L),e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70||P();a+=N("0x"+f.slice(b,L));break;default:P()}else{if(34==e)break;for(e=f.charCodeAt(L),b=L;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++L);a+=f.slice(b,L)}if(34==f.charCodeAt(L))return L++,a;P();default:if(b=L,45==e&&(d=!0,e=f.charCodeAt(++L)),e>=48&&e<=57){for(48==e&&(e=f.charCodeAt(L+1),e>=48&&e<=57)&&P(),d=!1;L<g&&(e=f.charCodeAt(L),e>=48&&e<=57);L++);if(46==f.charCodeAt(L)){for(c=++L;c<g&&(e=f.charCodeAt(c),e>=48&&e<=57);c++);c==L&&P(),L=c}if(e=f.charCodeAt(L),101==e||69==e){for(e=f.charCodeAt(++L),43!=e&&45!=e||L++,c=L;c<g&&(e=f.charCodeAt(c),e>=48&&e<=57);c++);c==L&&P(),L=c}return+f.slice(b,L)}if(d&&P(),"true"==f.slice(L,L+4))return L+=4,!0;if("false"==f.slice(L,L+5))return L+=5,!1;if("null"==f.slice(L,L+4))return L+=4,null;P()}return"$"},R=function(a){var b,c;if("$"==a&&P(),"string"==typeof a){if("@"==(B?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=Q(),"]"!=a;c||(c=!0))c&&(","==a?(a=Q(),"]"==a&&P()):P()),","==a&&P(),b.push(R(a));return b}if("{"==a){for(b={};a=Q(),"}"!=a;c||(c=!0))c&&(","==a?(a=Q(),"}"==a&&P()):P()),","!=a&&"string"==typeof a&&"@"==(B?a.charAt(0):a[0])&&":"==Q()||P(),b[a.slice(1)]=R(Q());return b}P()}return a},S=function(a,b,c){var d=T(a,b,c);d===q?delete a[b]:a[b]=d},T=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if(s.call(e)==z)for(d=e.length;d--;)S(e,d,c);else p(e,function(a){S(e,a,c)});return c.call(a,b,e)};b.parse=function(a,b){var c,d;return L=0,M=""+a,c=R(Q()),"$"!=Q()&&P(),L=M=null,b&&s.call(b)==v?T((d={},d[""]=c,d),"",b):c}}}return b.runInContext=e,b}var f="function"==typeof a&&a.amd,g={"function":!0,object:!0},h=g[typeof d]&&d&&!d.nodeType&&d,i=g[typeof window]&&window||this,j=h&&g[typeof c]&&c&&!c.nodeType&&"object"==typeof b&&b;if(!j||j.global!==j&&j.window!==j&&j.self!==j||(i=j),h&&!f)e(i,h);else{var k=i.JSON,l=i.JSON3,m=!1,n=e(i,i.JSON3={noConflict:function(){return m||(m=!0,i.JSON=k,i.JSON3=l,k=l=null),n}});i.JSON={parse:n.parse,stringify:n.stringify}}f&&a(function(){return n})}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})},{}],51:[function(a,b,c){function d(a,b){var c=[];b=b||0;for(var d=b||0;d<a.length;d++)c[d-b]=a[d];return c}b.exports=d},{}]},{},[31])(31)}),!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";angular.module("betfair.socketio",[]).constant("BF.SocketIO",window.io)},{}]},{},[1]),function(){function a(a,b){return a.set(b[0],b[1]),a}function b(a,b){return a.add(b),a}function c(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function d(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function e(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&!1!==b(a[c],c,a););return a}function f(a,b){for(var c=null==a?0:a.length;c--&&!1!==b(a[c],c,a););return a}function g(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function h(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function i(a,b){return!(null==a||!a.length)&&-1<r(a,b,0)}function j(a,b,c){for(var d=-1,e=null==a?0:a.length;++d<e;)if(c(b,a[d]))return!0;return!1}function k(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function l(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function m(a,b,c,d){var e=-1,f=null==a?0:a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function n(a,b,c,d){var e=null==a?0:a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function o(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function p(a,b,c){var d;return c(a,function(a,c,e){if(b(a,c,e))return d=c,!1}),d}function q(a,b,c,d){var e=a.length;for(c+=d?1:-1;d?c--:++c<e;)if(b(a[c],c,a))return c;return-1}function r(a,b,c){if(b===b)a:{--c;for(var d=a.length;++c<d;)if(a[c]===b){a=c;break a}a=-1}else a=q(a,t,c);return a}function s(a,b,c,d){--c;for(var e=a.length;++c<e;)if(d(a[c],b))return c;return-1}function t(a){return a!==a}function u(a,b){var c=null==a?0:a.length;return c?z(a,b)/c:R}function v(a){return function(b){return null==b?P:b[a]}}function w(a){return function(b){return null==a?P:a[b]}}function x(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function y(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].c;return a}function z(a,b){for(var c,d=-1,e=a.length;++d<e;){var f=b(a[d]);f!==P&&(c=c===P?f:c+f)}return c}function A(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function B(a,b){return k(b,function(b){return[b,a[b]]})}function C(a){return function(b){return a(b)}}function D(a,b){return k(b,function(b){return a[b]})}function E(a,b){return a.has(b)}function F(a,b){for(var c=-1,d=a.length;++c<d&&-1<r(b,a[c],0););return c}function G(a,b){for(var c=a.length;c--&&-1<r(b,a[c],0););return c}function H(a){return"\\"+Ma[a]}function I(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function J(a,b){return function(c){return a(b(c))}}function K(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];g!==b&&"__lodash_placeholder__"!==g||(a[c]="__lodash_placeholder__",f[e++]=c)}return f}function L(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function M(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=[a,a]}),c}function N(a){if(Ga.test(a)){for(var b=Ea.lastIndex=0;Ea.test(a);)++b;a=b}else a=ab(a);return a}function O(a){return Ga.test(a)?a.match(Ea)||[]:a.split("")}var P,Q=1/0,R=NaN,S=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],T=/\b__p\+='';/g,U=/\b(__p\+=)''\+/g,V=/(__e\(.*?\)|\b__t\))\+'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,Y=RegExp(W.source),Z=RegExp(X.source),$=/<%-([\s\S]+?)%>/g,_=/<%([\s\S]+?)%>/g,aa=/<%=([\s\S]+?)%>/g,ba=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ca=/^\w*$/,da=/^\./,ea=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fa=/[\\^$.*+?()[\]{}|]/g,ga=RegExp(fa.source),ha=/^\s+|\s+$/g,ia=/^\s+/,ja=/\s+$/,ka=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,la=/\{\n\/\* \[wrapped with (.+)\] \*/,ma=/,? & /,na=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oa=/\\(\\)?/g,pa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qa=/\w*$/,ra=/^[-+]0x[0-9a-f]+$/i,sa=/^0b[01]+$/i,ta=/^\[object .+?Constructor\]$/,ua=/^0o[0-7]+$/i,va=/^(?:0|[1-9]\d*)$/,wa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xa=/($^)/,ya=/['\n\r\u2028\u2029\\]/g,za="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",Aa="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+za,Ba="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",Ca=RegExp("[']","g"),Da=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Ea=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+Ba+za,"g"),Fa=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)|\\d+",Aa].join("|"),"g"),Ga=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ha=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ia="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Ja={};Ja["[object Float32Array]"]=Ja["[object Float64Array]"]=Ja["[object Int8Array]"]=Ja["[object Int16Array]"]=Ja["[object Int32Array]"]=Ja["[object Uint8Array]"]=Ja["[object Uint8ClampedArray]"]=Ja["[object Uint16Array]"]=Ja["[object Uint32Array]"]=!0,Ja["[object Arguments]"]=Ja["[object Array]"]=Ja["[object ArrayBuffer]"]=Ja["[object Boolean]"]=Ja["[object DataView]"]=Ja["[object Date]"]=Ja["[object Error]"]=Ja["[object Function]"]=Ja["[object Map]"]=Ja["[object Number]"]=Ja["[object Object]"]=Ja["[object RegExp]"]=Ja["[object Set]"]=Ja["[object String]"]=Ja["[object WeakMap]"]=!1;var Ka={};Ka["[object Arguments]"]=Ka["[object Array]"]=Ka["[object ArrayBuffer]"]=Ka["[object DataView]"]=Ka["[object Boolean]"]=Ka["[object Date]"]=Ka["[object Float32Array]"]=Ka["[object Float64Array]"]=Ka["[object Int8Array]"]=Ka["[object Int16Array]"]=Ka["[object Int32Array]"]=Ka["[object Map]"]=Ka["[object Number]"]=Ka["[object Object]"]=Ka["[object RegExp]"]=Ka["[object Set]"]=Ka["[object String]"]=Ka["[object Symbol]"]=Ka["[object Uint8Array]"]=Ka["[object Uint8ClampedArray]"]=Ka["[object Uint16Array]"]=Ka["[object Uint32Array]"]=!0,Ka["[object Error]"]=Ka["[object Function]"]=Ka["[object WeakMap]"]=!1;var La,Ma={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Na=parseFloat,Oa=parseInt,Pa="object"==typeof global&&global&&global.Object===Object&&global,Qa="object"==typeof self&&self&&self.Object===Object&&self,Ra=Pa||Qa||Function("return this")(),Sa="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ta=Sa&&"object"==typeof module&&module&&!module.nodeType&&module,Ua=Ta&&Ta.exports===Sa,Va=Ua&&Pa.process;a:{try{La=Va&&Va.binding&&Va.binding("util");break a}catch(a){}La=void 0}var Wa=La&&La.isArrayBuffer,Xa=La&&La.isDate,Ya=La&&La.isMap,Za=La&&La.isRegExp,$a=La&&La.isSet,_a=La&&La.isTypedArray,ab=v("length"),bb=w({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),cb=w({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),db=w({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),eb=function fb(w){function za(a){if(te(a)&&!hh(a)&&!(a instanceof Ea)){if(a instanceof Ba)return a;if(hf.call(a,"__wrapped__"))return Qd(a)}return new Ba(a)}function Aa(){}function Ba(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=P}function Ea(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function La(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Ma(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Pa(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Qa(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new Pa;++b<c;)this.add(a[b])}function Sa(a){this.size=(this.__data__=new Ma(a)).size}function Ta(a,b){var c,d=hh(a),e=!d&&gh(a),f=!d&&!e&&jh(a),g=!d&&!e&&!f&&oh(a),e=(d=d||e||f||g)?A(a.length,bf):[],h=e.length;for(c in a)!b&&!hf.call(a,c)||d&&("length"==c||f&&("offset"==c||"parent"==c)||g&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Dd(c,h))||e.push(c);return e}function Va(a){var b=a.length;return b?a[hc(0,b-1)]:P}function ab(a,b){return Md(Lc(a),pb(b,0,a.length))}function gb(a){return Md(Lc(a))}function hb(a,b,c){(c===P||le(a[b],c))&&(c!==P||b in a)||nb(a,b,c)}function ib(a,b,c){var d=a[b];hf.call(a,b)&&le(d,c)&&(c!==P||b in a)||nb(a,b,c)}function jb(a,b){for(var c=a.length;c--;)if(le(a[c][0],b))return c;return-1}function kb(a,b,c,d){return gg(a,function(a,e,f){b(d,a,c(a),f)}),d}function lb(a,b){return a&&Mc(b,He(b),a)}function mb(a,b){return a&&Mc(b,Ie(b),a)}function nb(a,b,c){"__proto__"==b&&Af?Af(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}function ob(a,b){for(var c=-1,d=b.length,e=We(d),f=null==a;++c<d;)e[c]=f?P:Fe(a,b[c]);return e}function pb(a,b,c){return a===a&&(c!==P&&(a=a<=c?a:c),b!==P&&(a=a>=b?a:b)),a}function qb(a,b,c,d,f,g){var h,i=1&b,j=2&b,k=4&b;if(c&&(h=f?c(a,d,f,g):c(a)),h!==P)return h;if(!se(a))return a;if(d=hh(a)){if(h=zd(a),!i)return Lc(a,h)}else{var l=rg(a),m="[object Function]"==l||"[object GeneratorFunction]"==l;if(jh(a))return Fc(a,i);if("[object Object]"==l||"[object Arguments]"==l||m&&!f){if(h=j||m?{}:Ad(a),!i)return j?Oc(a,mb(h,a)):Nc(a,lb(h,a))}else{if(!Ka[l])return f?a:{};h=Bd(a,l,qb,i)}}if(g||(g=new Sa),f=g.get(a))return f;g.set(a,h);var j=k?j?rd:qd:j?Ie:He,n=d?P:j(a);return e(n||a,function(d,e){n&&(e=d,d=a[e]),ib(h,e,qb(d,b,c,e,a,g))}),h}function rb(a){var b=He(a);return function(c){return sb(c,a,b)}}function sb(a,b,c){var d=c.length;if(null==a)return!d;for(a=_e(a);d--;){var e=c[d],f=b[e],g=a[e];if(g===P&&!(e in a)||!f(g))return!1}return!0}function tb(a,b,c){if("function"!=typeof a)throw new cf("Expected a function");return ug(function(){a.apply(P,c)},b)}function ub(a,b,c,d){var e=-1,f=i,g=!0,h=a.length,l=[],m=b.length;if(!h)return l;c&&(b=k(b,C(c))),d?(f=j,g=!1):200<=b.length&&(f=E,g=!1,b=new Qa(b));a:for(;++e<h;){var n=a[e],o=null==c?n:c(n),n=d||0!==n?n:0;if(g&&o===o){for(var p=m;p--;)if(b[p]===o)continue a;l.push(n)}else f(b,o,d)||l.push(n)}return l}function vb(a,b){var c=!0;return gg(a,function(a,d,e){return c=!!b(a,d,e)}),c}function wb(a,b,c){for(var d=-1,e=a.length;++d<e;){var f=a[d],g=b(f);if(null!=g&&(h===P?g===g&&!xe(g):c(g,h)))var h=g,i=f}return i}function xb(a,b){var c=[];return gg(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function yb(a,b,c,d,e){var f=-1,g=a.length;for(c||(c=Cd),e||(e=[]);++f<g;){var h=a[f];0<b&&c(h)?1<b?yb(h,b-1,c,d,e):l(e,h):d||(e[e.length]=h)}return e}function zb(a,b){return a&&ig(a,b,He)}function Ab(a,b){return a&&jg(a,b,He)}function Bb(a,b){return h(b,function(b){return pe(a[b])})}function Cb(a,b){b=Dc(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[Nd(b[c++])];return c&&c==d?a:P}function Db(a,b,c){return b=b(a),hh(a)?b:l(b,c(a))}function Eb(a){if(null==a)a=a===P?"[object Undefined]":"[object Null]";else if(zf&&zf in _e(a)){var b=hf.call(a,zf),c=a[zf];try{a[zf]=P;var d=!0}catch(a){}var e=lf.call(a);d&&(b?a[zf]=c:delete a[zf]),a=e}else a=lf.call(a);return a}function Fb(a,b){return a>b}function Gb(a,b){return null!=a&&hf.call(a,b)}function Hb(a,b){return null!=a&&b in _e(a)}function Ib(a,b,c){for(var d=c?j:i,e=a[0].length,f=a.length,g=f,h=We(f),l=1/0,m=[];g--;){var n=a[g];g&&b&&(n=k(n,C(b))),l=Mf(n.length,l),h[g]=!c&&(b||120<=e&&120<=n.length)?new Qa(g&&n):P}var n=a[0],o=-1,p=h[0];a:for(;++o<e&&m.length<l;){var q=n[o],r=b?b(q):q,q=c||0!==q?q:0;if(p?!E(p,r):!d(m,r,c)){for(g=f;--g;){var s=h[g];if(s?!E(s,r):!d(a[g],r,c))continue a}p&&p.push(r),m.push(q)}}return m}function Jb(a,b,c){var d={};return zb(a,function(a,e,f){b(d,c(a),e,f)}),d}function Kb(a,b,d){return b=Dc(b,a),a=2>b.length?a:Cb(a,oc(b,0,-1)),b=null==a?a:a[Nd(Vd(b))],null==b?P:c(b,a,d)}function Lb(a){return te(a)&&"[object Arguments]"==Eb(a)}function Mb(a){return te(a)&&"[object ArrayBuffer]"==Eb(a)}function Nb(a){return te(a)&&"[object Date]"==Eb(a)}function Ob(a,b,c,d,e){if(a===b)b=!0;else if(null==a||null==b||!te(a)&&!te(b))b=a!==a&&b!==b;else a:{var f=hh(a),g=hh(b),h=f?"[object Array]":rg(a),i=g?"[object Array]":rg(b),h="[object Arguments]"==h?"[object Object]":h,i="[object Arguments]"==i?"[object Object]":i,j="[object Object]"==h,g="[object Object]"==i;if((i=h==i)&&jh(a)){if(!jh(b)){b=!1;break a}f=!0,j=!1}if(i&&!j)e||(e=new Sa),b=f||oh(a)?nd(a,b,c,d,Ob,e):od(a,b,h,c,d,Ob,e);else{if(!(1&c)&&(f=j&&hf.call(a,"__wrapped__"),h=g&&hf.call(b,"__wrapped__"),f||h)){a=f?a.value():a,b=h?b.value():b,e||(e=new Sa),b=Ob(a,b,c,d,e);break a}if(i)b:if(e||(e=new Sa),f=1&c,h=qd(a),g=h.length,i=qd(b).length,g==i||f){for(j=g;j--;){var k=h[j];if(!(f?k in b:hf.call(b,k))){b=!1;break b}}if((i=e.get(a))&&e.get(b))b=i==b;else{i=!0,e.set(a,b),e.set(b,a);for(var l=f;++j<g;){var k=h[j],m=a[k],n=b[k];if(d)var o=f?d(n,m,k,b,a,e):d(m,n,k,a,b,e);if(o===P?m!==n&&!Ob(m,n,c,d,e):!o){i=!1;break}l||(l="constructor"==k)}i&&!l&&(c=a.constructor,d=b.constructor,c!=d&&"constructor"in a&&"constructor"in b&&!("function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)&&(i=!1)),e["delete"](a),e["delete"](b),b=i}}else b=!1;else b=!1}}return b}function Pb(a){return te(a)&&"[object Map]"==rg(a)}function Qb(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=_e(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){var h=c[e],i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(j===P&&!(i in a))return!1}else{if(h=new Sa,d)var l=d(j,k,i,a,b,h);if(l===P?!Ob(k,j,3,d,h):!l)return!1}}return!0}function Rb(a){return!(!se(a)||kf&&kf in a)&&(pe(a)?of:ta).test(Od(a))}function Sb(a){return te(a)&&"[object RegExp]"==Eb(a)}function Tb(a){return te(a)&&"[object Set]"==rg(a)}function Ub(a){return te(a)&&re(a.length)&&!!Ja[Eb(a)]}function Vb(a){return"function"==typeof a?a:null==a?Pe:"object"==typeof a?hh(a)?$b(a[0],a[1]):Zb(a):Te(a)}function Wb(a){if(!Hd(a))return Kf(a);var b,c=[];for(b in _e(a))hf.call(a,b)&&"constructor"!=b&&c.push(b);return c}function Xb(a,b){return a<b}function Yb(a,b){var c=-1,d=me(a)?We(a.length):[];return gg(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Zb(a){var b=wd(a);return 1==b.length&&b[0][2]?Id(b[0][0],b[0][1]):function(c){return c===a||Qb(c,a,b)}}function $b(a,b){return Fd(a)&&b===b&&!se(b)?Id(Nd(a),b):function(c){var d=Fe(c,a);return d===P&&d===b?Ge(c,a):Ob(b,d,3)}}function _b(a,b,c,d,e){a!==b&&ig(b,function(f,g){if(se(f)){e||(e=new Sa);var h=e,i=a[g],j=b[g],k=h.get(j);if(k)hb(a,g,k);else{var k=d?d(i,j,g+"",a,b,h):P,l=k===P;if(l){var m=hh(j),n=!m&&jh(j),o=!m&&!n&&oh(j),k=j;m||n||o?hh(i)?k=i:ne(i)?k=Lc(i):n?(l=!1,k=Fc(j,!0)):o?(l=!1,k=Hc(j,!0)):k=[]:ve(j)||gh(j)?(k=i,gh(i)?k=De(i):(!se(i)||c&&pe(i))&&(k=Ad(j))):l=!1}l&&(h.set(j,k),_b(k,j,c,d,h),h["delete"](j)),hb(a,g,k)}}else h=d?d(a[g],f,g+"",a,b,e):P,h===P&&(h=f),hb(a,g,h)},Ie)}function ac(a,b){var c=a.length;if(c)return b+=0>b?c:0,Dd(b,c)?a[b]:P}function bc(a,b,c){var d=-1;return b=k(b.length?b:[Pe],C(ud())),a=Yb(a,function(a){return{a:k(b,function(b){return b(a)}),b:++d,c:a}}),y(a,function(a,b){var d;a:{d=-1;for(var e=a.a,f=b.a,g=e.length,h=c.length;++d<g;){var i=Ic(e[d],f[d]);if(i){d=d>=h?i:i*("desc"==c[d]?-1:1);break a}}d=a.b-b.b}return d})}function cc(a,b){return dc(a,b,function(b,c){return Ge(a,c)})}function dc(a,b,c){for(var d=-1,e=b.length,f={};++d<e;){var g=b[d],h=Cb(a,g);c(h,g)&&mc(f,Dc(g,a),h)}return f}function ec(a){return function(b){return Cb(b,a)}}function fc(a,b,c,d){var e=d?s:r,f=-1,g=b.length,h=a;for(a===b&&(b=Lc(b)),c&&(h=k(a,C(c)));++f<g;)for(var i=0,j=b[f],j=c?c(j):j;-1<(i=e(h,j,i,d));)h!==a&&wf.call(h,i,1),wf.call(a,i,1);return a}function gc(a,b){for(var c=a?b.length:0,d=c-1;c--;){var e=b[c];if(c==d||e!==f){var f=e;Dd(e)?wf.call(a,e,1):wc(a,e)}}}function hc(a,b){return a+Ff(Pf()*(b-a+1))}function ic(a,b){var c="";if(!a||1>b||9007199254740991<b)return c;do b%2&&(c+=a),(b=Ff(b/2))&&(a+=a);while(b);return c}function jc(a,b){return vg(Jd(a,b,Pe),a+"")}function kc(a){return Va(Ke(a))}function lc(a,b){var c=Ke(a);return Md(c,pb(b,0,c.length))}function mc(a,b,c,d){if(!se(a))return a;b=Dc(b,a);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=Nd(b[e]),j=c;if(e!=g){var k=h[i],j=d?d(k,i,h):P;j===P&&(j=se(k)?k:Dd(b[e+1])?[]:{})}ib(h,i,j),h=h[i]}return a}function nc(a){return Md(Ke(a))}function oc(a,b,c){var d=-1,e=a.length;for(0>b&&(b=-b>e?0:e+b),c=c>e?e:c,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0,c=We(e);++d<e;)c[d]=a[d+b];return c}function pc(a,b){var c;return gg(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function qc(a,b,c){var d=0,e=null==a?d:a.length;if("number"==typeof b&&b===b&&2147483647>=e){for(;d<e;){var f=d+e>>>1,g=a[f];null!==g&&!xe(g)&&(c?g<=b:g<b)?d=f+1:e=f}return e}return rc(a,b,Pe,c)}function rc(a,b,c,d){b=c(b);for(var e=0,f=null==a?0:a.length,g=b!==b,h=null===b,i=xe(b),j=b===P;e<f;){var k=Ff((e+f)/2),l=c(a[k]),m=l!==P,n=null===l,o=l===l,p=xe(l);(g?d||o:j?o&&(d||m):h?o&&m&&(d||!n):i?o&&m&&!n&&(d||!p):n||p?0:d?l<=b:l<b)?e=k+1:f=k}return Mf(f,4294967294)}function sc(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c],h=b?b(g):g;if(!c||!le(h,i)){var i=h;f[e++]=0===g?0:g}}return f}function tc(a){return"number"==typeof a?a:xe(a)?R:+a}function uc(a){if("string"==typeof a)return a;if(hh(a))return k(a,uc)+"";if(xe(a))return eg?eg.call(a):"";var b=a+"";return"0"==b&&1/a==-Q?"-0":b;
}function vc(a,b,c){var d=-1,e=i,f=a.length,g=!0,h=[],k=h;if(c)g=!1,e=j;else if(200<=f){if(e=b?null:ng(a))return L(e);g=!1,e=E,k=new Qa}else k=b?[]:h;a:for(;++d<f;){var l=a[d],m=b?b(l):l,l=c||0!==l?l:0;if(g&&m===m){for(var n=k.length;n--;)if(k[n]===m)continue a;b&&k.push(m),h.push(l)}else e(k,m,c)||(k!==h&&k.push(m),h.push(l))}return h}function wc(a,b){return b=Dc(b,a),a=2>b.length?a:Cb(a,oc(b,0,-1)),null==a||delete a[Nd(Vd(b))]}function xc(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?oc(a,d?0:f,d?f+1:e):oc(a,d?f+1:0,d?e:f)}function yc(a,b){var c=a;return c instanceof Ea&&(c=c.value()),m(b,function(a,b){return b.func.apply(b.thisArg,l([a],b.args))},c)}function zc(a,b,c){var d=a.length;if(2>d)return d?vc(a[0]):[];for(var e=-1,f=We(d);++e<d;)for(var g=a[e],h=-1;++h<d;)h!=e&&(f[e]=ub(f[e]||g,a[h],b,c));return vc(yb(f,1),b,c)}function Ac(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;)c(g,a[d],d<f?b[d]:P);return g}function Bc(a){return ne(a)?a:[]}function Cc(a){return"function"==typeof a?a:Pe}function Dc(a,b){return hh(a)?a:Fd(a,b)?[a]:wg(Ee(a))}function Ec(a,b,c){var d=a.length;return c=c===P?d:c,!b&&c>=d?a:oc(a,b,c)}function Fc(a,b){if(b)return a.slice();var c=a.length,c=sf?sf(c):new a.constructor(c);return a.copy(c),c}function Gc(a){var b=new a.constructor(a.byteLength);return new rf(b).set(new rf(a)),b}function Hc(a,b){return new a.constructor(b?Gc(a.buffer):a.buffer,a.byteOffset,a.length)}function Ic(a,b){if(a!==b){var c=a!==P,d=null===a,e=a===a,f=xe(a),g=b!==P,h=null===b,i=b===b,j=xe(b);if(!h&&!j&&!f&&a>b||f&&g&&i&&!h&&!j||d&&g&&i||!c&&i||!e)return 1;if(!d&&!f&&!j&&a<b||j&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!i)return-1}return 0}function Jc(a,b,c,d){var e=-1,f=a.length,g=c.length,h=-1,i=b.length,j=Lf(f-g,0),k=We(i+j);for(d=!d;++h<i;)k[h]=b[h];for(;++e<g;)(d||e<f)&&(k[c[e]]=a[e]);for(;j--;)k[h++]=a[e++];return k}function Kc(a,b,c,d){var e=-1,f=a.length,g=-1,h=c.length,i=-1,j=b.length,k=Lf(f-h,0),l=We(k+j);for(d=!d;++e<k;)l[e]=a[e];for(k=e;++i<j;)l[k+i]=b[i];for(;++g<h;)(d||e<f)&&(l[k+c[g]]=a[e++]);return l}function Lc(a,b){var c=-1,d=a.length;for(b||(b=We(d));++c<d;)b[c]=a[c];return b}function Mc(a,b,c,d){var e=!c;c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],i=d?d(c[h],a[h],h,c,a):P;i===P&&(i=a[h]),e?nb(c,h,i):ib(c,h,i)}return c}function Nc(a,b){return Mc(a,pg(a),b)}function Oc(a,b){return Mc(a,qg(a),b)}function Pc(a,b){return function(c,e){var f=hh(c)?d:kb,g=b?b():{};return f(c,a,ud(e,2),g)}}function Qc(a){return jc(function(b,c){var d=-1,e=c.length,f=1<e?c[e-1]:P,g=2<e?c[2]:P,f=3<a.length&&"function"==typeof f?(e--,f):P;for(g&&Ed(c[0],c[1],g)&&(f=3>e?P:f,e=1),b=_e(b);++d<e;)(g=c[d])&&a(b,g,d,f);return b})}function Rc(a,b){return function(c,d){if(null==c)return c;if(!me(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=_e(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function Sc(a){return function(b,c,d){var e=-1,f=_e(b);d=d(b);for(var g=d.length;g--;){var h=d[a?g:++e];if(!1===c(f[h],h,f))break}return b}}function Tc(a,b,c){function d(){return(this&&this!==Ra&&this instanceof d?f:a).apply(e?c:this,arguments)}var e=1&b,f=Wc(a);return d}function Uc(a){return function(b){b=Ee(b);var c=Ga.test(b)?O(b):P,d=c?c[0]:b.charAt(0);return b=c?Ec(c,1).join(""):b.slice(1),d[a]()+b}}function Vc(a){return function(b){return m(Ne(Me(b).replace(Ca,"")),a,"")}}function Wc(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=fg(a.prototype),b=a.apply(c,b);return se(b)?b:c}}function Xc(a,b,d){function e(){for(var g=arguments.length,h=We(g),i=g,j=td(e);i--;)h[i]=arguments[i];return i=3>g&&h[0]!==j&&h[g-1]!==j?[]:K(h,j),g-=i.length,g<d?gd(a,b,$c,e.placeholder,P,h,i,P,P,d-g):c(this&&this!==Ra&&this instanceof e?f:a,this,h)}var f=Wc(a);return e}function Yc(a){return function(b,c,d){var e=_e(b);if(!me(b)){var f=ud(c,3);b=He(b),c=function(a){return f(e[a],a,e)}}return c=a(b,c,d),-1<c?e[f?b[c]:c]:P}}function Zc(a){return pd(function(b){var c=b.length,d=c,e=Ba.prototype.thru;for(a&&b.reverse();d--;){var f=b[d];if("function"!=typeof f)throw new cf("Expected a function");if(e&&!g&&"wrapper"==sd(f))var g=new Ba([],(!0))}for(d=g?d:c;++d<c;)var f=b[d],e=sd(f),h="wrapper"==e?og(f):P,g=h&&Gd(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?g[sd(h[0])].apply(g,h[3]):1==f.length&&Gd(f)?g[e]():g.thru(f);return function(){var a=arguments,d=a[0];if(g&&1==a.length&&hh(d))return g.plant(d).value();for(var e=0,a=c?b[e].apply(this,a):d;++e<c;)a=b[e].call(this,a);return a}})}function $c(a,b,c,d,e,f,g,h,i,j){function k(){for(var r=arguments.length,s=We(r),t=r;t--;)s[t]=arguments[t];if(o){var u,v=td(k),t=s.length;for(u=0;t--;)s[t]===v&&++u}if(d&&(s=Jc(s,d,e,o)),f&&(s=Kc(s,f,g,o)),r-=u,o&&r<j)return v=K(s,v),gd(a,b,$c,k.placeholder,c,s,v,h,i,j-r);if(v=m?c:this,t=n?v[a]:a,r=s.length,h){u=s.length;for(var w=Mf(h.length,u),x=Lc(s);w--;){var y=h[w];s[w]=Dd(y,u)?x[y]:P}}else p&&1<r&&s.reverse();return l&&i<r&&(s.length=i),this&&this!==Ra&&this instanceof k&&(t=q||Wc(t)),t.apply(v,s)}var l=128&b,m=1&b,n=2&b,o=24&b,p=512&b,q=n?P:Wc(a);return k}function _c(a,b){return function(c,d){return Jb(c,a,b(d))}}function ad(a,b){return function(c,d){var e;if(c===P&&d===P)return b;if(c!==P&&(e=c),d!==P){if(e===P)return d;"string"==typeof c||"string"==typeof d?(c=uc(c),d=uc(d)):(c=tc(c),d=tc(d)),e=a(c,d)}return e}}function bd(a){return pd(function(b){return b=k(b,C(ud())),jc(function(d){var e=this;return a(b,function(a){return c(a,e,d)})})})}function cd(a,b){b=b===P?" ":uc(b);var c=b.length;return 2>c?c?ic(b,a):b:(c=ic(b,Ef(a/N(b))),Ga.test(b)?Ec(O(c),0,a).join(""):c.slice(0,a))}function dd(a,b,d,e){function f(){for(var b=-1,i=arguments.length,j=-1,k=e.length,l=We(k+i),m=this&&this!==Ra&&this instanceof f?h:a;++j<k;)l[j]=e[j];for(;i--;)l[j++]=arguments[++b];return c(m,g?d:this,l)}var g=1&b,h=Wc(a);return f}function ed(a){return function(b,c,d){d&&"number"!=typeof d&&Ed(b,c,d)&&(c=d=P),b=ze(b),c===P?(c=b,b=0):c=ze(c),d=d===P?b<c?1:-1:ze(d);var e=-1;c=Lf(Ef((c-b)/(d||1)),0);for(var f=We(c);c--;)f[a?c:++e]=b,b+=d;return f}}function fd(a){return function(b,c){return"string"==typeof b&&"string"==typeof c||(b=Ce(b),c=Ce(c)),a(b,c)}}function gd(a,b,c,d,e,f,g,h,i,j){var k=8&b,l=k?g:P;g=k?P:g;var m=k?f:P;return f=k?P:f,b=(b|(k?32:64))&~(k?64:32),4&b||(b&=-4),e=[a,b,e,m,l,f,g,h,i,j],c=c.apply(P,e),Gd(a)&&tg(c,e),c.placeholder=d,Kd(c,a,b)}function hd(a){var b=$e[a];return function(a,c){if(a=Ce(a),c=null==c?0:Mf(Ae(c),292)){var d=(Ee(a)+"e").split("e"),d=b(d[0]+"e"+(+d[1]+c)),d=(Ee(d)+"e").split("e");return+(d[0]+"e"+(+d[1]-c))}return b(a)}}function id(a){return function(b){var c=rg(b);return"[object Map]"==c?I(b):"[object Set]"==c?M(b):B(b,a(b))}}function jd(a,b,c,d,e,f,g,h){var i=2&b;if(!i&&"function"!=typeof a)throw new cf("Expected a function");var j=d?d.length:0;if(j||(b&=-97,d=e=P),g=g===P?g:Lf(Ae(g),0),h=h===P?h:Ae(h),j-=e?e.length:0,64&b){var k=d,l=e;d=e=P}var m=i?P:og(a);return f=[a,b,c,d,e,k,l,f,g,h],m&&(c=f[1],a=m[1],b=c|a,d=128==a&&8==c||128==a&&256==c&&f[7].length<=m[8]||384==a&&m[7].length<=m[8]&&8==c,131>b||d)&&(1&a&&(f[2]=m[2],b|=1&c?0:4),(c=m[3])&&(d=f[3],f[3]=d?Jc(d,c,m[4]):c,f[4]=d?K(f[3],"__lodash_placeholder__"):m[4]),(c=m[5])&&(d=f[5],f[5]=d?Kc(d,c,m[6]):c,f[6]=d?K(f[5],"__lodash_placeholder__"):m[6]),(c=m[7])&&(f[7]=c),128&a&&(f[8]=null==f[8]?m[8]:Mf(f[8],m[8])),null==f[9]&&(f[9]=m[9]),f[0]=m[0],f[1]=b),a=f[0],b=f[1],c=f[2],d=f[3],e=f[4],h=f[9]=f[9]===P?i?0:a.length:Lf(f[9]-j,0),!h&&24&b&&(b&=-25),Kd((m?kg:tg)(b&&1!=b?8==b||16==b?Xc(a,b,h):32!=b&&33!=b||e.length?$c.apply(P,f):dd(a,b,c,d):Tc(a,b,c),f),a,b)}function kd(a,b,c,d){return a===P||le(a,ef[c])&&!hf.call(d,c)?b:a}function ld(a,b,c,d,e,f){return se(a)&&se(b)&&(f.set(b,a),_b(a,b,P,ld,f),f["delete"](b)),a}function md(a){return ve(a)?P:a}function nd(a,b,c,d,e,f){var g=1&c,h=a.length,i=b.length;if(h!=i&&!(g&&i>h))return!1;if((i=f.get(a))&&f.get(b))return i==b;var i=-1,j=!0,k=2&c?new Qa:P;for(f.set(a,b),f.set(b,a);++i<h;){var l=a[i],m=b[i];if(d)var n=g?d(m,l,i,b,a,f):d(l,m,i,a,b,f);if(n!==P){if(n)continue;j=!1;break}if(k){if(!o(b,function(a,b){if(!E(k,b)&&(l===a||e(l,a,c,d,f)))return k.push(b)})){j=!1;break}}else if(l!==m&&!e(l,m,c,d,f)){j=!1;break}}return f["delete"](a),f["delete"](b),j}function od(a,b,c,d,e,f,g){switch(c){case"[object DataView]":if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)break;a=a.buffer,b=b.buffer;case"[object ArrayBuffer]":if(a.byteLength!=b.byteLength||!f(new rf(a),new rf(b)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return le(+a,+b);case"[object Error]":return a.name==b.name&&a.message==b.message;case"[object RegExp]":case"[object String]":return a==b+"";case"[object Map]":var h=I;case"[object Set]":if(h||(h=L),a.size!=b.size&&!(1&d))break;return(c=g.get(a))?c==b:(d|=2,g.set(a,b),b=nd(h(a),h(b),d,e,f,g),g["delete"](a),b);case"[object Symbol]":if(dg)return dg.call(a)==dg.call(b)}return!1}function pd(a){return vg(Jd(a,P,Td),a+"")}function qd(a){return Db(a,He,pg)}function rd(a){return Db(a,Ie,qg)}function sd(a){for(var b=a.name+"",c=Yf[b],d=hf.call(Yf,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function td(a){return(hf.call(za,"placeholder")?za:a).placeholder}function ud(){var a=za.iteratee||Qe,a=a===Qe?Vb:a;return arguments.length?a(arguments[0],arguments[1]):a}function vd(a,b){var c=a.__data__,d=typeof b;return("string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==b:null===b)?c["string"==typeof b?"string":"hash"]:c.map}function wd(a){for(var b=He(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,e===e&&!se(e)]}return b}function xd(a,b){var c=null==a?P:a[b];return Rb(c)?c:P}function yd(a,b,c){b=Dc(b,a);for(var d=-1,e=b.length,f=!1;++d<e;){var g=Nd(b[d]);if(!(f=null!=a&&c(a,g)))break;a=a[g]}return f||++d!=e?f:(e=null==a?0:a.length,!!e&&re(e)&&Dd(g,e)&&(hh(a)||gh(a)))}function zd(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&hf.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Ad(a){return"function"!=typeof a.constructor||Hd(a)?{}:fg(tf(a))}function Bd(c,d,e,f){var g=c.constructor;switch(d){case"[object ArrayBuffer]":return Gc(c);case"[object Boolean]":case"[object Date]":return new g((+c));case"[object DataView]":return d=f?Gc(c.buffer):c.buffer,new c.constructor(d,c.byteOffset,c.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Hc(c,f);case"[object Map]":return d=f?e(I(c),1):I(c),m(d,a,new c.constructor);case"[object Number]":case"[object String]":return new g(c);case"[object RegExp]":return d=new c.constructor(c.source,qa.exec(c)),d.lastIndex=c.lastIndex,d;case"[object Set]":return d=f?e(L(c),1):L(c),m(d,b,new c.constructor);case"[object Symbol]":return dg?_e(dg.call(c)):{}}}function Cd(a){return hh(a)||gh(a)||!!(xf&&a&&a[xf])}function Dd(a,b){return b=null==b?9007199254740991:b,!!b&&("number"==typeof a||va.test(a))&&-1<a&&0==a%1&&a<b}function Ed(a,b,c){if(!se(c))return!1;var d=typeof b;return!!("number"==d?me(c)&&Dd(b,c.length):"string"==d&&b in c)&&le(c[b],a)}function Fd(a,b){if(hh(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!xe(a))||ca.test(a)||!ba.test(a)||null!=b&&a in _e(b)}function Gd(a){var b=sd(a),c=za[b];return"function"==typeof c&&b in Ea.prototype&&(a===c||(b=og(c),!!b&&a===b[0]))}function Hd(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||ef)}function Id(a,b){return function(c){return null!=c&&c[a]===b&&(b!==P||a in _e(c))}}function Jd(a,b,d){return b=Lf(b===P?a.length-1:b,0),function(){for(var e=arguments,f=-1,g=Lf(e.length-b,0),h=We(g);++f<g;)h[f]=e[b+f];for(f=-1,g=We(b+1);++f<b;)g[f]=e[f];return g[b]=d(h),c(a,this,g)}}function Kd(a,b,c){var d=b+"";b=vg;var e,f=Pd;return e=(e=d.match(la))?e[1].split(ma):[],c=f(e,c),(f=c.length)&&(e=f-1,c[e]=(1<f?"& ":"")+c[e],c=c.join(2<f?", ":" "),d=d.replace(ka,"{\n/* [wrapped with "+c+"] */\n")),b(a,d)}function Ld(a){var b=0,c=0;return function(){var d=Nf(),e=16-(d-c);if(c=d,0<e){if(800<=++b)return arguments[0]}else b=0;return a.apply(P,arguments)}}function Md(a,b){var c=-1,d=a.length,e=d-1;for(b=b===P?d:b;++c<b;){var d=hc(c,e),f=a[d];a[d]=a[c],a[c]=f}return a.length=b,a}function Nd(a){if("string"==typeof a||xe(a))return a;var b=a+"";return"0"==b&&1/a==-Q?"-0":b}function Od(a){if(null!=a){try{return gf.call(a)}catch(a){}return a+""}return""}function Pd(a,b){return e(S,function(c){var d="_."+c[0];b&c[1]&&!i(a,d)&&a.push(d)}),a.sort()}function Qd(a){if(a instanceof Ea)return a.clone();var b=new Ba(a.__wrapped__,a.__chain__);return b.__actions__=Lc(a.__actions__),b.__index__=a.__index__,b.__values__=a.__values__,b}function Rd(a,b,c){var d=null==a?0:a.length;return d?(c=null==c?0:Ae(c),0>c&&(c=Lf(d+c,0)),q(a,ud(b,3),c)):-1}function Sd(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d-1;return c!==P&&(e=Ae(c),e=0>c?Lf(d+e,0):Mf(e,d-1)),q(a,ud(b,3),e,!0)}function Td(a){return(null==a?0:a.length)?yb(a,1):[]}function Ud(a){return a&&a.length?a[0]:P}function Vd(a){var b=null==a?0:a.length;return b?a[b-1]:P}function Wd(a,b){return a&&a.length&&b&&b.length?fc(a,b):a}function Xd(a){return null==a?a:Qf.call(a)}function Yd(a){if(!a||!a.length)return[];var b=0;return a=h(a,function(a){if(ne(a))return b=Lf(a.length,b),!0}),A(b,function(b){return k(a,v(b))})}function Zd(a,b){if(!a||!a.length)return[];var d=Yd(a);return null==b?d:k(d,function(a){return c(b,P,a)})}function $d(a){return a=za(a),a.__chain__=!0,a}function _d(a,b){return b(a)}function ae(){return this}function be(a,b){return(hh(a)?e:gg)(a,ud(b,3))}function ce(a,b){return(hh(a)?f:hg)(a,ud(b,3))}function de(a,b){return(hh(a)?k:Yb)(a,ud(b,3))}function ee(a,b,c){return b=c?P:b,b=a&&null==b?a.length:b,jd(a,128,P,P,P,P,b)}function fe(a,b){var c;if("function"!=typeof b)throw new cf("Expected a function");return a=Ae(a),function(){return 0<--a&&(c=b.apply(this,arguments)),1>=a&&(b=P),c}}function ge(a,b,c){return b=c?P:b,a=jd(a,8,P,P,P,P,P,b),a.placeholder=ge.placeholder,a}function he(a,b,c){return b=c?P:b,a=jd(a,16,P,P,P,P,P,b),a.placeholder=he.placeholder,a}function ie(a,b,c){function d(b){var c=i,d=j;return i=j=P,o=b,l=a.apply(d,c)}function e(a){var c=a-n;return a-=o,n===P||c>=b||0>c||q&&a>=k}function f(){var a=Xg();if(e(a))return g(a);var c,d=ug;c=a-o,a=b-(a-n),c=q?Mf(a,k-c):a,m=d(f,c)}function g(a){return m=P,r&&i?d(a):(i=j=P,l)}function h(){var a=Xg(),c=e(a);if(i=arguments,j=this,n=a,c){if(m===P)return o=a=n,m=ug(f,b),p?d(a):l;if(q)return m=ug(f,b),d(n)}return m===P&&(m=ug(f,b)),l}var i,j,k,l,m,n,o=0,p=!1,q=!1,r=!0;if("function"!=typeof a)throw new cf("Expected a function");return b=Ce(b)||0,se(c)&&(p=!!c.leading,k=(q="maxWait"in c)?Lf(Ce(c.maxWait)||0,b):k,r="trailing"in c?!!c.trailing:r),h.cancel=function(){m!==P&&mg(m),o=0,i=n=j=m=P},h.flush=function(){return m===P?l:g(Xg())},h}function je(a,b){function c(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;return f.has(e)?f.get(e):(d=a.apply(this,d),c.cache=f.set(e,d)||f,d)}if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new cf("Expected a function");return c.cache=new(je.Cache||Pa),c}function ke(a){if("function"!=typeof a)throw new cf("Expected a function");return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function le(a,b){return a===b||a!==a&&b!==b}function me(a){return null!=a&&re(a.length)&&!pe(a)}function ne(a){return te(a)&&me(a)}function oe(a){if(!te(a))return!1;var b=Eb(a);return"[object Error]"==b||"[object DOMException]"==b||"string"==typeof a.message&&"string"==typeof a.name&&!ve(a)}function pe(a){return!!se(a)&&(a=Eb(a),"[object Function]"==a||"[object GeneratorFunction]"==a||"[object AsyncFunction]"==a||"[object Proxy]"==a)}function qe(a){return"number"==typeof a&&a==Ae(a)}function re(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function se(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}function te(a){return null!=a&&"object"==typeof a}function ue(a){return"number"==typeof a||te(a)&&"[object Number]"==Eb(a)}function ve(a){return!(!te(a)||"[object Object]"!=Eb(a))&&(a=tf(a),null===a||(a=hf.call(a,"constructor")&&a.constructor,"function"==typeof a&&a instanceof a&&gf.call(a)==mf))}function we(a){return"string"==typeof a||!hh(a)&&te(a)&&"[object String]"==Eb(a)}function xe(a){return"symbol"==typeof a||te(a)&&"[object Symbol]"==Eb(a)}function ye(a){if(!a)return[];if(me(a))return we(a)?O(a):Lc(a);if(yf&&a[yf]){a=a[yf]();for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}return b=rg(a),("[object Map]"==b?I:"[object Set]"==b?L:Ke)(a)}function ze(a){return a?(a=Ce(a),a===Q||a===-Q?1.7976931348623157e308*(0>a?-1:1):a===a?a:0):0===a?a:0}function Ae(a){a=ze(a);var b=a%1;return a===a?b?a-b:a:0}function Be(a){return a?pb(Ae(a),0,4294967295):0}function Ce(a){if("number"==typeof a)return a;if(xe(a))return R;if(se(a)&&(a="function"==typeof a.valueOf?a.valueOf():a,a=se(a)?a+"":a),"string"!=typeof a)return 0===a?a:+a;a=a.replace(ha,"");var b=sa.test(a);return b||ua.test(a)?Oa(a.slice(2),b?2:8):ra.test(a)?R:+a}function De(a){return Mc(a,Ie(a))}function Ee(a){return null==a?"":uc(a)}function Fe(a,b,c){return a=null==a?P:Cb(a,b),a===P?c:a}function Ge(a,b){return null!=a&&yd(a,b,Hb)}function He(a){return me(a)?Ta(a):Wb(a)}function Ie(a){if(me(a))a=Ta(a,!0);else if(se(a)){var b,c=Hd(a),d=[];for(b in a)("constructor"!=b||!c&&hf.call(a,b))&&d.push(b);a=d}else{if(b=[],null!=a)for(c in _e(a))b.push(c);a=b}return a}function Je(a,b){if(null==a)return{};var c=k(rd(a),function(a){return[a]});return b=ud(b),dc(a,c,function(a,c){return b(a,c[0])})}function Ke(a){return null==a?[]:D(a,He(a))}function Le(a){return Oh(Ee(a).toLowerCase())}function Me(a){return(a=Ee(a))&&a.replace(wa,bb).replace(Da,"")}function Ne(a,b,c){return a=Ee(a),b=c?P:b,b===P?Ha.test(a)?a.match(Fa)||[]:a.match(na)||[]:a.match(b)||[]}function Oe(a){return function(){return a}}function Pe(a){return a}function Qe(a){return Vb("function"==typeof a?a:qb(a,1))}function Re(a,b,c){var d=He(b),f=Bb(b,d);null!=c||se(b)&&(f.length||!d.length)||(c=b,b=a,a=this,f=Bb(b,He(b)));var g=!(se(c)&&"chain"in c&&!c.chain),h=pe(a);return e(f,function(c){var d=b[c];a[c]=d,h&&(a.prototype[c]=function(){var b=this.__chain__;if(g||b){var c=a(this.__wrapped__);return(c.__actions__=Lc(this.__actions__)).push({func:d,args:arguments,thisArg:a}),c.__chain__=b,c}return d.apply(a,l([this.value()],arguments))})}),a}function Se(){}function Te(a){return Fd(a)?v(Nd(a)):ec(a)}function Ue(){return[]}function Ve(){return!1}w=null==w?Ra:eb.defaults(Ra.Object(),w,eb.pick(Ra,Ia));var We=w.Array,Xe=w.Date,Ye=w.Error,Ze=w.Function,$e=w.Math,_e=w.Object,af=w.RegExp,bf=w.String,cf=w.TypeError,df=We.prototype,ef=_e.prototype,ff=w["__core-js_shared__"],gf=Ze.prototype.toString,hf=ef.hasOwnProperty,jf=0,kf=function(){var a=/[^.]+$/.exec(ff&&ff.keys&&ff.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),lf=ef.toString,mf=gf.call(_e),nf=Ra._,of=af("^"+gf.call(hf).replace(fa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pf=Ua?w.Buffer:P,qf=w.Symbol,rf=w.Uint8Array,sf=pf?pf.f:P,tf=J(_e.getPrototypeOf,_e),uf=_e.create,vf=ef.propertyIsEnumerable,wf=df.splice,xf=qf?qf.isConcatSpreadable:P,yf=qf?qf.iterator:P,zf=qf?qf.toStringTag:P,Af=function(){try{var a=xd(_e,"defineProperty");return a({},"",{}),a}catch(a){}}(),Bf=w.clearTimeout!==Ra.clearTimeout&&w.clearTimeout,Cf=Xe&&Xe.now!==Ra.Date.now&&Xe.now,Df=w.setTimeout!==Ra.setTimeout&&w.setTimeout,Ef=$e.ceil,Ff=$e.floor,Gf=_e.getOwnPropertySymbols,Hf=pf?pf.isBuffer:P,If=w.isFinite,Jf=df.join,Kf=J(_e.keys,_e),Lf=$e.max,Mf=$e.min,Nf=Xe.now,Of=w.parseInt,Pf=$e.random,Qf=df.reverse,Rf=xd(w,"DataView"),Sf=xd(w,"Map"),Tf=xd(w,"Promise"),Uf=xd(w,"Set"),Vf=xd(w,"WeakMap"),Wf=xd(_e,"create"),Xf=Vf&&new Vf,Yf={},Zf=Od(Rf),$f=Od(Sf),_f=Od(Tf),ag=Od(Uf),bg=Od(Vf),cg=qf?qf.prototype:P,dg=cg?cg.valueOf:P,eg=cg?cg.toString:P,fg=function(){function a(){}return function(b){return se(b)?uf?uf(b):(a.prototype=b,b=new a,a.prototype=P,b):{}}}();za.templateSettings={escape:$,evaluate:_,interpolate:aa,variable:"",imports:{_:za}},za.prototype=Aa.prototype,za.prototype.constructor=za,Ba.prototype=fg(Aa.prototype),Ba.prototype.constructor=Ba,Ea.prototype=fg(Aa.prototype),Ea.prototype.constructor=Ea,La.prototype.clear=function(){this.__data__=Wf?Wf(null):{},this.size=0},La.prototype["delete"]=function(a){return a=this.has(a)&&delete this.__data__[a],this.size-=a?1:0,a},La.prototype.get=function(a){var b=this.__data__;return Wf?(a=b[a],"__lodash_hash_undefined__"===a?P:a):hf.call(b,a)?b[a]:P},La.prototype.has=function(a){var b=this.__data__;return Wf?b[a]!==P:hf.call(b,a)},La.prototype.set=function(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=Wf&&b===P?"__lodash_hash_undefined__":b,this},Ma.prototype.clear=function(){this.__data__=[],this.size=0},Ma.prototype["delete"]=function(a){var b=this.__data__;return a=jb(b,a),!(0>a||(a==b.length-1?b.pop():wf.call(b,a,1),--this.size,0))},Ma.prototype.get=function(a){var b=this.__data__;return a=jb(b,a),0>a?P:b[a][1]},Ma.prototype.has=function(a){return-1<jb(this.__data__,a)},Ma.prototype.set=function(a,b){var c=this.__data__,d=jb(c,a);return 0>d?(++this.size,c.push([a,b])):c[d][1]=b,this},Pa.prototype.clear=function(){this.size=0,this.__data__={hash:new La,map:new(Sf||Ma),string:new La}},Pa.prototype["delete"]=function(a){return a=vd(this,a)["delete"](a),this.size-=a?1:0,a},Pa.prototype.get=function(a){return vd(this,a).get(a)},Pa.prototype.has=function(a){return vd(this,a).has(a)},Pa.prototype.set=function(a,b){var c=vd(this,a),d=c.size;return c.set(a,b),this.size+=c.size==d?0:1,this},Qa.prototype.add=Qa.prototype.push=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},Qa.prototype.has=function(a){return this.__data__.has(a)},Sa.prototype.clear=function(){this.__data__=new Ma,this.size=0},Sa.prototype["delete"]=function(a){var b=this.__data__;return a=b["delete"](a),this.size=b.size,a},Sa.prototype.get=function(a){return this.__data__.get(a)},Sa.prototype.has=function(a){return this.__data__.has(a)},Sa.prototype.set=function(a,b){var c=this.__data__;if(c instanceof Ma){var d=c.__data__;if(!Sf||199>d.length)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new Pa(d)}return c.set(a,b),this.size=c.size,this};var gg=Rc(zb),hg=Rc(Ab,!0),ig=Sc(),jg=Sc(!0),kg=Xf?function(a,b){return Xf.set(a,b),a}:Pe,lg=Af?function(a,b){return Af(a,"toString",{configurable:!0,enumerable:!1,value:Oe(b),writable:!0})}:Pe,mg=Bf||function(a){return Ra.clearTimeout(a)},ng=Uf&&1/L(new Uf([,-0]))[1]==Q?function(a){return new Uf(a)}:Se,og=Xf?function(a){return Xf.get(a)}:Se,pg=Gf?function(a){return null==a?[]:(a=_e(a),h(Gf(a),function(b){return vf.call(a,b)}))}:Ue,qg=Gf?function(a){for(var b=[];a;)l(b,pg(a)),a=tf(a);return b}:Ue,rg=Eb;(Rf&&"[object DataView]"!=rg(new Rf(new ArrayBuffer(1)))||Sf&&"[object Map]"!=rg(new Sf)||Tf&&"[object Promise]"!=rg(Tf.resolve())||Uf&&"[object Set]"!=rg(new Uf)||Vf&&"[object WeakMap]"!=rg(new Vf))&&(rg=function(a){var b=Eb(a);if(a=(a="[object Object]"==b?a.constructor:P)?Od(a):"")switch(a){case Zf:return"[object DataView]";case $f:return"[object Map]";case _f:return"[object Promise]";case ag:return"[object Set]";case bg:return"[object WeakMap]"}return b});var sg=ff?pe:Ve,tg=Ld(kg),ug=Df||function(a,b){return Ra.setTimeout(a,b)},vg=Ld(lg),wg=function(a){a=je(a,function(a){return 500===b.size&&b.clear(),a});var b=a.cache;return a}(function(a){var b=[];return da.test(a)&&b.push(""),a.replace(ea,function(a,c,d,e){b.push(d?e.replace(oa,"$1"):c||a)}),b}),xg=jc(function(a,b){return ne(a)?ub(a,yb(b,1,ne,!0)):[]}),yg=jc(function(a,b){var c=Vd(b);return ne(c)&&(c=P),ne(a)?ub(a,yb(b,1,ne,!0),ud(c,2)):[]}),zg=jc(function(a,b){var c=Vd(b);return ne(c)&&(c=P),ne(a)?ub(a,yb(b,1,ne,!0),P,c):[]}),Ag=jc(function(a){var b=k(a,Bc);return b.length&&b[0]===a[0]?Ib(b):[]}),Bg=jc(function(a){var b=Vd(a),c=k(a,Bc);return b===Vd(c)?b=P:c.pop(),c.length&&c[0]===a[0]?Ib(c,ud(b,2)):[]}),Cg=jc(function(a){var b=Vd(a),c=k(a,Bc);return(b="function"==typeof b?b:P)&&c.pop(),c.length&&c[0]===a[0]?Ib(c,P,b):[]}),Dg=jc(Wd),Eg=pd(function(a,b){var c=null==a?0:a.length,d=ob(a,b);return gc(a,k(b,function(a){return Dd(a,c)?+a:a}).sort(Ic)),d}),Fg=jc(function(a){return vc(yb(a,1,ne,!0))}),Gg=jc(function(a){var b=Vd(a);return ne(b)&&(b=P),vc(yb(a,1,ne,!0),ud(b,2))}),Hg=jc(function(a){var b=Vd(a),b="function"==typeof b?b:P;return vc(yb(a,1,ne,!0),P,b)}),Ig=jc(function(a,b){return ne(a)?ub(a,b):[]}),Jg=jc(function(a){return zc(h(a,ne))}),Kg=jc(function(a){var b=Vd(a);return ne(b)&&(b=P),zc(h(a,ne),ud(b,2))}),Lg=jc(function(a){var b=Vd(a),b="function"==typeof b?b:P;return zc(h(a,ne),P,b)}),Mg=jc(Yd),Ng=jc(function(a){var b=a.length,b=1<b?a[b-1]:P,b="function"==typeof b?(a.pop(),b):P;return Zd(a,b)}),Og=pd(function(a){function b(b){return ob(b,a)}var c=a.length,d=c?a[0]:0,e=this.__wrapped__;return!(1<c||this.__actions__.length)&&e instanceof Ea&&Dd(d)?(e=e.slice(d,+d+(c?1:0)),e.__actions__.push({func:_d,args:[b],thisArg:P}),new Ba(e,this.__chain__).thru(function(a){return c&&!a.length&&a.push(P),a})):this.thru(b)}),Pg=Pc(function(a,b,c){hf.call(a,c)?++a[c]:nb(a,c,1)}),Qg=Yc(Rd),Rg=Yc(Sd),Sg=Pc(function(a,b,c){hf.call(a,c)?a[c].push(b):nb(a,c,[b])}),Tg=jc(function(a,b,d){var e=-1,f="function"==typeof b,g=me(a)?We(a.length):[];return gg(a,function(a){g[++e]=f?c(b,a,d):Kb(a,b,d)}),g}),Ug=Pc(function(a,b,c){nb(a,c,b)}),Vg=Pc(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),Wg=jc(function(a,b){if(null==a)return[];var c=b.length;return 1<c&&Ed(a,b[0],b[1])?b=[]:2<c&&Ed(b[0],b[1],b[2])&&(b=[b[0]]),bc(a,yb(b,1),[])}),Xg=Cf||function(){return Ra.Date.now()},Yg=jc(function(a,b,c){var d=1;if(c.length)var e=K(c,td(Yg)),d=32|d;return jd(a,d,b,c,e)}),Zg=jc(function(a,b,c){var d=3;if(c.length)var e=K(c,td(Zg)),d=32|d;return jd(b,d,a,c,e)}),$g=jc(function(a,b){return tb(a,1,b)}),_g=jc(function(a,b,c){return tb(a,Ce(b)||0,c)});je.Cache=Pa;var ah=jc(function(a,b){b=1==b.length&&hh(b[0])?k(b[0],C(ud())):k(yb(b,1),C(ud()));var d=b.length;return jc(function(e){for(var f=-1,g=Mf(e.length,d);++f<g;)e[f]=b[f].call(this,e[f]);return c(a,this,e)})}),bh=jc(function(a,b){return jd(a,32,P,b,K(b,td(bh)))}),ch=jc(function(a,b){return jd(a,64,P,b,K(b,td(ch)))}),dh=pd(function(a,b){return jd(a,256,P,P,P,b)}),eh=fd(Fb),fh=fd(function(a,b){return a>=b}),gh=Lb(function(){return arguments}())?Lb:function(a){return te(a)&&hf.call(a,"callee")&&!vf.call(a,"callee")},hh=We.isArray,ih=Wa?C(Wa):Mb,jh=Hf||Ve,kh=Xa?C(Xa):Nb,lh=Ya?C(Ya):Pb,mh=Za?C(Za):Sb,nh=$a?C($a):Tb,oh=_a?C(_a):Ub,ph=fd(Xb),qh=fd(function(a,b){return a<=b}),rh=Qc(function(a,b){if(Hd(b)||me(b))Mc(b,He(b),a);else for(var c in b)hf.call(b,c)&&ib(a,c,b[c])}),sh=Qc(function(a,b){Mc(b,Ie(b),a)}),th=Qc(function(a,b,c,d){Mc(b,Ie(b),a,d)}),uh=Qc(function(a,b,c,d){Mc(b,He(b),a,d)}),vh=pd(ob),wh=jc(function(a){return a.push(P,kd),c(th,P,a)}),xh=jc(function(a){return a.push(P,ld),c(Ch,P,a)}),yh=_c(function(a,b,c){a[b]=c},Oe(Pe)),zh=_c(function(a,b,c){hf.call(a,b)?a[b].push(c):a[b]=[c]},ud),Ah=jc(Kb),Bh=Qc(function(a,b,c){_b(a,b,c)}),Ch=Qc(function(a,b,c,d){_b(a,b,c,d)}),Dh=pd(function(a,b){var c={};if(null==a)return c;var d=!1;b=k(b,function(b){return b=Dc(b,a),d||(d=1<b.length),b}),Mc(a,rd(a),c),d&&(c=qb(c,7,md));for(var e=b.length;e--;)wc(c,b[e]);return c}),Eh=pd(function(a,b){return null==a?{}:cc(a,b)}),Fh=id(He),Gh=id(Ie),Hh=Vc(function(a,b,c){return b=b.toLowerCase(),a+(c?Le(b):b)}),Ih=Vc(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Jh=Vc(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),Kh=Uc("toLowerCase"),Lh=Vc(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Mh=Vc(function(a,b,c){return a+(c?" ":"")+Oh(b)}),Nh=Vc(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()}),Oh=Uc("toUpperCase"),Ph=jc(function(a,b){try{return c(a,P,b)}catch(a){return oe(a)?a:new Ye(a)}}),Qh=pd(function(a,b){return e(b,function(b){b=Nd(b),nb(a,b,Yg(a[b],a))}),a}),Rh=Zc(),Sh=Zc(!0),Th=jc(function(a,b){return function(c){return Kb(c,a,b)}}),Uh=jc(function(a,b){return function(c){return Kb(a,c,b)}}),Vh=bd(k),Wh=bd(g),Xh=bd(o),Yh=ed(),Zh=ed(!0),$h=ad(function(a,b){return a+b},0),_h=hd("ceil"),ai=ad(function(a,b){return a/b},1),bi=hd("floor"),ci=ad(function(a,b){return a*b},1),di=hd("round"),ei=ad(function(a,b){return a-b},0);return za.after=function(a,b){if("function"!=typeof b)throw new cf("Expected a function");return a=Ae(a),function(){if(1>--a)return b.apply(this,arguments)}},za.ary=ee,za.assign=rh,za.assignIn=sh,za.assignInWith=th,za.assignWith=uh,za.at=vh,za.before=fe,za.bind=Yg,za.bindAll=Qh,za.bindKey=Zg,za.castArray=function(){if(!arguments.length)return[];var a=arguments[0];return hh(a)?a:[a]},za.chain=$d,za.chunk=function(a,b,c){if(b=(c?Ed(a,b,c):b===P)?1:Lf(Ae(b),0),c=null==a?0:a.length,!c||1>b)return[];for(var d=0,e=0,f=We(Ef(c/b));d<c;)f[e++]=oc(a,d,d+=b);return f},za.compact=function(a){for(var b=-1,c=null==a?0:a.length,d=0,e=[];++b<c;){var f=a[b];f&&(e[d++]=f)}return e},za.concat=function(){var a=arguments.length;if(!a)return[];for(var b=We(a-1),c=arguments[0];a--;)b[a-1]=arguments[a];return l(hh(c)?Lc(c):[c],yb(b,1))},za.cond=function(a){var b=null==a?0:a.length,d=ud();return a=b?k(a,function(a){if("function"!=typeof a[1])throw new cf("Expected a function");return[d(a[0]),a[1]]}):[],jc(function(d){for(var e=-1;++e<b;){var f=a[e];if(c(f[0],this,d))return c(f[1],this,d)}})},za.conforms=function(a){return rb(qb(a,1))},za.constant=Oe,za.countBy=Pg,za.create=function(a,b){var c=fg(a);return null==b?c:lb(c,b)},za.curry=ge,za.curryRight=he,za.debounce=ie,za.defaults=wh,za.defaultsDeep=xh,za.defer=$g,za.delay=_g,za.difference=xg,za.differenceBy=yg,za.differenceWith=zg,za.drop=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===P?1:Ae(b),oc(a,0>b?0:b,d)):[]},za.dropRight=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===P?1:Ae(b),b=d-b,oc(a,0,0>b?0:b)):[]},za.dropRightWhile=function(a,b){return a&&a.length?xc(a,ud(b,3),!0,!0):[]},za.dropWhile=function(a,b){return a&&a.length?xc(a,ud(b,3),!0):[]},za.fill=function(a,b,c,d){var e=null==a?0:a.length;if(!e)return[];for(c&&"number"!=typeof c&&Ed(a,b,c)&&(c=0,d=e),e=a.length,c=Ae(c),0>c&&(c=-c>e?0:e+c),d=d===P||d>e?e:Ae(d),0>d&&(d+=e),d=c>d?0:Be(d);c<d;)a[c++]=b;return a},za.filter=function(a,b){return(hh(a)?h:xb)(a,ud(b,3))},za.flatMap=function(a,b){return yb(de(a,b),1)},za.flatMapDeep=function(a,b){return yb(de(a,b),Q)},za.flatMapDepth=function(a,b,c){return c=c===P?1:Ae(c),yb(de(a,b),c)},za.flatten=Td,za.flattenDeep=function(a){return(null==a?0:a.length)?yb(a,Q):[]},za.flattenDepth=function(a,b){return null!=a&&a.length?(b=b===P?1:Ae(b),yb(a,b)):[]},za.flip=function(a){return jd(a,512)},za.flow=Rh,za.flowRight=Sh,za.fromPairs=function(a){for(var b=-1,c=null==a?0:a.length,d={};++b<c;){var e=a[b];d[e[0]]=e[1]}return d},za.functions=function(a){return null==a?[]:Bb(a,He(a))},za.functionsIn=function(a){return null==a?[]:Bb(a,Ie(a))},za.groupBy=Sg,za.initial=function(a){return(null==a?0:a.length)?oc(a,0,-1):[]},za.intersection=Ag,za.intersectionBy=Bg,za.intersectionWith=Cg,za.invert=yh,za.invertBy=zh,za.invokeMap=Tg,za.iteratee=Qe,za.keyBy=Ug,za.keys=He,za.keysIn=Ie,za.map=de,za.mapKeys=function(a,b){var c={};return b=ud(b,3),zb(a,function(a,d,e){nb(c,b(a,d,e),a)}),c},za.mapValues=function(a,b){var c={};return b=ud(b,3),zb(a,function(a,d,e){nb(c,d,b(a,d,e))}),c},za.matches=function(a){return Zb(qb(a,1))},za.matchesProperty=function(a,b){return $b(a,qb(b,1))},za.memoize=je,
za.merge=Bh,za.mergeWith=Ch,za.method=Th,za.methodOf=Uh,za.mixin=Re,za.negate=ke,za.nthArg=function(a){return a=Ae(a),jc(function(b){return ac(b,a)})},za.omit=Dh,za.omitBy=function(a,b){return Je(a,ke(ud(b)))},za.once=function(a){return fe(2,a)},za.orderBy=function(a,b,c,d){return null==a?[]:(hh(b)||(b=null==b?[]:[b]),c=d?P:c,hh(c)||(c=null==c?[]:[c]),bc(a,b,c))},za.over=Vh,za.overArgs=ah,za.overEvery=Wh,za.overSome=Xh,za.partial=bh,za.partialRight=ch,za.partition=Vg,za.pick=Eh,za.pickBy=Je,za.property=Te,za.propertyOf=function(a){return function(b){return null==a?P:Cb(a,b)}},za.pull=Dg,za.pullAll=Wd,za.pullAllBy=function(a,b,c){return a&&a.length&&b&&b.length?fc(a,b,ud(c,2)):a},za.pullAllWith=function(a,b,c){return a&&a.length&&b&&b.length?fc(a,b,P,c):a},za.pullAt=Eg,za.range=Yh,za.rangeRight=Zh,za.rearg=dh,za.reject=function(a,b){return(hh(a)?h:xb)(a,ke(ud(b,3)))},za.remove=function(a,b){var c=[];if(!a||!a.length)return c;var d=-1,e=[],f=a.length;for(b=ud(b,3);++d<f;){var g=a[d];b(g,d,a)&&(c.push(g),e.push(d))}return gc(a,e),c},za.rest=function(a,b){if("function"!=typeof a)throw new cf("Expected a function");return b=b===P?b:Ae(b),jc(a,b)},za.reverse=Xd,za.sampleSize=function(a,b,c){return b=(c?Ed(a,b,c):b===P)?1:Ae(b),(hh(a)?ab:lc)(a,b)},za.set=function(a,b,c){return null==a?a:mc(a,b,c)},za.setWith=function(a,b,c,d){return d="function"==typeof d?d:P,null==a?a:mc(a,b,c,d)},za.shuffle=function(a){return(hh(a)?gb:nc)(a)},za.slice=function(a,b,c){var d=null==a?0:a.length;return d?(c&&"number"!=typeof c&&Ed(a,b,c)?(b=0,c=d):(b=null==b?0:Ae(b),c=c===P?d:Ae(c)),oc(a,b,c)):[]},za.sortBy=Wg,za.sortedUniq=function(a){return a&&a.length?sc(a):[]},za.sortedUniqBy=function(a,b){return a&&a.length?sc(a,ud(b,2)):[]},za.split=function(a,b,c){return c&&"number"!=typeof c&&Ed(a,b,c)&&(b=c=P),c=c===P?4294967295:c>>>0,c?(a=Ee(a))&&("string"==typeof b||null!=b&&!mh(b))&&(b=uc(b),!b&&Ga.test(a))?Ec(O(a),0,c):a.split(b,c):[]},za.spread=function(a,b){if("function"!=typeof a)throw new cf("Expected a function");return b=null==b?0:Lf(Ae(b),0),jc(function(d){var e=d[b];return d=Ec(d,0,b),e&&l(d,e),c(a,this,d)})},za.tail=function(a){var b=null==a?0:a.length;return b?oc(a,1,b):[]},za.take=function(a,b,c){return a&&a.length?(b=c||b===P?1:Ae(b),oc(a,0,0>b?0:b)):[]},za.takeRight=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===P?1:Ae(b),b=d-b,oc(a,0>b?0:b,d)):[]},za.takeRightWhile=function(a,b){return a&&a.length?xc(a,ud(b,3),!1,!0):[]},za.takeWhile=function(a,b){return a&&a.length?xc(a,ud(b,3)):[]},za.tap=function(a,b){return b(a),a},za.throttle=function(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new cf("Expected a function");return se(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),ie(a,b,{leading:d,maxWait:b,trailing:e})},za.thru=_d,za.toArray=ye,za.toPairs=Fh,za.toPairsIn=Gh,za.toPath=function(a){return hh(a)?k(a,Nd):xe(a)?[a]:Lc(wg(Ee(a)))},za.toPlainObject=De,za.transform=function(a,b,c){var d=hh(a),f=d||jh(a)||oh(a);if(b=ud(b,4),null==c){var g=a&&a.constructor;c=f?d?new g:[]:se(a)&&pe(g)?fg(tf(a)):{}}return(f?e:zb)(a,function(a,d,e){return b(c,a,d,e)}),c},za.unary=function(a){return ee(a,1)},za.union=Fg,za.unionBy=Gg,za.unionWith=Hg,za.uniq=function(a){return a&&a.length?vc(a):[]},za.uniqBy=function(a,b){return a&&a.length?vc(a,ud(b,2)):[]},za.uniqWith=function(a,b){return b="function"==typeof b?b:P,a&&a.length?vc(a,P,b):[]},za.unset=function(a,b){return null==a||wc(a,b)},za.unzip=Yd,za.unzipWith=Zd,za.update=function(a,b,c){return null==a?a:mc(a,b,Cc(c)(Cb(a,b)),void 0)},za.updateWith=function(a,b,c,d){return d="function"==typeof d?d:P,null!=a&&(a=mc(a,b,Cc(c)(Cb(a,b)),d)),a},za.values=Ke,za.valuesIn=function(a){return null==a?[]:D(a,Ie(a))},za.without=Ig,za.words=Ne,za.wrap=function(a,b){return bh(Cc(b),a)},za.xor=Jg,za.xorBy=Kg,za.xorWith=Lg,za.zip=Mg,za.zipObject=function(a,b){return Ac(a||[],b||[],ib)},za.zipObjectDeep=function(a,b){return Ac(a||[],b||[],mc)},za.zipWith=Ng,za.entries=Fh,za.entriesIn=Gh,za.extend=sh,za.extendWith=th,Re(za,za),za.add=$h,za.attempt=Ph,za.camelCase=Hh,za.capitalize=Le,za.ceil=_h,za.clamp=function(a,b,c){return c===P&&(c=b,b=P),c!==P&&(c=Ce(c),c=c===c?c:0),b!==P&&(b=Ce(b),b=b===b?b:0),pb(Ce(a),b,c)},za.clone=function(a){return qb(a,4)},za.cloneDeep=function(a){return qb(a,5)},za.cloneDeepWith=function(a,b){return b="function"==typeof b?b:P,qb(a,5,b)},za.cloneWith=function(a,b){return b="function"==typeof b?b:P,qb(a,4,b)},za.conformsTo=function(a,b){return null==b||sb(a,b,He(b))},za.deburr=Me,za.defaultTo=function(a,b){return null==a||a!==a?b:a},za.divide=ai,za.endsWith=function(a,b,c){a=Ee(a),b=uc(b);var d=a.length,d=c=c===P?d:pb(Ae(c),0,d);return c-=b.length,0<=c&&a.slice(c,d)==b},za.eq=le,za.escape=function(a){return(a=Ee(a))&&Z.test(a)?a.replace(X,cb):a},za.escapeRegExp=function(a){return(a=Ee(a))&&ga.test(a)?a.replace(fa,"\\$&"):a},za.every=function(a,b,c){var d=hh(a)?g:vb;return c&&Ed(a,b,c)&&(b=P),d(a,ud(b,3))},za.find=Qg,za.findIndex=Rd,za.findKey=function(a,b){return p(a,ud(b,3),zb)},za.findLast=Rg,za.findLastIndex=Sd,za.findLastKey=function(a,b){return p(a,ud(b,3),Ab)},za.floor=bi,za.forEach=be,za.forEachRight=ce,za.forIn=function(a,b){return null==a?a:ig(a,ud(b,3),Ie)},za.forInRight=function(a,b){return null==a?a:jg(a,ud(b,3),Ie)},za.forOwn=function(a,b){return a&&zb(a,ud(b,3))},za.forOwnRight=function(a,b){return a&&Ab(a,ud(b,3))},za.get=Fe,za.gt=eh,za.gte=fh,za.has=function(a,b){return null!=a&&yd(a,b,Gb)},za.hasIn=Ge,za.head=Ud,za.identity=Pe,za.includes=function(a,b,c,d){return a=me(a)?a:Ke(a),c=c&&!d?Ae(c):0,d=a.length,0>c&&(c=Lf(d+c,0)),we(a)?c<=d&&-1<a.indexOf(b,c):!!d&&-1<r(a,b,c)},za.indexOf=function(a,b,c){var d=null==a?0:a.length;return d?(c=null==c?0:Ae(c),0>c&&(c=Lf(d+c,0)),r(a,b,c)):-1},za.inRange=function(a,b,c){return b=ze(b),c===P?(c=b,b=0):c=ze(c),a=Ce(a),a>=Mf(b,c)&&a<Lf(b,c)},za.invoke=Ah,za.isArguments=gh,za.isArray=hh,za.isArrayBuffer=ih,za.isArrayLike=me,za.isArrayLikeObject=ne,za.isBoolean=function(a){return!0===a||!1===a||te(a)&&"[object Boolean]"==Eb(a)},za.isBuffer=jh,za.isDate=kh,za.isElement=function(a){return te(a)&&1===a.nodeType&&!ve(a)},za.isEmpty=function(a){if(null==a)return!0;if(me(a)&&(hh(a)||"string"==typeof a||"function"==typeof a.splice||jh(a)||oh(a)||gh(a)))return!a.length;var b=rg(a);if("[object Map]"==b||"[object Set]"==b)return!a.size;if(Hd(a))return!Wb(a).length;for(var c in a)if(hf.call(a,c))return!1;return!0},za.isEqual=function(a,b){return Ob(a,b)},za.isEqualWith=function(a,b,c){var d=(c="function"==typeof c?c:P)?c(a,b):P;return d===P?Ob(a,b,P,c):!!d},za.isError=oe,za.isFinite=function(a){return"number"==typeof a&&If(a)},za.isFunction=pe,za.isInteger=qe,za.isLength=re,za.isMap=lh,za.isMatch=function(a,b){return a===b||Qb(a,b,wd(b))},za.isMatchWith=function(a,b,c){return c="function"==typeof c?c:P,Qb(a,b,wd(b),c)},za.isNaN=function(a){return ue(a)&&a!=+a},za.isNative=function(a){if(sg(a))throw new Ye("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rb(a)},za.isNil=function(a){return null==a},za.isNull=function(a){return null===a},za.isNumber=ue,za.isObject=se,za.isObjectLike=te,za.isPlainObject=ve,za.isRegExp=mh,za.isSafeInteger=function(a){return qe(a)&&-9007199254740991<=a&&9007199254740991>=a},za.isSet=nh,za.isString=we,za.isSymbol=xe,za.isTypedArray=oh,za.isUndefined=function(a){return a===P},za.isWeakMap=function(a){return te(a)&&"[object WeakMap]"==rg(a)},za.isWeakSet=function(a){return te(a)&&"[object WeakSet]"==Eb(a)},za.join=function(a,b){return null==a?"":Jf.call(a,b)},za.kebabCase=Ih,za.last=Vd,za.lastIndexOf=function(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d;if(c!==P&&(e=Ae(c),e=0>e?Lf(d+e,0):Mf(e,d-1)),b===b){for(c=e+1;c--&&a[c]!==b;);a=c}else a=q(a,t,e,!0);return a},za.lowerCase=Jh,za.lowerFirst=Kh,za.lt=ph,za.lte=qh,za.max=function(a){return a&&a.length?wb(a,Pe,Fb):P},za.maxBy=function(a,b){return a&&a.length?wb(a,ud(b,2),Fb):P},za.mean=function(a){return u(a,Pe)},za.meanBy=function(a,b){return u(a,ud(b,2))},za.min=function(a){return a&&a.length?wb(a,Pe,Xb):P},za.minBy=function(a,b){return a&&a.length?wb(a,ud(b,2),Xb):P},za.stubArray=Ue,za.stubFalse=Ve,za.stubObject=function(){return{}},za.stubString=function(){return""},za.stubTrue=function(){return!0},za.multiply=ci,za.nth=function(a,b){return a&&a.length?ac(a,Ae(b)):P},za.noConflict=function(){return Ra._===this&&(Ra._=nf),this},za.noop=Se,za.now=Xg,za.pad=function(a,b,c){a=Ee(a);var d=(b=Ae(b))?N(a):0;return!b||d>=b?a:(b=(b-d)/2,cd(Ff(b),c)+a+cd(Ef(b),c))},za.padEnd=function(a,b,c){a=Ee(a);var d=(b=Ae(b))?N(a):0;return b&&d<b?a+cd(b-d,c):a},za.padStart=function(a,b,c){a=Ee(a);var d=(b=Ae(b))?N(a):0;return b&&d<b?cd(b-d,c)+a:a},za.parseInt=function(a,b,c){return c||null==b?b=0:b&&(b=+b),Of(Ee(a).replace(ia,""),b||0)},za.random=function(a,b,c){if(c&&"boolean"!=typeof c&&Ed(a,b,c)&&(b=c=P),c===P&&("boolean"==typeof b?(c=b,b=P):"boolean"==typeof a&&(c=a,a=P)),a===P&&b===P?(a=0,b=1):(a=ze(a),b===P?(b=a,a=0):b=ze(b)),a>b){var d=a;a=b,b=d}return c||a%1||b%1?(c=Pf(),Mf(a+c*(b-a+Na("1e-"+((c+"").length-1))),b)):hc(a,b)},za.reduce=function(a,b,c){var d=hh(a)?m:x,e=3>arguments.length;return d(a,ud(b,4),c,e,gg)},za.reduceRight=function(a,b,c){var d=hh(a)?n:x,e=3>arguments.length;return d(a,ud(b,4),c,e,hg)},za.repeat=function(a,b,c){return b=(c?Ed(a,b,c):b===P)?1:Ae(b),ic(Ee(a),b)},za.replace=function(){var a=arguments,b=Ee(a[0]);return 3>a.length?b:b.replace(a[1],a[2])},za.result=function(a,b,c){b=Dc(b,a);var d=-1,e=b.length;for(e||(e=1,a=P);++d<e;){var f=null==a?P:a[Nd(b[d])];f===P&&(d=e,f=c),a=pe(f)?f.call(a):f}return a},za.round=di,za.runInContext=fb,za.sample=function(a){return(hh(a)?Va:kc)(a)},za.size=function(a){if(null==a)return 0;if(me(a))return we(a)?N(a):a.length;var b=rg(a);return"[object Map]"==b||"[object Set]"==b?a.size:Wb(a).length},za.snakeCase=Lh,za.some=function(a,b,c){var d=hh(a)?o:pc;return c&&Ed(a,b,c)&&(b=P),d(a,ud(b,3))},za.sortedIndex=function(a,b){return qc(a,b)},za.sortedIndexBy=function(a,b,c){return rc(a,b,ud(c,2))},za.sortedIndexOf=function(a,b){var c=null==a?0:a.length;if(c){var d=qc(a,b);if(d<c&&le(a[d],b))return d}return-1},za.sortedLastIndex=function(a,b){return qc(a,b,!0)},za.sortedLastIndexBy=function(a,b,c){return rc(a,b,ud(c,2),!0)},za.sortedLastIndexOf=function(a,b){if(null==a?0:a.length){var c=qc(a,b,!0)-1;if(le(a[c],b))return c}return-1},za.startCase=Mh,za.startsWith=function(a,b,c){return a=Ee(a),c=null==c?0:pb(Ae(c),0,a.length),b=uc(b),a.slice(c,c+b.length)==b},za.subtract=ei,za.sum=function(a){return a&&a.length?z(a,Pe):0},za.sumBy=function(a,b){return a&&a.length?z(a,ud(b,2)):0},za.template=function(a,b,c){var d=za.templateSettings;c&&Ed(a,b,c)&&(b=P),a=Ee(a),b=th({},b,d,kd),c=th({},b.imports,d.imports,kd);var e,f,g=He(c),h=D(c,g),i=0;c=b.interpolate||xa;var j="__p+='";c=af((b.escape||xa).source+"|"+c.source+"|"+(c===aa?pa:xa).source+"|"+(b.evaluate||xa).source+"|$","g");var k="sourceURL"in b?"//# sourceURL="+b.sourceURL+"\n":"";if(a.replace(c,function(b,c,d,g,h,k){return d||(d=g),j+=a.slice(i,k).replace(ya,H),c&&(e=!0,j+="'+__e("+c+")+'"),h&&(f=!0,j+="';"+h+";\n__p+='"),d&&(j+="'+((__t=("+d+"))==null?'':__t)+'"),i=k+b.length,b}),j+="';",(b=b.variable)||(j="with(obj){"+j+"}"),j=(f?j.replace(T,""):j).replace(U,"$1").replace(V,"$1;"),j="function("+(b||"obj")+"){"+(b?"":"obj||(obj={});")+"var __t,__p=''"+(e?",__e=_.escape":"")+(f?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+j+"return __p}",b=Ph(function(){return Ze(g,k+"return "+j).apply(P,h)}),b.source=j,oe(b))throw b;return b},za.times=function(a,b){if(a=Ae(a),1>a||9007199254740991<a)return[];var c=4294967295,d=Mf(a,4294967295);for(b=ud(b),a-=4294967295,d=A(d,b);++c<a;)b(c);return d},za.toFinite=ze,za.toInteger=Ae,za.toLength=Be,za.toLower=function(a){return Ee(a).toLowerCase()},za.toNumber=Ce,za.toSafeInteger=function(a){return a?pb(Ae(a),-9007199254740991,9007199254740991):0===a?a:0},za.toString=Ee,za.toUpper=function(a){return Ee(a).toUpperCase()},za.trim=function(a,b,c){return(a=Ee(a))&&(c||b===P)?a.replace(ha,""):a&&(b=uc(b))?(a=O(a),c=O(b),b=F(a,c),c=G(a,c)+1,Ec(a,b,c).join("")):a},za.trimEnd=function(a,b,c){return(a=Ee(a))&&(c||b===P)?a.replace(ja,""):a&&(b=uc(b))?(a=O(a),b=G(a,O(b))+1,Ec(a,0,b).join("")):a},za.trimStart=function(a,b,c){return(a=Ee(a))&&(c||b===P)?a.replace(ia,""):a&&(b=uc(b))?(a=O(a),b=F(a,O(b)),Ec(a,b).join("")):a},za.truncate=function(a,b){var c=30,d="...";if(se(b))var e="separator"in b?b.separator:e,c="length"in b?Ae(b.length):c,d="omission"in b?uc(b.omission):d;a=Ee(a);var f=a.length;if(Ga.test(a))var g=O(a),f=g.length;if(c>=f)return a;if(f=c-N(d),1>f)return d;if(c=g?Ec(g,0,f).join(""):a.slice(0,f),e===P)return c+d;if(g&&(f+=c.length-f),mh(e)){if(a.slice(f).search(e)){var h=c;for(e.global||(e=af(e.source,Ee(qa.exec(e))+"g")),e.lastIndex=0;g=e.exec(h);)var i=g.index;c=c.slice(0,i===P?f:i)}}else a.indexOf(uc(e),f)!=f&&(e=c.lastIndexOf(e),-1<e&&(c=c.slice(0,e)));return c+d},za.unescape=function(a){return(a=Ee(a))&&Y.test(a)?a.replace(W,db):a},za.uniqueId=function(a){var b=++jf;return Ee(a)+b},za.upperCase=Nh,za.upperFirst=Oh,za.each=be,za.eachRight=ce,za.first=Ud,Re(za,function(){var a={};return zb(za,function(b,c){hf.call(za.prototype,c)||(a[c]=b)}),a}(),{chain:!1}),za.VERSION="4.17.4",e("bind bindKey curry curryRight partial partialRight".split(" "),function(a){za[a].placeholder=za}),e(["drop","take"],function(a,b){Ea.prototype[a]=function(c){c=c===P?1:Lf(Ae(c),0);var d=this.__filtered__&&!b?new Ea(this):this.clone();return d.__filtered__?d.__takeCount__=Mf(c,d.__takeCount__):d.__views__.push({size:Mf(c,4294967295),type:a+(0>d.__dir__?"Right":"")}),d},Ea.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),e(["filter","map","takeWhile"],function(a,b){var c=b+1,d=1==c||3==c;Ea.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:ud(a,3),type:c}),b.__filtered__=b.__filtered__||d,b}}),e(["head","last"],function(a,b){var c="take"+(b?"Right":"");Ea.prototype[a]=function(){return this[c](1).value()[0]}}),e(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");Ea.prototype[a]=function(){return this.__filtered__?new Ea(this):this[c](1)}}),Ea.prototype.compact=function(){return this.filter(Pe)},Ea.prototype.find=function(a){return this.filter(a).head()},Ea.prototype.findLast=function(a){return this.reverse().find(a)},Ea.prototype.invokeMap=jc(function(a,b){return"function"==typeof a?new Ea(this):this.map(function(c){return Kb(c,a,b)})}),Ea.prototype.reject=function(a){return this.filter(ke(ud(a)))},Ea.prototype.slice=function(a,b){a=Ae(a);var c=this;return c.__filtered__&&(0<a||0>b)?new Ea(c):(0>a?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==P&&(b=Ae(b),c=0>b?c.dropRight(-b):c.take(b-a)),c)},Ea.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ea.prototype.toArray=function(){return this.take(4294967295)},zb(Ea.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=za[d?"take"+("last"==b?"Right":""):b],f=d||/^find/.test(b);e&&(za.prototype[b]=function(){function b(a){return a=e.apply(za,l([a],h)),d&&m?a[0]:a}var g=this.__wrapped__,h=d?[1]:arguments,i=g instanceof Ea,j=h[0],k=i||hh(g);k&&c&&"function"==typeof j&&1!=j.length&&(i=k=!1);var m=this.__chain__,n=!!this.__actions__.length,j=f&&!m,i=i&&!n;return!f&&k?(g=i?g:new Ea(this),g=a.apply(g,h),g.__actions__.push({func:_d,args:[b],thisArg:P}),new Ba(g,m)):j&&i?a.apply(this,h):(g=this.thru(b),j?d?g.value()[0]:g.value():g)})}),e("pop push shift sort splice unshift".split(" "),function(a){var b=df[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);za.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(hh(e)?e:[],a)}return this[c](function(c){return b.apply(hh(c)?c:[],a)})}}),zb(Ea.prototype,function(a,b){var c=za[b];if(c){var d=c.name+"";(Yf[d]||(Yf[d]=[])).push({name:b,func:c})}}),Yf[$c(P,2).name]=[{name:"wrapper",func:P}],Ea.prototype.clone=function(){var a=new Ea(this.__wrapped__);return a.__actions__=Lc(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Lc(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Lc(this.__views__),a},Ea.prototype.reverse=function(){if(this.__filtered__){var a=new Ea(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a},Ea.prototype.value=function(){var a,b=this.__wrapped__.value(),c=this.__dir__,d=hh(b),e=0>c,f=d?b.length:0;a=f;for(var g=this.__views__,h=0,i=-1,j=g.length;++i<j;){var k=g[i],l=k.size;switch(k.type){case"drop":h+=l;break;case"dropRight":a-=l;break;case"take":a=Mf(a,h+l);break;case"takeRight":h=Lf(h,a-l)}}if(a={start:h,end:a},g=a.start,h=a.end,a=h-g,g=e?h:g-1,h=this.__iteratees__,i=h.length,j=0,k=Mf(a,this.__takeCount__),!d||!e&&f==a&&k==a)return yc(b,this.__actions__);d=[];a:for(;a--&&j<k;){for(g+=c,e=-1,f=b[g];++e<i;){var m=h[e],l=m.type,m=(0,m.iteratee)(f);if(2==l)f=m;else if(!m){if(1==l)continue a;break a}}d[j++]=f}return d},za.prototype.at=Og,za.prototype.chain=function(){return $d(this)},za.prototype.commit=function(){return new Ba(this.value(),this.__chain__)},za.prototype.next=function(){this.__values__===P&&(this.__values__=ye(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?P:this.__values__[this.__index__++]}},za.prototype.plant=function(a){for(var b,c=this;c instanceof Aa;){var d=Qd(c);d.__index__=0,d.__values__=P,b?e.__wrapped__=d:b=d;var e=d,c=c.__wrapped__}return e.__wrapped__=a,b},za.prototype.reverse=function(){var a=this.__wrapped__;return a instanceof Ea?(this.__actions__.length&&(a=new Ea(this)),a=a.reverse(),a.__actions__.push({func:_d,args:[Xd],thisArg:P}),new Ba(a,this.__chain__)):this.thru(Xd)},za.prototype.toJSON=za.prototype.valueOf=za.prototype.value=function(){return yc(this.__wrapped__,this.__actions__)},za.prototype.first=za.prototype.head,yf&&(za.prototype[yf]=ae),za}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ra._=eb,define(function(){return eb})):Ta?((Ta.exports=eb)._=eb,Sa._=eb):Ra._=eb}.call(this),!function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";angular.module("betfair.lodash",[]).constant("BF.Lodash",window._)},{}]},{},[1]),!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Rx=a()}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("rxjs/Observable").Observable,e=a("rxjs/Subject").Subject,f=a("rxjs/ReplaySubject").ReplaySubject;a("rxjs/add/observable/of"),a("rxjs/add/observable/from"),a("rxjs/add/observable/fromEvent"),a("rxjs/add/observable/fromPromise"),a("rxjs/add/observable/combineLatest"),a("rxjs/add/observable/merge"),a("rxjs/add/observable/interval"),a("rxjs/add/observable/timer"),a("rxjs/add/observable/throw"),a("rxjs/add/observable/empty"),a("rxjs/add/observable/defer"),a("rxjs/add/observable/race"),a("rxjs/add/operator/combineLatest"),a("rxjs/add/operator/withLatestFrom"),a("rxjs/add/operator/concat"),a("rxjs/add/operator/startWith"),a("rxjs/add/operator/merge"),a("rxjs/add/operator/repeat"),a("rxjs/add/operator/repeatWhen"),a("rxjs/add/operator/mergeMap"),a("rxjs/add/operator/switchMap"),a("rxjs/add/operator/scan"),a("rxjs/add/operator/take"),a("rxjs/add/operator/takeUntil"),a("rxjs/add/operator/takeWhile"),a("rxjs/add/operator/first"),a("rxjs/add/operator/skip"),a("rxjs/add/operator/skipWhile"),a("rxjs/add/operator/pluck"),a("rxjs/add/operator/map"),a("rxjs/add/operator/mapTo"),a("rxjs/add/operator/filter"),a("rxjs/add/operator/distinctUntilChanged"),a("rxjs/add/operator/multicast"),a("rxjs/add/operator/share"),a("rxjs/add/operator/shareReplay"),a("rxjs/add/operator/catch"),a("rxjs/add/operator/finally"),a("rxjs/add/operator/retry"),a("rxjs/add/operator/retryWhen"),a("rxjs/add/operator/debounceTime"),a("rxjs/add/operator/throttleTime"),a("rxjs/add/operator/delay"),a("rxjs/add/operator/do");var g={Observable:d,Subject:e,ReplaySubject:f};angular.module("betfair.rxjs",[]).constant("$rx",g),b.exports=g},{"rxjs/Observable":4,"rxjs/ReplaySubject":7,"rxjs/Subject":9,"rxjs/add/observable/combineLatest":13,"rxjs/add/observable/defer":14,"rxjs/add/observable/empty":15,"rxjs/add/observable/from":16,"rxjs/add/observable/fromEvent":17,"rxjs/add/observable/fromPromise":18,"rxjs/add/observable/interval":19,"rxjs/add/observable/merge":20,"rxjs/add/observable/of":21,"rxjs/add/observable/race":22,"rxjs/add/observable/throw":23,"rxjs/add/observable/timer":24,"rxjs/add/operator/catch":25,"rxjs/add/operator/combineLatest":26,"rxjs/add/operator/concat":27,"rxjs/add/operator/debounceTime":28,"rxjs/add/operator/delay":29,"rxjs/add/operator/distinctUntilChanged":30,"rxjs/add/operator/do":31,"rxjs/add/operator/filter":32,"rxjs/add/operator/finally":33,"rxjs/add/operator/first":34,"rxjs/add/operator/map":35,"rxjs/add/operator/mapTo":36,"rxjs/add/operator/merge":37,"rxjs/add/operator/mergeMap":38,"rxjs/add/operator/multicast":39,"rxjs/add/operator/pluck":40,"rxjs/add/operator/repeat":41,"rxjs/add/operator/repeatWhen":42,"rxjs/add/operator/retry":43,"rxjs/add/operator/retryWhen":44,"rxjs/add/operator/scan":45,"rxjs/add/operator/share":46,"rxjs/add/operator/shareReplay":47,"rxjs/add/operator/skip":48,"rxjs/add/operator/skipWhile":49,"rxjs/add/operator/startWith":50,"rxjs/add/operator/switchMap":51,"rxjs/add/operator/take":52,"rxjs/add/operator/takeUntil":53,"rxjs/add/operator/takeWhile":54,"rxjs/add/operator/throttleTime":55,"rxjs/add/operator/withLatestFrom":56}],2:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(b,c,d){a.call(this),this.parent=b,this.outerValue=c,this.outerIndex=d,this.index=0}return d(b,a),b.prototype._next=function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)},b.prototype._error=function(a){this.parent.notifyError(a,this),this.unsubscribe()},b.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},b}(a("./Subscriber").Subscriber);c.InnerSubscriber=e},{"./Subscriber":11}],3:[function(a,b,c){"use strict";var d=a("./Observable"),e=function(){function a(a,b,c){this.kind=a,this.value=b,this.error=c,this.hasValue="N"===a}return a.prototype.observe=function(a){switch(this.kind){case"N":return a.next&&a.next(this.value);case"E":return a.error&&a.error(this.error);case"C":return a.complete&&a.complete()}},a.prototype["do"]=function(a,b,c){switch(this.kind){case"N":return a&&a(this.value);case"E":return b&&b(this.error);case"C":return c&&c()}},a.prototype.accept=function(a,b,c){return a&&"function"==typeof a.next?this.observe(a):this["do"](a,b,c)},a.prototype.toObservable=function(){switch(this.kind){case"N":return d.Observable.of(this.value);case"E":return d.Observable["throw"](this.error);case"C":return d.Observable.empty()}throw new Error("unexpected notification kind value")},a.createNext=function(b){return void 0!==b?new a("N",b):a.undefinedValueNotification},a.createError=function(b){return new a("E",(void 0),b)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",(void 0)),a}();c.Notification=e},{"./Observable":4}],4:[function(a,b,c){"use strict";var d=a("./util/root"),e=a("./util/toSubscriber"),f=a("./symbol/observable"),g=a("./util/pipe"),h=function(){function a(a){this._isScalar=!1,a&&(this._subscribe=a)}return a.prototype.lift=function(b){var c=new a;return c.source=this,c.operator=b,c},a.prototype.subscribe=function(a,b,c){var d=this.operator,f=e.toSubscriber(a,b,c);if(d?d.call(f,this.source):f.add(this.source?this._subscribe(f):this._trySubscribe(f)),f.syncErrorThrowable&&(f.syncErrorThrowable=!1,f.syncErrorThrown))throw f.syncErrorValue;return f},a.prototype._trySubscribe=function(a){try{return this._subscribe(a)}catch(b){a.syncErrorThrown=!0,a.syncErrorValue=b,a.error(b)}},a.prototype.forEach=function(a,b){var c=this;if(b||(d.root.Rx&&d.root.Rx.config&&d.root.Rx.config.Promise?b=d.root.Rx.config.Promise:d.root.Promise&&(b=d.root.Promise)),!b)throw new Error("no Promise impl found");return new b(function(a,b){var d;d=c.subscribe(function(a){if(d)try{c(a)}catch(c){b(c),d.unsubscribe()}else c(a)},b,a)})},a.prototype._subscribe=function(a){return this.source.subscribe(a)},a.prototype[f.observable]=function(){return this},a.prototype.pipe=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return 0===a.length?this:g.pipeFromArray(a)(this)},a.prototype.toPromise=function(a){var b=this;if(a||(d.root.Rx&&d.root.Rx.config&&d.root.Rx.config.Promise?a=d.root.Rx.config.Promise:d.root.Promise&&(a=d.root.Promise)),!a)throw new Error("no Promise impl found");return new a(function(a,c){var d;b.subscribe(function(a){return d=a},function(a){return c(a)},function(){return a(d)})})},a.create=function(b){return new a(b)},a}();c.Observable=h},{"./symbol/observable":160,"./util/pipe":177,"./util/root":178,"./util/toSubscriber":180}],5:[function(a,b,c){"use strict";c.empty={closed:!0,next:function(a){},error:function(a){throw a},complete:function(){}}},{}],6:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(){a.apply(this,arguments)}return d(b,a),b.prototype.notifyNext=function(a,b,c,d,e){this.destination.next(b)},b.prototype.notifyError=function(a,b){this.destination.error(a)},b.prototype.notifyComplete=function(a){this.destination.complete()},b}(a("./Subscriber").Subscriber);c.OuterSubscriber=e},{"./Subscriber":11}],7:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("./Subject"),f=a("./scheduler/queue"),g=a("./Subscription"),h=a("./operators/observeOn"),i=a("./util/ObjectUnsubscribedError"),j=a("./SubjectSubscription"),k=function(a){function b(b,c,d){void 0===b&&(b=Number.POSITIVE_INFINITY),void 0===c&&(c=Number.POSITIVE_INFINITY),a.call(this),this.scheduler=d,this._events=[],this._bufferSize=b<1?1:b,this._windowTime=c<1?1:c}return d(b,a),b.prototype.next=function(b){var c=this._getNow();this._events.push(new l(c,b)),this._trimBufferThenGetEvents(),a.prototype.next.call(this,b)},b.prototype._subscribe=function(a){var b,c=this._trimBufferThenGetEvents(),d=this.scheduler;if(this.closed)throw new i.ObjectUnsubscribedError;this.hasError?b=g.Subscription.EMPTY:this.isStopped?b=g.Subscription.EMPTY:(this.observers.push(a),b=new j.SubjectSubscription(this,a)),d&&a.add(a=new h.ObserveOnSubscriber(a,d));for(var e=c.length,f=0;f<e&&!a.closed;f++)a.next(c[f].value);return this.hasError?a.error(this.thrownError):this.isStopped&&a.complete(),b},b.prototype._getNow=function(){return(this.scheduler||f.queue).now()},b.prototype._trimBufferThenGetEvents=function(){for(var a=this._getNow(),b=this._bufferSize,c=this._windowTime,d=this._events,e=d.length,f=0;f<e&&!(a-d[f].time<c);)f++;return e>b&&(f=Math.max(f,e-b)),f>0&&d.splice(0,f),d},b}(e.Subject);c.ReplaySubject=k;var l=function(){return function(a,b){this.time=a,this.value=b}}()},{"./Subject":9,"./SubjectSubscription":10,"./Subscription":12,"./operators/observeOn":131,"./scheduler/queue":158,"./util/ObjectUnsubscribedError":164}],8:[function(a,b,c){"use strict";var d=function(){function a(b,c){void 0===c&&(c=a.now),this.SchedulerAction=b,this.now=c}return a.prototype.schedule=function(a,b,c){return void 0===b&&(b=0),new this.SchedulerAction(this,a).schedule(c,b)},a.now=Date.now?Date.now:function(){return+new Date},a}();c.Scheduler=d},{}],9:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("./Observable"),f=a("./Subscriber"),g=a("./Subscription"),h=a("./util/ObjectUnsubscribedError"),i=a("./SubjectSubscription"),j=a("./symbol/rxSubscriber"),k=function(a){function b(b){a.call(this,b),this.destination=b}return d(b,a),b}(f.Subscriber);c.SubjectSubscriber=k;var l=function(a){function b(){a.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return d(b,a),b.prototype[j.rxSubscriber]=function(){return new k(this)},b.prototype.lift=function(a){var b=new m(this,this);return b.operator=a,b},b.prototype.next=function(a){if(this.closed)throw new h.ObjectUnsubscribedError;if(!this.isStopped)for(var b=this.observers,c=b.length,d=b.slice(),e=0;e<c;e++)d[e].next(a)},b.prototype.error=function(a){if(this.closed)throw new h.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=a,this.isStopped=!0;for(var b=this.observers,c=b.length,d=b.slice(),e=0;e<c;e++)d[e].error(a);this.observers.length=0},b.prototype.complete=function(){if(this.closed)throw new h.ObjectUnsubscribedError;this.isStopped=!0;for(var a=this.observers,b=a.length,c=a.slice(),d=0;d<b;d++)c[d].complete();this.observers.length=0},b.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},b.prototype._trySubscribe=function(b){if(this.closed)throw new h.ObjectUnsubscribedError;return a.prototype._trySubscribe.call(this,b)},b.prototype._subscribe=function(a){if(this.closed)throw new h.ObjectUnsubscribedError;return this.hasError?(a.error(this.thrownError),g.Subscription.EMPTY):this.isStopped?(a.complete(),g.Subscription.EMPTY):(this.observers.push(a),new i.SubjectSubscription(this,a))},b.prototype.asObservable=function(){var a=new e.Observable;return a.source=this,a},b.create=function(a,b){return new m(a,b)},b}(e.Observable);c.Subject=l;var m=function(a){function b(b,c){a.call(this),this.destination=b,this.source=c}return d(b,a),b.prototype.next=function(a){var b=this.destination;b&&b.next&&b.next(a)},b.prototype.error=function(a){var b=this.destination;b&&b.error&&this.destination.error(a)},b.prototype.complete=function(){var a=this.destination;a&&a.complete&&this.destination.complete()},b.prototype._subscribe=function(a){return this.source?this.source.subscribe(a):g.Subscription.EMPTY},b}(l);c.AnonymousSubject=m},{"./Observable":4,"./SubjectSubscription":10,"./Subscriber":11,"./Subscription":12,"./symbol/rxSubscriber":161,"./util/ObjectUnsubscribedError":164}],10:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(b,c){a.call(this),this.subject=b,this.subscriber=c,this.closed=!1}return d(b,a),b.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var a=this.subject,b=a.observers;if(this.subject=null,
b&&0!==b.length&&!a.isStopped&&!a.closed){var c=b.indexOf(this.subscriber);-1!==c&&b.splice(c,1)}}},b}(a("./Subscription").Subscription);c.SubjectSubscription=e},{"./Subscription":12}],11:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("./util/isFunction"),f=a("./Subscription"),g=a("./Observer"),h=a("./symbol/rxSubscriber"),i=function(a){function b(c,d,e){switch(a.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=g.empty;break;case 1:if(!c){this.destination=g.empty;break}if("object"==typeof c){c instanceof b?(this.destination=c,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new j(this,c));break}default:this.syncErrorThrowable=!0,this.destination=new j(this,c,d,e)}}return d(b,a),b.prototype[h.rxSubscriber]=function(){return this},b.create=function(a,c,d){var e=new b(a,c,d);return e.syncErrorThrowable=!1,e},b.prototype.next=function(a){this.isStopped||this._next(a)},b.prototype.error=function(a){this.isStopped||(this.isStopped=!0,this._error(a))},b.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},b.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))},b.prototype._next=function(a){this.destination.next(a)},b.prototype._error=function(a){this.destination.error(a),this.unsubscribe()},b.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},b.prototype._unsubscribeAndRecycle=function(){var a=this._parent,b=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=a,this._parents=b,this},b}(f.Subscription);c.Subscriber=i;var j=function(a){function b(b,c,d,f){a.call(this),this._parentSubscriber=b;var h,i=this;e.isFunction(c)?h=c:c&&(h=c.next,d=c.error,f=c.complete,c!==g.empty&&(i=Object.create(c),e.isFunction(i.unsubscribe)&&this.add(i.unsubscribe.bind(i)),i.unsubscribe=this.unsubscribe.bind(this))),this._context=i,this._next=h,this._error=d,this._complete=f}return d(b,a),b.prototype.next=function(a){if(!this.isStopped&&this._next){var b=this._parentSubscriber;b.syncErrorThrowable?this.__tryOrSetError(b,this._next,a)&&this.unsubscribe():this.__tryOrUnsub(this._next,a)}},b.prototype.error=function(a){if(!this.isStopped){var b=this._parentSubscriber;if(this._error)b.syncErrorThrowable?(this.__tryOrSetError(b,this._error,a),this.unsubscribe()):(this.__tryOrUnsub(this._error,a),this.unsubscribe());else{if(!b.syncErrorThrowable)throw this.unsubscribe(),a;b.syncErrorValue=a,b.syncErrorThrown=!0,this.unsubscribe()}}},b.prototype.complete=function(){var a=this;if(!this.isStopped){var b=this._parentSubscriber;if(this._complete){var c=function(){return a._complete.call(a._context)};b.syncErrorThrowable?(this.__tryOrSetError(b,c),this.unsubscribe()):(this.__tryOrUnsub(c),this.unsubscribe())}else this.unsubscribe()}},b.prototype.__tryOrUnsub=function(a,b){try{a.call(this._context,b)}catch(a){throw this.unsubscribe(),a}},b.prototype.__tryOrSetError=function(a,b,c){try{b.call(this._context,c)}catch(b){return a.syncErrorValue=b,a.syncErrorThrown=!0,!0}return!1},b.prototype._unsubscribe=function(){var a=this._parentSubscriber;this._context=null,this._parentSubscriber=null,a.unsubscribe()},b}(i)},{"./Observer":5,"./Subscription":12,"./symbol/rxSubscriber":161,"./util/isFunction":171}],12:[function(a,b,c){"use strict";function d(a){return a.reduce(function(a,b){return a.concat(b instanceof j.UnsubscriptionError?b.errors:b)},[])}var e=a("./util/isArray"),f=a("./util/isObject"),g=a("./util/isFunction"),h=a("./util/tryCatch"),i=a("./util/errorObject"),j=a("./util/UnsubscriptionError"),k=function(){function a(a){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,a&&(this._unsubscribe=a)}return a.prototype.unsubscribe=function(){var a,b=!1;if(!this.closed){var c=this._parent,k=this._parents,l=this._unsubscribe,m=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var n=-1,o=k?k.length:0;c;)c.remove(this),c=++n<o&&k[n]||null;if(g.isFunction(l)&&h.tryCatch(l).call(this)===i.errorObject&&(b=!0,a=a||(i.errorObject.e instanceof j.UnsubscriptionError?d(i.errorObject.e.errors):[i.errorObject.e])),e.isArray(m))for(n=-1,o=m.length;++n<o;){var p=m[n];if(f.isObject(p)&&h.tryCatch(p.unsubscribe).call(p)===i.errorObject){b=!0,a=a||[];var q=i.errorObject.e;q instanceof j.UnsubscriptionError?a=a.concat(d(q.errors)):a.push(q)}}if(b)throw new j.UnsubscriptionError(a)}},a.prototype.add=function(b){if(!b||b===a.EMPTY)return a.EMPTY;if(b===this)return this;var c=b;switch(typeof b){case"function":c=new a(b);case"object":if(c.closed||"function"!=typeof c.unsubscribe)return c;if(this.closed)return c.unsubscribe(),c;if("function"!=typeof c._addParent){var d=c;(c=new a)._subscriptions=[d]}break;default:throw new Error("unrecognized teardown "+b+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(c),c._addParent(this),c},a.prototype.remove=function(a){var b=this._subscriptions;if(b){var c=b.indexOf(a);-1!==c&&b.splice(c,1)}},a.prototype._addParent=function(a){var b=this._parent,c=this._parents;b&&b!==a?c?-1===c.indexOf(a)&&c.push(a):this._parents=[a]:this._parent=a},a.EMPTY=function(a){return a.closed=!0,a}(new a),a}();c.Subscription=k},{"./util/UnsubscriptionError":165,"./util/errorObject":166,"./util/isArray":168,"./util/isFunction":171,"./util/isObject":173,"./util/tryCatch":181}],13:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/combineLatest");d.Observable.combineLatest=e.combineLatest},{"../../Observable":4,"../../observable/combineLatest":70}],14:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/defer");d.Observable.defer=e.defer},{"../../Observable":4,"../../observable/defer":72}],15:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/empty");d.Observable.empty=e.empty},{"../../Observable":4,"../../observable/empty":73}],16:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/from");d.Observable.from=e.from},{"../../Observable":4,"../../observable/from":74}],17:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/fromEvent");d.Observable.fromEvent=e.fromEvent},{"../../Observable":4,"../../observable/fromEvent":75}],18:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/fromPromise");d.Observable.fromPromise=e.fromPromise},{"../../Observable":4,"../../observable/fromPromise":76}],19:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/interval");d.Observable.interval=e.interval},{"../../Observable":4,"../../observable/interval":77}],20:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/merge");d.Observable.merge=e.merge},{"../../Observable":4,"../../observable/merge":78}],21:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/of");d.Observable.of=e.of},{"../../Observable":4,"../../observable/of":79}],22:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/race");d.Observable.race=e.race},{"../../Observable":4,"../../observable/race":80}],23:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/throw");d.Observable["throw"]=e._throw},{"../../Observable":4,"../../observable/throw":81}],24:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../observable/timer");d.Observable.timer=e.timer},{"../../Observable":4,"../../observable/timer":82}],25:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/catch");d.Observable.prototype["catch"]=e._catch,d.Observable.prototype._catch=e._catch},{"../../Observable":4,"../../operator/catch":83}],26:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/combineLatest");d.Observable.prototype.combineLatest=e.combineLatest},{"../../Observable":4,"../../operator/combineLatest":84}],27:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/concat");d.Observable.prototype.concat=e.concat},{"../../Observable":4,"../../operator/concat":85}],28:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/debounceTime");d.Observable.prototype.debounceTime=e.debounceTime},{"../../Observable":4,"../../operator/debounceTime":86}],29:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/delay");d.Observable.prototype.delay=e.delay},{"../../Observable":4,"../../operator/delay":87}],30:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/distinctUntilChanged");d.Observable.prototype.distinctUntilChanged=e.distinctUntilChanged},{"../../Observable":4,"../../operator/distinctUntilChanged":88}],31:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/do");d.Observable.prototype["do"]=e._do,d.Observable.prototype._do=e._do},{"../../Observable":4,"../../operator/do":89}],32:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/filter");d.Observable.prototype.filter=e.filter},{"../../Observable":4,"../../operator/filter":90}],33:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/finally");d.Observable.prototype["finally"]=e._finally,d.Observable.prototype._finally=e._finally},{"../../Observable":4,"../../operator/finally":91}],34:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/first");d.Observable.prototype.first=e.first},{"../../Observable":4,"../../operator/first":92}],35:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/map");d.Observable.prototype.map=e.map},{"../../Observable":4,"../../operator/map":93}],36:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/mapTo");d.Observable.prototype.mapTo=e.mapTo},{"../../Observable":4,"../../operator/mapTo":94}],37:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/merge");d.Observable.prototype.merge=e.merge},{"../../Observable":4,"../../operator/merge":95}],38:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/mergeMap");d.Observable.prototype.mergeMap=e.mergeMap,d.Observable.prototype.flatMap=e.mergeMap},{"../../Observable":4,"../../operator/mergeMap":96}],39:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/multicast");d.Observable.prototype.multicast=e.multicast},{"../../Observable":4,"../../operator/multicast":97}],40:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/pluck");d.Observable.prototype.pluck=e.pluck},{"../../Observable":4,"../../operator/pluck":98}],41:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/repeat");d.Observable.prototype.repeat=e.repeat},{"../../Observable":4,"../../operator/repeat":99}],42:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/repeatWhen");d.Observable.prototype.repeatWhen=e.repeatWhen},{"../../Observable":4,"../../operator/repeatWhen":100}],43:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/retry");d.Observable.prototype.retry=e.retry},{"../../Observable":4,"../../operator/retry":101}],44:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/retryWhen");d.Observable.prototype.retryWhen=e.retryWhen},{"../../Observable":4,"../../operator/retryWhen":102}],45:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/scan");d.Observable.prototype.scan=e.scan},{"../../Observable":4,"../../operator/scan":103}],46:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/share");d.Observable.prototype.share=e.share},{"../../Observable":4,"../../operator/share":104}],47:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/shareReplay");d.Observable.prototype.shareReplay=e.shareReplay},{"../../Observable":4,"../../operator/shareReplay":105}],48:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/skip");d.Observable.prototype.skip=e.skip},{"../../Observable":4,"../../operator/skip":106}],49:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/skipWhile");d.Observable.prototype.skipWhile=e.skipWhile},{"../../Observable":4,"../../operator/skipWhile":107}],50:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/startWith");d.Observable.prototype.startWith=e.startWith},{"../../Observable":4,"../../operator/startWith":108}],51:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/switchMap");d.Observable.prototype.switchMap=e.switchMap},{"../../Observable":4,"../../operator/switchMap":109}],52:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/take");d.Observable.prototype.take=e.take},{"../../Observable":4,"../../operator/take":110}],53:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/takeUntil");d.Observable.prototype.takeUntil=e.takeUntil},{"../../Observable":4,"../../operator/takeUntil":111}],54:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/takeWhile");d.Observable.prototype.takeWhile=e.takeWhile},{"../../Observable":4,"../../operator/takeWhile":112}],55:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/throttleTime");d.Observable.prototype.throttleTime=e.throttleTime},{"../../Observable":4,"../../operator/throttleTime":113}],56:[function(a,b,c){"use strict";var d=a("../../Observable"),e=a("../../operator/withLatestFrom");d.Observable.prototype.withLatestFrom=e.withLatestFrom},{"../../Observable":4,"../../operator/withLatestFrom":114}],57:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Observable"),f=a("./ScalarObservable"),g=a("./EmptyObservable"),h=function(a){function b(b,c){a.call(this),this.arrayLike=b,this.scheduler=c,c||1!==b.length||(this._isScalar=!0,this.value=b[0])}return d(b,a),b.create=function(a,c){var d=a.length;return 0===d?new g.EmptyObservable:1===d?new f.ScalarObservable(a[0],c):new b(a,c)},b.dispatch=function(a){var b=a.arrayLike,c=a.index,d=a.length,e=a.subscriber;e.closed||(c>=d?e.complete():(e.next(b[c]),a.index=c+1,this.schedule(a)))},b.prototype._subscribe=function(a){var c=this.arrayLike,d=this.scheduler,e=c.length;if(d)return d.schedule(b.dispatch,0,{arrayLike:c,index:0,length:e,subscriber:a});for(var f=0;f<e&&!a.closed;f++)a.next(c[f]);a.complete()},b}(e.Observable);c.ArrayLikeObservable=h},{"../Observable":4,"./EmptyObservable":61,"./ScalarObservable":68}],58:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Observable"),f=a("./ScalarObservable"),g=a("./EmptyObservable"),h=a("../util/isScheduler"),i=function(a){function b(b,c){a.call(this),this.array=b,this.scheduler=c,c||1!==b.length||(this._isScalar=!0,this.value=b[0])}return d(b,a),b.create=function(a,c){return new b(a,c)},b.of=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var d=a[a.length-1];h.isScheduler(d)?a.pop():d=null;var e=a.length;return e>1?new b(a,d):1===e?new f.ScalarObservable(a[0],d):new g.EmptyObservable(d)},b.dispatch=function(a){var b=a.array,c=a.index,d=a.count,e=a.subscriber;c>=d?e.complete():(e.next(b[c]),e.closed||(a.index=c+1,this.schedule(a)))},b.prototype._subscribe=function(a){var c=this.array,d=c.length,e=this.scheduler;if(e)return e.schedule(b.dispatch,0,{array:c,index:0,count:d,subscriber:a});for(var f=0;f<d&&!a.closed;f++)a.next(c[f]);a.complete()},b}(e.Observable);c.ArrayObservable=i},{"../Observable":4,"../util/isScheduler":175,"./EmptyObservable":61,"./ScalarObservable":68}],59:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subject"),f=a("../Observable"),g=a("../Subscriber"),h=a("../Subscription"),i=a("../operators/refCount"),j=function(a){function b(b,c){a.call(this),this.source=b,this.subjectFactory=c,this._refCount=0,this._isComplete=!1}return d(b,a),b.prototype._subscribe=function(a){return this.getSubject().subscribe(a)},b.prototype.getSubject=function(){var a=this._subject;return a&&!a.isStopped||(this._subject=this.subjectFactory()),this._subject},b.prototype.connect=function(){var a=this._connection;return a||(this._isComplete=!1,(a=this._connection=new h.Subscription).add(this.source.subscribe(new l(this.getSubject(),this))),a.closed?(this._connection=null,a=h.Subscription.EMPTY):this._connection=a),a},b.prototype.refCount=function(){return i.refCount()(this)},b}(f.Observable);c.ConnectableObservable=j;var k=j.prototype;c.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:k._subscribe},_isComplete:{value:k._isComplete,writable:!0},getSubject:{value:k.getSubject},connect:{value:k.connect},refCount:{value:k.refCount}};var l=function(a){function b(b,c){a.call(this,b),this.connectable=c}return d(b,a),b.prototype._error=function(b){this._unsubscribe(),a.prototype._error.call(this,b)},b.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),a.prototype._complete.call(this)},b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._connection;a._refCount=0,a._subject=null,a._connection=null,b&&b.unsubscribe()}},b}(e.SubjectSubscriber),m=(function(){function a(a){this.connectable=a}a.prototype.call=function(a,b){var c=this.connectable;c._refCount++;var d=new m(a,c),e=b.subscribe(d);return d.closed||(d.connection=c.connect()),e}}(),function(a){function b(b,c){a.call(this,b),this.connectable=c}return d(b,a),b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._refCount;if(b<=0)this.connection=null;else if(a._refCount=b-1,b>1)this.connection=null;else{var c=this.connection,d=a._connection;this.connection=null,!d||c&&d!==c||d.unsubscribe()}}else this.connection=null},b}(g.Subscriber))},{"../Observable":4,"../Subject":9,"../Subscriber":11,"../Subscription":12,"../operators/refCount":133}],60:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Observable"),f=a("../util/subscribeToResult"),g=a("../OuterSubscriber"),h=function(a){function b(b){a.call(this),this.observableFactory=b}return d(b,a),b.create=function(a){return new b(a)},b.prototype._subscribe=function(a){return new i(a,this.observableFactory)},b}(e.Observable);c.DeferObservable=h;var i=function(a){function b(b,c){a.call(this,b),this.factory=c,this.tryDefer()}return d(b,a),b.prototype.tryDefer=function(){try{this._callFactory()}catch(a){this._error(a)}},b.prototype._callFactory=function(){var a=this.factory();a&&this.add(f.subscribeToResult(this,a))},b}(g.OuterSubscriber)},{"../Observable":4,"../OuterSubscriber":6,"../util/subscribeToResult":179}],61:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(b){a.call(this),this.scheduler=b}return d(b,a),b.create=function(a){return new b(a)},b.dispatch=function(a){a.subscriber.complete()},b.prototype._subscribe=function(a){var c=this.scheduler;return c?c.schedule(b.dispatch,0,{subscriber:a}):void a.complete()},b}(a("../Observable").Observable);c.EmptyObservable=e},{"../Observable":4}],62:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(b,c){a.call(this),this.error=b,this.scheduler=c}return d(b,a),b.create=function(a,c){return new b(a,c)},b.dispatch=function(a){var b=a.error;a.subscriber.error(b)},b.prototype._subscribe=function(a){var c=this.error,d=this.scheduler;return a.syncErrorThrowable=!0,d?d.schedule(b.dispatch,0,{error:c,subscriber:a}):void a.error(c)},b}(a("../Observable").Observable);c.ErrorObservable=e},{"../Observable":4}],63:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Observable"),f=a("../util/tryCatch"),g=a("../util/isFunction"),h=a("../util/errorObject"),i=a("../Subscription"),j=Object.prototype.toString,k=function(a){function b(b,c,d,e){a.call(this),this.sourceObj=b,this.eventName=c,this.selector=d,this.options=e}return d(b,a),b.create=function(a,c,d,e){return g.isFunction(d)&&(e=d,d=void 0),new b(a,c,e,d)},b.setupSubscription=function(a,c,d,e,f){var g;if(function(a){return!!a&&"[object NodeList]"===j.call(a)}(a)||function(a){return!!a&&"[object HTMLCollection]"===j.call(a)}(a))for(var h=0,k=a.length;h<k;h++)b.setupSubscription(a[h],c,d,e,f);else if(function(a){return!!a&&"function"==typeof a.addEventListener&&"function"==typeof a.removeEventListener}(a)){var l=a;a.addEventListener(c,d,f),g=function(){return l.removeEventListener(c,d)}}else if(function(a){return!!a&&"function"==typeof a.on&&"function"==typeof a.off}(a)){var m=a;a.on(c,d),g=function(){return m.off(c,d)}}else{if(!function(a){return!!a&&"function"==typeof a.addListener&&"function"==typeof a.removeListener}(a))throw new TypeError("Invalid event target");var n=a;a.addListener(c,d),g=function(){return n.removeListener(c,d)}}e.add(new i.Subscription(g))},b.prototype._subscribe=function(a){var c=this.sourceObj,d=this.eventName,e=this.options,g=this.selector;b.setupSubscription(c,d,g?function(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];var d=f.tryCatch(g).apply(void 0,b);d===h.errorObject?a.error(h.errorObject.e):a.next(d)}:function(b){return a.next(b)},a,e)},b}(e.Observable);c.FromEventObservable=k},{"../Observable":4,"../Subscription":12,"../util/errorObject":166,"../util/isFunction":171,"../util/tryCatch":181}],64:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../util/isArray"),f=a("../util/isArrayLike"),g=a("../util/isPromise"),h=a("./PromiseObservable"),i=a("./IteratorObservable"),j=a("./ArrayObservable"),k=a("./ArrayLikeObservable"),l=a("../symbol/iterator"),m=a("../Observable"),n=a("../operators/observeOn"),o=a("../symbol/observable"),p=function(a){function b(b,c){a.call(this,null),this.ish=b,this.scheduler=c}return d(b,a),b.create=function(a,c){if(null!=a){if("function"==typeof a[o.observable])return a instanceof m.Observable&&!c?a:new b(a,c);if(e.isArray(a))return new j.ArrayObservable(a,c);if(g.isPromise(a))return new h.PromiseObservable(a,c);if("function"==typeof a[l.iterator]||"string"==typeof a)return new i.IteratorObservable(a,c);if(f.isArrayLike(a))return new k.ArrayLikeObservable(a,c)}throw new TypeError((null!==a&&typeof a||a)+" is not observable")},b.prototype._subscribe=function(a){var b=this.ish,c=this.scheduler;return null==c?b[o.observable]().subscribe(a):b[o.observable]().subscribe(new n.ObserveOnSubscriber(a,c,0))},b}(m.Observable);c.FromObservable=p},{"../Observable":4,"../operators/observeOn":131,"../symbol/iterator":159,"../symbol/observable":160,"../util/isArray":168,"../util/isArrayLike":169,"../util/isPromise":174,"./ArrayLikeObservable":57,"./ArrayObservable":58,"./IteratorObservable":66,"./PromiseObservable":67}],65:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../util/isNumeric"),f=a("../Observable"),g=a("../scheduler/async"),h=function(a){function b(b,c){void 0===b&&(b=0),void 0===c&&(c=g.async),a.call(this),this.period=b,this.scheduler=c,(!e.isNumeric(b)||b<0)&&(this.period=0),c&&"function"==typeof c.schedule||(this.scheduler=g.async)}return d(b,a),b.create=function(a,c){return void 0===a&&(a=0),void 0===c&&(c=g.async),new b(a,c)},b.dispatch=function(a){var b=a.index,c=a.subscriber,d=a.period;c.next(b),c.closed||(a.index+=1,this.schedule(a,d))},b.prototype._subscribe=function(a){var c=this.period,d=this.scheduler;a.add(d.schedule(b.dispatch,c,{index:0,subscriber:a,period:c}))},b}(f.Observable);c.IntervalObservable=h},{"../Observable":4,"../scheduler/async":157,"../util/isNumeric":172}],66:[function(a,b,c){"use strict";function d(a){var b=+a.length;return isNaN(b)?0:0!==b&&function(a){return"number"==typeof a&&f.root.isFinite(a)}(b)?(b=function(a){var b=+a;return 0===b?b:isNaN(b)?b:b<0?-1:1}(b)*Math.floor(Math.abs(b)))<=0?0:b>l?l:b:b}var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=a("../util/root"),g=a("../Observable"),h=a("../symbol/iterator"),i=function(a){function b(b,c){if(a.call(this),this.scheduler=c,null==b)throw new Error("iterator cannot be null.");this.iterator=function(a){var b=a[h.iterator];if(!b&&"string"==typeof a)return new j(a);if(!b&&void 0!==a.length)return new k(a);if(!b)throw new TypeError("object is not iterable");return a[h.iterator]()}(b)}return e(b,a),b.create=function(a,c){return new b(a,c)},b.dispatch=function(a){var b=a.index,c=a.hasError,d=a.iterator,e=a.subscriber;if(c)e.error(a.error);else{var f=d.next();f.done?e.complete():(e.next(f.value),a.index=b+1,e.closed?"function"==typeof d["return"]&&d["return"]():this.schedule(a))}},b.prototype._subscribe=function(a){var c=this.iterator,d=this.scheduler;if(d)return d.schedule(b.dispatch,0,{index:0,iterator:c,subscriber:a});for(;;){var e=c.next();if(e.done){a.complete();break}if(a.next(e.value),a.closed){"function"==typeof c["return"]&&c["return"]();break}}},b}(g.Observable);c.IteratorObservable=i;var j=function(){function a(a,b,c){void 0===b&&(b=0),void 0===c&&(c=a.length),this.str=a,this.idx=b,this.len=c}return a.prototype[h.iterator]=function(){return this},a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},a}(),k=function(){function a(a,b,c){void 0===b&&(b=0),void 0===c&&(c=d(a)),this.arr=a,this.idx=b,this.len=c}return a.prototype[h.iterator]=function(){return this},a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},a}(),l=Math.pow(2,53)-1},{"../Observable":4,"../symbol/iterator":159,"../util/root":178}],67:[function(a,b,c){"use strict";function d(a){var b=a.value,c=a.subscriber;c.closed||(c.next(b),c.complete())}function e(a){var b=a.err,c=a.subscriber;c.closed||c.error(b)}var f=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},g=a("../util/root"),h=function(a){function b(b,c){a.call(this),this.promise=b,this.scheduler=c}return f(b,a),b.create=function(a,c){return new b(a,c)},b.prototype._subscribe=function(a){var b=this,c=this.promise,f=this.scheduler;if(null==f)this._isScalar?a.closed||(a.next(this.value),a.complete()):c.then(function(c){b.value=c,b._isScalar=!0,a.closed||(a.next(c),a.complete())},function(b){a.closed||a.error(b)}).then(null,function(a){g.root.setTimeout(function(){throw a})});else if(this._isScalar){if(!a.closed)return f.schedule(d,0,{value:this.value,subscriber:a})}else c.then(function(c){b.value=c,b._isScalar=!0,a.closed||a.add(f.schedule(d,0,{value:c,subscriber:a}))},function(b){a.closed||a.add(f.schedule(e,0,{err:b,subscriber:a}))}).then(null,function(a){g.root.setTimeout(function(){throw a})})},b}(a("../Observable").Observable);c.PromiseObservable=h},{"../Observable":4,"../util/root":178}],68:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(b,c){a.call(this),this.value=b,this.scheduler=c,this._isScalar=!0,c&&(this._isScalar=!1)}return d(b,a),b.create=function(a,c){return new b(a,c)},b.dispatch=function(a){var b=a.done,c=a.value,d=a.subscriber;b?d.complete():(d.next(c),d.closed||(a.done=!0,this.schedule(a)))},b.prototype._subscribe=function(a){var c=this.value,d=this.scheduler;return d?d.schedule(b.dispatch,0,{done:!1,value:c,subscriber:a}):(a.next(c),void(a.closed||a.complete()))},b}(a("../Observable").Observable);c.ScalarObservable=e},{"../Observable":4}],69:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../util/isNumeric"),f=a("../Observable"),g=a("../scheduler/async"),h=a("../util/isScheduler"),i=a("../util/isDate"),j=function(a){function b(b,c,d){void 0===b&&(b=0),a.call(this),this.period=-1,this.dueTime=0,e.isNumeric(c)?this.period=Number(c)<1?1:Number(c):h.isScheduler(c)&&(d=c),h.isScheduler(d)||(d=g.async),this.scheduler=d,this.dueTime=i.isDate(b)?+b-this.scheduler.now():b}return d(b,a),b.create=function(a,c,d){return void 0===a&&(a=0),new b(a,c,d)},b.dispatch=function(a){var b=a.index,c=a.period,d=a.subscriber;if(d.next(b),!d.closed){if(-1===c)return d.complete();a.index=b+1,this.schedule(a,c)}},b.prototype._subscribe=function(a){var c=this.period,d=this.dueTime;return this.scheduler.schedule(b.dispatch,d,{index:0,period:c,subscriber:a})},b}(f.Observable);c.TimerObservable=j},{"../Observable":4,"../scheduler/async":157,"../util/isDate":170,"../util/isNumeric":172,"../util/isScheduler":175}],70:[function(a,b,c){"use strict";var d=a("../util/isScheduler"),e=a("../util/isArray"),f=a("./ArrayObservable"),g=a("../operators/combineLatest");c.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=null,h=null;return d.isScheduler(a[a.length-1])&&(h=a.pop()),"function"==typeof a[a.length-1]&&(c=a.pop()),1===a.length&&e.isArray(a[0])&&(a=a[0]),new f.ArrayObservable(a,h).lift(new g.CombineLatestOperator(c))}},{"../operators/combineLatest":116,"../util/isArray":168,"../util/isScheduler":175,"./ArrayObservable":58}],71:[function(a,b,c){"use strict";var d=a("../util/isScheduler"),e=a("./of"),f=a("./from"),g=a("../operators/concatAll");c.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return 1===a.length||2===a.length&&d.isScheduler(a[1])?f.from(a[0]):g.concatAll()(e.of.apply(void 0,a))}},{"../operators/concatAll":118,"../util/isScheduler":175,"./from":74,"./of":79}],72:[function(a,b,c){"use strict";var d=a("./DeferObservable");c.defer=d.DeferObservable.create},{"./DeferObservable":60}],73:[function(a,b,c){"use strict";var d=a("./EmptyObservable");c.empty=d.EmptyObservable.create},{"./EmptyObservable":61}],74:[function(a,b,c){"use strict";var d=a("./FromObservable");c.from=d.FromObservable.create},{"./FromObservable":64
}],75:[function(a,b,c){"use strict";var d=a("./FromEventObservable");c.fromEvent=d.FromEventObservable.create},{"./FromEventObservable":63}],76:[function(a,b,c){"use strict";var d=a("./PromiseObservable");c.fromPromise=d.PromiseObservable.create},{"./PromiseObservable":67}],77:[function(a,b,c){"use strict";var d=a("./IntervalObservable");c.interval=d.IntervalObservable.create},{"./IntervalObservable":65}],78:[function(a,b,c){"use strict";var d=a("../operator/merge");c.merge=d.mergeStatic},{"../operator/merge":95}],79:[function(a,b,c){"use strict";var d=a("./ArrayObservable");c.of=d.ArrayObservable.of},{"./ArrayObservable":58}],80:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../util/isArray"),f=a("../observable/ArrayObservable"),g=a("../OuterSubscriber"),h=a("../util/subscribeToResult");c.race=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(1===a.length){if(!e.isArray(a[0]))return a[0];a=a[0]}return new f.ArrayObservable(a).lift(new i)};var i=function(){function a(){}return a.prototype.call=function(a,b){return b.subscribe(new j(a))},a}();c.RaceOperator=i;var j=function(a){function b(b){a.call(this,b),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return d(b,a),b.prototype._next=function(a){this.observables.push(a)},b.prototype._complete=function(){var a=this.observables,b=a.length;if(0===b)this.destination.complete();else{for(var c=0;c<b&&!this.hasFirst;c++){var d=a[c],e=h.subscribeToResult(this,d,d,c);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}},b.prototype.notifyNext=function(a,b,c,d,e){if(!this.hasFirst){this.hasFirst=!0;for(var f=0;f<this.subscriptions.length;f++)if(f!==c){var g=this.subscriptions[f];g.unsubscribe(),this.remove(g)}this.subscriptions=null}this.destination.next(b)},b}(g.OuterSubscriber);c.RaceSubscriber=j},{"../OuterSubscriber":6,"../observable/ArrayObservable":58,"../util/isArray":168,"../util/subscribeToResult":179}],81:[function(a,b,c){"use strict";var d=a("./ErrorObservable");c._throw=d.ErrorObservable.create},{"./ErrorObservable":62}],82:[function(a,b,c){"use strict";var d=a("./TimerObservable");c.timer=d.TimerObservable.create},{"./TimerObservable":69}],83:[function(a,b,c){"use strict";var d=a("../operators/catchError");c._catch=function(a){return d.catchError(a)(this)}},{"../operators/catchError":115}],84:[function(a,b,c){"use strict";var d=a("../operators/combineLatest");c.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return d.combineLatest.apply(void 0,a)(this)}},{"../operators/combineLatest":116}],85:[function(a,b,c){"use strict";var d=a("../operators/concat");c.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return d.concat.apply(void 0,a)(this)}},{"../operators/concat":117}],86:[function(a,b,c){"use strict";var d=a("../scheduler/async"),e=a("../operators/debounceTime");c.debounceTime=function(a,b){return void 0===b&&(b=d.async),e.debounceTime(a,b)(this)}},{"../operators/debounceTime":119,"../scheduler/async":157}],87:[function(a,b,c){"use strict";var d=a("../scheduler/async"),e=a("../operators/delay");c.delay=function(a,b){return void 0===b&&(b=d.async),e.delay(a,b)(this)}},{"../operators/delay":120,"../scheduler/async":157}],88:[function(a,b,c){"use strict";var d=a("../operators/distinctUntilChanged");c.distinctUntilChanged=function(a,b){return d.distinctUntilChanged(a,b)(this)}},{"../operators/distinctUntilChanged":121}],89:[function(a,b,c){"use strict";var d=a("../operators/tap");c._do=function(a,b,c){return d.tap(a,b,c)(this)}},{"../operators/tap":148}],90:[function(a,b,c){"use strict";var d=a("../operators/filter");c.filter=function(a,b){return d.filter(a,b)(this)}},{"../operators/filter":122}],91:[function(a,b,c){"use strict";var d=a("../operators/finalize");c._finally=function(a){return d.finalize(a)(this)}},{"../operators/finalize":123}],92:[function(a,b,c){"use strict";var d=a("../operators/first");c.first=function(a,b,c){return d.first(a,b,c)(this)}},{"../operators/first":124}],93:[function(a,b,c){"use strict";var d=a("../operators/map");c.map=function(a,b){return d.map(a,b)(this)}},{"../operators/map":125}],94:[function(a,b,c){"use strict";var d=a("../operators/mapTo");c.mapTo=function(a){return d.mapTo(a)(this)}},{"../operators/mapTo":126}],95:[function(a,b,c){"use strict";var d=a("../operators/merge"),e=a("../operators/merge");c.mergeStatic=e.mergeStatic,c.merge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return d.merge.apply(void 0,a)(this)}},{"../operators/merge":127}],96:[function(a,b,c){"use strict";var d=a("../operators/mergeMap");c.mergeMap=function(a,b,c){return void 0===c&&(c=Number.POSITIVE_INFINITY),d.mergeMap(a,b,c)(this)}},{"../operators/mergeMap":129}],97:[function(a,b,c){"use strict";var d=a("../operators/multicast");c.multicast=function(a,b){return d.multicast(a,b)(this)}},{"../operators/multicast":130}],98:[function(a,b,c){"use strict";var d=a("../operators/pluck");c.pluck=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return d.pluck.apply(void 0,a)(this)}},{"../operators/pluck":132}],99:[function(a,b,c){"use strict";var d=a("../operators/repeat");c.repeat=function(a){return void 0===a&&(a=-1),d.repeat(a)(this)}},{"../operators/repeat":134}],100:[function(a,b,c){"use strict";var d=a("../operators/repeatWhen");c.repeatWhen=function(a){return d.repeatWhen(a)(this)}},{"../operators/repeatWhen":135}],101:[function(a,b,c){"use strict";var d=a("../operators/retry");c.retry=function(a){return void 0===a&&(a=-1),d.retry(a)(this)}},{"../operators/retry":136}],102:[function(a,b,c){"use strict";var d=a("../operators/retryWhen");c.retryWhen=function(a){return d.retryWhen(a)(this)}},{"../operators/retryWhen":137}],103:[function(a,b,c){"use strict";var d=a("../operators/scan");c.scan=function(a,b){return arguments.length>=2?d.scan(a,b)(this):d.scan(a)(this)}},{"../operators/scan":138}],104:[function(a,b,c){"use strict";var d=a("../operators/share");c.share=function(){return d.share()(this)}},{"../operators/share":139}],105:[function(a,b,c){"use strict";var d=a("../operators/shareReplay");c.shareReplay=function(a,b,c){return d.shareReplay(a,b,c)(this)}},{"../operators/shareReplay":140}],106:[function(a,b,c){"use strict";var d=a("../operators/skip");c.skip=function(a){return d.skip(a)(this)}},{"../operators/skip":141}],107:[function(a,b,c){"use strict";var d=a("../operators/skipWhile");c.skipWhile=function(a){return d.skipWhile(a)(this)}},{"../operators/skipWhile":142}],108:[function(a,b,c){"use strict";var d=a("../operators/startWith");c.startWith=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return d.startWith.apply(void 0,a)(this)}},{"../operators/startWith":143}],109:[function(a,b,c){"use strict";var d=a("../operators/switchMap");c.switchMap=function(a,b){return d.switchMap(a,b)(this)}},{"../operators/switchMap":144}],110:[function(a,b,c){"use strict";var d=a("../operators/take");c.take=function(a){return d.take(a)(this)}},{"../operators/take":145}],111:[function(a,b,c){"use strict";var d=a("../operators/takeUntil");c.takeUntil=function(a){return d.takeUntil(a)(this)}},{"../operators/takeUntil":146}],112:[function(a,b,c){"use strict";var d=a("../operators/takeWhile");c.takeWhile=function(a){return d.takeWhile(a)(this)}},{"../operators/takeWhile":147}],113:[function(a,b,c){"use strict";var d=a("../scheduler/async"),e=a("../operators/throttle"),f=a("../operators/throttleTime");c.throttleTime=function(a,b,c){return void 0===b&&(b=d.async),void 0===c&&(c=e.defaultThrottleConfig),f.throttleTime(a,b,c)(this)}},{"../operators/throttle":149,"../operators/throttleTime":150,"../scheduler/async":157}],114:[function(a,b,c){"use strict";var d=a("../operators/withLatestFrom");c.withLatestFrom=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return d.withLatestFrom.apply(void 0,a)(this)}},{"../operators/withLatestFrom":151}],115:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../OuterSubscriber"),f=a("../util/subscribeToResult");c.catchError=function(a){return function(b){var c=new g(a),d=b.lift(c);return c.caught=d}};var g=function(){function a(a){this.selector=a}return a.prototype.call=function(a,b){return b.subscribe(new h(a,this.selector,this.caught))},a}(),h=function(a){function b(b,c,d){a.call(this,b),this.selector=c,this.caught=d}return d(b,a),b.prototype.error=function(b){if(!this.isStopped){var c=void 0;try{c=this.selector(b,this.caught)}catch(b){return void a.prototype.error.call(this,b)}this._unsubscribeAndRecycle(),this.add(f.subscribeToResult(this,c))}},b}(e.OuterSubscriber)},{"../OuterSubscriber":6,"../util/subscribeToResult":179}],116:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../observable/ArrayObservable"),f=a("../util/isArray"),g=a("../OuterSubscriber"),h=a("../util/subscribeToResult"),i={};c.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=null;return"function"==typeof a[a.length-1]&&(c=a.pop()),1===a.length&&f.isArray(a[0])&&(a=a[0].slice()),function(b){return b.lift.call(new e.ArrayObservable([b].concat(a)),new j(c))}};var j=function(){function a(a){this.project=a}return a.prototype.call=function(a,b){return b.subscribe(new k(a,this.project))},a}();c.CombineLatestOperator=j;var k=function(a){function b(b,c){a.call(this,b),this.project=c,this.active=0,this.values=[],this.observables=[]}return d(b,a),b.prototype._next=function(a){this.values.push(i),this.observables.push(a)},b.prototype._complete=function(){var a=this.observables,b=a.length;if(0===b)this.destination.complete();else{this.active=b,this.toRespond=b;for(var c=0;c<b;c++){var d=a[c];this.add(h.subscribeToResult(this,d,d,c))}}},b.prototype.notifyComplete=function(a){0==(this.active-=1)&&this.destination.complete()},b.prototype.notifyNext=function(a,b,c,d,e){var f=this.values,g=f[c],h=this.toRespond?g===i?--this.toRespond:this.toRespond:0;f[c]=b,0===h&&(this.project?this._tryProject(f):this.destination.next(f.slice()))},b.prototype._tryProject=function(a){var b;try{b=this.project.apply(this,a)}catch(a){return void this.destination.error(a)}this.destination.next(b)},b}(g.OuterSubscriber);c.CombineLatestSubscriber=k},{"../OuterSubscriber":6,"../observable/ArrayObservable":58,"../util/isArray":168,"../util/subscribeToResult":179}],117:[function(a,b,c){"use strict";var d=a("../observable/concat");c.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){return b.lift.call(d.concat.apply(void 0,[b].concat(a)))}}},{"../observable/concat":71}],118:[function(a,b,c){"use strict";var d=a("./mergeAll");c.concatAll=function(){return d.mergeAll(1)}},{"./mergeAll":128}],119:[function(a,b,c){"use strict";function d(a){a.debouncedNext()}var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=a("../Subscriber"),g=a("../scheduler/async");c.debounceTime=function(a,b){return void 0===b&&(b=g.async),function(c){return c.lift(new h(a,b))}};var h=function(){function a(a,b){this.dueTime=a,this.scheduler=b}return a.prototype.call=function(a,b){return b.subscribe(new i(a,this.dueTime,this.scheduler))},a}(),i=function(a){function b(b,c,d){a.call(this,b),this.dueTime=c,this.scheduler=d,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return e(b,a),b.prototype._next=function(a){this.clearDebounce(),this.lastValue=a,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(d,this.dueTime,this))},b.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},b.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},b.prototype.clearDebounce=function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)},b}(f.Subscriber)},{"../Subscriber":11,"../scheduler/async":157}],120:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../scheduler/async"),f=a("../util/isDate"),g=a("../Subscriber"),h=a("../Notification");c.delay=function(a,b){void 0===b&&(b=e.async);var c=f.isDate(a)?+a-b.now():Math.abs(a);return function(a){return a.lift(new i(c,b))}};var i=function(){function a(a,b){this.delay=a,this.scheduler=b}return a.prototype.call=function(a,b){return b.subscribe(new j(a,this.delay,this.scheduler))},a}(),j=function(a){function b(b,c,d){a.call(this,b),this.delay=c,this.scheduler=d,this.queue=[],this.active=!1,this.errored=!1}return d(b,a),b.dispatch=function(a){for(var b=a.source,c=b.queue,d=a.scheduler,e=a.destination;c.length>0&&c[0].time-d.now()<=0;)c.shift().notification.observe(e);if(c.length>0){var f=Math.max(0,c[0].time-d.now());this.schedule(a,f)}else b.active=!1},b.prototype._schedule=function(a){this.active=!0,this.add(a.schedule(b.dispatch,this.delay,{source:this,destination:this.destination,scheduler:a}))},b.prototype.scheduleNotification=function(a){if(!0!==this.errored){var b=this.scheduler,c=new k(b.now()+this.delay,a);this.queue.push(c),!1===this.active&&this._schedule(b)}},b.prototype._next=function(a){this.scheduleNotification(h.Notification.createNext(a))},b.prototype._error=function(a){this.errored=!0,this.queue=[],this.destination.error(a)},b.prototype._complete=function(){this.scheduleNotification(h.Notification.createComplete())},b}(g.Subscriber),k=function(){return function(a,b){this.time=a,this.notification=b}}()},{"../Notification":3,"../Subscriber":11,"../scheduler/async":157,"../util/isDate":170}],121:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber"),f=a("../util/tryCatch"),g=a("../util/errorObject");c.distinctUntilChanged=function(a,b){return function(c){return c.lift(new h(a,b))}};var h=function(){function a(a,b){this.compare=a,this.keySelector=b}return a.prototype.call=function(a,b){return b.subscribe(new i(a,this.compare,this.keySelector))},a}(),i=function(a){function b(b,c,d){a.call(this,b),this.keySelector=d,this.hasKey=!1,"function"==typeof c&&(this.compare=c)}return d(b,a),b.prototype.compare=function(a,b){return a===b},b.prototype._next=function(a){var b=a;if(this.keySelector&&(b=f.tryCatch(this.keySelector)(a))===g.errorObject)return this.destination.error(g.errorObject.e);var c=!1;if(this.hasKey){if((c=f.tryCatch(this.compare)(this.key,b))===g.errorObject)return this.destination.error(g.errorObject.e)}else this.hasKey=!0;!1===Boolean(c)&&(this.key=b,this.destination.next(a))},b}(e.Subscriber)},{"../Subscriber":11,"../util/errorObject":166,"../util/tryCatch":181}],122:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber");c.filter=function(a,b){return function(c){return c.lift(new f(a,b))}};var f=function(){function a(a,b){this.predicate=a,this.thisArg=b}return a.prototype.call=function(a,b){return b.subscribe(new g(a,this.predicate,this.thisArg))},a}(),g=function(a){function b(b,c,d){a.call(this,b),this.predicate=c,this.thisArg=d,this.count=0}return d(b,a),b.prototype._next=function(a){var b;try{b=this.predicate.call(this.thisArg,a,this.count++)}catch(a){return void this.destination.error(a)}b&&this.destination.next(a)},b}(e.Subscriber)},{"../Subscriber":11}],123:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber"),f=a("../Subscription");c.finalize=function(a){return function(b){return b.lift(new g(a))}};var g=function(){function a(a){this.callback=a}return a.prototype.call=function(a,b){return b.subscribe(new h(a,this.callback))},a}(),h=function(a){function b(b,c){a.call(this,b),this.add(new f.Subscription(c))}return d(b,a),b}(e.Subscriber)},{"../Subscriber":11,"../Subscription":12}],124:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber"),f=a("../util/EmptyError");c.first=function(a,b,c){return function(d){return d.lift(new g(a,b,c,d))}};var g=function(){function a(a,b,c,d){this.predicate=a,this.resultSelector=b,this.defaultValue=c,this.source=d}return a.prototype.call=function(a,b){return b.subscribe(new h(a,this.predicate,this.resultSelector,this.defaultValue,this.source))},a}(),h=function(a){function b(b,c,d,e,f){a.call(this,b),this.predicate=c,this.resultSelector=d,this.defaultValue=e,this.source=f,this.index=0,this.hasCompleted=!1,this._emitted=!1}return d(b,a),b.prototype._next=function(a){var b=this.index++;this.predicate?this._tryPredicate(a,b):this._emit(a,b)},b.prototype._tryPredicate=function(a,b){var c;try{c=this.predicate(a,b,this.source)}catch(a){return void this.destination.error(a)}c&&this._emit(a,b)},b.prototype._emit=function(a,b){this.resultSelector?this._tryResultSelector(a,b):this._emitFinal(a)},b.prototype._tryResultSelector=function(a,b){var c;try{c=this.resultSelector(a,b)}catch(a){return void this.destination.error(a)}this._emitFinal(c)},b.prototype._emitFinal=function(a){var b=this.destination;this._emitted||(this._emitted=!0,b.next(a),b.complete(),this.hasCompleted=!0)},b.prototype._complete=function(){var a=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||a.error(new f.EmptyError):(a.next(this.defaultValue),a.complete())},b}(e.Subscriber)},{"../Subscriber":11,"../util/EmptyError":163}],125:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber");c.map=function(a,b){return function(c){if("function"!=typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return c.lift(new f(a,b))}};var f=function(){function a(a,b){this.project=a,this.thisArg=b}return a.prototype.call=function(a,b){return b.subscribe(new g(a,this.project,this.thisArg))},a}();c.MapOperator=f;var g=function(a){function b(b,c,d){a.call(this,b),this.project=c,this.count=0,this.thisArg=d||this}return d(b,a),b.prototype._next=function(a){var b;try{b=this.project.call(this.thisArg,a,this.count++)}catch(a){return void this.destination.error(a)}this.destination.next(b)},b}(e.Subscriber)},{"../Subscriber":11}],126:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber");c.mapTo=function(a){return function(b){return b.lift(new f(a))}};var f=function(){function a(a){this.value=a}return a.prototype.call=function(a,b){return b.subscribe(new g(a,this.value))},a}(),g=function(a){function b(b,c){a.call(this,b),this.value=c}return d(b,a),b.prototype._next=function(a){this.destination.next(this.value)},b}(e.Subscriber)},{"../Subscriber":11}],127:[function(a,b,c){"use strict";function d(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=Number.POSITIVE_INFINITY,d=null,i=a[a.length-1];return h.isScheduler(i)?(d=a.pop(),a.length>1&&"number"==typeof a[a.length-1]&&(c=a.pop())):"number"==typeof i&&(c=a.pop()),null===d&&1===a.length&&a[0]instanceof e.Observable?a[0]:g.mergeAll(c)(new f.ArrayObservable(a,d))}var e=a("../Observable"),f=a("../observable/ArrayObservable"),g=a("./mergeAll"),h=a("../util/isScheduler");c.merge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){return b.lift.call(d.apply(void 0,[b].concat(a)))}},c.mergeStatic=d},{"../Observable":4,"../observable/ArrayObservable":58,"../util/isScheduler":175,"./mergeAll":128}],128:[function(a,b,c){"use strict";var d=a("./mergeMap"),e=a("../util/identity");c.mergeAll=function(a){return void 0===a&&(a=Number.POSITIVE_INFINITY),d.mergeMap(e.identity,null,a)}},{"../util/identity":167,"./mergeMap":129}],129:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../util/subscribeToResult"),f=a("../OuterSubscriber");c.mergeMap=function(a,b,c){return void 0===c&&(c=Number.POSITIVE_INFINITY),function(d){return"number"==typeof b&&(c=b,b=null),d.lift(new g(a,b,c))}};var g=function(){function a(a,b,c){void 0===c&&(c=Number.POSITIVE_INFINITY),this.project=a,this.resultSelector=b,this.concurrent=c}return a.prototype.call=function(a,b){return b.subscribe(new h(a,this.project,this.resultSelector,this.concurrent))},a}();c.MergeMapOperator=g;var h=function(a){function b(b,c,d,e){void 0===e&&(e=Number.POSITIVE_INFINITY),a.call(this,b),this.project=c,this.resultSelector=d,this.concurrent=e,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return d(b,a),b.prototype._next=function(a){this.active<this.concurrent?this._tryNext(a):this.buffer.push(a)},b.prototype._tryNext=function(a){var b,c=this.index++;try{b=this.project(a,c)}catch(a){return void this.destination.error(a)}this.active++,this._innerSub(b,a,c)},b.prototype._innerSub=function(a,b,c){this.add(e.subscribeToResult(this,a,b,c))},b.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},b.prototype.notifyNext=function(a,b,c,d,e){this.resultSelector?this._notifyResultSelector(a,b,c,d):this.destination.next(b)},b.prototype._notifyResultSelector=function(a,b,c,d){var e;try{e=this.resultSelector(a,b,c,d)}catch(a){return void this.destination.error(a)}this.destination.next(e)},b.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a),this.active--,b.length>0?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},b}(f.OuterSubscriber);c.MergeMapSubscriber=h},{"../OuterSubscriber":6,"../util/subscribeToResult":179}],130:[function(a,b,c){"use strict";var d=a("../observable/ConnectableObservable");c.multicast=function(a,b){return function(c){var f;if(f="function"==typeof a?a:function(){return a},"function"==typeof b)return c.lift(new e(f,b));var g=Object.create(c,d.connectableObservableDescriptor);return g.source=c,g.subjectFactory=f,g}};var e=function(){function a(a,b){this.subjectFactory=a,this.selector=b}return a.prototype.call=function(a,b){var c=this.selector,d=this.subjectFactory(),e=c(d).subscribe(a);return e.add(b.subscribe(d)),e},a}();c.MulticastOperator=e},{"../observable/ConnectableObservable":59}],131:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber"),f=a("../Notification");c.observeOn=function(a,b){return void 0===b&&(b=0),function(c){return c.lift(new g(a,b))}};var g=function(){function a(a,b){void 0===b&&(b=0),this.scheduler=a,this.delay=b}return a.prototype.call=function(a,b){return b.subscribe(new h(a,this.scheduler,this.delay))},a}();c.ObserveOnOperator=g;var h=function(a){function b(b,c,d){void 0===d&&(d=0),a.call(this,b),this.scheduler=c,this.delay=d}return d(b,a),b.dispatch=function(a){var b=a.notification,c=a.destination;b.observe(c),this.unsubscribe()},b.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(b.dispatch,this.delay,new i(a,this.destination)))},b.prototype._next=function(a){this.scheduleMessage(f.Notification.createNext(a))},b.prototype._error=function(a){this.scheduleMessage(f.Notification.createError(a))},b.prototype._complete=function(){this.scheduleMessage(f.Notification.createComplete())},b}(e.Subscriber);c.ObserveOnSubscriber=h;var i=function(){return function(a,b){this.notification=a,this.destination=b}}();c.ObserveOnMessage=i},{"../Notification":3,"../Subscriber":11}],132:[function(a,b,c){"use strict";var d=a("./map");c.pluck=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=a.length;if(0===c)throw new Error("list of properties cannot be empty.");return function(b){return d.map(function(a,b){return function(c){for(var d=c,e=0;e<b;e++){var f=d[a[e]];if(void 0===f)return;d=f}return d}}(a,c))(b)}}},{"./map":125}],133:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber");c.refCount=function(){return function(a){return a.lift(new f(a))}};var f=function(){function a(a){this.connectable=a}return a.prototype.call=function(a,b){var c=this.connectable;c._refCount++;var d=new g(a,c),e=b.subscribe(d);return d.closed||(d.connection=c.connect()),e},a}(),g=function(a){function b(b,c){a.call(this,b),this.connectable=c}return d(b,a),b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._refCount;if(b<=0)this.connection=null;else if(a._refCount=b-1,b>1)this.connection=null;else{var c=this.connection,d=a._connection;this.connection=null,!d||c&&d!==c||d.unsubscribe()}}else this.connection=null},b}(e.Subscriber)},{"../Subscriber":11}],134:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber"),f=a("../observable/EmptyObservable");c.repeat=function(a){return void 0===a&&(a=-1),function(b){return 0===a?new f.EmptyObservable:a<0?b.lift(new g((-1),b)):b.lift(new g(a-1,b))}};var g=function(){function a(a,b){this.count=a,this.source=b}return a.prototype.call=function(a,b){return b.subscribe(new h(a,this.count,this.source))},a}(),h=function(a){function b(b,c,d){a.call(this,b),this.count=c,this.source=d}return d(b,a),b.prototype.complete=function(){if(!this.isStopped){var b=this.source,c=this.count;if(0===c)return a.prototype.complete.call(this);c>-1&&(this.count=c-1),b.subscribe(this._unsubscribeAndRecycle())}},b}(e.Subscriber)},{"../Subscriber":11,"../observable/EmptyObservable":61}],135:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subject"),f=a("../util/tryCatch"),g=a("../util/errorObject"),h=a("../OuterSubscriber"),i=a("../util/subscribeToResult");c.repeatWhen=function(a){return function(b){return b.lift(new j(a))}};var j=function(){function a(a){this.notifier=a}return a.prototype.call=function(a,b){return b.subscribe(new k(a,this.notifier,b))},a}(),k=function(a){function b(b,c,d){a.call(this,b),this.notifier=c,this.source=d,this.sourceIsBeingSubscribedTo=!0}return d(b,a),b.prototype.notifyNext=function(a,b,c,d,e){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},b.prototype.notifyComplete=function(b){if(!1===this.sourceIsBeingSubscribedTo)return a.prototype.complete.call(this)},b.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries){if(this.retriesSubscription.closed)return a.prototype.complete.call(this)}else this.subscribeToRetries();this._unsubscribeAndRecycle(),this.notifications.next()}},b.prototype._unsubscribe=function(){var a=this.notifications,b=this.retriesSubscription;a&&(a.unsubscribe(),this.notifications=null),b&&(b.unsubscribe(),this.retriesSubscription=null),this.retries=null},b.prototype._unsubscribeAndRecycle=function(){var b=this.notifications,c=this.retries,d=this.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,a.prototype._unsubscribeAndRecycle.call(this),this.notifications=b,this.retries=c,this.retriesSubscription=d,this},b.prototype.subscribeToRetries=function(){this.notifications=new e.Subject;var b=f.tryCatch(this.notifier)(this.notifications);return b===g.errorObject?a.prototype.complete.call(this):(this.retries=b,void(this.retriesSubscription=i.subscribeToResult(this,b)))},b}(h.OuterSubscriber)},{"../OuterSubscriber":6,"../Subject":9,"../util/errorObject":166,"../util/subscribeToResult":179,"../util/tryCatch":181}],136:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber");c.retry=function(a){return void 0===a&&(a=-1),function(b){return b.lift(new f(a,b))}};var f=function(){function a(a,b){this.count=a,this.source=b}return a.prototype.call=function(a,b){return b.subscribe(new g(a,this.count,this.source))},a}(),g=function(a){function b(b,c,d){a.call(this,b),this.count=c,this.source=d}return d(b,a),b.prototype.error=function(b){if(!this.isStopped){var c=this.source,d=this.count;if(0===d)return a.prototype.error.call(this,b);d>-1&&(this.count=d-1),c.subscribe(this._unsubscribeAndRecycle())}},b}(e.Subscriber)},{"../Subscriber":11}],137:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subject"),f=a("../util/tryCatch"),g=a("../util/errorObject"),h=a("../OuterSubscriber"),i=a("../util/subscribeToResult");c.retryWhen=function(a){return function(b){return b.lift(new j(a,b))}};var j=function(){function a(a,b){this.notifier=a,this.source=b}return a.prototype.call=function(a,b){return b.subscribe(new k(a,this.notifier,this.source))},a}(),k=function(a){function b(b,c,d){a.call(this,b),this.notifier=c,this.source=d}return d(b,a),b.prototype.error=function(b){if(!this.isStopped){var c=this.errors,d=this.retries,h=this.retriesSubscription;if(d)this.errors=null,this.retriesSubscription=null;else{if(c=new e.Subject,(d=f.tryCatch(this.notifier)(c))===g.errorObject)return a.prototype.error.call(this,g.errorObject.e);h=i.subscribeToResult(this,d)}this._unsubscribeAndRecycle(),this.errors=c,this.retries=d,this.retriesSubscription=h,c.next(b)}},b.prototype._unsubscribe=function(){var a=this.errors,b=this.retriesSubscription;a&&(a.unsubscribe(),this.errors=null),b&&(b.unsubscribe(),this.retriesSubscription=null),this.retries=null},b.prototype.notifyNext=function(a,b,c,d,e){var f=this.errors,g=this.retries,h=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=f,this.retries=g,this.retriesSubscription=h,this.source.subscribe(this)},b}(h.OuterSubscriber)},{"../OuterSubscriber":6,"../Subject":9,"../util/errorObject":166,"../util/subscribeToResult":179,"../util/tryCatch":181}],138:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){
function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber");c.scan=function(a,b){var c=!1;return arguments.length>=2&&(c=!0),function(d){return d.lift(new f(a,b,c))}};var f=function(){function a(a,b,c){void 0===c&&(c=!1),this.accumulator=a,this.seed=b,this.hasSeed=c}return a.prototype.call=function(a,b){return b.subscribe(new g(a,this.accumulator,this.seed,this.hasSeed))},a}(),g=function(a){function b(b,c,d,e){a.call(this,b),this.accumulator=c,this._seed=d,this.hasSeed=e,this.index=0}return d(b,a),Object.defineProperty(b.prototype,"seed",{get:function(){return this._seed},set:function(a){this.hasSeed=!0,this._seed=a},enumerable:!0,configurable:!0}),b.prototype._next=function(a){return this.hasSeed?this._tryNext(a):(this.seed=a,void this.destination.next(a))},b.prototype._tryNext=function(a){var b,c=this.index++;try{b=this.accumulator(this.seed,a,c)}catch(a){this.destination.error(a)}this.seed=b,this.destination.next(b)},b}(e.Subscriber)},{"../Subscriber":11}],139:[function(a,b,c){"use strict";function d(){return new g.Subject}var e=a("./multicast"),f=a("./refCount"),g=a("../Subject");c.share=function(){return function(a){return f.refCount()(e.multicast(d)(a))}}},{"../Subject":9,"./multicast":130,"./refCount":133}],140:[function(a,b,c){"use strict";var d=a("../ReplaySubject");c.shareReplay=function(a,b,c){return function(e){return e.lift(function(a,b,c){var e,f,g=0,h=!1,i=!1;return function(j){g++,e&&!h||(h=!1,e=new d.ReplaySubject(a,b,c),f=j.subscribe({next:function(a){e.next(a)},error:function(a){h=!0,e.error(a)},complete:function(){i=!0,e.complete()}}));var k=e.subscribe(this);return function(){g--,k.unsubscribe(),f&&0===g&&i&&f.unsubscribe()}}}(a,b,c))}}},{"../ReplaySubject":7}],141:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber");c.skip=function(a){return function(b){return b.lift(new f(a))}};var f=function(){function a(a){this.total=a}return a.prototype.call=function(a,b){return b.subscribe(new g(a,this.total))},a}(),g=function(a){function b(b,c){a.call(this,b),this.total=c,this.count=0}return d(b,a),b.prototype._next=function(a){++this.count>this.total&&this.destination.next(a)},b}(e.Subscriber)},{"../Subscriber":11}],142:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber");c.skipWhile=function(a){return function(b){return b.lift(new f(a))}};var f=function(){function a(a){this.predicate=a}return a.prototype.call=function(a,b){return b.subscribe(new g(a,this.predicate))},a}(),g=function(a){function b(b,c){a.call(this,b),this.predicate=c,this.skipping=!0,this.index=0}return d(b,a),b.prototype._next=function(a){var b=this.destination;this.skipping&&this.tryCallPredicate(a),this.skipping||b.next(a)},b.prototype.tryCallPredicate=function(a){try{var b=this.predicate(a,this.index++);this.skipping=Boolean(b)}catch(a){this.destination.error(a)}},b}(e.Subscriber)},{"../Subscriber":11}],143:[function(a,b,c){"use strict";var d=a("../observable/ArrayObservable"),e=a("../observable/ScalarObservable"),f=a("../observable/EmptyObservable"),g=a("../observable/concat"),h=a("../util/isScheduler");c.startWith=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){var c=a[a.length-1];h.isScheduler(c)?a.pop():c=null;var i=a.length;return 1===i?g.concat(new e.ScalarObservable(a[0],c),b):i>1?g.concat(new d.ArrayObservable(a,c),b):g.concat(new f.EmptyObservable(c),b)}}},{"../observable/ArrayObservable":58,"../observable/EmptyObservable":61,"../observable/ScalarObservable":68,"../observable/concat":71,"../util/isScheduler":175}],144:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../OuterSubscriber"),f=a("../util/subscribeToResult");c.switchMap=function(a,b){return function(c){return c.lift(new g(a,b))}};var g=function(){function a(a,b){this.project=a,this.resultSelector=b}return a.prototype.call=function(a,b){return b.subscribe(new h(a,this.project,this.resultSelector))},a}(),h=function(a){function b(b,c,d){a.call(this,b),this.project=c,this.resultSelector=d,this.index=0}return d(b,a),b.prototype._next=function(a){var b,c=this.index++;try{b=this.project(a,c)}catch(a){return void this.destination.error(a)}this._innerSub(b,a,c)},b.prototype._innerSub=function(a,b,c){var d=this.innerSubscription;d&&d.unsubscribe(),this.add(this.innerSubscription=f.subscribeToResult(this,a,b,c))},b.prototype._complete=function(){var b=this.innerSubscription;b&&!b.closed||a.prototype._complete.call(this)},b.prototype._unsubscribe=function(){this.innerSubscription=null},b.prototype.notifyComplete=function(b){this.remove(b),this.innerSubscription=null,this.isStopped&&a.prototype._complete.call(this)},b.prototype.notifyNext=function(a,b,c,d,e){this.resultSelector?this._tryNotifyNext(a,b,c,d):this.destination.next(b)},b.prototype._tryNotifyNext=function(a,b,c,d){var e;try{e=this.resultSelector(a,b,c,d)}catch(a){return void this.destination.error(a)}this.destination.next(e)},b}(e.OuterSubscriber)},{"../OuterSubscriber":6,"../util/subscribeToResult":179}],145:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber"),f=a("../util/ArgumentOutOfRangeError"),g=a("../observable/EmptyObservable");c.take=function(a){return function(b){return 0===a?new g.EmptyObservable:b.lift(new h(a))}};var h=function(){function a(a){if(this.total=a,this.total<0)throw new f.ArgumentOutOfRangeError}return a.prototype.call=function(a,b){return b.subscribe(new i(a,this.total))},a}(),i=function(a){function b(b,c){a.call(this,b),this.total=c,this.count=0}return d(b,a),b.prototype._next=function(a){var b=this.total,c=++this.count;c<=b&&(this.destination.next(a),c===b&&(this.destination.complete(),this.unsubscribe()))},b}(e.Subscriber)},{"../Subscriber":11,"../observable/EmptyObservable":61,"../util/ArgumentOutOfRangeError":162}],146:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../OuterSubscriber"),f=a("../util/subscribeToResult");c.takeUntil=function(a){return function(b){return b.lift(new g(a))}};var g=function(){function a(a){this.notifier=a}return a.prototype.call=function(a,b){return b.subscribe(new h(a,this.notifier))},a}(),h=function(a){function b(b,c){a.call(this,b),this.notifier=c,this.add(f.subscribeToResult(this,c))}return d(b,a),b.prototype.notifyNext=function(a,b,c,d,e){this.complete()},b.prototype.notifyComplete=function(){},b}(e.OuterSubscriber)},{"../OuterSubscriber":6,"../util/subscribeToResult":179}],147:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber");c.takeWhile=function(a){return function(b){return b.lift(new f(a))}};var f=function(){function a(a){this.predicate=a}return a.prototype.call=function(a,b){return b.subscribe(new g(a,this.predicate))},a}(),g=function(a){function b(b,c){a.call(this,b),this.predicate=c,this.index=0}return d(b,a),b.prototype._next=function(a){var b,c=this.destination;try{b=this.predicate(a,this.index++)}catch(a){return void c.error(a)}this.nextOrComplete(a,b)},b.prototype.nextOrComplete=function(a,b){var c=this.destination;Boolean(b)?c.next(a):c.complete()},b}(e.Subscriber)},{"../Subscriber":11}],148:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../Subscriber");c.tap=function(a,b,c){return function(d){return d.lift(new f(a,b,c))}};var f=function(){function a(a,b,c){this.nextOrObserver=a,this.error=b,this.complete=c}return a.prototype.call=function(a,b){return b.subscribe(new g(a,this.nextOrObserver,this.error,this.complete))},a}(),g=function(a){function b(b,c,d,f){a.call(this,b);var g=new e.Subscriber(c,d,f);g.syncErrorThrowable=!0,this.add(g),this.safeSubscriber=g}return d(b,a),b.prototype._next=function(a){var b=this.safeSubscriber;b.next(a),b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.next(a)},b.prototype._error=function(a){var b=this.safeSubscriber;b.error(a),b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.error(a)},b.prototype._complete=function(){var a=this.safeSubscriber;a.complete(),a.syncErrorThrown?this.destination.error(a.syncErrorValue):this.destination.complete()},b}(e.Subscriber)},{"../Subscriber":11}],149:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../OuterSubscriber"),f=a("../util/subscribeToResult");c.defaultThrottleConfig={leading:!0,trailing:!1},c.throttle=function(a,b){return void 0===b&&(b=c.defaultThrottleConfig),function(c){return c.lift(new g(a,b.leading,b.trailing))}};var g=function(){function a(a,b,c){this.durationSelector=a,this.leading=b,this.trailing=c}return a.prototype.call=function(a,b){return b.subscribe(new h(a,this.durationSelector,this.leading,this.trailing))},a}(),h=function(a){function b(b,c,d,e){a.call(this,b),this.destination=b,this.durationSelector=c,this._leading=d,this._trailing=e,this._hasTrailingValue=!1}return d(b,a),b.prototype._next=function(a){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=a);else{var b=this.tryDurationSelector(a);b&&this.add(this.throttled=f.subscribeToResult(this,b)),this._leading&&(this.destination.next(a),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=a))}},b.prototype.tryDurationSelector=function(a){try{return this.durationSelector(a)}catch(a){return this.destination.error(a),null}},b.prototype._unsubscribe=function(){var a=this.throttled;this._trailingValue,this._hasTrailingValue,this._trailing,this._trailingValue=null,this._hasTrailingValue=!1,a&&(this.remove(a),this.throttled=null,a.unsubscribe())},b.prototype._sendTrailing=function(){var a=this.destination,b=this.throttled,c=this._trailing,d=this._trailingValue,e=this._hasTrailingValue;b&&c&&e&&(a.next(d),this._trailingValue=null,this._hasTrailingValue=!1)},b.prototype.notifyNext=function(a,b,c,d,e){this._sendTrailing(),this._unsubscribe()},b.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},b}(e.OuterSubscriber)},{"../OuterSubscriber":6,"../util/subscribeToResult":179}],150:[function(a,b,c){"use strict";function d(a){a.subscriber.clearThrottle()}var e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},f=a("../Subscriber"),g=a("../scheduler/async"),h=a("./throttle");c.throttleTime=function(a,b,c){return void 0===b&&(b=g.async),void 0===c&&(c=h.defaultThrottleConfig),function(d){return d.lift(new i(a,b,c.leading,c.trailing))}};var i=function(){function a(a,b,c,d){this.duration=a,this.scheduler=b,this.leading=c,this.trailing=d}return a.prototype.call=function(a,b){return b.subscribe(new j(a,this.duration,this.scheduler,this.leading,this.trailing))},a}(),j=function(a){function b(b,c,d,e,f){a.call(this,b),this.duration=c,this.scheduler=d,this.leading=e,this.trailing=f,this._hasTrailingValue=!1,this._trailingValue=null}return e(b,a),b.prototype._next=function(a){this.throttled?this.trailing&&(this._trailingValue=a,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(d,this.duration,{subscriber:this})),this.leading&&this.destination.next(a))},b.prototype.clearThrottle=function(){var a=this.throttled;a&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),a.unsubscribe(),this.remove(a),this.throttled=null)},b}(f.Subscriber)},{"../Subscriber":11,"../scheduler/async":157,"./throttle":149}],151:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../OuterSubscriber"),f=a("../util/subscribeToResult");c.withLatestFrom=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){var c;"function"==typeof a[a.length-1]&&(c=a.pop());var d=a;return b.lift(new g(d,c))}};var g=function(){function a(a,b){this.observables=a,this.project=b}return a.prototype.call=function(a,b){return b.subscribe(new h(a,this.observables,this.project))},a}(),h=function(a){function b(b,c,d){a.call(this,b),this.observables=c,this.project=d,this.toRespond=[];var e=c.length;this.values=new Array(e);for(var g=0;g<e;g++)this.toRespond.push(g);for(g=0;g<e;g++){var h=c[g];this.add(f.subscribeToResult(this,h,h,g))}}return d(b,a),b.prototype.notifyNext=function(a,b,c,d,e){this.values[c]=b;var f=this.toRespond;if(f.length>0){var g=f.indexOf(c);-1!==g&&f.splice(g,1)}},b.prototype.notifyComplete=function(){},b.prototype._next=function(a){if(0===this.toRespond.length){var b=[a].concat(this.values);this.project?this._tryProject(b):this.destination.next(b)}},b.prototype._tryProject=function(a){var b;try{b=this.project.apply(this,a)}catch(a){return void this.destination.error(a)}this.destination.next(b)},b}(e.OuterSubscriber)},{"../OuterSubscriber":6,"../util/subscribeToResult":179}],152:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(b,c){a.call(this)}return d(b,a),b.prototype.schedule=function(a,b){return void 0===b&&(b=0),this},b}(a("../Subscription").Subscription);c.Action=e},{"../Subscription":12}],153:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=a("../util/root"),f=function(a){function b(b,c){a.call(this,b,c),this.scheduler=b,this.work=c,this.pending=!1}return d(b,a),b.prototype.schedule=function(a,b){if(void 0===b&&(b=0),this.closed)return this;this.state=a,this.pending=!0;var c=this.id,d=this.scheduler;return null!=c&&(this.id=this.recycleAsyncId(d,c,b)),this.delay=b,this.id=this.id||this.requestAsyncId(d,this.id,b),this},b.prototype.requestAsyncId=function(a,b,c){return void 0===c&&(c=0),e.root.setInterval(a.flush.bind(a,this),c)},b.prototype.recycleAsyncId=function(a,b,c){return void 0===c&&(c=0),null!==c&&this.delay===c&&!1===this.pending?b:void e.root.clearInterval(b)},b.prototype.execute=function(a,b){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var c=this._execute(a,b);return c?c:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},b.prototype._execute=function(a,b){var c=!1,d=void 0;try{this.work(a)}catch(a){c=!0,d=!!a&&a||new Error(a)}if(c)return this.unsubscribe(),d},b.prototype._unsubscribe=function(){var a=this.id,b=this.scheduler,c=b.actions,d=c.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==d&&c.splice(d,1),null!=a&&(this.id=this.recycleAsyncId(b,a,null)),this.delay=null},b}(a("./Action").Action);c.AsyncAction=f},{"../util/root":178,"./Action":152}],154:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(){a.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return d(b,a),b.prototype.flush=function(a){var b=this.actions;if(this.active)b.push(a);else{var c;this.active=!0;do if(c=a.execute(a.state,a.delay))break;while(a=b.shift());if(this.active=!1,c){for(;a=b.shift();)a.unsubscribe();throw c}}},b}(a("../Scheduler").Scheduler);c.AsyncScheduler=e},{"../Scheduler":8}],155:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(b,c){a.call(this,b,c),this.scheduler=b,this.work=c}return d(b,a),b.prototype.schedule=function(b,c){return void 0===c&&(c=0),c>0?a.prototype.schedule.call(this,b,c):(this.delay=c,this.state=b,this.scheduler.flush(this),this)},b.prototype.execute=function(b,c){return c>0||this.closed?a.prototype.execute.call(this,b,c):this._execute(b,c)},b.prototype.requestAsyncId=function(b,c,d){return void 0===d&&(d=0),null!==d&&d>0||null===d&&this.delay>0?a.prototype.requestAsyncId.call(this,b,c,d):b.flush(this)},b}(a("./AsyncAction").AsyncAction);c.QueueAction=e},{"./AsyncAction":153}],156:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(){a.apply(this,arguments)}return d(b,a),b}(a("./AsyncScheduler").AsyncScheduler);c.QueueScheduler=e},{"./AsyncScheduler":154}],157:[function(a,b,c){"use strict";var d=a("./AsyncAction"),e=a("./AsyncScheduler");c.async=new e.AsyncScheduler(d.AsyncAction)},{"./AsyncAction":153,"./AsyncScheduler":154}],158:[function(a,b,c){"use strict";var d=a("./QueueAction"),e=a("./QueueScheduler");c.queue=new e.QueueScheduler(d.QueueAction)},{"./QueueAction":155,"./QueueScheduler":156}],159:[function(a,b,c){"use strict";function d(a){var b=a.Symbol;if("function"==typeof b)return b.iterator||(b.iterator=b("iterator polyfill")),b.iterator;var c=a.Set;if(c&&"function"==typeof(new c)["@@iterator"])return"@@iterator";var d=a.Map;if(d)for(var e=Object.getOwnPropertyNames(d.prototype),f=0;f<e.length;++f){var g=e[f];if("entries"!==g&&"size"!==g&&d.prototype[g]===d.prototype.entries)return g}return"@@iterator"}var e=a("../util/root");c.symbolIteratorPonyfill=d,c.iterator=d(e.root),c.$$iterator=c.iterator},{"../util/root":178}],160:[function(a,b,c){"use strict";function d(a){var b,c=a.Symbol;return"function"==typeof c?c.observable?b=c.observable:(b=c("observable"),c.observable=b):b="@@observable",b}var e=a("../util/root");c.getSymbolObservable=d,c.observable=d(e.root),c.$$observable=c.observable},{"../util/root":178}],161:[function(a,b,c){"use strict";var d=a("../util/root").root.Symbol;c.rxSubscriber="function"==typeof d&&"function"==typeof d["for"]?d["for"]("rxSubscriber"):"@@rxSubscriber",c.$$rxSubscriber=c.rxSubscriber},{"../util/root":178}],162:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(){var b=a.call(this,"argument out of range");this.name=b.name="ArgumentOutOfRangeError",this.stack=b.stack,this.message=b.message}return d(b,a),b}(Error);c.ArgumentOutOfRangeError=e},{}],163:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(){var b=a.call(this,"no elements in sequence");this.name=b.name="EmptyError",this.stack=b.stack,this.message=b.message}return d(b,a),b}(Error);c.EmptyError=e},{}],164:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(){var b=a.call(this,"object unsubscribed");this.name=b.name="ObjectUnsubscribedError",this.stack=b.stack,this.message=b.message}return d(b,a),b}(Error);c.ObjectUnsubscribedError=e},{}],165:[function(a,b,c){"use strict";var d=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},e=function(a){function b(b){a.call(this),this.errors=b;var c=Error.call(this,b?b.length+" errors occurred during unsubscription:\n  "+b.map(function(a,b){return b+1+") "+a.toString()}).join("\n  "):"");this.name=c.name="UnsubscriptionError",this.stack=c.stack,this.message=c.message}return d(b,a),b}(Error);c.UnsubscriptionError=e},{}],166:[function(a,b,c){"use strict";c.errorObject={e:{}}},{}],167:[function(a,b,c){"use strict";c.identity=function(a){return a}},{}],168:[function(a,b,c){"use strict";c.isArray=Array.isArray||function(a){return a&&"number"==typeof a.length}},{}],169:[function(a,b,c){"use strict";c.isArrayLike=function(a){return a&&"number"==typeof a.length}},{}],170:[function(a,b,c){"use strict";c.isDate=function(a){return a instanceof Date&&!isNaN(+a)}},{}],171:[function(a,b,c){"use strict";c.isFunction=function(a){return"function"==typeof a}},{}],172:[function(a,b,c){"use strict";var d=a("../util/isArray");c.isNumeric=function(a){return!d.isArray(a)&&a-parseFloat(a)+1>=0}},{"../util/isArray":168}],173:[function(a,b,c){"use strict";c.isObject=function(a){return null!=a&&"object"==typeof a}},{}],174:[function(a,b,c){"use strict";c.isPromise=function(a){return a&&"function"!=typeof a.subscribe&&"function"==typeof a.then}},{}],175:[function(a,b,c){"use strict";c.isScheduler=function(a){return a&&"function"==typeof a.schedule}},{}],176:[function(a,b,c){"use strict";c.noop=function(){}},{}],177:[function(a,b,c){"use strict";function d(a){return a?1===a.length?a[0]:function(b){return a.reduce(function(a,b){return b(a)},b)}:e.noop}var e=a("./noop");c.pipe=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];return d(a)},c.pipeFromArray=d},{"./noop":176}],178:[function(a,b,c){(function(a){"use strict";var b="undefined"!=typeof window&&window,d="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,e=b||void 0!==a&&a||d;c.root=e,function(){if(!e)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],179:[function(a,b,c){"use strict";var d=a("./root"),e=a("./isArrayLike"),f=a("./isPromise"),g=a("./isObject"),h=a("../Observable"),i=a("../symbol/iterator"),j=a("../InnerSubscriber"),k=a("../symbol/observable");c.subscribeToResult=function(a,b,c,l){var m=new j.InnerSubscriber(a,c,l);if(m.closed)return null;if(b instanceof h.Observable)return b._isScalar?(m.next(b.value),m.complete(),null):(m.syncErrorThrowable=!0,b.subscribe(m));if(e.isArrayLike(b)){for(var n=0,o=b.length;n<o&&!m.closed;n++)m.next(b[n]);m.closed||m.complete()}else{if(f.isPromise(b))return b.then(function(a){m.closed||(m.next(a),m.complete())},function(a){return m.error(a)}).then(null,function(a){d.root.setTimeout(function(){throw a})}),m;if(b&&"function"==typeof b[i.iterator])for(var p=b[i.iterator]();;){var q=p.next();if(q.done){m.complete();break}if(m.next(q.value),m.closed)break}else if(b&&"function"==typeof b[k.observable]){var r=b[k.observable]();if("function"==typeof r.subscribe)return r.subscribe(new j.InnerSubscriber(a,c,l));m.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var s="You provided "+(g.isObject(b)?"an invalid object":"'"+b+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";m.error(new TypeError(s))}}return null}},{"../InnerSubscriber":2,"../Observable":4,"../symbol/iterator":159,"../symbol/observable":160,"./isArrayLike":169,"./isObject":173,"./isPromise":174,"./root":178}],180:[function(a,b,c){"use strict";var d=a("../Subscriber"),e=a("../symbol/rxSubscriber"),f=a("../Observer");c.toSubscriber=function(a,b,c){if(a){if(a instanceof d.Subscriber)return a;if(a[e.rxSubscriber])return a[e.rxSubscriber]()}return a||b||c?new d.Subscriber(a,b,c):new d.Subscriber(f.empty)}},{"../Observer":5,"../Subscriber":11,"../symbol/rxSubscriber":161}],181:[function(a,b,c){"use strict";function d(){try{return e.apply(this,arguments)}catch(a){return f.errorObject.e=a,f.errorObject}}var e,f=a("./errorObject");c.tryCatch=function(a){return e=a,d}},{"./errorObject":166}]},{},[1])(1)}),!function(a,b){if("object"==typeof exports&&"object"==typeof module)module.exports=b(require("angular"),require("rxjs/Observable"),require("rxjs/Subject"),require("rxjs/add/observable/from"),require("rxjs/add/operator/map"),require("rxjs/add/operator/pluck"),require("rxjs/add/operator/take"),require("rxjs/add/operator/takeUntil"),require("rxjs/add/operator/distinctUntilChanged"));else if("function"==typeof define&&define.amd)define(["angular","rxjs/Observable","rxjs/Subject","rxjs/add/observable/from","rxjs/add/operator/map","rxjs/add/operator/pluck","rxjs/add/operator/take","rxjs/add/operator/takeUntil","rxjs/add/operator/distinctUntilChanged"],b);else{var c="object"==typeof exports?b(require("angular"),require("rxjs/Observable"),require("rxjs/Subject"),require("rxjs/add/observable/from"),require("rxjs/add/operator/map"),require("rxjs/add/operator/pluck"),require("rxjs/add/operator/take"),require("rxjs/add/operator/takeUntil"),require("rxjs/add/operator/distinctUntilChanged")):b(a.angular,a.Rx,a.Rx,a.Rx,a.Rx,a.Rx,a.Rx,a.Rx,a.Rx);for(var d in c)("object"==typeof exports?exports:a)[d]=c[d]}}("undefined"!=typeof self?self:this,function(a,b,c,d,e,f,g,h,i){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=8)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Subject=b.Observable=void 0;var d=c(24),e=c(25);c(26),c(27),c(28),c(29),c(30),c(31),b.Observable=d.Observable,b.Subject=e.Subject},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(2),e=c(21),f=c(22),g=c(23),h=c(7);c(6),c.d(b,"createStore",function(){return d.b}),c.d(b,"combineReducers",function(){return e.a}),c.d(b,"bindActionCreators",function(){return f.a}),c.d(b,"applyMiddleware",function(){return g.a}),c.d(b,"compose",function(){return h.a})},function(a,b,c){"use strict";c.d(b,"a",function(){return f}),b.b=function g(a,b,c){function h(){p===o&&(p=o.slice())}function i(){return n}function j(a){if("function"!=typeof a)throw new Error("Expected listener to be a function.");var b=!0;return h(),p.push(a),function(){if(b){b=!1,h();var c=p.indexOf(a);p.splice(c,1)}}}function k(a){if(!Object(d.a)(a))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===a.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(q)throw new Error("Reducers may not dispatch actions.");try{q=!0,n=m(n,a)}finally{q=!1}for(var b=o=p,c=0;c<b.length;c++){var e=b[c];e()}return a}var l;if("function"==typeof b&&void 0===c&&(c=b,b=void 0),void 0!==c){if("function"!=typeof c)throw new Error("Expected the enhancer to be a function.");return c(g)(a,b)}if("function"!=typeof a)throw new Error("Expected the reducer to be a function.");var m=a,n=b,o=[],p=o,q=!1;return k({type:f.INIT}),l={dispatch:k,subscribe:j,getState:i,replaceReducer:function(a){if("function"!=typeof a)throw new Error("Expected the nextReducer to be a function.");m=a,k({type:f.INIT})}},l[e.a]=function(){var a,b=j;return(a={subscribe:function(a){function c(){a.next&&a.next(i())}if("object"!=typeof a)throw new TypeError("Expected the observer to be an object.");c();var d=b(c);return{unsubscribe:d}}})[e.a]=function(){return this},a},l};var d=c(3),e=c(18),f={INIT:"@@redux/INIT"}},function(a,b,c){"use strict";var d=c(10),e=c(15),f=c(17),g="[object Object]",h=Function.prototype,i=Object.prototype,j=h.toString,k=i.hasOwnProperty,l=j.call(Object);b.a=function(a){if(!Object(f.a)(a)||Object(d.a)(a)!=g)return!1;var b=Object(e.a)(a);if(null===b)return!0;var c=k.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&j.call(c)==l}},function(a,b,c){"use strict";var d=c(11).a.Symbol;b.a=d},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"==typeof window&&(c=window)}a.exports=c},function(a,b,c){},function(a,b,c){"use strict";b.a=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return 0===b.length?function(a){return a}:1===b.length?b[0]:b.reduce(function(a,b){return function(){return a(b.apply(void 0,arguments))}})}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=d(c(9)),f=c(1),g=c(0),h=d(c(32)),i=d(c(33)),j=d(c(34));g.Observable.prototype.$subscribe=j["default"],b["default"]=e["default"].module("ngReduxRx",[]).provider("store",function(){var a=void 0,b=void 0,c=[],d=!1,g={};this.createWith=function(d,g){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];a=e["default"].isObject(d)?(0,f.combineReducers)(d):d,b=g,c=h},this.enableDevTools=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=a,g=b},this.$get=function(j,k){var l=f.applyMiddleware.apply(void 0,function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}(c.map(j.get))),m=d&&k.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?k.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(g):f.compose;return e["default"].extend((0,f.createStore)(a,b,m(l)),{select:h["default"],bindActions:i["default"]})},this.$get.$inject=["$injector","$window"]}).constant("combineReducers",f.combineReducers).name},function(b,c){b.exports=a},function(a,b,c){"use strict";var d=c(4),e=c(13),f=c(14),g="[object Null]",h="[object Undefined]",i=d.a?d.a.toStringTag:void 0;b.a=function(a){return null==a?void 0===a?h:g:i&&i in Object(a)?Object(e.a)(a):Object(f.a)(a)}},function(a,b,c){"use strict";var d=c(12),e="object"==typeof self&&self&&self.Object===Object&&self,f=d.a||e||Function("return this")();b.a=f},function(a,b,c){"use strict";(function(a){var c="object"==typeof a&&a&&a.Object===Object&&a;b.a=c}).call(b,c(5))},function(a,b,c){"use strict";var d=c(4),e=Object.prototype,f=e.hasOwnProperty,g=e.toString,h=d.a?d.a.toStringTag:void 0;b.a=function(a){var b=f.call(a,h),c=a[h];try{a[h]=void 0;var d=!0}catch(a){}var e=g.call(a);return d&&(b?a[h]=c:delete a[h]),e}},function(a,b,c){"use strict";var d=Object.prototype.toString;b.a=function(a){return d.call(a)}},function(a,b,c){"use strict";var d=c(16),e=Object(d.a)(Object.getPrototypeOf,Object);b.a=e},function(a,b,c){"use strict";
b.a=function(a,b){return function(c){return a(b(c))}}},function(a,b,c){"use strict";b.a=function(a){return null!=a&&"object"==typeof a}},function(a,b,c){"use strict";(function(a,d){var e,f=c(20);e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==a?a:d;var g=Object(f.a)(e);b.a=g}).call(b,c(5),c(19)(a))},function(a,b){a.exports=function(a){if(!a.webpackPolyfill){var b=Object.create(a);b.children||(b.children=[]),Object.defineProperty(b,"loaded",{enumerable:!0,get:function(){return b.l}}),Object.defineProperty(b,"id",{enumerable:!0,get:function(){return b.i}}),Object.defineProperty(b,"exports",{enumerable:!0}),b.webpackPolyfill=1}return b}},function(a,b,c){"use strict";b.a=function(a){var b,c=a.Symbol;return"function"==typeof c?c.observable?b=c.observable:(b=c("observable"),c.observable=b):b="@@observable",b}},function(a,b,c){"use strict";function d(a,b){var c=b&&b.type;return"Given action "+(c&&'"'+c.toString()+'"'||"an action")+', reducer "'+a+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}b.a=function(a){for(var b=Object.keys(a),c={},f=0;f<b.length;f++){var g=b[f];"function"==typeof a[g]&&(c[g]=a[g])}var h=Object.keys(c),i=void 0;try{!function(a){Object.keys(a).forEach(function(b){var c=a[b],d=c(void 0,{type:e.a.INIT});if(void 0===d)throw new Error('Reducer "'+b+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");var f="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===c(void 0,{type:f}))throw new Error('Reducer "'+b+"\" returned undefined when probed with a random type. Don't try to handle "+e.a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(c)}catch(a){i=a}return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1];if(i)throw i;for(var e=!1,f={},g=0;g<h.length;g++){var j=h[g],k=c[j],l=a[j],m=k(l,b);if(void 0===m){var n=d(j,b);throw new Error(n)}f[j]=m,e=e||m!==l}return e?f:a}};var e=c(2);c(3),c(6)},function(a,b,c){"use strict";function d(a,b){return function(){return b(a.apply(void 0,arguments))}}b.a=function(a,b){if("function"==typeof a)return d(a,b);if("object"!=typeof a||null===a)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===a?"null":typeof a)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var c=Object.keys(a),e={},f=0;f<c.length;f++){var g=c[f],h=a[g];"function"==typeof h&&(e[g]=d(h,b))}return e}},function(a,b,c){"use strict";b.a=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a){return function(c,f,g){var h=a(c,f,g),i=h.dispatch,j=[],k={getState:h.getState,dispatch:function(a){return i(a)}};return j=b.map(function(a){return a(k)}),i=d.a.apply(void 0,j)(h.dispatch),e({},h,{dispatch:i})}}};var d=c(7),e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}},function(a,c){a.exports=b},function(a,b){a.exports=c},function(a,b){a.exports=d},function(a,b){a.exports=e},function(a,b){a.exports=f},function(a,b){a.exports=g},function(a,b){a.exports=h},function(a,b){a.exports=i},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};b["default"]=function(a){if(!f(a)&&!g(a))throw new TypeError("Unexpected type "+(void 0===a?"undefined":d(a))+", expected 'string' or 'function'");for(var b=e.Observable.from(this),c=arguments.length,h=Array(c>1?c-1:0),i=1;i<c;i++)h[i-1]=arguments[i];return(f(a)?b.pluck.apply(b,[a].concat(h)):b.map(a)).distinctUntilChanged()};var e=c(0),f=function(a){return"string"==typeof a},g=function(a){return"function"==typeof a}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};b["default"]=function(a){var b="function"==typeof a?a(this.dispatch):(0,e.bindActionCreators)(a,this.dispatch);return function(a){return d(a,b)}};var e=c(1)},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=function(a,b,c,e){var f=function(b){return"function"==typeof b&&function(c){a.$$phase||a.$root.$$phase?b(c):a.$apply(function(){return b(c)})}},g=(new d.Subject).take(1);return a.$on("$destroy",function(){return g.next()}),this.takeUntil(g).subscribe(f(b),f(c),e)};var d=c(0)}])}),angular.module("betfair.extensions",["betfair.lodash","betfair.socketio","betfair.extensions.analytics","betfair.extensions.clients","betfair.extensions.browser","betfair.extensions.core","betfair.extensions.device","betfair.extensions.favourites","betfair.extensions.livestream","betfair.extensions.locale","betfair.extensions.monitoring","betfair.extensions.polling","betfair.extensions.protocols","betfair.extensions.splashing","betfair.extensions.user","betfair.extensions.utils"]),angular.module("betfair.extensions.analytics",["betfair.lodash","betfair.extensions.utils.filters","betfair.extensions.utils.filters","ngCookies"]),angular.module("betfair.extensions.analytics").config(["BF.ANALYTICS","BF.INTERNAL.ANALYTICS",function(a,b){angular.extend(b,a)}]),angular.module("betfair.extensions.browser",[]),angular.module("betfair.extensions.bootstrap",["ng","betfair.lodash","betfair.extensions.core"]),angular.module("betfair.extensions.clients",["betfair.extensions.clients.common","betfair.extensions.clients.exchange","betfair.extensions.clients.sportsbook"]),angular.module("betfair.extensions.clients.common",["betfair.socketio","betfair.extensions.protocols"]),angular.module("betfair.extensions.clients.common").config(["BF.SearchClientProvider",function(a){a.useBaseProtocol()}]),angular.module("betfair.extensions.clients.exchange",["betfair.extensions.clients.common","betfair.extensions.protocols"]),angular.module("betfair.extensions.clients.sportsbook",["betfair.extensions.clients.common","betfair.extensions.protocols"]),angular.module("betfair.extensions.core",[]),angular.module("betfair.extensions.device",[]),angular.module("betfair.extensions.device").config(["BF.DEVICE","BF.INTERNAL.DEVICE",function(a,b){angular.extend(b,a)}]),angular.module("betfair.extensions.favourites",["betfair.lodash","betfair.extensions.clients","betfair.extensions.core","betfair.extensions.user","betfair.extensions.utils.helpers"]),angular.module("betfair.extensions.livestream",["betfair.lodash","betfair.extensions.clients.common","betfair.extensions.device","betfair.extensions.utils.filters"]),angular.module("betfair.extensions.locale",[]),angular.module("betfair.extensions.monitoring",["betfair.extensions.analytics"]),angular.module("betfair.extensions.polling",["betfair.lodash"]),angular.module("betfair.extensions.protocols",["betfair.extensions.core","betfair.extensions.utils.helpers"]),angular.module("betfair.extensions.protocols").config(["BF.TRANSPORT","BF.INTERNAL.TRANSPORT",function(a,b){angular.extend(b,a)}]),angular.module("betfair.extensions.user",["betfair.extensions.protocols"]),angular.module("betfair.extensions.utils",["betfair.extensions.utils.directives","betfair.extensions.utils.filters","betfair.extensions.utils.helpers"]),angular.module("betfair.extensions.utils.directives",["betfair.extensions.user"]),angular.module("betfair.extensions.utils.filters",[]),angular.module("betfair.extensions.utils.helpers",["betfair.lodash","betfair.extensions.core"]),angular.module("betfair.extensions.splashing",["betfair.lodash","betfair.extensions.core","betfair.extensions.protocols","betfair.extensions.user"]),angular.module("betfair.extensions.wrapper",["betfair.extensions.device","betfair.lodash"]),angular.module("betfair.extensions.analytics").factory("BF.AnalyticsBase",["BF.ANALYTICS",function(a){return function(b){var c=b||function(a){return a};return{create:angular.noop,set:angular.noop,send:angular.noop,sendPageView:function(b,d){this.send(a.hitType.pageView,b,c(d||{}))},sendEvent:function(b,d,e,f){this.send(a.hitType.event,b,d,e,c(f||{}))}}}}]),angular.module("betfair.extensions.analytics").factory("BF.Analytics",["BF.INTERNAL.ANALYTICS","$window","BF.AnalyticsBase","BF.MetricsMapper",function(a,b,c,d){var e=d(a.rules,a.fields,a.toTransform);return angular.extend({},c(e),{create:function(c,d){var e=[c,d];b.analytics(a.actions.create,e)},set:function(c,d){var f={};f[c]=d,f=e(f);var g=Object.keys(f).pop()||c,h=f[g]||d;b.analytics(a.actions.set,g,h)},send:function(c){var d;angular.isUndefined(c)||(d=Array.prototype.slice.call(arguments),b.analytics(a.actions.send,d))}})}]),angular.module("betfair.extensions.analytics").constant("BF.ANALYTICS",{event:{action:{addedAnotherFavourite:"Added Another Favourite",addedBetToBetslip:"Added Bet to Betslip",addedBetToBetslipAllPopularBets:"Added Bet to Betslip All Popular Bets",addedCard:"Added Card",addedCardCancelled:"Added Card Cancelled",appliedBetExtraRefund:"Applied Bet Extra Refund",attemptedCashOut:"Attempted Cash Out",betId:"Bet ID",cashOutavailable:"Cash Out available",changedCommunicationPreferences:"Changed Communication Preferences",changedFilter:"Changed Filter",changedOddsInBetslip:"Changed Odds in Betslip",changedStakeInBetslip:"Changed Stake in Betslip",chatNowLiveChat:"Chat Now Live Chat",checkedEmail:"Checked Email",checkedUsername:"Checked Username",clicked:"Clicked",clickedAccountInfo:"Clicked Account Info",clickedAllCashOut:"Clicked All Cash Out",clickedAllMarketsLink:"Clicked All Markets Link",clickedArrow:"Clicked Arrow",clickedAZ:"Clicked AZ",clickedBackAll:"Clicked Back All",clickedBackedToAntepost:"Clicked Backed to Antepost",clickedBanner:"Clicked Banner",clickedBetNow:"Clicked Bet Now",clickedCashoutMultiples:"Clicked Cashout Multiples",clickedChatNow:"Clicked Chat Now",clickedChip:"Clicked Chip",clickedCompetitionLink:"Clicked Competition Link",clickedConfirmBet:"Clicked Confirm Bet",clickedCountryLink:"Clicked Country Link",clickedCouponLink:"Clicked Coupon Link",clickedElementInGeneralNav:"Clicked Element in General Nav",clickedElementInLinks:"Clicked Element in Links",clickedElementInPageNav:"Clicked Element in Page Nav",clickedElementInSubNav:"Clicked Element in Sub Nav",clickedEngagement:"Clicked Engagement",clickedEventBar:"Clicked Event Bar",clickedEventLink:"Clicked Event Link",clickedFacetLink:"Clicked Facet Link",clickedFavourite:"Clicked Favourite",clickedForgottenUsername:"Clicked Forgotten Username",clickedFullSiteLink:"Clicked Full Site Link",clickedJoinNow:"Clicked Join Now",clickedLayAll:"Clicked Lay All",clickedLiveMediaLink:"Clicked Live Media Link",clickedLogIn:"Clicked Log In",clickedMarketBar:"Clicked Market Bar",clickedMarketLink:"Clicked Market Link",clickedMoreEventsLinks:"Clicked More Events Links",clickedMultiples:"Clicked Multiples",clickedNewToBetfair:"Clicked New to Betfair",clickedOnInfoIcon:"Clicked on Info Icon",clickedOnRefreshIcon:"Clicked on Refresh Icon",clickedOnRulesIcon:"Clicked on Rules Icon",clickedOpenEligibleGames:"Clicked OpenEligibleGames",clickedOpenTermsAndConditions:"Clicked OpenTermsAndConditions",clickedOtherBetfairApps:"Clicked Other Betfair Apps",clickedPlaceBet:"Clicked Place Bet",clickedPlayDemo:"Clicked Play Demo",clickedPlayNow:"Clicked Play Now",clickedPopOutLink:"Clicked Pop Out Link",clickedPromoLink:"Clicked Promo Link",clickedPromotion:"Clicked Promotion",clickedQuickLink:"Clicked Quick Link",clickedResultLink:"Clicked Result Link",clickedRunner:"Clicked Runner",clickedSeeAllMarkets:"Clicked See All Markets",clickedSeeAllRunners:"Clicked See All Runners",clickedSeeFullMarket:"Clicked See Full Market",clickedShowMoreGames:"Clicked Show More Games",clickedSiteFeedbackLink:"Clicked Site Feedback Link",clickedSportLink:"Clicked Sport Link",clickedTermsAndConditionsLink:"Clicked Terms and Conditions Link",clickedWatchLive:"Clicked Watch Live",clickedWheresTheMoneyLink:"Clicked Where's the Money Link",clickedXSellGame:"Clicked X-Sell Game",clickedXSellLink:"Clicked X-Sell Link",clickedXVerticalLink:"Clicked X-Vertical Link",clickPlayTurbo:"Click Play Turbo",closedBetRefund:"Closed Bet Refund",closedDataVisualizationModule:"Closed Data Visualization Module",closedDataVisualizationPopOut:"Closed Data VisualizationPop Out",closedLiveVideoModule:"Closed Live Video Module",closedLiveVideoPopOut:"Closed Live Video Pop Out",closedModule:"Closed Module",closedRunnerForm:"Closed Runner Form",closedTimeform:"Closed Timeform",collapsedGamesPanel:"Collapsed Games Panel",collapsedModule:"Collapsed Module",completedRegistration:"Completed Registration",configurepPinLogin:"Configure PIN Login",confirmedDob:"Confirmed DOB",continuedToPaymentMethod:"Continued to {paymentMethod}",disablePinLogin:"Disable PIN Login",downloadedSoftware:"Downloaded Software",editCard:"Edit Card",entered:"Entered",error:"Error",expandedGamesPanel:"Expanded Games Panel",expandedModule:"Expanded Module",failedCashOut:"Failed Cash Out",fieldError:"{field} Error",followedEmailLink:"Followed Email Link",followedPinLink:"Followed PIN Link",gameImpression:"Game Impression",gaveChangeReason:"Gave Change Reason",landedOnEmailFlow:"Landed on Email Flow",landedOnFlow:"Landed on Flow",landedOnPasswordFlow:"Landed on Password Flow",landedOnUsernameFlow:"Landed on Username Flow",locationServicesFailure:"Location Services Failure",locationServicesSuccess:"Location Services Success",loggedIn:"Logged In",loggedOut:"Logged Out",madeDeposit:"Made Deposit",madeFirstDeposit:"Made First Deposit",mobileError:"Mobile Error",mobileorEmailError:"Mobile or Email Error",mobileorEmailErrorAccountClosed:"Mobile or Email Error Account Closed",mobileorEmailErrorAccountLocked:"Mobile or Email Error Account Locked",mobileorEmailErrorAccountSuspended:"Mobile or Email Error Account Suspended",movedLiquiditySlider:"Moved Liquidity Slider",navigatedTo:"Navigated To",navigatedToEvent:"Navigated to Event",navigatedToItemName:"Navigated to {itemName}",navigatedToPaymentMethod:"Navigated to {paymentMethod}",noThanksLiveChat:"No Thanks Live Chat",noThanksToPushChat:"No Thanks to Push Chat",offeredBetRefund:"Offered Bet Refund",openedBetRefund:"Opened Bet Refund",openedBetslip:"Opened Betslip",openedContextualHelp:"Opened Contextual Help",openedGraph:"Opened Graph",openedLiveStream:"Opened Live Stream",openedLiveVideo:"Opened Live Video",openedMarketInfo:"Opened Market Info",openedMarketTypeMenu:"Opened Market Type Menu",openedRunnerForm:"Opened Runner Form",openedTimeform:"Opened Timeform",optedIn:"Opted In",partialCashOutAttempted:"Partial Cashout - Attempted Cashout",partialCashOutClickedSlider:"Partial Cashout - Clicked Slider",partialCashOutClosed:"Partial Cashout - Closed",partialCashOutDraggedSlider:"Partial Cashout - Dragged Slider",partialCashOutFailed:"Partial Cashout - Failed Cashout",partialCashOutLockedStake:"Partial Cashout - Locked Stake",partialCashOutOpened:"Partial Cashout - Opened",partialCashOutStakeMovedOffSlider:"Partial Cashout - Stake Moved Off Slider",partialCashOutSuccessful:"Partial Cashout - Succeeded Cashout",partialCashOutUnlockedStake:"Partial Cashout - Unlocked stake",pinLogin:"PIN Login",placeBets:"Place Bets",placedBet:"Placed Bet",placedMultipleBet:"Placed Multiple Bet",poppedoutDataVisualization:"Popped out Data Visualization",poppedoutLiveVideo:"Popped out Live Video",receivedMigrationNotification:"Received Migration Notification",registrationBlocked:"Registration Blocked",removeCard:"Remove Card",removedBetFromBetslip:"Removed Bet from Betslip",removedBetRefund:"Removed Bet Refund",removedBetRefundByEachWay:"Removed Bet Refund by Each Way",removedCommunicationMethod:"Removed Communication Method",removedCommunicationsProduct:"Removed Communications Product",requestedEmail:"Requested Email",requestedSms:"Requested SMS",resetPassword:"Reset Password",saved:"Saved",saw:"Saw",sawElementInVipWebsite:"Saw Element in VIP Website",sawEngagement:"Saw Engagement",sawXSellGame:"Saw X-Sell Game",scrolledThroughResults:"Scrolled Through Results",selectedAddNewCard:"Selected Add New Card",selectedConfirmBetsCheckBox:"Selected Confirm Bets Check Box",selectedCountry:"Selected Country",selectedEmailAddressFlow:"Selected Email Address Flow",selectedEvent:"Selected Event",selectedFromDropDown:"Selected From Drop Down",selectedLanguage:"Selected Language",selectedMarketType:"Selected Market Type",selectedMarketView:"Selected Market View",selectedPasswordFlow:"Selected Password Flow",selectedSpTickbox:"Selected SP Tickbox",selectedSuggestedAmount:"Selected Suggested Amount",selectedUsernameFlow:"Selected Username Flow",sendReminderToEmail:"Send Reminder to Email",sendReminderToMobile:"Send Reminder to Mobile",setUpDepositLimit:"Set Up Deposit Limit",smsError:"SMS Error",startedDeposit:"Started Deposit",startedFirstDeposit:"Started First Deposit",startedRegistration:"Started Registration",submittedBetslip:"Submitted Betslip",submittedDobAndSq:"Submitted DOB and SQ",submittedPinDobAndSq:"Submitted PIN DOB and SQ",successfulCashOut:"Successful Cash Out",switchedToLandscape:"Switched to Landscape",switchedToPortrait:"Switched to Portrait",testing:"Testing",toggledMobilePin:"Toggled Mobile PIN",toggledPushNotifications:"Toggled Push Notifications",toggledToDataVisualization:"Toggled to Data Visualization",toggledToLiveVideo:"Toggled to Live Video",turnedOffMatchNotifications:"Turned Off Match Notifications",turnedOffTeamNotifications:"Turned Off Team Notifications",turnedOnMatchNotifications:"Turned On Match Notifications",turnedOnTeamNotifications:"Turned On Team Notifications",unselectedConfirmBetsCheckBox:"Unselected Confirm Bets Check Box",unselectedSpTickbox:"Unselected SP Tickbox",usernameOrEmailCaptchaError:"Username or Email Captcha Error",usernameOrEmailErrorAccountClosed:"Username or Email Error Account Closed",usernameOrEmailErrorAccountLocked:"Username or Email Error Account Locked",usernameOrEmailErrorAccountSuspended:"Username or Email Error Account Suspended",viewedBetslip:"Viewed Betslip",viewedRaceCard:"Viewed Race Card",viewedTab:"Viewed Tab",withdrawFunds:"Withdraw Funds"},category:{account:"Account",accountDetailsDetails:"Account Details Details",accountDetailsPlayerProtection:"Account Details Player Protection",banner:"Banner",betslip:"Betslip",betting:"Betting",cashier:"Cashier",gaming:"Gaming",generalNavigation:"General Navigation",header:"Header","interface":"Interface",italianMigration:"Italian Migration",languageSettings:"Language Settings",liveChat:"Live Chat",liveMedia:"Live Media",locationServices:"Location Services",maxymiserTesting:"Maxymiser Testing",notifications:"Notifications",orientation:"Orientation",paymentsCardManagement:"Payments Card Management",paymentsDeposit:"Payments Deposit",paymentsWithdraw:"Payments Withdraw",promo:"Promo",promotions:"Promotions",pushNotifications:"Push Notifications",recoverUp:"Recover UP",registration:"Registration",securitySettings:"Security Settings",subNavigation:"Sub Navigation",vip:"VIP",xSell:"X Sell"}},hitType:{event:"event",pageView:"pageview",social:"social",timing:"timing"}}),angular.module("betfair.extensions.analytics").constant("BF.INTERNAL.ANALYTICS",{actions:{create:"create",set:"set",send:"send"},fields:{eventValue:"eventValue",value:"value"},rules:{dimensions:{accountId:"dimension1",appId:"dimension54",applicationType:"dimension55",betDelay:"dimension80",betDirection:"dimension11",betFormat:"dimension28",betId:"dimension29",betName:"dimension9",betResponse:"dimension19",betslipTab:"dimension42",betsSource:"dimension51",bettingUsers:"dimension50",betType:"dimension10",betUpsell:"dimension86",bidCode:"dimension63",cashoutIndicator:"dimension89",cashoutPosition:"dimension71",cashoutType:"dimension70",changeDirection:"dimension41",clkIdCode:"dimension62",column:"dimension31",competition:"dimension6",cppPromotionId:"dimension81",cppPromotionType:"dimension82",creative:"dimension33",currency:"dimension16",destinationUrl:"dimension34",eachWay:"dimension91",efidCode:"dimension59",element:"dimension35",engagementId:"dimension36",event:"dimension7",eventCountry:"dimension84",forumUser:"dimension53",freeBet:"dimension77",gameCategory:"dimension85",gameId:"dimension13",gameName:"dimension12",genericTestGroup:"dimension26",genericTestName:"dimension25",inPlayIndicator:"dimension79",insurance:"dimension90",jurisdiction:"dimension27",lastGamePlayed:"dimension73",locale:"dimension15",locationType:"dimension75",loginStatus:"dimension20",mantisBucketId:"dimension22",mantisTestGroup:"dimension24",mantisTestName:"dimension23",market:"dimension8",media:"dimension69",module:"dimension3",mpchCode:"dimension60",multipleBetType:"dimension30",oddsBetType:"dimension40",orientation:"dimension56",overround:"dimension46",pageArea:"dimension18",pageType:"dimension68",personalised:"dimension106",pidCode:"dimension64",placement:"dimension32",plaCode:"dimension61",position:"dimension67",priceRushedD:"dimension76",priorModuleClicked:"dimension43",product:"dimension17",productDestination:"dimension48",promoCode:"dimension65",promotionName:"dimension87",pushCampaignCode:"dimension83",registeredStatus:"dimension21",rfrCode:"dimension57",scheduledTime:"dimension38",secondLastGamePlayed:"dimension74",sessionType:"dimension49",sidCode:"dimension58",sliderEvaluation:"dimension45",sliderValue:"dimension44",sourcePageUrl:"dimension37",sport:"dimension5",sportId:"dimension14",tab:"dimension4",trueValue:"dimension39",ttpCode:"dimension66",twoStepUser:"dimension52",underround:"dimension47",vertical:"dimension2",viewType:"dimension72"},metrics:{addedStake:"metric26",betCancellations:"metric19",betsInBetSlip:"metric3",betsPlaced:"metric5",cashoutProfit:"metric37",cashoutReturn:"metric38",cashouts:"metric14",changedOdds:"metric28",changedStake:"metric27",clickedPlayNow:"metric32",completedTwoStep:"metric30",depositAmount:"metric4",deposits:"metric24",engagementClicks:"metric16",engagementConversion:"metric33",engagementImpressions:"metric15",exchangeBetsPlaced:"metric6",formViews:"metric21",fundsTransferred:"metric23",multipleBets:"metric13",multipleCashouts:"metric11",odds:"metric2",oddsFinal:"metric35",oddsBets:"metric18",priceRushedM:"metric34",registrationsCompleted:"metric9",registrationsStarted:"metric8",singleBets:"metric12",singleCashouts:"metric10",sliderUses:"metric22",spBets:"metric17",sportsbookBetsPlaced:"metric7",stakeAmount:"metric1",startedTwoStep:"metric29",turnedOffTwoStep:"metric31",videoPlays:"metric20",withdrawals:"metric25"}},toTransform:{defaultFilter:"lowercase",overrides:{dimension54:{filter:null},metric1:{filter:"toFixed",params:[2]},metric2:{filter:"toFixed",params:[2]},metric35:{filter:"toFixed",params:[2]},metric37:{filter:"toFixed",params:[2]},metric38:{filter:"toFixed",params:[2]}}}}),angular.module("betfair.extensions.analytics").constant("BF.INTERNAL.GTM",{fields:{action:"action",category:"category",label:"label"},rules:{dimensions:{accountId:"acc_id",acceptOddsMovementIndicator:"cd95",antepost:"cd131",appId:"app_id",appVersion:"cd4",bankerIndicator:"cd111",betDirection:"cd11",betFormat:"cd28",betId:"cd29",betName:"cd9",betOriginLocation:"cd85",betResponse:"cd19",betType:"cd10",betsSource:"cd51",bidCode:"bid",cashoutIndicator:"cd89",cashoutType:"cd70",clkIdCode:"clkid",competition:"cd6",competitionId:"cd129",confirmBetsIndicator:"cd94",country:"country",currency:"cd16",destinationUrl:"cd34",eachWay:"cd91",edgeIndicator:"cd96",efidCode:"efid",engagementId:"cd36",errorCode:"cd99",event:"cd7",eventId:"cd84",gaTargetProperty:"ga_target_property",gameId:"cd13",gameName:"cd12",inPlayIndicator:"cd79",insurance:"cd90",jurisdiction:"jurisdiction",locale:"locale",loginStatus:"login_status",mantisBucketId:"bucket_id",mantisTestGroup:"test_group",mantisTestName:"test_name",market:"cd8",marketId:"cd101",module:"cd3",mpchCode:"mpch",multipleArray:"multiple_array",multipleBetType:"cd30",nextRaceIndicator:"cd133",orientation:"orientation",page:"page",pageArea:"cd18",personalised:"cd106",pidCode:"pid",plaCode:"pla",position:"cd67",priceRushedD:"cd77",product:"product",promoCode:"promo_code",registeredStatus:"reg_status",rfrCode:"rfr",scheduledTime:"cd38",selectionId:"cd102",sidCode:"sid",sport:"cd5",sportId:"cd14",stickyTags:"StickyTags",trackingTags:"TrackingTags",ttpCode:"ttp",useAvailableBonusIndicator:"cd97",value:"value",vertical:"vertical"},metrics:{autoCashoutProfit:"cm51",cashoutAmount:"cm50",cashoutProfit:"cm37",cashoutReturn:"cm38",numberOfLegs:"cm49",odds:"cm2",oddsFinal:"cm35",stakeAmount:"cm1"}},toTransform:{defaultFilter:"lowercase",overrides:{app_id:{filter:null},cm1:{filter:"toFixed",params:[2]},cm2:{filter:"toFixed",params:[2]},cm35:{filter:"toFixed",params:[2]},cm37:{filter:"toFixed",params:[2]},cm38:{filter:"toFixed",params:[2]},ga_target_property:{filter:null},value:{filter:"toFixed",params:[2]}}}}),angular.module("betfair.extensions.analytics").constant("BF.TAGGING",{event:{action:{betting:{addedBetToBetslip:"Added Bet to Betslip",submittedBet:"Submitted Bet",removedBet:"Removed Bet",confirmedBet:"Confirmed Bet",placedBet:"Placed Bet",placeBets:"Place Bets",cancelledBet:"Cancelled Bet",changedOdds:"Changed Odds",changedStake:"Changed Stake",updatedBet:"Updated Bet",editedBet:"Edited Bet"},cashout:{attemptedCashout:"Attempted Cashout",failedCashout:"Failed Cashout",succeededCashout:"Succeeded Cashout",partialCashoutAttempted:"Partial Cashout - Attempted Cashout",partialCashoutClickedSlider:"Partial Cashout - Clicked Slider",partialCashoutClosed:"Partial Cashout - Closed",partialCashoutDraggedSlider:"Partial Cashout - Dragged Slider",partialCashoutFailed:"Partial Cashout - Failed Cashout",partialCashoutLockedStake:"Partial Cashout - Locked Stake",partialCashoutOpened:"Partial Cashout - Opened",partialCashoutStakeMovedOff:"Partial Cashout - Stake Moved Off Slider",partialCashoutSucceeded:"Partial Cashout - Succeeded Cashout",partialCashoutUnlockedStake:"Partial Cashout - Unlocked Stake",opened:"Opened",closed:"Closed",clicked:"Clicked"},autoCashout:{autoCashout:"Auto Cashout",autoPartialCashout:"Auto/Partial Cashout",removeAutoCashout:"Removed Auto Cashout",removeAutoCashoutFail:"Removed Auto Cashout - Fail",attemptedAutoCashout:"Attempted Create Auto Cashout",createAutoCashout:"Created Auto Cashout",createAutoCashoutFail:"Created Auto Cashout - Fail"},media:{closedMedia:"Closed Media",openedMedia:"Opened Media",changedVisFormat:"Changed Vis Format",mediaError:"Media Error"},gaming:{clickedPlayNow:"Clicked Play Now",clickedPlayDemo:"Clicked Play Demo",sawGame:"Saw Game"},banner:{clickedBanner:"Clicked Banner",sawBanner:"Saw Banner"},quickLink:{clickedQuickLink:"Clicked Quick Link"},navigation:{navigatedTo:"Navigated To",opened:"Opened",closed:"Closed"},siteSearch:{ranSearch:"Ran a Search"},"interface":{checked:"Checked",clicked:"Clicked",clickedTooltip:"Clicked Tool Tip",closedTooltip:"Closed Tool Tip",closed:"Closed",decreased:"Decreased",increased:"Increased",openedInFullScreen:"Opened in Full Screen",openedInPopOut:"Opened in Pop Out",opened:"Opened",saw:"Saw",scrolled:"Scrolled",selected:"Selected",toggledOff:"Toggled Off",toggledOn:"Toggled On",unchecked:"Unchecked",moved:"Moved"}},category:{banner:"Banner",betting:"Betting",cashout:"Cashout",gaming:"Gaming","interface":"Interface",media:"Media",multipleBet:"Multiple Bet",siteSearch:"Site Search",navigation:"Navigation",quickLinks:"Quick Links"}},dimensions:{vertical:{sports:"Sports",ecommerce:"Ecommerce",gaming:"Gaming"},betType:{fixed:"Fixed",exchange:"Exchange"},betDirection:{back:"Back",lay:"Lay"},betResponse:{matched:"Matched",unmatched:"Unmatched",sp:"Starting Price"},loginStatus:{loggedIn:"Logged In",loggedOut:"Logged Out"},registeredStatus:{registered:"Registered",unregistered:"Unregistered"},betFormat:{single:"Single",multiple:"Multiple"},orientation:{portrait:"Portrait",landscape:"Landscape",desktop:"Desktop"},cashoutType:{auto:"Auto",full:"Full",partial:"Partial"},priceRushedD:{yes:"Yes",no:"No"},inPlayIndicator:{yes:"Yes",no:"No"},cashoutIndicator:{yes:"Yes",no:"No"},insurance:{yes:"Yes",no:"No"},eachWay:{yes:"Yes",no:"No"},confirmBetsIndicator:{yes:"Yes",no:"No"},acceptOddsMovementIndicator:{yes:"Yes",no:"No"},edgeIndicator:{eachWay:"EW Edge",acca:"Edge Acca",no:"No"},useAvailableBonusIndicator:{yes:"Yes",no:"No"},bankerIndicator:{yes:"Yes",no:"No"}},hitType:{event:"event",pageView:"pageview"},eventType:{event:"ga_event",pageLoad:"ga_pageLoad"}}),angular.module("betfair.extensions.analytics").config(["$provide",function(a){a.decorator("$window",["$delegate",function(a){return a.analytics=function(b,c){angular.isFunction(a.ga)&&a.ga.apply(a,[b].concat(c))},a.dataLayer=a.dataLayer||[],a}])}]),angular.module("betfair.extensions.analytics").factory("BF.GTagManager",["BF.INTERNAL.GTM","BF.TAGGING","BF.GTagManagerHelper","BF.User","$window","$filter","BF.Lodash","BF.MetricsMapper",function(a,b,c,d,e,f,g,h){var i=h(a.rules,a.fields,a.toTransform),j=i||function(a){return a},k=g.partialRight(g.mapValues,f("lowercase"));return{create:void 0,set:void 0,send:function(){function a(a){var d=c.getPageViewObject(a);return angular.extend({event:b.eventType.pageLoad},j(d||{}))}function f(a,c,e,f,g){var h=angular.extend({},f,{mantisBucketId:d.getBucketId()});return angular.extend(k({event:b.eventType.event,category:a,action:c,label:e,eventCallback:g}),j(h||{}))}return function(c){var d=g.tail(arguments);switch(c){case b.hitType.pageView:e.dataLayer.push(a.apply(this,d));break;case b.hitType.event:e.dataLayer.push(f.apply(this,d))}}}(),sendPageView:function(a){this.send(b.hitType.pageView,a)},sendEvent:function(a,c,d,e,f){this.send(b.hitType.event,a,c,d,e,f)}}}]),angular.module("betfair.extensions.analytics").factory("BF.MetricsMapper",["$filter",function(a){return function(b,c,d){function e(e,f){var g,h,i,j=b.dimensions[e]||b.metrics[e]||c[e];return j&&(g=d.overrides[j],h=g?g.filter:d.defaultFilter,i=g?g.params:[],null!==h&&(f=a(h).apply(this,[f].concat(i)))),{name:j,value:f}}return function(a){var b={};return angular.forEach(a,function(a,c){var d=e(c,a);d.name&&(b[d.name]=d.value)}),b}}}]),angular.module("betfair.extensions.bootstrap").provider("BF.Bootstrap",["BF.Lodash",function(a){var b="betfair.extensions.internal.$rootElement",c="betfair.extensions.internal.bootstrap",d=["ng",b,c],e={element:void 0,moduleName:void 0,applicationKey:void 0,injectorModules:d,moduleDependencies:{},modulePromises:{}};this.setBootstrapElement=function(a){if(!angular.isElement(a))throw new Error("Type Error: `element` should be a DOM element.");return e.element=a,this},this.setApplicationModuleName=function(a){if(!angular.isString(a))throw new Error("Type Error: `moduleName` should be a String.");return e.moduleName=a,this},this.setApplicationKey=function(a){if(!angular.isString(a))throw new Error("Type Error: `applicationKey` should be a String.");return e.applicationKey=a,this},this.setInjectorModules=function(a){if(!angular.isString(a)&&!angular.isArray(a))throw new Error("Type Error: `modules` should be either a String or an Array.");return angular.isString(a)&&(a=[a]),e.injectorModules=d.concat(a),this},this.injectServiceDependencies=function(a){if(!angular.isObject(a))throw new Error("Type Error: `dependencies` should be an Object.");return angular.forEach(a,function(a,b){
if(!angular.isArray(a[Object.keys(a)[0]]))throw new Error("Type Error: `"+b+"` dependencies should be an Array.")}),e.moduleDependencies=a,this},this.resolvePromises=function(b){if(!angular.isObject(b))throw new Error("Type Error: `promises` should be an Object.");return angular.forEach(b,function(b,c){if(b.isRequired=!a.isBoolean(b.isRequired)||b.isRequired,!angular.isArray(b.resolve))throw new Error("Type Error: `"+c+"` resolve property should be an Array.");if(!angular.isFunction(a.last(b.resolve)))throw new Error("Type Error: `"+c+"` last array value should be a Function.")}),e.modulePromises=b,this},this.$get=["$q",function(d){function f(){return d.all(a.map(e.modulePromises,function(b,c){return b.instance.then(function(a){return{isFulfilled:!0,name:c,data:a}},function(e){return b.isRequired?d.reject(a.set({},c,e)):{isFulfilled:!1,name:c,data:e}})}))}function g(){var b=angular.injector(e.injectorModules);return angular.forEach(e.moduleDependencies,function(a,c){angular.forEach(a,function(a,d){var f=b.get(d),g=a.reduce(function(a,b){return f[b]&&(a[b]=f[b]),a},{});angular.module(e.moduleName).constant(c,g)})}),angular.forEach(e.modulePromises,function(a,c){var d=b.instantiate(a.resolve);if(!angular.isObject(d)||!angular.isFunction(d.then))throw new Error("Type Error: `"+c+"` resolve function should be a Promise.");e.modulePromises[c].instance=d}),f().then(function(b){var c={};return angular.forEach(b,function(a){angular.module(e.moduleName).constant(a.name,a.data),c[a.name]={isFulfilled:a.isFulfilled,data:a.data}}),d.resolve(a.size(c)>0?c:void 0)})}function h(){angular.bootstrap(e.element,[c,e.moduleName])}return function(){if(!e.element)throw new Error("Validation Error: Bootstrap element is not defined.");if(!e.moduleName)throw new Error("Validation Error: Application module name is not defined.");if(!e.applicationKey)throw new Error("Validation Error: Application key is not defined.");angular.module(c,[]).constant("APPLICATION_KEY",e.applicationKey),angular.module(b,[]).value("$rootElement",angular.element())}(),{initialize:g,run:h}}]}]),angular.module("betfair.extensions.browser").provider("BF.Browser",["$windowProvider",function(a){function b(){var a="modernizr";try{return e.document.localStorage.setItem(a,a),e.document.localStorage.removeItem(a),!0}catch(b){return!1}}function c(){return Boolean(e.document.createElementNS&&e.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}var d=this,e=a.$get();this.FEATURE={LOCAL_STORAGE:"localStorage",SVG:"svg"},this.supports=function(a){if(!angular.isString(a))throw new Error("Provided feature must be string");switch(a){case d.FEATURE.SVG:return c();case d.FEATURE.LOCAL_STORAGE:return b();default:throw new Error('Unknown browser feature "'+a+'"')}},this.$get=function(){return{FEATURE:d.FEATURE,supports:d.supports}}}]),angular.module("betfair.extensions.browser").provider("BF.LocalStorage",function(){function a(a){return["clear","getItem","removeItem","setItem"].reduce(function(b,c){return b[c]=angular.bind(a,a[c]||angular.noop),b},{})}function b(){var a="modernizr";try{localStorage.setItem(a,a),localStorage.removeItem(a)}catch(b){return!1}return!0}var c=a(b()?localStorage:{});angular.extend(this,c,{$get:function(){return c}})}),angular.module("betfair.extensions.clients.common").provider("BF.Internal.BaseCore",function(){function a(a){return angular.isFunction(a)?a:function(){return a}}function b(b){var d={},e={getInternalConfiguration:function(a){var b,e,f,g=d.baseRequest||{};if(!d.endpoint)throw new Error("The client endpoint is mandatory but was not defined!");return d.clientName&&(g.clientName=d.clientName),d.protocolFactory&&(f=a.get(d.protocolFactory)),d.cache&&d.clientName&&(b=a.get(d.cache.factoryName),e=b.get(d.clientName),g.cache=angular.isUndefined(e)?b(d.clientName,d.cache.config):e),{transport:f,baseRequest:g,endpoint:d.endpoint,protocolFactory:d.protocolFactory||c}},setBaseRequest:function(a){return d.baseRequest=a,this},setEndpoint:function(a){return d.endpoint=a,this},useProtocol:function(a){return d.protocolFactory=a,this},useBaseProtocol:function(){return this.useProtocol(c)},setCache:function(a,b){return d.cache={factoryName:a,config:b},this},setClientName:function(a){return d.clientName=a,this}};return angular.extend(e,a(b).call(e,d))}var c="BF.Transport";return b.$get=angular.noop,b}).provider("BF.Internal.BaseClient",["BF.Internal.BaseCoreProvider",function(a){function b(b){return a(function(){this.setClientName(b),this.useProtocol(e),this.useFabricProtocol=angular.bind(this,this.useProtocol,c),this.useJsonRpcProtocol=angular.bind(this,this.useProtocol,d),this.useRescriptProtocol=angular.bind(this,this.useProtocol,e)})}var c="BF.Fabric",d="BF.JsonRPC",e="BF.Rescript";return b.$get=angular.noop,b}]).provider("BF.BaseClient3rdParty",["BF.Internal.BaseCoreProvider",function(a){function b(){return a()}return b.$get=angular.noop,b}]),angular.module("betfair.extensions.clients.common").provider("BF.CashoutReadOnlyClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.CashoutReadOnlyClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{quote:function(b,e){var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/quote"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{marketIds:b,currencyCode:e}});return d.makeRequest(f,g)},getEligibleMarkets:function(b){var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getEligibleMarkets"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{currencyCode:b}});return d.makeRequest(e,f)}}}]}]),angular.module("betfair.extensions.clients.common").provider("BF.CashoutTransactionalClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.CashoutTransactionalClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{cashout:function(b,e,f,g){var h=angular.merge({},c.endpoint,{path:c.endpoint.path+"/cashout"}),i=angular.merge({},c.baseRequest,{method:a.httpMethod.post,params:angular.extend({marketId:b,quoteValue:e,currencyCode:f},g),data:{}});return d.makeRequest(h,i)}}}]}]),angular.module("betfair.extensions.clients.common").factory("BF.Internal.FacetClient",["BF.INTERNAL.TRANSPORT",function(a){return function(b,c){this.facetedSearch=function(d,e){e=e||{};var f=angular.merge({},b.endpoint,{path:b.endpoint.path+"/search"}),g=angular.merge({},b.baseRequest,{method:a.httpMethod.post,data:{filter:d,textQuery:e.textQuery,facets:e.facets,currencyCode:e.currencyCode,locale:e.locale}});return c.makeRequest(f,g)}}}]),angular.module("betfair.extensions.clients.common").provider("BF.FormsAndResultsClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.FormsAndResultsClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{getRaceCard:function(b){var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/raceCard"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({},b)});return d.makeRequest(e,f)},getRaceResults:function(b){var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/raceResults"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({},b)});return d.makeRequest(e,f)},getHorseDetails:function(b){var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/horseDetails"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({},b)});return d.makeRequest(e,f)},getHorseListFromActiveRaceCards:function(b){var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/horseListFromActiveRaceCards"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({},b)});return d.makeRequest(e,f)}}}]}]),angular.module("betfair.extensions.clients.common").provider("BF.NotificationSubscriptionServiceClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.NotificationSubscriptionServiceClient")),this.$get=["$injector","$log",function(b,c){var d=this.getInternalConfiguration(b),e=d.transport;return{register:function(b,c,f){if(!angular.isString(b))throw new Error("deviceId must be a string");if(!angular.isString(c))throw new Error("applicationTypeId must be a string");f=f||{};var g=angular.merge({},d.endpoint,{path:d.endpoint.path+"/register"}),h=angular.merge({},d.baseRequest,{method:a.httpMethod.post,data:angular.extend({deviceId:b,applicationTypeId:c},f)});return e.makeRequest(g,h)},updateNotificationPreferences:function(b,c,f){if(!angular.isString(b))throw new Error("deviceId must be a string");if(!angular.isString(c))throw new Error("applicationTypeId must be a string");if(!angular.isObject(f))throw new Error("notificationPreferences must be defined");var g=angular.merge({},d.endpoint,{path:d.endpoint.path+"/updateNotificationPreferences"}),h=angular.merge({},d.baseRequest,{method:a.httpMethod.post,data:{deviceId:b,applicationTypeId:c,notificationPreferences:f}});return e.makeRequest(g,h)},retrieveNotificationPreferences:function(b,c){if(!angular.isString(b))throw new Error("deviceId must be a string");if(!angular.isString(c))throw new Error("applicationTypeId must be a string");var f=angular.merge({},d.endpoint,{path:d.endpoint.path+"/retrieveNotificationPreferences"}),g=angular.merge({},d.baseRequest,{method:a.httpMethod.post,params:{deviceId:b,applicationTypeId:c}});return e.makeRequest(f,g)},linkApplicationToAccount:function(b,f){if(c.warn("BF.NotificationSubscriptionServiceClient `linkApplicationToAccount` function is deprecated. Use `register` function instead."),!angular.isString(b))throw new Error("deviceId must be a string");if(!angular.isString(f))throw new Error("applicationTypeId must be a string");var g=angular.merge({},d.endpoint,{path:d.endpoint.path+"/linkApplication"}),h=angular.merge({},d.baseRequest,{method:a.httpMethod.post,data:{deviceId:b,applicationTypeId:f}});return e.makeRequest(g,h)},retrieveLinkedApplications:function(b){var c=angular.merge({},d.endpoint,{path:d.endpoint.path+"/retrieveLinkedApplications"});b=b||{};var f=angular.merge({},d.baseRequest,{method:a.httpMethod.post,data:b});return e.makeRequest(c,f)},subscribe:function(b,c,f){if(!angular.isArray(b))throw new Error("topics must be an Array");if(!angular.isArray(c))throw new Error("applicationTypeIds must be an array");f=f||{};var g=angular.merge({},d.endpoint,{path:d.endpoint.path+"/subscribe"}),h=angular.merge({},d.baseRequest,{method:a.httpMethod.post,data:angular.extend({topics:b,applicationTypeIds:c},f)});return e.makeRequest(g,h)},unsubscribe:function(b,c,f){if(!angular.isArray(b))throw new Error("topics must be an Array");if(!angular.isArray(c))throw new Error("applicationTypeIds must be an array");f=f||{};var g=angular.merge({},d.endpoint,{path:d.endpoint.path+"/unsubscribe"}),h=angular.merge({},d.baseRequest,{method:a.httpMethod.post,data:angular.extend({topics:b,applicationTypeIds:c},f)});return e.makeRequest(g,h)},retrieveSubscriptions:function(b,c){if(!angular.isArray(b))throw new Error("applicationTypeIds must be an array");c=c||{};var f=angular.merge({},d.endpoint,{path:d.endpoint.path+"/retrieveSubscriptions"}),g=angular.merge({},d.baseRequest,{method:a.httpMethod.post,data:angular.extend({applicationTypeIds:b},c)});return e.makeRequest(f,g)}}}]}]),angular.module("betfair.extensions.clients.common").provider("BF.PushClient",[function(){var a={};this.setEndpoint=function(b){return a.endpoint=b,this},this.$get=["$rootScope","APPLICATION_KEY","BF.Lodash","BF.SocketIO",function(b,c,d,e){function f(){return{"x-application":c}}function g(a,c){return c?function(d){d&&(c(d.data,a),b.$digest())}:angular.noop}function h(a,b){this.namespace=a||"",this.rooms=[],this.options=angular.extend({},l,b,{path:j,query:k}),this.socket=e.connect(i+"/"+this.namespace,this.options),this.socket.on("reconnect",angular.bind(this,function(){this.socket.emit("sub",this.rooms.join(","))}))}var i,j,k,l={transports:["websocket"],reconnection:!0,reconnectionDelay:5e3,reconnectionDelayMax:15e3,timeout:a.endpoint.timeout||2e4};return function(){i=a.endpoint.host,j=a.endpoint.path,angular.isNumber(a.endpoint.port)&&(i+=":"+a.endpoint.port),k=f()}(),h.prototype.subscribe=function(a){var b=angular.isArray(a)?a:[a];this.rooms=d.union(this.rooms,b),this.socket.emit("sub",b.join(","))},h.prototype.unsubscribe=function(a){var b=angular.isArray(a)?a:[a];this.rooms=d.difference(this.rooms,b),this.socket.emit("unsub",b.join(","))},h.prototype.close=function(){this.socket.close()},h.prototype.on=function(a,b){var c=g(this.socket,b);return this.socket.on(a,c),c},h.prototype.once=function(a,b){var c=g(this.socket,b);return this.socket.once(a,c),c},h.prototype.removeListener=function(a,b){if(!angular.isString(a))throw new Error("Listener name must be a string");this.socket.removeListener(a,b)},h.prototype.removeAllListeners=function(){this.socket.removeAllListeners()},h}]}]),angular.module("betfair.extensions.clients.common").provider("BF.SearchClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.SearchClient")),this.$get=["$injector",function(b){function c(a){var b=[];return angular.forEach(a,function(a,c){b.push("&filter="+c+":"+a)}),b.join("")}var d=this.getInternalConfiguration(b),e=d.transport;return{instant:function(b,c){var f=angular.merge({},d.endpoint,{path:d.endpoint.path+"/instant"}),g=angular.merge({},d.baseRequest,{method:a.httpMethod.get,params:angular.extend({q:b},c)});return e.makeRequest(f,g)},query:function(b,f){f&&f.hasOwnProperty("filter")&&(f.filter=c(f.filter).substring(8));var g=angular.merge({},d.endpoint,{path:d.endpoint.path+"/query"}),h=angular.merge({},d.baseRequest,{method:a.httpMethod.get,params:angular.extend({q:b},f)});return e.makeRequest(g,h)}}}]}]),angular.module("betfair.extensions.clients.common").provider("BF.SeasClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.SeasClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{scores:function(b,e){if(!angular.isArray(b))throw new Error("eventIds should be an Array.");if(!angular.isString(e))throw new Error("locale should be a String.");var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/scores"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{eventIds:b,locale:e}});return d.makeRequest(f,g)},eventTimeline:function(b,e){if(!angular.isNumber(b))throw new Error("eventId should be a Number.");if(!angular.isString(e))throw new Error("locale should be a String.");var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/eventTimeline"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{eventId:b,locale:e}});return d.makeRequest(f,g)},eventTimelines:function(b,e){if(!angular.isArray(b))throw new Error("eventIds should be an Array.");if(!angular.isString(e))throw new Error("locale should be a String.");var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/eventTimelines"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{eventIds:b,locale:e}});return d.makeRequest(f,g)},scoresAndBroadcast:function(b,e,f,g){if(!angular.isArray(b))throw new Error("eventIds should be an Array.");if(!angular.isString(f))throw new Error("locale should be a String.");g=g||{};var h=angular.merge({},c.endpoint,{path:c.endpoint.path+"/scoresAndBroadcast"}),i=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({eventIds:b,regionCode:e,locale:f},g)});return d.makeRequest(h,i)},eventDetails:function(b,e,f,g){if(!angular.isArray(b))throw new Error("eventIds should be an Array.");if(!angular.isString(e))throw new Error("locale should be a String.");if(!angular.isString(f))throw new Error("regionCode should be a String.");g=g||{};var h=angular.merge({},c.endpoint,{path:c.endpoint.path+"/eventDetails"}),i=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({eventIds:b,regionCode:f,locale:e},g)});return d.makeRequest(h,i)},greyhoundPrices:function(b){if(!angular.isArray(b))throw new Error("marketIds should be an Array.");var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/greyhoundPrices"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{marketIds:b}});return d.makeRequest(e,f)},greyhoundResults:function(b){if(!angular.isNumber(b))throw new Error("maxResults should be a Number");var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/greyhoundResults"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{maxResults:b}});return d.makeRequest(e,f)},allEvents:function(b,e,f,g,h){if(!angular.isArray(b))throw new Error("eventIds should be an Array.");if(!angular.isArray(e))throw new Error("inPlayBettingStatuses should be an Array.");if(!angular.isString(f))throw new Error("regionCode should be a String.");if(!angular.isString(g))throw new Error("locale should be a String.");h=h||{};var i=angular.merge({},c.endpoint,{path:c.endpoint.path+"/allEvents"}),j=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({eventTypeIds:b,inPlayBettingStatuses:e,regionCode:f,locale:g},h)});return d.makeRequest(i,j)},eventUpdates:function(b,e,f){if(!angular.isArray(b))throw new Error("eventIds should be an Array.");if(!angular.isString(e))throw new Error("locale should be a String.");f=f||{};var g=angular.merge({},c.endpoint,{path:c.endpoint.path+"/eventUpdates"}),h=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({eventTypeIds:b,locale:e},f)});return d.makeRequest(g,h)},soccerEventStats:function(b,e){if(!angular.isNumber(b))throw new Error("eventId should be a Number.");if(!angular.isString(e))throw new Error("locale should be a String.");var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/soccerEventStats"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{eventId:b,language:e}});return d.makeRequest(f,g)},tennisForm:function(b){if(!angular.isNumber(b))throw new Error("eventId should be a Number.");var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/tennisForm"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{eventId:b}});return d.makeRequest(e,f)}}}]}]),angular.module("betfair.extensions.clients.common").provider("BF.SportsNavigationClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.SportsNavigationClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{getGraphForNavSet:function(b,e){var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/graph/bynavset"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({navigationSet:b},e)});return d.makeRequest(f,g)},getGraphForNode:function(b,e){var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/graph/bynode"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({nodeIds:b},e)});return d.makeRequest(f,g)},getGraphs:function(b,e){var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/graph/batch"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.post,data:angular.extend({selectors:b},e)});return d.makeRequest(f,g)},getFilteredGraph:function(b){var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/graph/filtered"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:b});return d.makeRequest(e,f)},getFilteredGraphBatch:function(b,e){var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/graph/filtered/batch"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.post,data:angular.extend({queries:b},e)});return d.makeRequest(f,g)}}}]}]),angular.module("betfair.extensions.clients.common").provider("BF.UserSharedPreferencesClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.UserSharedPreferencesClient")),this.$get=["$injector","BF.CacheFactory",function(b,c){var d,e=this.getInternalConfiguration(b),f=e.transport;return angular.isNumber(e.endpoint.maxAge)&&e.endpoint.maxAge>0&&(d=c("userSharedPreferences",{maxAge:e.endpoint.maxAge})),{getUserPreferences:function(b){var c=angular.merge({},e.endpoint,{path:e.endpoint.path+"/getUserPreferences"}),g=angular.merge({},e.baseRequest,{method:a.httpMethod.post,data:{preferenceKeys:b&&b.preferenceKeys}});return d&&(g.cache=d),f.makeRequest(c,g)},setUserPreferences:function(b){var c=angular.merge({},e.endpoint,{path:e.endpoint.path+"/setUserPreferences"}),d=angular.merge({},e.baseRequest,{method:a.httpMethod.post,data:{preferences:b}});return f.makeRequest(c,d)}}}]}]),angular.module("betfair.extensions.clients.common").provider("BF.WalletClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.WalletClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{wallets:function(){var b=angular.merge({},c.endpoint,{path:c.endpoint.path+"/wallets"}),e=angular.merge({},c.baseRequest,{method:a.httpMethod.get});return d.makeRequest(b,e)},wallet:function(b){var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/wallet"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{walletLocation:b}});return d.makeRequest(e,f)}}}]}]),angular.module("betfair.extensions.clients.common").provider("BF.WebMessagingServiceClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){var c={};angular.extend(this,b("BF.WebMessagingServiceClient")),this.setClient=function(a){return c.client=a,this},this.$get=["$injector",function(b){var d=this.getInternalConfiguration(b),e=d.transport;return{getMessages:function(){var b=angular.merge({},d.endpoint,{path:d.endpoint.path+"/getMessages"}),f=angular.merge({},d.baseRequest,{method:a.httpMethod.jsonp,params:{callback:"JSON_CALLBACK",response:a.contentType.jsonp,client:c.client},withCredentials:!0});return function(){return e.makeRequest(b,f)}}(),readMessage:function(b){var f=angular.merge({},d.endpoint,{path:d.endpoint.path+"/readMessage"}),g=angular.merge({},d.baseRequest,{method:a.httpMethod.jsonp,params:{callback:"JSON_CALLBACK",response:a.contentType.jsonp,client:c.client,customerMessageId:b},withCredentials:!0});return e.makeRequest(f,g)}}}]}]),angular.module("betfair.extensions.clients.exchange").provider("BF.AUS.ExchangeReadOnlyClient",["BF.Internal.BaseClientProvider",function(a){angular.extend(this,a("BF.AUS.ExchangeReadOnlyClient")),this.$get=["$injector","BF.Internal.ExchangeReadOnlyClient",function(a,b){var c=this.getInternalConfiguration(a);return new b(c,c.transport)}]}]),angular.module("betfair.extensions.clients.exchange").provider("BF.AUS.ExchangeTransactionalClient",["BF.Internal.BaseClientProvider",function(a){angular.extend(this,a("BF.AUS.ExchangeTransactionalClient")),this.$get=["$injector","BF.Internal.ExchangeTransactionalClient",function(a,b){var c=this.getInternalConfiguration(a);return new b(c,c.transport)}]}]),angular.module("betfair.extensions.clients.exchange").provider("BF.AUS.LiveBetReportingClient",["BF.Internal.BaseClientProvider",function(a){angular.extend(this,a("BF.AUS.LiveBetReportingClient")),this.$get=["$injector","BF.Internal.LiveBetReportingClient",function(a,b){var c=this.getInternalConfiguration(a);return new b(c,c.transport)}]}]),angular.module("betfair.extensions.clients.exchange").provider("BF.CashoutExchangeClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.CashoutExchangeClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{getAvailableMarkets:function(b){var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getAvailableMarkets"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{marketIds:b}});return d.makeRequest(e,f)},getAutoCashout:function(b){var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getAutoCashout"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{marketIds:b}});return d.makeRequest(e,f)},addAutoCashout:function(b,e,f){var g=angular.merge({},c.endpoint,{path:c.endpoint.path+"/addAutoCashout"}),h=angular.merge({},c.baseRequest,{method:a.httpMethod.post,params:{},data:{marketId:b,condition:{profit:e,currencyCode:f}}});return d.makeRequest(g,h)},cancelAutoCashout:function(b){var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/cancelAutoCashout"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.post,params:{},data:{marketId:b}});return d.makeRequest(e,f)}}}]}]),angular.module("betfair.extensions.clients.exchange").factory("BF.Internal.ExchangeReadOnlyClient",["$q","BF.Lodash","BF.INTERNAL.TRANSPORT",function(a,b,c){return function(d,e){function f(a,b,f){var g=angular.merge({},d.endpoint,{path:d.endpoint.path+"/bymarket"}),h=angular.merge({},d.baseRequest,{method:c.httpMethod.get,params:angular.extend({marketIds:a.join(","),types:b.join(",")},f)});return e.makeRequest(g,h)}function g(a){var c=a.map(function(a){return k[a]});return b.reduce(c,function(a,b){return a+b},0)}function h(a,c){var d=g(c),e=Math.max(m,Math.floor(l/d));return b.chunk(a,e)}function i(a,b){return function(c){return f(c,a,b)}}function j(a){var c=a[0];return angular.forEach(a,function(a){c!==a&&angular.forEach(a.eventTypes,function(a){var d=b.findIndex(c.eventTypes,{eventTypeId:a.eventTypeId});-1===d?d=c.eventTypes.push(a)-1:angular.forEach(a.eventNodes,function(a){var e=b.findIndex(c.eventTypes[d].eventNodes,{eventId:a.eventId});-1===e?e=c.eventTypes[d].eventNodes.push(a)-1:angular.forEach(a.marketNodes,function(a){-1===b.findIndex(c.eventTypes[d].eventNodes[e].marketNodes,{marketId:a.marketId})&&c.eventTypes[d].eventNodes[e].marketNodes.push(a)})})})}),c}var k={MARKET_STATE:1,MARKET_LICENCE:1,MARKET_RATES:1,MARKET_LINE_RANGE_INFO:1,MARKET_DESCRIPTION:1,EVENT:1,RUNNER_DESCRIPTION:1,RUNNER_STATE:1,RUNNER_SP:1,RUNNER_EXCHANGE_PRICES_BEST:3,RUNNER_EXCHANGE_PRICES_ALL:15,RUNNER_EXCHANGE_TRADED:15,RUNNER_SP_TAKEN:5,RUNNER_METADATA:1},l=200,m=1;this.getByMarkets=function(b,c,d){var e=h(b,c);return 1===e.length?f(b,c,d):a.all(e.map(i(c,d))).then(j)}}}]),angular.module("betfair.extensions.clients.exchange").provider("BF.ExchangeReadOnlyClient",["BF.Internal.BaseClientProvider",function(a){angular.extend(this,a("BF.ExchangeReadOnlyClient")),this.$get=["$injector","BF.Internal.ExchangeReadOnlyClient",function(a,b){var c=this.getInternalConfiguration(a);return new b(c,c.transport)}]}]),angular.module("betfair.extensions.clients.exchange").factory("BF.Internal.ExchangeTransactionalClient",["BF.INTERNAL.TRANSPORT",function(a){return function(b,c){this.place=function(d,e,f){var g=angular.merge({},b.endpoint,{path:b.endpoint.path+"/place"}),h=angular.merge({},b.baseRequest,{method:a.httpMethod.post,data:angular.extend({marketId:d,instructions:e},f)});return c.makeRequest(g,h)},this.cancel=function(d){var e=angular.merge({},b.endpoint,{path:b.endpoint.path+"/cancel"}),f=angular.merge({},b.baseRequest,{method:a.httpMethod.post,data:angular.extend({},d)});return c.makeRequest(e,f)},this.replace=function(d,e,f){var g=angular.merge({},b.endpoint,{path:b.endpoint.path+"/replace"}),h=angular.merge({},b.baseRequest,{method:a.httpMethod.post,data:angular.extend({marketId:d,instructions:e},f)});return c.makeRequest(g,h)},this.update=function(d,e,f){var g=angular.merge({},b.endpoint,{path:b.endpoint.path+"/update"}),h=angular.merge({},b.baseRequest,{method:a.httpMethod.post,data:angular.extend({marketId:d,instructions:e},f)});return c.makeRequest(g,h)}}}]),angular.module("betfair.extensions.clients.exchange").provider("BF.ExchangeTransactionalClient",["BF.Internal.BaseClientProvider",function(a){angular.extend(this,a("BF.ExchangeTransactionalClient")),this.$get=["$injector","BF.Internal.ExchangeTransactionalClient",function(a,b){var c=this.getInternalConfiguration(a);return new b(c,c.transport)}]}]),angular.module("betfair.extensions.clients.exchange").provider("BF.FacetExchangeClient",["BF.Internal.BaseClientProvider",function(a){angular.extend(this,a("BF.FacetExchangeClient")),this.$get=["$injector","BF.Internal.FacetClient",function(a,b){var c=this.getInternalConfiguration(a);return new b(c,c.transport)}]}]),angular.module("betfair.extensions.clients.exchange").factory("BF.Internal.LiveBetReportingClient",["BF.INTERNAL.TRANSPORT",function(a){return function(b,c){this.searchOrders=function(d){var e=angular.merge({},b.endpoint,{path:b.endpoint.path+"/searchOrders"}),f=angular.merge({},b.baseRequest,{method:a.httpMethod.get,params:angular.extend({},d)});return c.makeRequest(e,f)},this.getMarketPositionView=function(d,e){var f=angular.merge({},b.endpoint,{path:b.endpoint.path+"/getMarketPositionView"}),g=angular.merge({},b.baseRequest,{method:a.httpMethod.get,params:angular.extend({marketId:d},e)});return c.makeRequest(f,g)},this.getMarketPositionViews=function(d,e){var f=angular.merge({},b.endpoint,{path:b.endpoint.path+"/getMarketPositionViews"}),g=angular.merge({},b.baseRequest,{method:a.httpMethod.get,params:angular.extend({marketIds:d.join(",")},e)});return c.makeRequest(f,g)}}}]),angular.module("betfair.extensions.clients.exchange").provider("BF.LiveBetReportingClient",["BF.Internal.BaseClientProvider",function(a){angular.extend(this,a("BF.LiveBetReportingClient")),this.$get=["$injector","BF.Internal.LiveBetReportingClient",function(a,b){var c=this.getInternalConfiguration(a);return new b(c,c.transport)}]}]),angular.module("betfair.extensions.clients.sportsbook").provider("BF.BetCombinationEngineClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.BetCombinationEngineClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{getCombinations:function(b,e,f){if(f=f||{},!angular.isArray(b))throw new Error("selections should be an Array");if(!angular.isString(e))throw new Error("betType is mandatory");var g=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getCombinations"}),h=angular.merge({},c.baseRequest,{method:a.httpMethod.post,data:angular.extend({selections:b,betType:e},f)});return d.makeRequest(g,h)}}}]}]),angular.module("betfair.extensions.clients.sportsbook").config(["$provide",function(a){a.decorator("BF.FixedOddsReadOnlyClient",["$delegate","$q","BF.Lodash",function(a,b,c){function d(a){return c.chunk(a,70)}function e(a){return function(b){return g(b,a)}}function f(a){return c.flatten(a).reduce(function(a,b){return b&&b.marketId&&(a[b.marketId]=b),a},{})}var g=a.getMarketPrices;return a.getMarketPrices=function(a,c){var h=d(a);return h.length<=1?g(a,c):b.all(h.map(e(c))).then(f)},a}])}]),angular.module("betfair.extensions.clients.sportsbook").provider("BF.FacetSportsbookClient",["BF.Internal.BaseClientProvider",function(a){angular.extend(this,a("BF.FacetSportsbookClient")),this.$get=["$injector","BF.Internal.FacetClient",function(a,b){var c=this.getInternalConfiguration(a);return new b(c,c.transport)}]}]),angular.module("betfair.extensions.clients.sportsbook").provider("BF.FixedOddsCashoutQuoteClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.FixedOddsCashoutQuoteClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{validateMarketsEligibility:function(b){if(!angular.isArray(b))throw new Error("marketIds should be an Array");var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/validateMarketsEligibility"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{marketIds:b}});return d.makeRequest(e,f)},getCashoutStats:function(b){var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getCashoutStats"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({},b)});return d.makeRequest(e,f)},getEligibleBets:function(b){var e=angular.merge({},c.endpoint,{
path:c.endpoint.path+"/getEligibleBets"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({},b)});return d.makeRequest(e,f)},getMarketEligibleBets:function(b,e){if(!angular.isArray(b))throw new Error("marketIds should be an Array");var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getMarketEligibleBets"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({marketIds:b},e)});return d.makeRequest(f,g)},getMarketQuotes:function(b){if(!angular.isArray(b))throw new Error("marketIds should be an Array");var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getMarketQuotes"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{marketIds:b}});return d.makeRequest(e,f)},getBetQuotes:function(b){if(!angular.isArray(b))throw new Error("betIds should be an Array");var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getBetQuotes"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{betIds:b}});return d.makeRequest(e,f)}}}]}]),angular.module("betfair.extensions.clients.sportsbook").provider("BF.FixedOddsReadOnlyClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.FixedOddsReadOnlyClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{getMarketPrices:function(b,e){e=e||{};var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getMarketPrices"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.post,data:{marketIds:b},params:{priceHistory:e.priceHistory}});return d.makeRequest(f,g)},getUserPromotions:function(b){b=b||{};var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getUserPromotions"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:{locale:b.locale}});return d.makeRequest(e,f)}}}]}]),angular.module("betfair.extensions.clients.sportsbook").provider("BF.FixedOddsTransactionalClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.FixedOddsTransactionalClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{implyBets:function(b){b=b||{};var e=angular.merge({},c.endpoint,{path:c.endpoint.path+"/implyBets"}),f=angular.merge({},c.baseRequest,{method:a.httpMethod.post,data:{betLegs:b.betLegs},params:{_ak:b.applicationKey,includeCashoutEligibility:b.includeCashoutEligibility,locale:b.locale,pricePolicy:b.pricePolicy,scope:b.scope}});return d.makeRequest(e,f)},placeBet:function(b,e){e=e||{};var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/placeBet"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.post,data:{betDefinitions:b,customerRef:e.customerRef,acceptLowerOdds:Boolean(e.acceptLowerOdds),useAvailableBonus:Boolean(e.useAvailableBonus),dryRun:Boolean(e.dryRun)},params:{_ak:e.applicationKey}});return d.makeRequest(f,g)},cashoutBet:function(b,e){var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/cashoutBet"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.post,data:{betDelay:b,betId:e.betId,cashOutToken:e.cashOutToken,partialQuote:e.partialQuote,quote:e.quote},params:{_ak:e.applicationKey}});return d.makeRequest(f,g)}}}]}]),angular.module("betfair.extensions.clients.sportsbook").provider("BF.SportsbookEventReadOnlyClient",["BF.INTERNAL.TRANSPORT","BF.Internal.BaseClientProvider",function(a,b){angular.extend(this,b("BF.SportsbookEventReadOnlyClient")),this.$get=["$injector",function(b){var c=this.getInternalConfiguration(b),d=c.transport;return{getEventsForAllSports:function(b,e){if(!angular.isString(b))throw new Error("afterDate should be a String");var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getEventsForAllSports"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({afterDate:b},e)});return d.makeRequest(f,g)},getEventsDetails:function(b,e,f,g){if(!angular.isNumber(b))throw new Error("eventTypeId should be a Number");if(!angular.isNumber(e))throw new Error("period should be a Number");if(!angular.isString(f))throw new Error("regulator should be a String");var h=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getEventsDetails"}),i=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({eventTypeId:b,period:e,regulator:f},g)});return d.makeRequest(h,i)},getEventsDetailsForMarkets:function(b,e,f){if(!angular.isString(b))throw new Error("marketId should be a String");if(!angular.isString(e))throw new Error("regulator should be a String");var g=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getEventsDetailsForMarkets"}),h=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({marketId:b,regulator:e},f)});return d.makeRequest(g,h)},getMarketStatus:function(b,e){if(!angular.isString(b))throw new Error("marketId should be a String");var f=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getMarketStatus"}),g=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({marketId:b},e)});return d.makeRequest(f,g)},getNextEvent:function(b,e,f,g,h){if(!angular.isNumber(b))throw new Error("eventTypeId should be a Number");if(!angular.isString(e))throw new Error("afterDate should be a String");if(!angular.isString(g))throw new Error("regulator should be a String");var i=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getNextEvent"}),j=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({eventTypeId:b,afterDate:e,withDetails:f,regulator:g},h)});return d.makeRequest(i,j)},getLatestResults:function(b,e,f){if(!angular.isNumber(b))throw new Error("eventTypeId should be a Number");if(!angular.isString(e))throw new Error("regulator should be a String");var g=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getLatestResults"}),h=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({eventTypeId:b,regulator:e},f)});return d.makeRequest(g,h)},getResultsForDate:function(b,e,f,g,h,i){if(!angular.isNumber(b))throw new Error("eventTypeId should be a Number");if(!angular.isString(e))throw new Error("openDate should be a String");if(!angular.isNumber(f))throw new Error("fromIndex should be a Number");if(!angular.isNumber(g))throw new Error("toIndex should be a Number");if(!angular.isString(h))throw new Error("regulator should be a String");var j=angular.merge({},c.endpoint,{path:c.endpoint.path+"/getResultsForDate"}),k=angular.merge({},c.baseRequest,{method:a.httpMethod.get,params:angular.extend({eventTypeId:b,openDate:e,fromIndex:f,toIndex:g,regulator:h},i)});return d.makeRequest(j,k)}}}]}]),angular.module("betfair.extensions.core").constant("BF.COUNTRY",function(){var a={ad:{name:"I18N.COUNTRIES.AND",alpha2:"AD",alpha3:"AND",screenCode:"AND"},ae:{name:"I18N.COUNTRIES.ARE",alpha2:"AE",alpha3:"ARE",screenCode:"UAE"},af:{name:"I18N.COUNTRIES.AFG",alpha2:"AF",alpha3:"AFG",screenCode:"AFG"},ag:{name:"I18N.COUNTRIES.ATG",alpha2:"AG",alpha3:"ATG",screenCode:"ATG"},ai:{name:"I18N.COUNTRIES.AIA",alpha2:"AI",alpha3:"AIA",screenCode:"AIA"},al:{name:"I18N.COUNTRIES.ALB",alpha2:"AL",alpha3:"ALB",screenCode:"ALB"},am:{name:"I18N.COUNTRIES.ARM",alpha2:"AM",alpha3:"ARM",screenCode:"ARM"},an:{name:"I18N.COUNTRIES.ANT",alpha2:"AN",alpha3:"ANT",screenCode:"ANT"},ao:{name:"I18N.COUNTRIES.AGO",alpha2:"AO",alpha3:"AGO",screenCode:"AGO"},aq:{name:"I18N.COUNTRIES.ATA",alpha2:"AQ",alpha3:"ATA",screenCode:"ATA"},ar:{name:"I18N.COUNTRIES.ARG",alpha2:"AR",alpha3:"ARG",screenCode:"ARG"},as:{name:"I18N.COUNTRIES.ASM",alpha2:"AS",alpha3:"ASM",screenCode:"ASM"},at:{name:"I18N.COUNTRIES.AUT",alpha2:"AT",alpha3:"AUT",screenCode:"AUT"},au:{name:"I18N.COUNTRIES.AUS",alpha2:"AU",alpha3:"AUS",screenCode:"AUS"},aw:{name:"I18N.COUNTRIES.ABW",alpha2:"AW",alpha3:"ABW",screenCode:"ABW"},ax:{name:"I18N.COUNTRIES.ALA",alpha2:"AX",alpha3:"ALA",screenCode:"ALA"},az:{name:"I18N.COUNTRIES.AZE",alpha2:"AZ",alpha3:"AZE",screenCode:"AZE"},ba:{name:"I18N.COUNTRIES.BIH",alpha2:"BA",alpha3:"BIH",screenCode:"BIH"},bb:{name:"I18N.COUNTRIES.BRB",alpha2:"BB",alpha3:"BRB",screenCode:"BRB"},bd:{name:"I18N.COUNTRIES.BGD",alpha2:"BD",alpha3:"BGD",screenCode:"BGD"},be:{name:"I18N.COUNTRIES.BEL",alpha2:"BE",alpha3:"BEL",screenCode:"BEL"},bf:{name:"I18N.COUNTRIES.BFA",alpha2:"BF",alpha3:"BFA",screenCode:"BFA"},bg:{name:"I18N.COUNTRIES.BGR",alpha2:"BG",alpha3:"BGR",screenCode:"BGR"},bh:{name:"I18N.COUNTRIES.BHR",alpha2:"BH",alpha3:"BHR",screenCode:"BHR"},bi:{name:"I18N.COUNTRIES.BDI",alpha2:"BI",alpha3:"BDI",screenCode:"BDI"},bj:{name:"I18N.COUNTRIES.BEN",alpha2:"BJ",alpha3:"BEN",screenCode:"BEN"},bl:{name:"I18N.COUNTRIES.BLM",alpha2:"BL",alpha3:"BLM",screenCode:"BLM"},bm:{name:"I18N.COUNTRIES.BMU",alpha2:"BM",alpha3:"BMU",screenCode:"BMU"},bn:{name:"I18N.COUNTRIES.BRN",alpha2:"BN",alpha3:"BRN",screenCode:"BRN"},bo:{name:"I18N.COUNTRIES.BOL",alpha2:"BO",alpha3:"BOL",screenCode:"BOL"},br:{name:"I18N.COUNTRIES.BRA",alpha2:"BR",alpha3:"BRA",screenCode:"BRA"},bs:{name:"I18N.COUNTRIES.BHS",alpha2:"BS",alpha3:"BHS",screenCode:"BHS"},bt:{name:"I18N.COUNTRIES.BTN",alpha2:"BT",alpha3:"BTN",screenCode:"BTN"},bv:{name:"I18N.COUNTRIES.BVT",alpha2:"BV",alpha3:"BVT",screenCode:"BVT"},bw:{name:"I18N.COUNTRIES.BWA",alpha2:"BW",alpha3:"BWA",screenCode:"BWA"},by:{name:"I18N.COUNTRIES.BLR",alpha2:"BY",alpha3:"BLR",screenCode:"BLR"},bz:{name:"I18N.COUNTRIES.BLZ",alpha2:"BZ",alpha3:"BLZ",screenCode:"BLZ"},ca:{name:"I18N.COUNTRIES.CAN",alpha2:"CA",alpha3:"CAN",screenCode:"CAN"},cc:{name:"I18N.COUNTRIES.CCK",alpha2:"CC",alpha3:"CCK",screenCode:"CCK"},cd:{name:"I18N.COUNTRIES.COD",alpha2:"CD",alpha3:"COD",screenCode:"COD"},cf:{name:"I18N.COUNTRIES.CAF",alpha2:"CF",alpha3:"CAF",screenCode:"CAF"},cg:{name:"I18N.COUNTRIES.COG",alpha2:"CG",alpha3:"COG",screenCode:"COG"},ch:{name:"I18N.COUNTRIES.CHE",alpha2:"CH",alpha3:"CHE",screenCode:"CHE"},ci:{name:"I18N.COUNTRIES.CIV",alpha2:"CI",alpha3:"CIV",screenCode:"CIV"},ck:{name:"I18N.COUNTRIES.COK",alpha2:"CK",alpha3:"COK",screenCode:"COK"},cl:{name:"I18N.COUNTRIES.CHL",alpha2:"CL",alpha3:"CHL",screenCode:"CHL"},cm:{name:"I18N.COUNTRIES.CMR",alpha2:"CM",alpha3:"CMR",screenCode:"CMR"},cn:{name:"I18N.COUNTRIES.CHN",alpha2:"CN",alpha3:"CHN",screenCode:"CHN"},co:{name:"I18N.COUNTRIES.COL",alpha2:"CO",alpha3:"COL",screenCode:"COL"},cr:{name:"I18N.COUNTRIES.CRI",alpha2:"CR",alpha3:"CRI",screenCode:"CRI"},cs:{name:"I18N.COUNTRIES.SCG",alpha2:"CS",alpha3:"SCG",screenCode:"SCG"},cu:{name:"I18N.COUNTRIES.CUB",alpha2:"CU",alpha3:"CUB",screenCode:"CUB"},cv:{name:"I18N.COUNTRIES.CPV",alpha2:"CV",alpha3:"CPV",screenCode:"CPV"},cx:{name:"I18N.COUNTRIES.CXR",alpha2:"CX",alpha3:"CXR",screenCode:"CXR"},cy:{name:"I18N.COUNTRIES.CYP",alpha2:"CY",alpha3:"CYP",screenCode:"CYP"},cz:{name:"I18N.COUNTRIES.CZE",alpha2:"CZ",alpha3:"CZE",screenCode:"CZE"},de:{name:"I18N.COUNTRIES.DEU",alpha2:"DE",alpha3:"DEU",screenCode:"GER"},dj:{name:"I18N.COUNTRIES.DJI",alpha2:"DJ",alpha3:"DJI",screenCode:"DJI"},dk:{name:"I18N.COUNTRIES.DNK",alpha2:"DK",alpha3:"DNK",screenCode:"DNK"},dm:{name:"I18N.COUNTRIES.DMA",alpha2:"DM",alpha3:"DMA",screenCode:"DMA"},"do":{name:"I18N.COUNTRIES.DOM",alpha2:"DO",alpha3:"DOM",screenCode:"DOM"},dz:{name:"I18N.COUNTRIES.DZA",alpha2:"DZ",alpha3:"DZA",screenCode:"DZA"},ec:{name:"I18N.COUNTRIES.ECU",alpha2:"EC",alpha3:"ECU",screenCode:"ECU"},ee:{name:"I18N.COUNTRIES.EST",alpha2:"EE",alpha3:"EST",screenCode:"EST"},eg:{name:"I18N.COUNTRIES.EGY",alpha2:"EG",alpha3:"EGY",screenCode:"EGY"},eh:{name:"I18N.COUNTRIES.ESH",alpha2:"EH",alpha3:"ESH",screenCode:"ESH"},er:{name:"I18N.COUNTRIES.ERI",alpha2:"ER",alpha3:"ERI",screenCode:"ERI"},es:{name:"I18N.COUNTRIES.ESP",alpha2:"ES",alpha3:"ESP",screenCode:"ESP"},et:{name:"I18N.COUNTRIES.ETH",alpha2:"ET",alpha3:"ETH",screenCode:"ETH"},fi:{name:"I18N.COUNTRIES.FIN",alpha2:"FI",alpha3:"FIN",screenCode:"FIN"},fj:{name:"I18N.COUNTRIES.FJI",alpha2:"FJ",alpha3:"FJI",screenCode:"FJI"},fk:{name:"I18N.COUNTRIES.FLK",alpha2:"FK",alpha3:"FLK",screenCode:"FLK"},fm:{name:"I18N.COUNTRIES.FSM",alpha2:"FM",alpha3:"FSM",screenCode:"FSM"},fo:{name:"I18N.COUNTRIES.FRO",alpha2:"FO",alpha3:"FRO",screenCode:"FRO"},fr:{name:"I18N.COUNTRIES.FRA",alpha2:"FR",alpha3:"FRA",screenCode:"FRA"},fx:{name:"I18N.COUNTRIES.FXX",alpha2:"FX",alpha3:"FXX",screenCode:"FXX"},ga:{name:"I18N.COUNTRIES.GAB",alpha2:"GA",alpha3:"GAB",screenCode:"GAB"},gb:{name:"I18N.COUNTRIES.GBR",alpha2:"GB",alpha3:"GBR",screenCode:"GB"},gd:{name:"I18N.COUNTRIES.GRD",alpha2:"GD",alpha3:"GRD",screenCode:"GRD"},ge:{name:"I18N.COUNTRIES.GEO",alpha2:"GE",alpha3:"GEO",screenCode:"GEO"},gf:{name:"I18N.COUNTRIES.GUF",alpha2:"GF",alpha3:"GUF",screenCode:"GUF"},gg:{name:"I18N.COUNTRIES.GGY",alpha2:"GG",alpha3:"GGY",screenCode:"GGY"},gh:{name:"I18N.COUNTRIES.GHA",alpha2:"GH",alpha3:"GHA",screenCode:"GHA"},gi:{name:"I18N.COUNTRIES.GIB",alpha2:"GI",alpha3:"GIB",screenCode:"GIB"},gl:{name:"I18N.COUNTRIES.GRL",alpha2:"GL",alpha3:"GRL",screenCode:"GRL"},gm:{name:"I18N.COUNTRIES.GMB",alpha2:"GM",alpha3:"GMB",screenCode:"GMB"},gn:{name:"I18N.COUNTRIES.GIN",alpha2:"GN",alpha3:"GIN",screenCode:"GIN"},gp:{name:"I18N.COUNTRIES.GLP",alpha2:"GP",alpha3:"GLP",screenCode:"GLP"},gq:{name:"I18N.COUNTRIES.GNQ",alpha2:"GQ",alpha3:"GNQ",screenCode:"GNQ"},gr:{name:"I18N.COUNTRIES.GRC",alpha2:"GR",alpha3:"GRC",screenCode:"GRC"},gs:{name:"I18N.COUNTRIES.SGS",alpha2:"GS",alpha3:"SGS",screenCode:"SGS"},gt:{name:"I18N.COUNTRIES.GTM",alpha2:"GT",alpha3:"GTM",screenCode:"GTM"},gu:{name:"I18N.COUNTRIES.GUM",alpha2:"GU",alpha3:"GUM",screenCode:"GUM"},gw:{name:"I18N.COUNTRIES.GNB",alpha2:"GW",alpha3:"GNB",screenCode:"GNB"},gy:{name:"I18N.COUNTRIES.GUY",alpha2:"GY",alpha3:"GUY",screenCode:"GUY"},hk:{name:"I18N.COUNTRIES.HKG",alpha2:"HK",alpha3:"HKG",screenCode:"HKG"},hm:{name:"I18N.COUNTRIES.HMD",alpha2:"HM",alpha3:"HMD",screenCode:"HMD"},hn:{name:"I18N.COUNTRIES.HND",alpha2:"HN",alpha3:"HND",screenCode:"HND"},hr:{name:"I18N.COUNTRIES.HRV",alpha2:"HR",alpha3:"HRV",screenCode:"HRV"},ht:{name:"I18N.COUNTRIES.HTI",alpha2:"HT",alpha3:"HTI",screenCode:"HTI"},hu:{name:"I18N.COUNTRIES.HUN",alpha2:"HU",alpha3:"HUN",screenCode:"HUN"},id:{name:"I18N.COUNTRIES.IDN",alpha2:"ID",alpha3:"IDN",screenCode:"IDN"},ie:{name:"I18N.COUNTRIES.IRL",alpha2:"IE",alpha3:"IRL",screenCode:"IRE"},il:{name:"I18N.COUNTRIES.ISR",alpha2:"IL",alpha3:"ISR",screenCode:"ISR"},im:{name:"I18N.COUNTRIES.IMN",alpha2:"IM",alpha3:"IMN",screenCode:"IMN"},"in":{name:"I18N.COUNTRIES.IND",alpha2:"IN",alpha3:"IND",screenCode:"IND"},international:{name:"I18N.COUNTRIES.INTERNATIONAL",alpha2:"International",alpha3:"International",screenCode:"International"},io:{name:"I18N.COUNTRIES.IOT",alpha2:"IO",alpha3:"IOT",screenCode:"IOT"},iq:{name:"I18N.COUNTRIES.IRQ",alpha2:"IQ",alpha3:"IRQ",screenCode:"IRQ"},ir:{name:"I18N.COUNTRIES.IRN",alpha2:"IR",alpha3:"IRN",screenCode:"IRN"},is:{name:"I18N.COUNTRIES.ISL",alpha2:"IS",alpha3:"ISL",screenCode:"ISL"},it:{name:"I18N.COUNTRIES.ITA",alpha2:"IT",alpha3:"ITA",screenCode:"ITA"},je:{name:"I18N.COUNTRIES.JEY",alpha2:"JE",alpha3:"JEY",screenCode:"JEY"},jm:{name:"I18N.COUNTRIES.JAM",alpha2:"JM",alpha3:"JAM",screenCode:"JAM"},jo:{name:"I18N.COUNTRIES.JOR",alpha2:"JO",alpha3:"JOR",screenCode:"JOR"},jp:{name:"I18N.COUNTRIES.JPN",alpha2:"JP",alpha3:"JPN",screenCode:"JPN"},ke:{name:"I18N.COUNTRIES.KEN",alpha2:"KE",alpha3:"KEN",screenCode:"KEN"},kg:{name:"I18N.COUNTRIES.KGZ",alpha2:"KG",alpha3:"KGZ",screenCode:"KGZ"},kh:{name:"I18N.COUNTRIES.KHM",alpha2:"KH",alpha3:"KHM",screenCode:"KHM"},ki:{name:"I18N.COUNTRIES.KIR",alpha2:"KI",alpha3:"KIR",screenCode:"KIR"},km:{name:"I18N.COUNTRIES.COM",alpha2:"KM",alpha3:"COM",screenCode:"COM"},kn:{name:"I18N.COUNTRIES.KNA",alpha2:"KN",alpha3:"KNA",screenCode:"KNA"},kp:{name:"I18N.COUNTRIES.PRK",alpha2:"KP",alpha3:"PRK",screenCode:"PRK"},kr:{name:"I18N.COUNTRIES.KOR",alpha2:"KR",alpha3:"KOR",screenCode:"KOR"},kw:{name:"I18N.COUNTRIES.KWT",alpha2:"KW",alpha3:"KWT",screenCode:"KWT"},ky:{name:"I18N.COUNTRIES.CYM",alpha2:"KY",alpha3:"CYM",screenCode:"CYM"},kz:{name:"I18N.COUNTRIES.KAZ",alpha2:"KZ",alpha3:"KAZ",screenCode:"KAZ"},la:{name:"I18N.COUNTRIES.LAO",alpha2:"LA",alpha3:"LAO",screenCode:"LAO"},lb:{name:"I18N.COUNTRIES.LBN",alpha2:"LB",alpha3:"LBN",screenCode:"LBN"},lc:{name:"I18N.COUNTRIES.LCA",alpha2:"LC",alpha3:"LCA",screenCode:"LCA"},li:{name:"I18N.COUNTRIES.LIE",alpha2:"LI",alpha3:"LIE",screenCode:"LIE"},lk:{name:"I18N.COUNTRIES.LKA",alpha2:"LK",alpha3:"LKA",screenCode:"LKA"},lr:{name:"I18N.COUNTRIES.LBR",alpha2:"LR",alpha3:"LBR",screenCode:"LBR"},ls:{name:"I18N.COUNTRIES.LSO",alpha2:"LS",alpha3:"LSO",screenCode:"LSO"},lt:{name:"I18N.COUNTRIES.LTU",alpha2:"LT",alpha3:"LTU",screenCode:"LTU"},lu:{name:"I18N.COUNTRIES.LUX",alpha2:"LU",alpha3:"LUX",screenCode:"LUX"},lv:{name:"I18N.COUNTRIES.LVA",alpha2:"LV",alpha3:"LVA",screenCode:"LVA"},ly:{name:"I18N.COUNTRIES.LBY",alpha2:"LY",alpha3:"LBY",screenCode:"LBY"},ma:{name:"I18N.COUNTRIES.MAR",alpha2:"MA",alpha3:"MAR",screenCode:"MAR"},mc:{name:"I18N.COUNTRIES.MCO",alpha2:"MC",alpha3:"MCO",screenCode:"MCO"},md:{name:"I18N.COUNTRIES.MDA",alpha2:"MD",alpha3:"MDA",screenCode:"MDA"},me:{name:"I18N.COUNTRIES.MNE",alpha2:"ME",alpha3:"MNE",screenCode:"MNE"},mf:{name:"I18N.COUNTRIES.MAF",alpha2:"MF",alpha3:"MAF",screenCode:"MAF"},mg:{name:"I18N.COUNTRIES.MDG",alpha2:"MG",alpha3:"MDG",screenCode:"MDG"},mh:{name:"I18N.COUNTRIES.MHL",alpha2:"MH",alpha3:"MHL",screenCode:"MHL"},mk:{name:"I18N.COUNTRIES.MKD",alpha2:"MK",alpha3:"MKD",screenCode:"MKD"},ml:{name:"I18N.COUNTRIES.MLI",alpha2:"ML",alpha3:"MLI",screenCode:"MLI"},mm:{name:"I18N.COUNTRIES.MMR",alpha2:"MM",alpha3:"MMR",screenCode:"MMR"},mn:{name:"I18N.COUNTRIES.MNG",alpha2:"MN",alpha3:"MNG",screenCode:"MNG"},mo:{name:"I18N.COUNTRIES.MAC",alpha2:"MO",alpha3:"MAC",screenCode:"MAC"},mp:{name:"I18N.COUNTRIES.MNP",alpha2:"MP",alpha3:"MNP",screenCode:"MNP"},mq:{name:"I18N.COUNTRIES.MTQ",alpha2:"MQ",alpha3:"MTQ",screenCode:"MTQ"},mr:{name:"I18N.COUNTRIES.MRT",alpha2:"MR",alpha3:"MRT",screenCode:"MRT"},ms:{name:"I18N.COUNTRIES.MSR",alpha2:"MS",alpha3:"MSR",screenCode:"MSR"},mt:{name:"I18N.COUNTRIES.MLT",alpha2:"MT",alpha3:"MLT",screenCode:"MLT"},mu:{name:"I18N.COUNTRIES.MUS",alpha2:"MU",alpha3:"MUS",screenCode:"MUS"},mv:{name:"I18N.COUNTRIES.MDV",alpha2:"MV",alpha3:"MDV",screenCode:"MDV"},mw:{name:"I18N.COUNTRIES.MWI",alpha2:"MW",alpha3:"MWI",screenCode:"MWI"},mx:{name:"I18N.COUNTRIES.MEX",alpha2:"MX",alpha3:"MEX",screenCode:"MEX"},my:{name:"I18N.COUNTRIES.MYS",alpha2:"MY",alpha3:"MYS",screenCode:"MYS"},mz:{name:"I18N.COUNTRIES.MOZ",alpha2:"MZ",alpha3:"MOZ",screenCode:"MOZ"},na:{name:"I18N.COUNTRIES.NAM",alpha2:"NA",alpha3:"NAM",screenCode:"NAM"},nc:{name:"I18N.COUNTRIES.NCL",alpha2:"NC",alpha3:"NCL",screenCode:"NCL"},ne:{name:"I18N.COUNTRIES.NER",alpha2:"NE",alpha3:"NER",screenCode:"NER"},nf:{name:"I18N.COUNTRIES.NFK",alpha2:"NF",alpha3:"NFK",screenCode:"NFK"},ng:{name:"I18N.COUNTRIES.NGA",alpha2:"NG",alpha3:"NGA",screenCode:"NGA"},ni:{name:"I18N.COUNTRIES.NIC",alpha2:"NI",alpha3:"NIC",screenCode:"NIC"},nl:{name:"I18N.COUNTRIES.NLD",alpha2:"NL",alpha3:"NLD",screenCode:"NLD"},no:{name:"I18N.COUNTRIES.NOR",alpha2:"NO",alpha3:"NOR",screenCode:"NOR"},np:{name:"I18N.COUNTRIES.NPL",alpha2:"NP",alpha3:"NPL",screenCode:"NPL"},nr:{name:"I18N.COUNTRIES.NRU",alpha2:"NR",alpha3:"NRU",screenCode:"NRU"},nu:{name:"I18N.COUNTRIES.NIU",alpha2:"NU",alpha3:"NIU",screenCode:"NIU"},nz:{name:"I18N.COUNTRIES.NZL",alpha2:"NZ",alpha3:"NZL",screenCode:"NZL"},om:{name:"I18N.COUNTRIES.OMN",alpha2:"OM",alpha3:"OMN",screenCode:"OMN"},pa:{name:"I18N.COUNTRIES.PAN",alpha2:"PA",alpha3:"PAN",screenCode:"PAN"},pe:{name:"I18N.COUNTRIES.PER",alpha2:"PE",alpha3:"PER",screenCode:"PER"},pf:{name:"I18N.COUNTRIES.PYF",alpha2:"PF",alpha3:"PYF",screenCode:"PYF"},pg:{name:"I18N.COUNTRIES.PNG",alpha2:"PG",alpha3:"PNG",screenCode:"PNG"},ph:{name:"I18N.COUNTRIES.PHL",alpha2:"PH",alpha3:"PHL",screenCode:"PHL"},pk:{name:"I18N.COUNTRIES.PAK",alpha2:"PK",alpha3:"PAK",screenCode:"PAK"},pl:{name:"I18N.COUNTRIES.POL",alpha2:"PL",alpha3:"POL",screenCode:"POL"},pm:{name:"I18N.COUNTRIES.SPM",alpha2:"PM",alpha3:"SPM",screenCode:"SPM"},pn:{name:"I18N.COUNTRIES.PCN",alpha2:"PN",alpha3:"PCN",screenCode:"PCN"},pr:{name:"I18N.COUNTRIES.PRI",alpha2:"PR",alpha3:"PRI",screenCode:"PRI"},ps:{name:"I18N.COUNTRIES.PSE",alpha2:"PS",alpha3:"PSE",screenCode:"PSE"},pt:{name:"I18N.COUNTRIES.PRT",alpha2:"PT",alpha3:"PRT",screenCode:"PRT"},pw:{name:"I18N.COUNTRIES.PLW",alpha2:"PW",alpha3:"PLW",screenCode:"PLW"},py:{name:"I18N.COUNTRIES.PRY",alpha2:"PY",alpha3:"PRY",screenCode:"PRY"},qa:{name:"I18N.COUNTRIES.QAT",alpha2:"QA",alpha3:"QAT",screenCode:"QAT"},re:{name:"I18N.COUNTRIES.REU",alpha2:"RE",alpha3:"REU",screenCode:"REU"},ro:{name:"I18N.COUNTRIES.ROU",alpha2:"RO",alpha3:"ROU",screenCode:"ROU"},rs:{name:"I18N.COUNTRIES.SRB",alpha2:"RS",alpha3:"SRB",screenCode:"SRB"},ru:{name:"I18N.COUNTRIES.RUS",alpha2:"RU",alpha3:"RUS",screenCode:"RUS"},rw:{name:"I18N.COUNTRIES.RWA",alpha2:"RW",alpha3:"RWA",screenCode:"RWA"},sa:{name:"I18N.COUNTRIES.SAU",alpha2:"SA",alpha3:"SAU",screenCode:"SAU"},sb:{name:"I18N.COUNTRIES.SLB",alpha2:"SB",alpha3:"SLB",screenCode:"SLB"},sc:{name:"I18N.COUNTRIES.SYC",alpha2:"SC",alpha3:"SYC",screenCode:"SYC"},sd:{name:"I18N.COUNTRIES.SDN",alpha2:"SD",alpha3:"SDN",screenCode:"SDN"},se:{name:"I18N.COUNTRIES.SWE",alpha2:"SE",alpha3:"SWE",screenCode:"SWE"},sg:{name:"I18N.COUNTRIES.SGP",alpha2:"SG",alpha3:"SGP",screenCode:"SGP"},sh:{name:"I18N.COUNTRIES.SHN",alpha2:"SH",alpha3:"SHN",screenCode:"SHN"},si:{name:"I18N.COUNTRIES.SVN",alpha2:"SI",alpha3:"SVN",screenCode:"SVN"},sj:{name:"I18N.COUNTRIES.SJM",alpha2:"SJ",alpha3:"SJM",screenCode:"SJM"},sk:{name:"I18N.COUNTRIES.SVK",alpha2:"SK",alpha3:"SVK",screenCode:"SVK"},sl:{name:"I18N.COUNTRIES.SLE",alpha2:"SL",alpha3:"SLE",screenCode:"SLE"},sm:{name:"I18N.COUNTRIES.SMR",alpha2:"SM",alpha3:"SMR",screenCode:"SMR"},sn:{name:"I18N.COUNTRIES.SEN",alpha2:"SN",alpha3:"SEN",screenCode:"SEN"},so:{name:"I18N.COUNTRIES.SOM",alpha2:"SO",alpha3:"SOM",screenCode:"SOM"},sr:{name:"I18N.COUNTRIES.SUR",alpha2:"SR",alpha3:"SUR",screenCode:"SUR"},ss:{name:"I18N.COUNTRIES.SSD",alpha2:"SS",alpha3:"SSD",screenCode:"SSD"},st:{name:"I18N.COUNTRIES.STP",alpha2:"ST",alpha3:"STP",screenCode:"STP"},sv:{name:"I18N.COUNTRIES.SLV",alpha2:"SV",alpha3:"SLV",screenCode:"SLV"},sy:{name:"I18N.COUNTRIES.SYR",alpha2:"SY",alpha3:"SYR",screenCode:"SYR"},sz:{name:"I18N.COUNTRIES.SWZ",alpha2:"SZ",alpha3:"SWZ",screenCode:"SWZ"},tc:{name:"I18N.COUNTRIES.TCA",alpha2:"TC",alpha3:"TCA",screenCode:"TCA"},td:{name:"I18N.COUNTRIES.TCD",alpha2:"TD",alpha3:"TCD",screenCode:"TCD"},tf:{name:"I18N.COUNTRIES.ATF",alpha2:"TF",alpha3:"ATF",screenCode:"ATF"},tg:{name:"I18N.COUNTRIES.TGO",alpha2:"TG",alpha3:"TGO",screenCode:"TGO"},th:{name:"I18N.COUNTRIES.THA",alpha2:"TH",alpha3:"THA",screenCode:"THA"},tj:{name:"I18N.COUNTRIES.TJK",alpha2:"TJ",alpha3:"TJK",screenCode:"TJK"},tk:{name:"I18N.COUNTRIES.TKL",alpha2:"TK",alpha3:"TKL",screenCode:"TKL"},tl:{name:"I18N.COUNTRIES.TLS",alpha2:"TL",alpha3:"TLS",screenCode:"TLS"},tm:{name:"I18N.COUNTRIES.TKM",alpha2:"TM",alpha3:"TKM",screenCode:"TKM"},tn:{name:"I18N.COUNTRIES.TUN",alpha2:"TN",alpha3:"TUN",screenCode:"TUN"},to:{name:"I18N.COUNTRIES.TON",alpha2:"TO",alpha3:"TON",screenCode:"TON"},tp:{name:"I18N.COUNTRIES.TMP",alpha2:"TP",alpha3:"TMP",screenCode:"TMP"},tr:{name:"I18N.COUNTRIES.TUR",alpha2:"TR",alpha3:"TUR",screenCode:"TUR"},tt:{name:"I18N.COUNTRIES.TTO",alpha2:"TT",alpha3:"TTO",screenCode:"TTO"},tv:{name:"I18N.COUNTRIES.TUV",alpha2:"TV",alpha3:"TUV",screenCode:"TUV"},tw:{name:"I18N.COUNTRIES.TWN",alpha2:"TW",alpha3:"TWN",screenCode:"TWN"},tz:{name:"I18N.COUNTRIES.TZA",alpha2:"TZ",alpha3:"TZA",screenCode:"TZA"},ua:{name:"I18N.COUNTRIES.UKR",alpha2:"UA",alpha3:"UKR",screenCode:"UKR"},ug:{name:"I18N.COUNTRIES.UGA",alpha2:"UG",alpha3:"UGA",screenCode:"UGA"},um:{name:"I18N.COUNTRIES.UMI",alpha2:"UM",alpha3:"UMI",screenCode:"UMI"},us:{name:"I18N.COUNTRIES.USA",alpha2:"US",alpha3:"USA",screenCode:"USA"},uy:{name:"I18N.COUNTRIES.URY",alpha2:"UY",alpha3:"URY",screenCode:"URU"},uz:{name:"I18N.COUNTRIES.UZB",alpha2:"UZ",alpha3:"UZB",screenCode:"UZB"},va:{name:"I18N.COUNTRIES.VAT",alpha2:"VA",alpha3:"VAT",screenCode:"VAT"},vc:{name:"I18N.COUNTRIES.VCT",alpha2:"VC",alpha3:"VCT",screenCode:"VCT"},ve:{name:"I18N.COUNTRIES.VEN",alpha2:"VE",alpha3:"VEN",screenCode:"VEN"},vg:{name:"I18N.COUNTRIES.VGB",alpha2:"VG",alpha3:"VGB",screenCode:"VGB"},vi:{name:"I18N.COUNTRIES.VIR",alpha2:"VI",alpha3:"VIR",screenCode:"VIR"},vn:{name:"I18N.COUNTRIES.VNM",alpha2:"VN",alpha3:"VNM",screenCode:"VMN"},vu:{name:"I18N.COUNTRIES.VUT",alpha2:"VU",alpha3:"VUT",screenCode:"VUT"},wf:{name:"I18N.COUNTRIES.WLF",alpha2:"WF",alpha3:"WLF",screenCode:"WLF"},ws:{name:"I18N.COUNTRIES.WSM",alpha2:"WS",alpha3:"WSM",screenCode:"WSM"},ye:{name:"I18N.COUNTRIES.YEM",alpha2:"YE",alpha3:"YEM",screenCode:"YEM"},yt:{name:"I18N.COUNTRIES.MYT",alpha2:"YT",alpha3:"MYT",screenCode:"MYT"},za:{name:"I18N.COUNTRIES.ZAF",alpha2:"ZA",alpha3:"ZAF",screenCode:"RSA"},zm:{name:"I18N.COUNTRIES.ZMB",alpha2:"ZM",alpha3:"ZMB",screenCode:"ZMB"},zw:{name:"I18N.COUNTRIES.ZWE",alpha2:"ZW",alpha3:"ZWE",screenCode:"ZWE"}},b={abw:a.aw,afg:a.af,ago:a.ao,aia:a.ai,ala:a.ax,alb:a.al,and:a.ad,ant:a.an,are:a.ae,arg:a.ar,arm:a.am,asm:a.as,ata:a.aq,atf:a.tf,atg:a.ag,aus:a.au,aut:a.at,aze:a.az,bdi:a.bi,bel:a.be,ben:a.bj,bfa:a.bf,bgd:a.bd,bgr:a.bg,bhr:a.bh,bhs:a.bs,bih:a.ba,blm:a.bl,blr:a.by,blz:a.bz,bmu:a.bm,bol:a.bo,bra:a.br,brb:a.bb,brn:a.bn,btn:a.bt,bvt:a.bv,bwa:a.bw,caf:a.cf,can:a.ca,cck:a.cc,che:a.ch,chl:a.cl,chn:a.cn,civ:a.ci,cmr:a.cm,cod:a.cd,cog:a.cg,cok:a.ck,col:a.co,com:a.km,cpv:a.cv,cri:a.cr,cub:a.cu,cxr:a.cx,cym:a.ky,cyp:a.cy,cze:a.cz,deu:a.de,dji:a.dj,dma:a.dm,dnk:a.dk,dom:a["do"],dza:a.dz,ecu:a.ec,egy:a.eg,eri:a.er,esh:a.eh,esp:a.es,est:a.ee,eth:a.et,fin:a.fi,fji:a.fj,flk:a.fk,fra:a.fr,fro:a.fo,fsm:a.fm,fxx:a.fx,gab:a.ga,gbr:a.gb,geo:a.ge,ger:a.de,ggy:a.gg,gha:a.gh,gib:a.gi,gin:a.gn,glp:a.gp,gmb:a.gm,gnb:a.gw,gnq:a.gq,grc:a.gr,grd:a.gd,grl:a.gl,gtm:a.gt,guf:a.gf,gum:a.gu,guy:a.gy,hkg:a.hk,hmd:a.hm,hnd:a.hn,hrv:a.hr,hti:a.ht,hun:a.hu,idn:a.id,imn:a.im,ind:a["in"],iot:a.io,irl:a.ie,ire:a.ie,irn:a.ir,irq:a.iq,isl:a.is,isr:a.il,ita:a.it,jam:a.jm,jey:a.je,jor:a.jo,jpn:a.jp,kaz:a.kz,ken:a.ke,kgz:a.kg,khm:a.kh,kir:a.ki,kna:a.kn,kor:a.kr,kwt:a.kw,lao:a.la,lbn:a.lb,lbr:a.lr,lby:a.ly,lca:a.lc,lie:a.li,lka:a.lk,lso:a.ls,ltu:a.lt,lux:a.lu,lva:a.lv,mac:a.mo,maf:a.mf,mar:a.ma,mco:a.mc,mda:a.md,mdg:a.mg,mdv:a.mv,mex:a.mx,mhl:a.mh,mkd:a.mk,mli:a.ml,mlt:a.mt,mmr:a.mm,mne:a.me,mng:a.mn,mnp:a.mp,moz:a.mz,mrt:a.mr,msr:a.ms,mtq:a.mq,mus:a.mu,mwi:a.mw,mys:a.my,myt:a.yt,nam:a.na,ncl:a.nc,ner:a.ne,nfk:a.nf,nga:a.ng,nic:a.ni,niu:a.nu,nld:a.nl,nor:a.no,npl:a.np,nru:a.nr,nzl:a.nz,omn:a.om,pak:a.pk,pan:a.pa,pcn:a.pn,per:a.pe,phl:a.ph,plw:a.pw,png:a.pg,pol:a.pl,pri:a.pr,prk:a.kp,prt:a.pt,pry:a.py,pse:a.ps,pyf:a.pf,qat:a.qa,reu:a.re,rou:a.ro,rus:a.ru,rsa:a.za,rwa:a.rw,sau:a.sa,scg:a.cs,sdn:a.sd,sen:a.sn,sgp:a.sg,sgs:a.gs,shn:a.sh,sjm:a.sj,slb:a.sb,sle:a.sl,slv:a.sv,smr:a.sm,som:a.so,spm:a.pm,srb:a.rs,ssd:a.ss,stp:a.st,sur:a.sr,svk:a.sk,svn:a.si,swe:a.se,swz:a.sz,syc:a.sc,syr:a.sy,tca:a.tc,tcd:a.td,tgo:a.tg,tha:a.th,tjk:a.tj,tkl:a.tk,tkm:a.tm,tls:a.tl,tmp:a.tp,ton:a.to,tto:a.tt,tun:a.tn,tur:a.tr,tuv:a.tv,twn:a.tw,tza:a.tz,uae:a.ae,uga:a.ug,ukr:a.ua,umi:a.um,uru:a.uy,ury:a.uy,usa:a.us,uzb:a.uz,vat:a.va,vct:a.vc,ven:a.ve,vgb:a.vg,vir:a.vi,vnm:a.vn,vut:a.vu,wlf:a.wf,wsm:a.ws,yem:a.ye,zaf:a.za,zmb:a.zm,zwe:a.zw};return angular.extend(a,b)}()),angular.module("betfair.extensions.core").constant("BF.JURISDICTION",{international:{jurisdiction:"INTERNATIONAL",capiJurisdiction:"intl"},italy:{jurisdiction:"ITALY",capiJurisdiction:"it-reg"},spain:{jurisdiction:"SPAIN",capiJurisdiction:"es-reg"},denmark:{jurisdiction:"DENMARK",capiJurisdiction:"dk-reg"},bulgaria:{jurisdiction:"BULGARIA",capiJurisdiction:"bg-reg"},romania:{jurisdiction:"ROMANIA",capiJurisdiction:"ro-reg"}}),angular.module("betfair.extensions.core").constant("BF.SPORT",function(){var a={1:{name:"I18N.SPORTS.FOOTBALL",eventTypeId:1,eventTypeName:"football",capiId:"SOCCER"},2:{name:"I18N.SPORTS.TENNIS",eventTypeId:2,eventTypeName:"tennis",capiId:"TENNIS"},3:{name:"I18N.SPORTS.GOLF",eventTypeId:3,eventTypeName:"golf",capiId:"GOLF"},4:{name:"I18N.SPORTS.CRICKET",eventTypeId:4,eventTypeName:"cricket",capiId:"CRICKET"},5:{name:"I18N.SPORTS.RUGBY_UNION",eventTypeId:5,eventTypeName:"rugby-union",capiId:"RUGBY_UNION"},6:{name:"I18N.SPORTS.BOXING",eventTypeId:6,eventTypeName:"boxing",capiId:"BOXING"},7:{name:"I18N.SPORTS.HORSE_RACING",eventTypeId:7,eventTypeName:"horse-racing",capiId:"HORSE_RACING"},8:{name:"I18N.SPORTS.MOTOR_SPORT",eventTypeId:8,eventTypeName:"motor-sport",capiId:"MOTOR_SPORT"},10:{name:"I18N.SPORTS.SPECIAL_BETS",eventTypeId:10,eventTypeName:"special-bets",capiId:"SPECIAL_BETS"},11:{name:"I18N.SPORTS.CYCLING",eventTypeId:11,eventTypeName:"cycling",capiId:"CYCLING"},12:{name:"I18N.SPORTS.ROWING",eventTypeId:12,eventTypeName:"rowing",capiId:"ROWING"},1477:{name:"I18N.SPORTS.RUGBY_LEAGUE",eventTypeId:1477,eventTypeName:"rugby-league",capiId:"RUGBY_LEAGUE"},3503:{name:"I18N.SPORTS.DARTS",eventTypeId:3503,eventTypeName:"darts",capiId:"DARTS"},3988:{name:"I18N.SPORTS.ATHLETICS",eventTypeId:3988,eventTypeName:"athletics",capiId:"ATHLETICS"},4339:{name:"I18N.SPORTS.GREYHOUND_RACING",eventTypeId:4339,eventTypeName:"greyhound-racing",capiId:"GREYHOUND_RACING"},6231:{name:"I18N.SPORTS.FINANCIAL_BETS",eventTypeId:6231,eventTypeName:"financial-bets",capiId:"FINANCIAL_BETS"},6422:{name:"I18N.SPORTS.SNOOKER",eventTypeId:6422,eventTypeName:"snooker",capiId:"SNOOKER"},6423:{name:"I18N.SPORTS.AMERICAN_FOOTBALL",eventTypeId:6423,eventTypeName:"american-football",capiId:"AMERICAN_FOOTBALL"},7511:{name:"I18N.SPORTS.BASEBALL",eventTypeId:7511,eventTypeName:"baseball",capiId:"BASEBALL"},7522:{name:"I18N.SPORTS.BASKETBALL",eventTypeId:7522,eventTypeName:"basketball",capiId:"BASKETBALL"},7523:{name:"I18N.SPORTS.HOCKEY",eventTypeId:7523,eventTypeName:"hockey",capiId:"HOCKEY"},7524:{name:"I18N.SPORTS.ICE_HOCKEY",eventTypeId:7524,eventTypeName:"ice-hockey",capiId:"ICE_HOCKEY"},7525:{name:"I18N.SPORTS.SUMO_WRESTLING",eventTypeId:7525,eventTypeName:"sumo-wrestling",capiId:"SUMO_WRESTLING"},61420:{name:"I18N.SPORTS.AUSTRALIAN_RULES",eventTypeId:61420,eventTypeName:"australian-rules",capiId:"AUSTRALIAN_RULES"},66598:{name:"I18N.SPORTS.GAELIC_FOOTBALL",eventTypeId:66598,eventTypeName:"gaelic-football",capiId:"GAELIC_FOOTBALL"},66599:{name:"I18N.SPORTS.HURLING",eventTypeId:66599,eventTypeName:"hurling",capiId:"HURLING"},72382:{name:"I18N.SPORTS.POOL",eventTypeId:72382,eventTypeName:"pool",capiId:"POOL"},136332:{name:"I18N.SPORTS.CHESS",eventTypeId:136332,eventTypeName:"chess",capiId:"CHESS"},189929:{name:"I18N.SPORTS.POKER_ROOM",eventTypeId:189929,eventTypeName:"poker-room",capiId:"POKER_ROOM"},256284:{name:"I18N.SPORTS.TROTTING",eventTypeId:256284,eventTypeName:"trotting",capiId:"TROTTING"},3e5:{name:"I18N.SPORTS.COMMONWEALTH_GAMES",eventTypeId:3e5,eventTypeName:"commonwealth-games",capiId:"COMMONWEALTH_GAMES"},315220:{name:"I18N.SPORTS.POKER",eventTypeId:315220,eventTypeName:"poker",capiId:"POKER"},451485:{name:"I18N.SPORTS.WINTER_SPORTS",eventTypeId:451485,eventTypeName:"winter-sports",capiId:"WINTER_SPORTS"},468328:{name:"I18N.SPORTS.HANDBALL",eventTypeId:468328,eventTypeName:"handball",capiId:"HANDBALL"},606611:{name:"I18N.SPORTS.NETBALL",eventTypeId:606611,eventTypeName:"netball",capiId:"NETBALL"},620576:{name:"I18N.SPORTS.SWIMMING",eventTypeId:620576,eventTypeName:"swimming",capiId:"SWIMMING"},627555:{name:"I18N.SPORTS.BADMINTON",eventTypeId:627555,eventTypeName:"badminton",capiId:"BADMINTON"},678378:{name:"I18N.SPORTS.INTERNATIONAL_RULES",eventTypeId:678378,eventTypeName:"international-rules",capiId:"INTERNATIONAL_RULES"},982477:{name:"I18N.SPORTS.BRIDGE",eventTypeId:982477,eventTypeName:"bridge",capiId:"BRIDGE"},998916:{name:"I18N.SPORTS.YACHTING",eventTypeId:998916,eventTypeName:"yachting",capiId:"YACHTING"},998917:{name:"I18N.SPORTS.VOLLEYBALL",eventTypeId:998917,eventTypeName:"volleyball",capiId:"VOLLEYBALL"
},998918:{name:"I18N.SPORTS.BOWLS",eventTypeId:998918,eventTypeName:"bowls",capiId:"BOWLS"},998919:{name:"I18N.SPORTS.BANDY",eventTypeId:998919,eventTypeName:"bandy",capiId:"BANDY"},998920:{name:"I18N.SPORTS.FLOORBALL",eventTypeId:998920,eventTypeName:"floorball",capiId:"FLOORBALL"},1444073:{name:"I18N.SPORTS.EXCHANGE_POKER",eventTypeId:1444073,eventTypeName:"exchange-poker",capiId:"EXCHANGE_POKER"},1444076:{name:"I18N.SPORTS.EXCHANGE_BLACKJACK",eventTypeId:1444076,eventTypeName:"exchange-blackjack",capiId:"EXCHANGE_BLACKJACK"},1444085:{name:"I18N.SPORTS.EXCHANGE_BACCARAT",eventTypeId:1444085,eventTypeName:"exchange-baccarat",capiId:"EXCHANGE_BACCARAT"},1444092:{name:"I18N.SPORTS.EXCHANGE_HI_LO",eventTypeId:1444092,eventTypeName:"exchange-hi-lo",capiId:"EXCHANGE_HI_LO"},1444099:{name:"I18N.SPORTS.EXCHANGE_OMAHA_HI",eventTypeId:1444099,eventTypeName:"exchange-omaha-hi",capiId:"EXCHANGE_OMAHA_HI"},1444120:{name:"I18N.SPORTS.CASINO",eventTypeId:1444120,eventTypeName:"casino",capiId:"CASINO"},1444130:{name:"I18N.SPORTS.EXCH_ROULETTE",eventTypeId:1444130,eventTypeName:"exchange-roulette",capiId:"EXCHANGE_ROULETTE"},1938544:{name:"I18N.SPORTS.BACKGAMMON",eventTypeId:1938544,eventTypeName:"backgammon",capiId:"BACKGAMMON"},2152880:{name:"I18N.SPORTS.GAELIC_GAMES",eventTypeId:2152880,eventTypeName:"gaelic-games",capiId:"GAELIC_GAMES"},2378961:{name:"I18N.SPORTS.POLITICS",eventTypeId:2378961,eventTypeName:"politics",capiId:"POLITICS"},2593174:{name:"I18N.SPORTS.TABLE_TENNIS",eventTypeId:2593174,eventTypeName:"table-tennis",capiId:"TABLE_TENNIS"},2791893:{name:"I18N.SPORTS.YAHOO_RACING",eventTypeId:2791893,eventTypeName:"yahoo-racing",capiId:"YAHOO_RACING"},2872194:{name:"I18N.SPORTS.BEACH_VOLLEYBALL",eventTypeId:2872194,eventTypeName:"beach-volleyball",capiId:"BEACH_VOLLEYBALL"},2872196:{name:"I18N.SPORTS.CANOEING",eventTypeId:2872196,eventTypeName:"canoeing",capiId:"CANOEING"},2901849:{name:"I18N.SPORTS.WATER_POLO",eventTypeId:2901849,eventTypeName:"water-polo",capiId:"WATER_POLO"},2977e3:{name:"I18N.SPORTS.POLO",eventTypeId:2977e3,eventTypeName:"polo",capiId:"POLO"},3088925:{name:"I18N.SPORTS.FISHING",eventTypeId:3088925,eventTypeName:"fishing",capiId:"FISHING"},3130721:{name:"I18N.SPORTS.ROLLER_HOCKEY",eventTypeId:3130721,eventTypeName:"roller-hockey",capiId:"ROLLER_HOCKEY"},3145419:{name:"I18N.SPORTS.CROSSPORT_ACCUMULATORS",eventTypeId:3145419,eventTypeName:"crosssport-accumulators",capiId:"CROSSPORT_ACCUMULATORS"},4609466:{name:"I18N.SPORTS.SQUASH",eventTypeId:4609466,eventTypeName:"squash",capiId:"SQUASH"},4726642:{name:"I18N.SPORTS.SURFING",eventTypeId:4726642,eventTypeName:"surfing",capiId:"SURFING"},4968929:{name:"I18N.SPORTS.COMBAT_SPORTS",eventTypeId:4968929,eventTypeName:"combat-sports",capiId:"COMBAT_SPORTS"},5412697:{name:"I18N.SPORTS.PELOTA",eventTypeId:5412697,eventTypeName:"pelota",capiId:"PELOTA"},5402258:{name:"I18N.SPORTS.EXCHANGE_GAMES",eventTypeId:5402258,eventTypeName:"exchange-games",capiId:"EXCHANGE_GAMES"},5545197:{name:"I18N.SPORTS.FEATURED_MARKETS",eventTypeId:5545197,eventTypeName:"featured-markets",capiId:"FEATURED_MARKETS"},10196203:{name:"I18N.SPORTS.EXCHANGE_CASINO",eventTypeId:10196203,eventTypeName:"exchange-casino",capiId:"EXCHANGE_CASINO"},10390264:{name:"I18N.SPORTS.TEN_PIN_BOWLING",eventTypeId:10390264,eventTypeName:"tenpin-bowling",capiId:"TEN_PIN_BOWLING"},15826206:{name:"I18N.SPORTS.FUTSAL",eventTypeId:15826206,eventTypeName:"futsal",capiId:"FUTSAL"},15826207:{name:"I18N.SPORTS.FUSSBALL",eventTypeId:15826207,eventTypeName:"fussball",capiId:"FUSSBALL"},16872235:{name:"I18N.SPORTS.HARNESS_RACING",eventTypeId:16872235,eventTypeName:"harness-racing",capiId:"HARNESS_RACING"},18643353:{name:"I18N.SPORTS.EQUESTRIAN",eventTypeId:18643353,eventTypeName:"equestrian",capiId:"EQUESTRIAN"},26397698:{name:"I18N.SPORTS.VIRTUAL_HORSE_RACING",eventTypeId:26397698,eventTypeName:"virtual-horse-racing",capiId:"VIRTUAL_HORSE_RACING"},26420387:{name:"I18N.SPORTS.MIXED_MARTIAL_ARTS",eventTypeId:26420387,eventTypeName:"mixed-martial-arts",capiId:"MIXED_MARTIAL_ARTS"},27105927:{name:"I18N.SPORTS.WINTER_OLYMPICS",eventTypeId:27105927,eventTypeName:"winter-olympics",capiId:"WINTER_OLYMPICS"},27388198:{name:"I18N.SPORTS.CURRENT_AFFAIRS",eventTypeId:27388198,eventTypeName:"current-affairs",capiId:"CURRENT_AFFAIRS"},27454571:{name:"I18N.SPORTS.E_SPORTS",eventTypeId:27454571,eventTypeName:"e-sports",capiId:"E_SPORTS"},27456382:{name:"I18N.SPORTS.BAKU_2015",eventTypeId:27456382,eventTypeName:"baku-2015",capiId:"BAKU_2015"},27589895:{name:"I18N.SPORTS.OLYMPICS_2016",eventTypeId:27589895,eventTypeName:"olympics-2016",capiId:"OLYMPICS_2016"},2264869:{name:"I18N.SPORTS.INTERNAL_MARKETS",eventTypeId:2264869,eventTypeName:"internal-markets",capiId:"INTERNAL_MARKETS"},27829360:{name:"I18N.SPORTS.MMA_UFC",eventTypeId:27829360,eventTypeName:"mma-ufc",capiId:"MMA_UFC"},28578623:{name:"I18N.SPORTS.CURLING",eventTypeId:28578623,eventTypeName:"curling",capiId:"CURLING"}},b={"american-football":a[6423],athletics:a[3988],"australian-rules":a[61420],backgammon:a[1938544],badminton:a[627555],"baku-2015":a[27456382],bandy:a[998919],baseball:a[7511],basketball:a[7522],"beach-volleyball":a[2872194],bowls:a[998918],boxing:a[6],bridge:a[982477],canoeing:a[2872196],casino:a[1444120],chess:a[136332],"combat-sports":a[4968929],cricket:a[4],"crosssport-accumulators":a[3145419],curling:a[28578623],"current-affairs":a[27388198],"cw-games":a[3e5],cycling:a[11],darts:a[3503],"e-sports":a[27454571],equestrian:a[18643353],"exchange-baccarat":a[1444085],"exchange-blackjack":a[1444076],"exchange-casino":a[10196203],"exchange-games":a[5402258],"exchange-hi-lo":a[1444092],"exchange-omaha-hi":a[1444099],"exchange-poker":a[1444073],"exchange-roulette":a[1444130],"featured-markets":a[5545197],"financial-bets":a[6231],fishing:a[3088925],floorball:a[998920],football:a[1],fussball:a[15826207],futsal:a[15826206],"gaelic-football":a[66598],"gaelic-games":a[2152880],golf:a[3],"greyhound-racing":a[4339],handball:a[468328],"harness-racing":a[16872235],hockey:a[7523],"horse-racing":a[7],hurling:a[66599],"ice-hockey":a[7524],"internal-markets":a[2264869],"international-rules":a[678378],"mixed-martial-arts":a[26420387],"mma-ufc":a[27829360],"motor-sport":a[8],netball:a[606611],"olympics-2016":a[27589895],pelota:a[5412697],poker:a[315220],"poker-room":a[189929],politics:a[2378961],polo:a[2977e3],pool:a[72382],"roller-hockey":a[3130721],rowing:a[12],"rugby-league":a[1477],"rugby-union":a[5],snooker:a[6422],"special-bets":a[10],squash:a[4609466],"sumo-wrestling":a[7525],surfing:a[4726642],swimming:a[620576],"table-tennis":a[2593174],tennis:a[2],"tenpin-bowling":a[10390264],trotting:a[256284],"virtual-horse-racing":a[26397698],volleyball:a[998917],"water-polo":a[2901849],"winter-olympics":a[27105927],"winter-sports":a[451485],yachting:a[998916],"yahoo-racing":a[2791893]};return{category:{avb:[1,2,4,5,6,1477,3503,6422,6423,7511,7522,7523,7524,61420,72382,468328,606611,627555,998917,998918,998920,2152880,2593174,2872194,15826206,26420387,27454571,27829360,28578623],racing:[7,4339]},type:angular.extend(a,b)}}()),angular.module("betfair.extensions.core").constant("BF.VIRTUAL_SPORT",function(){var a={0:{name:"I18N.VIRTUAL_SPORTS.HORSE_RACING",eventTypeId:0,eventTypeName:"horse-racing"},1:{name:"I18N.VIRTUAL_SPORTS.GREYHOUND_RACING",eventTypeId:1,eventTypeName:"greyhound-racing"},2:{name:"I18N.VIRTUAL_SPORTS.SPEEDWAY",eventTypeId:2,eventTypeName:"speedway"},3:{name:"I18N.VIRTUAL_SPORTS.MOTOR_RACING",eventTypeId:3,eventTypeName:"motor-racing"},4:{name:"I18N.VIRTUAL_SPORTS.FOOTBALL",eventTypeId:4,eventTypeName:"football"},7:{name:"I18N.VIRTUAL_SPORTS.CYCLING",eventTypeId:7,eventTypeName:"cycling"},8:{name:"I18N.VIRTUAL_SPORTS.TENNIS",eventTypeId:8,eventTypeName:"tennis"},100:{name:"I18N.VIRTUAL_SPORTS.HORSES_JUMPS",eventTypeId:100,eventTypeName:"horses-jumps"}},b={cycling:a[7],football:a[4],"greyhound-racing":a[1],"horse-racing":a[0],"motor-racing":a[3],speedway:a[2],tennis:a[8],"horses-jumps":a[100]};return{category:{avb:[4,8],racing:[0,1,2,3,7,100]},type:angular.extend(a,b)}}()),angular.module("betfair.extensions.core").config(["$provide",function(a){a.decorator("$location",["$delegate",function(a){return a.topLevelDomain=function(){var b=a.host().split("."),c=-2;return-1!==["com","co"].indexOf(b[b.length-2])&&(c=-3),b.slice(c).join(".")},a}])}]),angular.module("betfair.extensions.core").config(["$provide",function(a){a.decorator("$q",["$delegate",function(a){return a.race=function(a){var b=this.defer();return angular.forEach(a,function(a){a.then(b.resolve,b.reject)}),b.promise},a.any=function(b){var c=a.defer(),d=0,e=angular.isArray(b)?[]:{};return angular.forEach(b,function(b,f){d++,a.when(b).then(function(a){c.resolve(a)},function(a){e[f]=a,0==--d&&c.reject(e)})}),0===d&&c.resolve(e),c.promise},a}])}]),angular.module("betfair.extensions.core").factory("BF.Map",[function(){function a(a){return!angular.isString(a)&&angular.toJson(a)||a}function b(){var b={};return{size:0,set:function(c,d){return this.has(c)||this.size++,b[a(c)]=d,this},get:function(c){return b[a(c)]},"delete":function(c){var d=this.has(c);return d&&(this.size--,delete b[a(c)]),d},clear:function(){b={},this.size=0},has:function(c){return b.hasOwnProperty(a(c))},forEach:angular.bind(this,angular.forEach,b)}}return b}]),angular.module("betfair.extensions.device").constant("BF.DEVICE",{deviceType:{desktop:"desktop",phone:"phone",tablet:"tablet"},screenType:{retina:"retina",nonRetina:"non-retina"},orientationMode:{landscape:"landscape",portrait:"portrait"}}),angular.module("betfair.extensions.device").constant("BF.INTERNAL.DEVICE",{mobileBrowsers:"(android|bb\\d+|meego)(.+mobile)?|avantgo|bada/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|silk|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino",mobileOverride:{phones:["HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR(6200|6400L|6425)|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m"],tablets:["HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200","Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT(12|13|114|121|122|123|111|112|113|131|132|133|211|212|213)|SGP(311|312|321|351|341|511|512|521|541|551)|EBRD(1101|1102|1201)","Windows NT [0-9.]+; ARM;"]},mediaQuery:{phone:"only screen and (max-device-width: 767px), only screen and (max-device-height: 767px)",tablet:"only screen and (min-device-width: 768px) and (min-device-height: 768px)",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)"}}),angular.module("betfair.extensions.device").provider("BF.Device",["BF.INTERNAL.DEVICE",function(a){function b(){var a=window.navigator.userAgent.match(/betfairwrapper\s?\(([^)]*)\)/i);return a&&a[1]?a[1].split(";").map(function(a){return a.trim()}):[]}var c,d,e,f,g=this;this.initializeDetection=function(){for(e=new RegExp(a.mobileBrowsers,"i"),c=e.test(window.navigator.userAgent),f=0;f<a.mobileOverride.phones.length;f++)if(e=new RegExp(a.mobileOverride.phones[f],"i"),e.test(window.navigator.userAgent)){c=!0,d=!1;break}for(f=0;f<a.mobileOverride.tablets.length;f++)if(e=new RegExp(a.mobileOverride.tablets[f],"i"),e.test(window.navigator.userAgent)){c=!0,d=!0;break}},this.initializeDetection(),this.overrideMobileDetection=function(a){c="boolean"==typeof a?a:c},this.overrideTabletDetection=function(a){c=!0===a?a:c,d="boolean"==typeof a?a:void 0},this.isDesktop=function(){return!c},this.isPhone=function(){return!!c&&(angular.isDefined(d)?!d:matchMedia(a.mediaQuery.phone).matches)},this.isTablet=function(){return!!c&&(angular.isDefined(d)?d:matchMedia(a.mediaQuery.tablet).matches)},this.getDeviceType=function(){return c?g.isPhone()?a.deviceType.phone:a.deviceType.tablet:a.deviceType.desktop},this.isRetina=function(){return(window.devicePixelRatio||1)>=2},this.getScreenType=function(){return g.isRetina()?a.screenType.retina:a.screenType.nonRetina},this.isLandscape=function(){return matchMedia(a.mediaQuery.landscape).matches},this.isPortrait=function(){return matchMedia(a.mediaQuery.portrait).matches},this.getOrientationMode=function(){return g.isLandscape()?a.orientationMode.landscape:a.orientationMode.portrait},this.isIOS=function(){return c&&/(iphone|ipod|ipad)/i.test(window.navigator.userAgent)},this.isAndroid=function(){return c&&/android/i.test(window.navigator.userAgent)},this.isWindowsPhone=function(){return c&&/windows phone/i.test(window.navigator.userAgent)},this.isWrapper=function(){return/betfairwrapper/i.test(window.navigator.userAgent)},this.getWrapperVersion=function(){return b()[2]},this.isChrome=function(){return/(crios|chrome)/i.test(window.navigator.userAgent)},this.isSafari=function(){return/^((?!crios|chrome).)*safari.*$/i.test(window.navigator.userAgent)},this.$get=function(){return{isDesktop:g.isDesktop,isPhone:g.isPhone,isTablet:g.isTablet,getDeviceType:g.getDeviceType,isRetina:g.isRetina,getScreenType:g.getScreenType,isLandscape:g.isLandscape,isPortrait:g.isPortrait,getOrientationMode:g.getOrientationMode,isIOS:g.isIOS,isAndroid:g.isAndroid,isWindowsPhone:g.isWindowsPhone,isWrapper:g.isWrapper,isSafari:g.isSafari,isChrome:g.isChrome,getWrapperVersion:g.getWrapperVersion}}}]),angular.module("betfair.extensions.favourites").factory("BF.Internal.FavouritesDecorator",["BF.SportsNavigationClient","BF.Lodash","BF.User","BF.FAVOURITE_TYPES","BF.Internal.FavouritesFactory","BF.GraphHelper","$q",function(a,b,c,d,e,f,g){function h(a){return d[a.getType()]+":"+a.getId()}function i(a,b){return a.filter(function(a){var c=h(a);return f.findNodeByNodeId(b.nodes,c)})}function j(a){return!p||-1!==p.indexOf(a.getType())}function k(a){return-1!==q.indexOf(a.getType())}function l(a){return k(a)&&j(a)}function m(a,b){return a.map(function(a){return l(a)?e.decorateFavourite(a,b):a})}function n(a){return b.filter(a,l).map(h)}function o(b,c){var d;return p=c,d=n(b),d.length?a.getGraphForNode(d,r).then(function(a){return m(i(b,a),a)}):g.when(b)}var p,q=[1,2,3,4,5,6,7,8,9],r={locale:c.getExchangeLocale(),maxInDistance:999,maxOutDistance:1,attachments:["COMPETITION","EVENT","MARKET_LITE","RACE"]};return{decorateValidAndFilterExpiredFavourites:o}}]),angular.module("betfair.extensions.favourites").constant("BF.FAVOURITE_TYPES",function(){var a={1:"MARKET",2:"EVENT",3:"EVENT_TYPE",4:"COMP",5:"COMP_FIXTURE",6:"MEETING",7:"RACE",8:"SPORTSBOOK_MARKET",9:"MENU",10:"COUNTRY",11:"COMPETITION_REGION",1001:"EVENT_TIME_TODAY",1002:"EVENT_TIME_TOMORROW",1003:"EVENT_TIME_WEEKEND",1004:"EVENT_TIME_NEXT_7_DAYS",1005:"ALL_FOOTBALL",1006:"TODAYS_CARD",1007:"TOMORROWS_CARD",1008:"WHERES_THE_MONEY",1009:"ANTEPOST",1010:"TOTE"};return Object.keys(a).forEach(function(b){var c=a[b];a[c]=Number(b)}),a}()),angular.module("betfair.extensions.favourites").factory("BF.Internal.FavouriteUspMapper",["BF.Favourite",function(a){function b(a){return f+a.getType()+g+a.getId()}function c(a){return a.map(b).join("")}function d(b){if(b.length){var c=b.match(h);if(c&&3===c.length)return new a(Number(c[1]),c[2])}}function e(a){var b,c,e=[];return a?(b=a.split(f),angular.forEach(b,function(a){(c=d(a))&&e.push(c)}),e):e}var f=",",g=":",h=/^,?(\d+):([a-zA-Z0-9\.]+)/;return{mapToUsp:c,mapFromUsp:e}}]),angular.module("betfair.extensions.favourites").factory("BF.Favourite",["BF.FavouriteMetadata",function(a){function b(b){return 0!==Object.keys(b).length&&!Object.keys(b).some(function(c){return b.hasOwnProperty(c)&&!(b[c]instanceof a)})}function c(a,c,d){if(!angular.isNumber(a)||isNaN(a))throw new Error("type must be a valid number");if(!c||!angular.isString(c))throw new Error("id must be a valid String");if(d&&!b(d))throw new Error("metadata attributes must be an instance of FavouriteMetadata");this.getType=function(){return a},this.getId=function(){return c},this.getMetadata=function(){return d},this.equals=function(a){return this.getType()===a.getType()&&this.getId()===a.getId()}}return c}]),angular.module("betfair.extensions.favourites").factory("BF.Internal.FavouritesFactory",["BF.FAVOURITE_TYPES","BF.SPORT","BF.FavouriteMetadataFactory","BF.GraphHelper","BF.Favourite",function(a,b,c,d,e){function f(b,c){var d=a[b];if(!d)throw new Error("Unknown favourite type: "+b);return d+":"+c}function g(a){return a.split(":")[1]}function h(a){return f(a.getType(),a.getId())}function i(a,b,c){var e=f(a,c);return d.findNodeByNodeId(b,e)}function j(b,c){return i(a.EVENT,b,c)}function k(b,c){return i(a.EVENT_TYPE,b,c)}function l(a,b){var c=h(b);return d.findNodeByNodeId(a,c)}function m(b,d){var e=k(b,d);return c.create(a.EVENT_TYPE,e.nodeId,e.name)}function n(b,e,f){var g,h;if(f===a.MARKET?g=d.findCompetitionNodeByEventId(b,e.topLevelEventId):f===a.EVENT&&(h=d.findMarketNodeByEventId(b,e.eventId),g=d.findCompetitionNodeByEventId(b,h.marketLiteInfo.topLevelEventId)),g)return c.create(a.COMP,g.nodeId,g.name,{eventId:g.competitionInfo.eventId})}function o(b,e){var g=f(a.MEETING,e),h=d.findNodeByNodeId(b,g);return c.create(a.MEETING,h.nodeId,h.name)}function p(b,e){var g=f(a.RACE,e),h=d.findNodeByNodeId(b,g);return c.create(a.RACE,h.nodeId,h.name,{startTime:h.raceInfo.startTime})}function q(b,d){var e=j(b,d);return c.create(a.EVENT,e.nodeId,e.name)}function r(a){var b=a.marketLiteInfo;return{isOutright:d.isOutrightMarket(a),marketType:b.marketType}}function s(d,e){var f,g=d.marketLiteInfo,h=b.category.racing.indexOf(g.eventTypeId)>-1,i={event_type:m(e,g.eventTypeId),market:c.create(a.MARKET,d.nodeId,g.marketTypeName||d.name,r(d))};return h?g.raceId?(i.race=p(e,g.raceId),i.meeting=o(e,g.meetingId)):g.eventId&&(i.event=q(e,g.eventId)):(g.topLevelEventId&&(f=n(e,g,a.MARKET))&&(i.comp=f),i.event=q(e,g.eventId)),i}function t(b,c){var e=b.eventInfo,f=d.findMarketNodeByEventId(c,e.eventId),h=n(c,f.marketLiteInfo,a.EVENT),i={event_type:m(c,e.eventTypeId),event:q([b],g(b.nodeId))};return h&&(i.comp=h),i}function u(b,e){var g=b.raceInfo,h=f(a.MARKET,g.winMarketId),i=d.findNodeByNodeId(e,h);return{race:c.create(a.RACE,b.nodeId,b.name,{startTime:g.startTime}),market:c.create(a.MARKET,i.nodeId,i.marketLiteInfo.marketTypeName,r(i)),meeting:o(e,g.meetingId),event_type:m(e,g.eventTypeId)}}function v(b){return{event_type:c.create(a.EVENT_TYPE,b.nodeId,b.name)}}function w(b,e,f){var h=d.findParentNodeIdOfType(f,b.nodeId,A),i=g(h);return{comp:c.create(a.COMP,b.nodeId,b.name,{eventId:b.competitionInfo.eventId}),event_type:m(e,i)}}function x(b,e,f,g){var h=a[b].toLowerCase(),i={},j=d.findParentNodeIdOfType(g,e.nodeId,A),k=d.findNodeByNodeId(f,j);return i[h]=c.create(b,e.nodeId,e.name),i.event_type=c.create(a.EVENT_TYPE,k.nodeId,k.name),i}function y(b,c,d,e){switch(b){case a.MARKET:return s(c,d);case a.EVENT:return t(c,d);case a.RACE:return u(c,d);case a.EVENT_TYPE:return v(c,d);case a.COMP:return w(c,d,e);default:return x(b,c,d,e)}}function z(a,b){var c;if(!(a instanceof e))throw new Error("favourite parameter must be of type Favourite");if(!b||!angular.isArray(b.nodes))throw new Error("invalid graphResponse");if(!(c=l(b.nodes,a)))throw new Error("favourite was not found in nodes");return new e(a.getType(),a.getId(),y(a.getType(),c,b.nodes,b.edges))}var A="EVENT_TYPE";return{decorateFavourite:z}}]),angular.module("betfair.extensions.favourites").provider("BF.FavouritesManagerFactory",["BF.FAVOURITE_TYPES",function(a){var b,c={};this.setSupportedFavouriteTypes=function(a){b=a},this.setFilterByType=function(b,d){if(!angular.isFunction(d))throw new Error("callback should be a function");if(!angular.isNumber(b))throw new Error("invalid value type");if(!a[b])throw new Error("the type provided is not supported");c[b]=d},this.$get=["BF.Internal.FavouritesService","BF.Internal.FavouritesManager","BF.Internal.FavouritesDecorator",function(a,d,e){function f(f){return f.length?e.decorateValidAndFilterExpiredFavourites(f,b).then(function(e){return e.length!==f.length&&a.set(e),d(e,b,c)}):d([],b,c)}function g(){return h||(h=a.get().then(f)),h}var h;return{getFavouritesManagerInstance:g}}]}]),angular.module("betfair.extensions.favourites").factory("BF.Internal.FavouritesManager",["BF.Internal.FavouritesService","BF.Favourite","BF.Lodash","BF.FavouritesSandbox","BF.Internal.FavouritesDecorator","$q",function(a,b,c,d,e,f){function g(a){return a instanceof b}function h(a){return a.every(g)}function i(a){if(!angular.isArray(a)||!h(a))throw new Error("favourites must be a valid favourites array")}function j(a){if(!g(a))throw new Error("Invalid favourite")}function k(b,g,h){function k(a){return c.findIndex(I,function(b){return b.equals(a)})}function l(a){var b=h[a.getType()];return!g&&!b||g.indexOf(a.getType())>-1&&(!b||b(a))}function m(a){return-1!==k(a)}function n(){return I.filter(l)}function o(a){I.length=0,angular.forEach(a,function(a){I.push(a)})}function p(a){return e.decorateValidAndFilterExpiredFavourites(a).then(function(a){return a})}function q(a){return m(a)?f.when(a):p([a]).then(function(a){return I.push(a[0]),a[0]})}function r(a){var b=k(a);-1!==b&&I.splice(b,1)}function s(a,b){var c=[];return angular.forEach(a,function(a){b.some(a.equals,a)||c.push(a)}),c}function t(a){return p(a.filter(function(a){return!m(a)})).then(function(a){return I=I.concat(a),a})}function u(a){angular.forEach(a,r)}function v(a){H=angular.copy(a)}function w(b){return a.set(b).then(function(){return b})}function x(a){return t(s(a,H)).then(function(){return u(s(H,a)),I})}function y(){return a.get().then(x).then(w).then(v)}function z(a,b,c,d){a(c);var e=b(c);return(angular.isUndefined(d)||d)&&y(),e}function A(a,b,c){return z(j,a,b,c)}function B(a,b,c){return z(i,a,b,c)}function C(a,b){return A(a,b,!1)}function D(a){return angular.bind(this,A,a)}function E(a){return angular.bind(this,B,a)}function F(a){return angular.bind(this,C,a)}function G(){return d(this)}if(h&&!c.isPlainObject(h))throw new Error("applicationFavouriteTypeFilter should be an object");angular.isDefined(h)||(h={}),angular.isDefined(b)||(b=[]),i(b);var H=angular.copy(b),I=angular.copy(b);return{add:D(q),remove:D(r),hasFavourite:F(m),get:n,persist:y,set:E(o),createSandbox:G}}return k}]),angular.module("betfair.extensions.favourites").factory("BF.FavouritesSandbox",["BF.Lodash","BF.Internal.FavouritesDecorator","$q",function(a,b,c){function d(d){function e(a,b){if(!n[a])throw new Error("Favourite to move [from] does not exist.");if(!n[b])throw new Error("Position to move [to] does not exist.");n.splice(b,0,n.splice(a,1)[0])}function f(a,b){var c;c=Array.isArray(a)?a:[{from:a,to:b}],c.forEach(function(a){e(a.from,a.to)})}function g(){d.set(n)}function h(b){return a.findIndex(n,function(a){return a.equals(b)})}function i(a){return-1!==h(a)}function j(){return n}function k(a){return i(a)?c.when(a):b.decorateValidAndFilterExpiredFavourites([a]).then(function(a){return n.push(a[0]),a[0]})}function l(a){var b=h(a);-1!==b&&n.splice(b,1)}function m(){n.length=0}var n=angular.copy(d.get());return{get:j,move:f,persist:g,add:k,remove:l,removeAll:m,hasFavourite:i}}return d}]),angular.module("betfair.extensions.favourites").factory("BF.Internal.FavouritesService",["BF.UserSharedPreferencesClient","BF.Internal.FavouriteUspMapper","$q",function(a,b,c){function d(){return a.getUserPreferences({preferenceKeys:f}).then(function(a){return a.status===g.FAILURE?c.reject(a.error):b.mapFromUsp(a.preferences[f])})}function e(d){var e={};return e[f]=b.mapToUsp(d),a.setUserPreferences(e).then(function(a){if(a.status===g.FAILURE)return c.reject(a.error)})}var f=["sports.favourites.v2"],g={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};return{get:d,set:e}}]),angular.module("betfair.extensions.favourites").factory("BF.FavouriteCompetitionMetadata",["BF.FavouriteMetadata",function(a){function b(b,c,d){if(a.call(this,b,c),!angular.isUndefined(d)&&!angular.isNumber(d))throw new Error("eventId must be undefined or a valid Number");this.getEventId=function(){return d}}return b.prototype=Object.create(a.prototype),b}]),angular.module("betfair.extensions.favourites").factory("BF.FavouriteMarketMetadata",["BF.FavouriteMetadata",function(a){function b(b,c,d,e){if("boolean"!=typeof d)throw new Error("isOutright must be a valid Boolean");a.call(this,b,c),this.getIsOutright=function(){return d},this.getMarketType=function(){return e}}return b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b}]),angular.module("betfair.extensions.favourites").factory("BF.FavouriteMetadataFactory",["BF.FAVOURITE_TYPES","BF.FavouriteMetadata","BF.FavouriteMarketMetadata","BF.FavouriteRaceMetadata","BF.FavouriteCompetitionMetadata",function(a,b,c,d,e){function f(f,g,h,i){if(!angular.isNumber(f)||isNaN(f))throw new Error("favouriteType must be a valid number");if(!a[f])throw new Error("Unknown favourite type");switch(f){case a.MARKET:return new c(g,h,i.isOutright,i.marketType);case a.RACE:return new d(g,h,i.startTime);case a.COMP:return new e(g,h,i.eventId);default:return new b(g,h)}}return{create:f}}]),angular.module("betfair.extensions.favourites").value("BF.FavouriteMetadata",function(a,b){if(!angular.isString(a)||-1===a.indexOf(":"))throw new Error("nodeId must be a valid String");if(!b||!angular.isString(b))throw new Error("name must be a valid String");this.getNodeId=function(){return a},this.getName=function(){return b}}),angular.module("betfair.extensions.favourites").factory("BF.FavouriteRaceMetadata",["BF.FavouriteMetadata",function(a){function b(b,c,d){if(!d||!angular.isString(d))throw new Error("startTime must be a valid String");a.call(this,b,c),this.getStartTime=function(){return d}}return b.prototype=Object.create(a.prototype),b.prototype.constructor=b,b}]),angular.module("betfair.extensions.livestream").provider("BF.LiveStream",[function(){var a=new RegExp(/\b((?=[a-z0-9\-]{1,63}\.)(xn--)?[a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,63}\b/),b=["startTime"],c=["width","height","allowPopup","contentType","contentView","providerId","contentOnly","statsToggle"],d={LIVE_STREAM_URL:"https://videoplayer.{environment}/GetPlayer.do?tr={trackId}",STREAM_TYPE:"&{streamType}={streamId}",OPTIONS:{width:"&width={width}",height:"&height={height}",allowPopup:"&allowPopup={allowPopup}",contentType:"&contentType={contentType}",contentView:"&contentView={contentView}",providerId:"&providerId={providerId}",contentOnly:"&contentOnly={contentOnly}",statsToggle:"&statsToggle={statsToggle}"}},e={EVENT:"eID",MARKET:"mID",TIMEFORM:"tID"},f={WEB:"WEB",MOBILE:"MOBILE"},g={VIDEO:"vid",VISUALIZATION:"viz"},h={INPLAY_STATS:"instats",MATCH_STATS:"mstats"},i={SHOW:"show",HIDE:"hide"},j={environment:void 0,trackId:void 0};this.setEnvironment=function(b){if(!a.test(b))throw new Error("Validation Error: `environment` is not a valid domain name.");return j.environment=b,this},this.setTrackId=function(a){if(!angular.isNumber(a))throw new Error("Type Error: `trackId` should be a Number.");return j.trackId=a,this},this.$get=["formatFilter","BF.Device","BF.Lodash","BF.SeasClient",function(a,k,l,m){function n(a){return a=a||{},Object.keys(a).reduce(function(a,b){return a+d.OPTIONS[b]},d.LIVE_STREAM_URL+d.STREAM_TYPE)}function o(b,c,d){return a(n(d),angular.extend({environment:j.environment,trackId:j.trackId,streamType:b,streamId:c},d))}function p(a,d,e,h){var i={},j={};return h=h||{},i=l.pickBy(h,function(a,c){return b.indexOf(c)>-1}),i.channel=k.isDesktop()?f.WEB:f.MOBILE,j=l.pickBy(h,function(a,b){return c.indexOf(b)>-1}),m.scoresAndBroadcast([a],d,e,i).then(function(b){var c,d=r,e=a,f={};return b[0]&&b[0].broadcasts?(c=b[0].broadcasts,h.marketId&&(d=q,e=h.marketId),c.isDataVisualizationAvailable&&(f.dataVisualization=d(e,angular.extend({},j,{contentType:g.VISUALIZATION}))),c.isLiveVideoAvailable&&(f.liveVideo=d(e,angular.extend({},j,{contentType:g.VIDEO}))),{isDataVisualizationAvailable:c.isDataVisualizationAvailable||!1,isLiveVideoAvailable:c.isLiveVideoAvailable||!1,streams:f}):{isDataVisualizationAvailable:!1,isLiveVideoAvailable:!1}})}var q,r,s;return function(){if(!j.environment)throw new Error("Configuration Error: `environment` is missing from the configuration.");if(!j.trackId)throw new Error("Configuration Error: `trackId` is missing from the configuration.")}(),q=angular.bind(this,o,e.MARKET),r=angular.bind(this,o,e.EVENT),s=angular.bind(this,o,e.TIMEFORM),{CONTENT_TYPE:g,CONTENT_VIEW:h,STATS_TOGGLE:i,buildUrlByMarketId:q,buildUrlByEventId:r,buildUrlByTimeformId:s,requestLiveStreams:p}}]}]),angular.module("betfair.extensions.locale").constant("BF.LOCALE",{bg:{id:"bg-bg",DATETIME_FORMATS:{AMPMS:["..",".."],DAY:["","","","","","",""],MONTH:["","","","","","","","","","","",""],SHORTDAY:["","","","","","",""],SHORTMONTH:[".",".","",".","","","",".",".",".",".","."],fullDate:"EEEE, d MMMM y ''.",longDate:"d MMMM y ''.",medium:"d.MM.y ''. H:mm:ss",mediumDate:"d.MM.y ''.",mediumTime:"H:mm:ss","short":"d.MM.yy H:mm",shortDate:"d.MM.yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"lev",DECIMAL_SEP:",",GROUP_SEP:"",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},da:{id:"da-dk",DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"],MONTH:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],SHORTDAY:["sn.","man.","tir.","ons.","tor.","fre.","lr."],SHORTMONTH:["jan.","feb.","mar.","apr.","maj","jun.","jul.","aug.","sep.","okt.","nov.","dec."],fullDate:"EEEE 'den' d. MMMM y",longDate:"d. MMM y",medium:"dd/MM/y HH.mm.ss",mediumDate:"dd/MM/y",mediumTime:"HH.mm.ss","short":"dd/MM/yy HH.mm",shortDate:"dd/MM/yy",shortTime:"HH.mm"},NUMBER_FORMATS:{CURRENCY_SYM:"kr.",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},de:{id:"de-de",DATETIME_FORMATS:{AMPMS:["vorm.","nachm."],DAY:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],MONTH:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],SHORTDAY:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],SHORTMONTH:["Jan.","Feb.","Mrz","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],fullDate:"EEEE, d. MMMM y",longDate:"d. MMMM y",medium:"dd.MM.y HH:mm:ss",mediumDate:"dd.MM.y",mediumTime:"HH:mm:ss","short":"dd.MM.yy HH:mm",shortDate:"dd.MM.yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},el:{id:"el-gr",DATETIME_FORMATS:{AMPMS:["..",".."],DAY:["","","","","","",""],MONTH:["","","","","","","","","","","",""],SHORTDAY:["","","","","","",""],SHORTMONTH:["","","","","","","","","","","",""],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y h:mm:ss a",mediumDate:"d MMM y",mediumTime:"h:mm:ss a","short":"d/M/yy h:mm a",shortDate:"d/M/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},en:{id:"en-gb",DATETIME_FORMATS:{AMPMS:["am","pm"],
DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"dd/MM/y HH:mm",shortDate:"dd/MM/y",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},es:{id:"es-es",DATETIME_FORMATS:{AMPMS:["a. m.","p. m."],DAY:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],MONTH:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],SHORTDAY:["dom.","lun.","mar.","mi.","jue.","vie.","sb."],SHORTMONTH:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"d/M/y H:mm:ss",mediumDate:"d/M/y",mediumTime:"H:mm:ss","short":"d/M/yy H:mm",shortDate:"d/M/yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},it:{id:"it-it",DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["domenica","luned","marted","mercoled","gioved","venerd","sabato"],MONTH:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],SHORTDAY:["dom","lun","mar","mer","gio","ven","sab"],SHORTMONTH:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],fullDate:"EEEE d MMMM y",longDate:"dd MMMM y",medium:"dd/MMM/y HH:mm:ss",mediumDate:"dd/MMM/y",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},no:{id:"no",DATETIME_FORMATS:{AMPMS:["a.m.","p.m."],DAY:["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"],MONTH:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],SHORTDAY:["sn.","man.","tir.","ons.","tor.","fre.","lr."],SHORTMONTH:["jan.","feb.","mar.","apr.","mai","jun.","jul.","aug.","sep.","okt.","nov.","des."],fullDate:"EEEE d. MMMM y",longDate:"d. MMMM y",medium:"d. MMM y HH.mm.ss",mediumDate:"d. MMM y",mediumTime:"HH.mm.ss","short":"dd.MM.y HH.mm",shortDate:"dd.MM.y",shortTime:"HH.mm"},NUMBER_FORMATS:{CURRENCY_SYM:"kr",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},pt:{id:"pt-pt",DATETIME_FORMATS:{AMPMS:["da manh","da tarde"],DAY:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"],MONTH:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],SHORTDAY:["dom","seg","ter","qua","qui","sex","sb"],SHORTMONTH:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"dd/MM/y HH:mm:ss",mediumDate:"dd/MM/y",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},ro:{id:"ro-ro",DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["duminic","luni","mari","miercuri","joi","vineri","smbt"],MONTH:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],SHORTDAY:["Du","Lu","Ma","Mi","Jo","Vi","S"],SHORTMONTH:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sept","Oct","Noi","Dec"],fullDate:"EEEE, d MMMM y",longDate:"d MMMM y",medium:"dd.MM.yyyy HH:mm:ss",mediumDate:"dd.MM.yyyy",mediumTime:"HH:mm:ss","short":"dd.MM.yyyy HH:mm",shortDate:"dd.MM.yyyy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"RON",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},ru:{id:"ru-ru",DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["","","","","","",""],MONTH:["","","","","","","","","","","",""],SHORTDAY:["","","","","","",""],SHORTMONTH:[".",".","",".","","","",".",".",".",".","."],fullDate:"EEEE, d MMMM y ''.",longDate:"d MMMM y ''.",medium:"d MMM y ''. H:mm:ss",mediumDate:"d MMM y ''.",mediumTime:"H:mm:ss","short":"dd.MM.yy H:mm",shortDate:"dd.MM.yy",shortTime:"H:mm"},NUMBER_FORMATS:{CURRENCY_SYM:".",DECIMAL_SEP:",",GROUP_SEP:"",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},sv:{id:"sv-se",DATETIME_FORMATS:{AMPMS:["fm","em"],DAY:["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"],MONTH:["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december"],SHORTDAY:["sn","mn","tis","ons","tors","fre","lr"],SHORTMONTH:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],fullDate:"EEEE d MMMM y",longDate:"d MMMM y",medium:"d MMM y HH:mm:ss",mediumDate:"d MMM y",mediumTime:"HH:mm:ss","short":"y-MM-dd HH:mm",shortDate:"y-MM-dd",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"kr",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}},us:{id:"en-us",DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["sun","mon","tue","wed","thu","fri","sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]}}}),angular.module("betfair.extensions.locale").provider("BF.Locale",["BF.LOCALE","$provide",function(a,b){function c(b){return angular.isDefined(a[b])?a[b]:a.en}var d=this;this.setLocale=function(a){b.value("$locale",c(a))},this.$get=function(){return d}}]),angular.module("betfair.extensions.monitoring").config(["$provide",function(a){a.decorator("$log",["$delegate","BF.ErrorMonitoring",function(a,b){var c=a.error;return a.error=function(a){c.apply(null,arguments),b.trackError(a)},a}])}]),angular.module("betfair.extensions.monitoring").factory("BF.ErrorMonitoring",["BF.Analytics",function(a){function b(a){var b,c="General";if(a instanceof Error){if(c=a.name,(b=c.indexOf("Error"))<=0)return"";c=c.substr(0,b)}return c}function c(a,b){var c,d="";return b instanceof Error&&b.stack?(angular.isString(b.message)&&b.message.length>0&&-1===b.stack.indexOf(b.message)&&(d=a+"Error: "+b.message+"\n"),d+=b.stack,c=d.split("\n"),c.length=Math.min(c.length,e),d=c.join("\n")):angular.isObject(b)?JSON.stringify(b):angular.isString(b)?b:"unknown data type"}function d(d,e){var f;f=b(d),d=c(f,d),f&&(f+=" "),a.sendEvent("Performance Monitoring","Received "+f+"Error",d,{pageType:e||"Unknown Page"})}var e=3;return{trackError:d}}]),angular.module("betfair.extensions.polling").factory("BF.CashoutQuotePoller",["BF.GenericPoller","BF.Lodash",function(a,b){function c(a){var b,c={};return angular.forEach(a,function(a){(b=a.marketId)&&(c[b]=a)}),c}function d(a,b){var c,d=[];return angular.forEach(a,function(a){(c=b[a])&&d.push(c)}),d}function e(a){if(!angular.isArray(a)||!angular.isArray(a[0])||!a[0].length)throw new Error("invalid function arguments. should contain an array of marketIds")}function f(b,c){a.call(this,b,c)}return f.prototype=Object.create(a.prototype,{constructor:{value:f},removeCallback:{value:function(a){var c,d=this.callbacks[a].marketIds,e=[];delete this.callbacks[a],this.getNumberOfCallbacks()?(c=Object.keys(this.callbacks),d.forEach(function(a){e=c.filter(function(b){return-1!==this.callbacks[b].marketIds.indexOf(a)},this)},this),this.functionArguments[0]=b.difference(this.functionArguments[0],e)):(this.stopInterval(),this.onEmptyCallback&&this.onEmptyCallback(this))}},redirectResponse:{value:function(a,e,f){var g,h=c(e);angular.forEach(this.callbacks,function(c){var e=c[a],i=c.marketIds;angular.isFunction(e)&&(g=b.intersection(i,f),g.length===i.length&&e(d(i,h)))})}},matches:{value:function(){return!0}},mergeCall:{value:function(a,c,d){e(c);var f=c[0];this.functionArguments&&this.functionArguments[0]?this.functionArguments=[b.union(this.functionArguments[0],f)]:this.functionArguments=c,this.callbacks[a]=angular.extend({marketIds:f},d)}}}),f}]),angular.module("betfair.extensions.polling").factory("BF.ExchangeReadOnlyByMarketsPoller",["BF.GenericPoller","BF.Lodash",function(a,b){function c(a){var b={},c=a.indicative,d=a.currencyCode;return angular.forEach(a.eventTypes,function(a){var e=a.eventTypeId;angular.forEach(a.eventNodes,function(a){var f=a.eventId,g=a.event;angular.forEach(a.marketNodes,function(a){b[a.marketId]={currencyCode:d,eventId:f,eventNode:g,eventTypeId:e,indicative:c,marketNode:a}})})}),b}function d(a){return{eventId:a,marketNodes:[]}}function e(a,c){var e={},f={},g=0,h=0;return b.reduce(a,function(a,b){return a.currencyCode=b.currencyCode,a.indicative=b.indicative,angular.isUndefined(f[b.eventTypeId])?(g=a.eventTypes.length,f[b.eventTypeId]=g,a.eventTypes.push({eventTypeId:b.eventTypeId,eventNodes:[]}),e[b.eventId]=g,a.eventTypes[g].eventNodes.push(d(b.eventId))):(g=f[b.eventTypeId],angular.isUndefined(e[b.eventId])?(h=a.eventTypes[g].eventNodes.length,e[b.eventId]=h,a.eventTypes[g].eventNodes.push(d(b.eventId))):h=e[b.eventId]),b.eventNode&&(a.eventTypes[g].eventNodes[h].event=b.eventNode),a.eventTypes[g].eventNodes[h].marketNodes.push(b.marketNode),a},{currencyCode:c&&c.currencyCode||"GBP",eventTypes:[],indicative:!1})}function f(a,c,d){return e(b.reduce(a,function(a,b){var c=d[b];return c&&a.push(c),a},[]),c)}function g(a){if(!(angular.isArray(a)&&angular.isArray(a[0])&&a[0].length&&angular.isArray(a[1])&&a[1].length))throw new Error("Invalid function arguments. Should contain an array of marketIds and an array of types");if(1===a[1].length&&"EVENT"===a[1][0])throw new Error("Unsupported query with single entity type 'EVENT'")}function h(b,c){a.call(this,b,c)}return h.prototype=Object.create(a.prototype,{constructor:{value:h},removeCallback:{value:function(a){var c=this.callbacks[a].marketIds,d=this.callbacks[a].types;if(delete this.callbacks[a],this.getNumberOfCallbacks()){var e=this,f=b.reduce(c,function(a,c){return b.some(e.callbacks,function(a){return-1!==a.marketIds.indexOf(c)})||a.push(c),a},[]),g=b.reduce(d,function(a,c){return b.some(e.callbacks,function(a){return-1!==a.types.indexOf(c)})||a.push(c),a},[]);this.functionArguments[0]=b.difference(this.functionArguments[0],f),this.functionArguments[1]=b.difference(this.functionArguments[1],g)}else this.stopInterval(),this.onEmptyCallback&&this.onEmptyCallback(this)}},redirectResponse:{value:function(a,d,e){var g,h=c(d);angular.forEach(this.callbacks,function(c){var d=c[a],i=c.marketIds;angular.isFunction(d)&&(g=b.intersection(i,e),g.length===i.length&&d(f(i,c.options,h)))})}},matches:{value:function(a){return angular.equals(this.functionArguments[2],a[2])}},mergeCall:{value:function(a,c,d){g(c);var e=c[0],f=c[1],h=c[2];this.functionArguments&&this.functionArguments[0]&&this.functionArguments[1]?(this.functionArguments[0]=b.union(this.functionArguments[0],e),this.functionArguments[1]=b.union(this.functionArguments[1],f)):this.functionArguments=c,this.callbacks[a]=angular.extend({marketIds:e,types:f,options:h},d)}}}),h}]),angular.module("betfair.extensions.polling").factory("BF.FixedOddsReadOnlyMarketPricesPoller",["BF.GenericPoller","BF.Lodash",function(a,b){function c(a){return b.reduce(a,function(a,b){var c=b.marketId;return c&&(a[c]=b),a},{})}function d(a,c){return b.reduce(a,function(a,b){var d=c[b];return d&&a.push(d),a},[])}function e(a){return a=b.filter(a),a.length?b.maxBy(a,function(a){return a.priceHistory}):{}}function f(b,c){a.call(this,b,c)}return f.prototype=Object.create(a.prototype,{constructor:{value:f},removeCallback:{value:function(a){var c,d=this.callbacks[a]&&this.callbacks[a].marketIds||[],f=[];delete this.callbacks[a],this.getNumberOfCallbacks()?(c=Object.keys(this.callbacks),d.forEach(function(a){c.some(function(b){return-1!==this.callbacks[b].marketIds.indexOf(a)},this)||f.push(a)},this),this.functionArguments[0]=b.difference(this.functionArguments[0],f),this.functionArguments[1]=e(c.map(function(a){return this.callbacks[a].options},this))):(this.stopInterval(),this.onEmptyCallback&&this.onEmptyCallback(this))}},redirectResponse:{value:function(a,e,f){var g,h;angular.forEach(this.callbacks,function(i){var j=i[a],k=i.marketIds;if(angular.isFunction(j)&&(h=b.intersection(k,f),h.length===k.length))switch(a){case"onFulfill":g=g||c(e),j(d(k,g));break;case"onReject":j(e)}})}},matches:{value:function(){return!0}},mergeCall:{value:function(a,c,d){this.assertFunctionArguments(c);var f=c[0],g=c[1];this.functionArguments&&this.functionArguments[0]?(this.functionArguments[0]=b.union(this.functionArguments[0],f),this.functionArguments[1]=e([this.functionArguments[1],g])):this.functionArguments=c,this.callbacks[a]=angular.extend({marketIds:f,options:g},d)}},assertFunctionArguments:{value:function(a){if(!angular.isArray(a)||!angular.isArray(a[0])||!a[0].length)throw new Error("invalid function arguments. should contain an array of marketIds");if(a[1]&&!angular.isObject(a[1]))throw new Error("invalid function arguments. options should be an Object")}}}),f}]),angular.module("betfair.extensions.polling").factory("BF.GenericPoller",["$log","$rootScope","$window","BF.Lodash",function(a,b,c,d){function e(){return j++}function f(a,d){if(0!==a.getNumberOfCallbacks()){var e=angular.isNumber(d)?d:a.options.interval||a.getMinimumInterval(),f=i;a.lastTickTimestamp=a.lastTickTimestamp||Date.now(),angular.isNumber(a.lastTimeout)&&(f=a.lastTimeout-(Date.now()-a.lastTickTimestamp)),f>e&&a.stopInterval(),a.interval||(a.interval=c.setTimeout(function(){a.tick(),a.options.invokeApply&&b.apply()},e),a.lastTimeout=e)}}function g(a,b){this.callbacks[a].interval=b,f(this,b)}function h(a,b){if(!angular.isFunction(a))throw new Error("invalid parameter functionToBePolled");this.callbacks={},this.options={interval:null,firstExecution:!1,delayedFirstExecution:null},this.context=b,this.functionToBePolled=a,this.lastTickTimestamp=null,this.lastTimeout=null}var i=36e4,j=0;return h.prototype={matches:function(a){return angular.equals(this.functionArguments,a)},mergeCall:function(a,b,c){this.functionArguments=b,this.callbacks[a]=c},addCallback:function(a,b,c,d){var h,i=e();return d=d||{},h=d.interval||15e3,this.mergeCall(i,a,{onFulfill:b,onReject:c,interval:h}),this.options.invokeApply=Boolean(this.options.invokeApply||d.invokeApply),d.firstExecution?h=0:angular.isNumber(d.delayedFirstExecution)&&(h=d.delayedFirstExecution),f(this,h),{removeCallback:angular.bind(this,this.removeCallback,i),updateInterval:angular.bind(this,g,i),restart:angular.bind(this,this.restart)}},removeCallback:function(a){delete this.callbacks[a],this.getNumberOfCallbacks()||(this.stopInterval(),this.onEmptyCallback&&this.onEmptyCallback(this))},tick:function(){function a(a,b,c){f(this),this.redirectResponse(a,c,b)}var b=angular.isArray(this.functionArguments)?this.functionArguments[0]:[];this.lastTickTimestamp=Date.now(),this.stopInterval(),this.functionToBePolled.apply(this.context,this.functionArguments).then(angular.bind(this,a,"onFulfill",b),angular.bind(this,a,"onReject",b))},redirectResponse:function(a,b){angular.forEach(this.callbacks,function(c){var d=c[a];angular.isFunction(d)&&d(b)})},resume:function(){this.tick()},restart:function(){this.stopInterval(),this.resume()},startInterval:function(){this.interval||f(this)},stopInterval:function(){this.interval&&(c.clearTimeout(this.interval),this.interval=null)},resetInterval:function(){return this.interval?(this.stopInterval(),void this.startInterval()):void this.startInterval()},getNumberOfCallbacks:function(){return Object.keys(this.callbacks).length},getMinimumInterval:function(){return d.reduce(this.callbacks,function(a,b){return Math.min(a,b.interval)},i)},updateInterval:function(b,c){a.warn("Poller `updateInterval` function is deprecated. Use `callback.updateInterval` function instead.");var d=this.options.interval||this.getMinimumInterval();b&&(d>b||c&&d<b)&&(this.options.interval=b,this.resetInterval())},onEmpty:function(a){this.onEmptyCallback=a}},h}]),angular.module("betfair.extensions.polling").factory("BF.SeasScoresAndBroadcastPoller",["BF.GenericPoller","BF.Lodash",function(a,b){function c(a){var b,c={};return angular.forEach(a,function(a){(b=a.eventId)&&(c[b]=a)}),c}function d(a,b){var c,d=[];return angular.forEach(a,function(a){(c=b[a])&&d.push(c)}),d}function e(a){if(!angular.isArray(a)||!angular.isArray(a[0])||!a[0].length)throw new Error("invalid function arguments. should contain an array of eventIds")}function f(b,c){a.call(this,b,c)}return f.prototype=Object.create(a.prototype,{constructor:{value:f},removeCallback:{value:function(a){var c,d=this.callbacks[a].eventIds,e=[];delete this.callbacks[a],this.getNumberOfCallbacks()?(c=Object.keys(this.callbacks),d.forEach(function(a){c.some(function(b){return-1!==this.callbacks[b].eventIds.indexOf(a)},this)||e.push(a)},this),this.functionArguments[0]=b.difference(this.functionArguments[0],e)):(this.stopInterval(),this.onEmptyCallback&&this.onEmptyCallback(this))}},redirectResponse:{value:function(a,e,f){var g,h;angular.forEach(this.callbacks,function(i){var j=i[a],k=i.eventIds;if(angular.isFunction(j)&&(h=b.intersection(k,f),h.length===k.length))switch(a){case"onFulfill":g=g||c(e),j(d(k,g));break;case"onReject":j(e)}})}},matches:{value:function(a){return this.functionArguments&&a&&angular.equals(this.functionArguments[1],a[1])&&angular.equals(this.functionArguments[2],a[2])&&angular.equals(this.functionArguments[3],a[3])}},mergeCall:{value:function(a,c,d){e(c);var f=c[0];this.functionArguments&&this.functionArguments[0]?this.functionArguments[0]=b.union(this.functionArguments[0],f):this.functionArguments=c,this.callbacks[a]=angular.extend({eventIds:f},d)}}}),f}]),angular.module("betfair.extensions.polling").factory("BF.SeasScoresAndEventTimelinesPoller",["BF.GenericPoller","BF.Lodash",function(a,b){function c(a){return b.reduce(a,function(a,b){var c=b.eventId;return c&&(a[c]=b),a},{})}function d(a,c){return b.reduce(a,function(a,b){var d=c[b];return d&&a.push(d),a},[])}function e(a){if(!angular.isArray(a)||!angular.isArray(a[0])||!a[0].length)throw new Error("invalid function arguments. should contain an array of eventIds")}function f(b,c){a.call(this,b,c)}return f.prototype=Object.create(a.prototype,{constructor:{value:f},removeCallback:{value:function(a){if(!angular.isUndefined(this.callbacks[a])){var c=this.callbacks[a].eventIds;if(delete this.callbacks[a],this.getNumberOfCallbacks()){var d=this,e=b.reduce(c,function(a,c){return b.some(d.callbacks,function(a){return-1!==a.eventIds.indexOf(c)})||a.push(c),a},[]);this.functionArguments[0]=b.difference(this.functionArguments[0],e)}else this.stopInterval(),this.onEmptyCallback&&this.onEmptyCallback(this)}}},redirectResponse:{value:function(a,e,f){var g,h;angular.forEach(this.callbacks,function(i){var j=i[a],k=i.eventIds;if(angular.isFunction(j)&&(h=b.intersection(k,f),h.length===k.length))switch(a){case"onFulfill":g=g||c(e),j(d(k,g));break;case"onReject":j(e)}})}},matches:{value:function(a){return this.functionArguments&&a&&angular.equals(this.functionArguments[1],a[1])}},mergeCall:{value:function(a,c,d){e(c);var f=c[0];this.functionArguments&&this.functionArguments[0]?this.functionArguments[0]=b.union(this.functionArguments[0],f):this.functionArguments=c,this.callbacks[a]=angular.extend({eventIds:f},d)}}}),f}]),angular.module("betfair.extensions.polling").provider("BF.Polling",function(){var a={"default":"BF.GenericPoller"};this.extendConfiguration=function(b){angular.extend(a,b)},this.$get=["$injector",function(b){function c(c,d){var e,f=a[c]||a["default"],g=b.get(c),h=g[d];if(!h)throw new Error("function "+d+" was not found on service "+c);if(!angular.isFunction(h))throw new Error(d+" is not a function");return e=angular.isString(f)?f:f[d]||a["default"],new(b.get(e))(h,g)}function d(a,b,c){var d,e=k[a],f=null;return e&&(d=e[b])?(d.some(function(a){return!!a.matches(c)&&(f=a,!0)}),f):null}function e(a,b){if(a&&b){var c=k[a],d=c[b];d&&d.length||(delete c[d],Object.keys(c).length||delete k[a])}}function f(a){var b,c;Object.keys(k).some(function(d){var e=k[d];return Object.keys(e).some(function(f){var g=e[f],h=g.indexOf(a);return-1!==h&&(g.splice(h,1),b=d,c=f,!0)})}),e(b,c)}function g(a,b,c){var d,e=k[a];e||(e={},k[a]=e),d=e[b],d||(d=[],e[b]=d),d.push(c)}function h(a,b,e,h,i,j){if(!a||!angular.isString(a))throw new Error("invalid parameter serviceName");if(!b||!angular.isString(b))throw new Error("invalid parameter functionName");var k=d(a,b,e);return k||(k=c(a,b),k.onEmpty(f),g(a,b,k)),k.addCallback(e,h,i,j)}function i(){angular.forEach(k,function(a){angular.forEach(a,function(a){angular.forEach(a,function(a){a.stopInterval()})})})}function j(){angular.forEach(k,function(a){angular.forEach(a,function(a){angular.forEach(a,function(a){a.resume()})})})}var k={};return{addCallback:h,stopAllPollers:i,resumeAllPollers:j}}]}),angular.module("betfair.extensions.protocols").factory("BF.CacheFactory",["BF.Map",function(a){function b(a,b){return a&&Date.now()-b.createdAt>a}function c(a,c,d){var e=Date.now(),f=angular.bind(this,b,c);return a&&c?function(){var b=Date.now();b-e>a&&(d.forEach(function(a,b){return f(a)&&d["delete"](b)}),e=b)}:angular.noop}function d(a,d){if(e.hasOwnProperty(a))throw new Error("CacheId `"+a+"` is already taken");var g=angular.extend({},f,d);if(!angular.isFunction(g.storage))throw new TypeError("Cache storage engine must be a Function");var h=g.storage();return e[a]={get:function(){var a=c(g.recycleFreq,g.maxAge,h);return function(c){var d;if(!angular.isUndefined(c)){if(d=h.get(c),angular.isDefined(d)&&!b(g.maxAge,d))return d.value;a()}}}(),put:function(a,b){if(!angular.isUndefined(b))return h.set(a,{value:b,createdAt:Date.now()}),b},remove:function(a){var c=h.get(a);if(h["delete"](a),angular.isDefined(c)&&!b(g.maxAge,c))return c.value},removeAll:h.clear,destroy:function(){delete e[a]},info:function(){var b={id:a,maxAge:g.maxAge,recycleFreq:g.recycleFreq};return function(){return b.size=h.size,b}}()},e[a]}var e={},f={maxAge:Number.MAX_VALUE,recycleFreq:3e4,storage:a};return d.get=function(a){return e[a]},d.info=function(){var a={};return angular.forEach(e,function(b,c){a[c]=b.info()}),a},d}]),angular.module("betfair.extensions.protocols").constant("BF.TRANSPORT",{statusCode:{OK:200,badRequest:400,unauthorized:401,forbidden:403,notFound:404,requestTimeout:408,internalServerError:500,notImplemented:501,badGateway:502,serviceUnavailable:503,gatewayTimeout:504,permissionDenied:550}}),angular.module("betfair.extensions.protocols").constant("BF.INTERNAL.TRANSPORT",{contentType:{json:"application/json",jsonp:"application/jsonp",jsonRpc:"application/json-rpc",urlEncoded:"application/x-www-form-urlencoded"},httpMethod:{"delete":"DELETE",get:"GET",post:"POST",put:"PUT",jsonp:"JSONP"}}),angular.module("betfair.extensions.protocols").factory("BF.CougarServiceError",function(){function a(a,b){if(Error.call(this),Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);else try{throw new Error(b)}catch(c){this.stack=c.stack}this.code=a,this.message=b}return a.prototype=new Error,a.prototype.constructor=a,a.prototype.name="CougarServiceError",a}),angular.module("betfair.extensions.protocols").factory("BF.FabricServiceError",function(){function a(a,b){if(Error.call(this),Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);else try{throw new Error(b)}catch(c){this.stack=c.stack}this.code=a,this.message=b}return a.prototype=new Error,a.prototype.constructor=a,a.prototype.name="FabricServiceError",a}),angular.module("betfair.extensions.protocols").factory("BF.Fabric",["$q","BF.INTERNAL.TRANSPORT","BF.FabricServiceError","BF.Transport",function(a,b,c,d){function e(e,f){var g=angular.extend({method:b.httpMethod.get},f);return g=d.addAuthenticationLayer(g,e),d.makeRequest(e,g).then(function(a){return a.data||{}},function(b){if(b=b.data||{},b.code)throw new c(b.code,b.message);return a.reject(b)})}return{makeRequest:e}}]),angular.module("betfair.extensions.protocols").factory("BF.JsonRPC",["$q","BF.INTERNAL.TRANSPORT","BF.CougarServiceError","BF.Transport",function(a,b,c,d){function e(e,f,g){var h,i=[];return angular.isArray(g)||(g=[g]),angular.forEach(g,function(a){i.push({jsonrpc:"2.0",method:a.method,params:a.params||{},id:a.id||(new Date).getTime()})}),h=angular.extend({method:b.httpMethod.post},f,{contentType:b.contentType.jsonRpc,data:i}),h.headers=h.headers||{},h.headers["content-type"]=b.contentType.jsonRpc,h=d.addAuthenticationLayer(h,e),d.makeRequest(e,h).then(function(a){return a.data||[]},function(b){if(b&&b.error)throw new c("JSONRPC methods failed",b.error);return a.reject(b)})}return{makeRequest:e}}]),angular.module("betfair.extensions.protocols").factory("BF.Rescript",["$q","BF.INTERNAL.TRANSPORT","BF.CougarServiceError","BF.Transport",function(a,b,c,d){function e(a){return a=a||{},angular.forEach(a,function(b,c){b instanceof Date?a[c]=b.toISOString():angular.isArray(b)&&(a[c]=b.join(","))}),a.alt="json",a}function f(f,g){var h=angular.extend({method:b.httpMethod.get},g);return h.params=e(h.params),h.method===b.httpMethod.post&&(h.headers=h.headers||{},h.contentType=b.contentType.json,h.headers["content-type"]=b.contentType.json,h.headers.Accept=b.contentType.json),h=d.addAuthenticationLayer(h,f),d.makeRequest(f,h).then(function(a){return a.data||{}},function(b){if(b.data&&b.data.faultcode)throw new c(b.data.faultstring,b.data.faultcode);return a.reject(b)})}return{makeRequest:f}}]),angular.module("betfair.extensions.protocols").provider("BF.Transport",[function(){var a;this.setDefaultTimeout=function(b){if(!angular.isNumber(b)&&!angular.isArray(b))throw new Error("timeout should be a number or an array");return a=b,b},this.$get=["$http","$q","APPLICATION_KEY","BF.INTERNAL.TRANSPORT","BF.CookiesHelper","BF.TimeoutListener",function(b,c,d,e,f,g){function h(a){if(!angular.isArray(a))return a;if(!angular.isArray(a[0]))return g.apply(this,a);var b=a.map(function(a){return g.apply(this,a)},this),d=function(){b.forEach(function(a){a.hasOwnProperty("cancel")&&a.cancel()})},e=c.any(b);return e.cancel=d,e["finally"](d),e}function i(a){var b=angular.isDefined(a.host)&&angular.isString(a.host),c=angular.isDefined(a.port)&&(!a.port||angular.isNumber(a.port)),d=angular.isDefined(a.path)&&angular.isString(a.path),e=[];return b&&c&&d?(e.push(a.host),angular.isNumber(a.port)&&e.push(":",a.port),e.push(a.path),e.join("").replace(/([^:])\/\/+/g,"$1/")):null}function j(b,c){var d={contentType:e.contentType.json,timeout:b.timeout,params:{},headers:{},data:"",withCredentials:!0},f=angular.extend(d,c,{url:i(b),cache:!1});return f.contentType===e.contentType.urlEncoded&&(f.headers=angular.extend({},f.headers,{"Content-Type":f.contentType})),f.timeout=angular.isDefined(f.timeout)?h(f.timeout):a,f}function k(a){var b=a.params||{};return b=Object.keys(b).sort().reduce(function(a,c){return a[c]=b[c],a},{}),angular.toJson({url:a.url,params:b,data:a.data||void 0})}function l(a,c){function d(){h.timeout&&h.timeout.hasOwnProperty("cancel")&&h.timeout.cancel()}function e(a){return angular.isObject(a)}var f,g,h=j(a,c);return e(c.cache)&&(f=k(h),g=c.cache.get(f)),angular.isUndefined(g)&&(g=b(h)["finally"](d),e(c.cache)&&c.cache.put(f,g)),g}function m(a){var b=angular.copy(a);return b.params=b.params||{},null!==b.params._ak&&(b.params._ak=b.params._ak||d),b.params._ak||delete b.params._ak,b}function n(a){var b=angular.copy(a),c=f.getSSOId();return b.headers=b.headers||{},null!==b.headers["X-Application"]&&(b.headers["X-Application"]=b.headers["X-Application"]||d),b.headers["X-Application"]||delete b.headers["X-Application"],null!==b.headers["X-Authentication"]&&(b.headers["X-Authentication"]=b.headers["X-Authentication"]||c),b.headers["X-Authentication"]||delete b.headers["X-Authentication"],b}function o(a,b){return b.legacy?n(a):m(a)}return a=h(a),{makeRequest:l,addAuthenticationLayer:o}}]}]),angular.module("betfair.extensions.splashing").provider("BF.Splashing",function(){var a={interval:{min:28e3,max:32e3}};this.setEndpoint=function(b){a.endpoint=b},this.setInterval=function(b,c){a.interval={min:b,max:c}},this.$get=["$interval","$window","APPLICATION_KEY","BF.Lodash","BF.Transport",function(b,c,d,e,f){function g(a){!0===JSON.parse(a.data)&&c.location.reload()}function h(a){var b=1e3,c=parseInt(a.min/b,10),d=parseInt(a.max/b,10);return e.random(c,d)*b}function i(c,d){var e=h(a.interval);b(function(){f.makeRequest(a.endpoint,{method:"GET",params:c,withCredentials:!1}).then(d)},e)}function j(b,c){var e=c||g,f={app:d,jurisdiction:b};if(!a.endpoint)throw new Error("endpoint should be defined");if(!f.jurisdiction)throw new Error("invalid jurisdiction");i(f,e)}return{initialize:j}}]}),angular.module("betfair.extensions.user").service("BF.User",["BF.Fabric",function(a){var b={accountSettings:{betexRegion:"GBR",countryCode:"GB",currencyCode:"GBP",discount:0,exchangeContentGroup:{language:"en",regionCode:"UK"},exchangeLocale:"en_GB",jurisdiction:{capiJurisdiction:"intl",jurisdiction:"INTERNATIONAL"},localeCode:"en",loggedIn:!1,minimumBSPLayLiability:10,minimumStake:2,requestCountryCode:"GB"},throttles:[]},c="ALL_SPORTS";this.setUserContext=function(a){angular.isArray(a.throttles)&&(a.throttles=a.throttles.reduce(function(a,b){return a[b]={activeSports:[c]},a},{})),b=a},this.getUsername=function(){return b.accountSettings.username},this.getAccountId=function(){return b.accountSettings.accountID},this.getBucketId=function(){return b.bucketId},this.getLastLoginDate=function(){return b.accountSettings.lastLoginDate?b.accountSettings.lastLoginDate:null},this.getBetexRegion=function(){return b.accountSettings.betexRegion},this.getCountryCode=function(){return b.accountSettings.countryCode},this.getRequestCountryCode=function(){return b.accountSettings.requestCountryCode},this.getCurrencyCode=function(){return b.accountSettings.currencyCode},this.getCurrencySymbol=function(){
switch(b.accountSettings.currencyCode){case"USD":case"AUD":case"HKD":case"SGD":case"CAD":return"$";case"EUR":return"";case"GBP":return"";case"SEK":case"NOK":return"kr";case"DKK":return"kr.";case"RON":return"RON";default:return b.accountSettings.currencyCode}},this.getDiscount=function(){return b.accountSettings.discount},this.getEmailAddress=function(){return b.accountSettings.emailAddress},this.getExchangeContentGroup=function(){return b.accountSettings.exchangeContentGroup},this.getExchangeLocale=function(){return b.accountSettings.exchangeLocale},this.getFirstName=function(){return b.accountSettings.firstName},this.getLastName=function(){return b.accountSettings.lastName},this.getRegulatorInfo=function(){return b.regulatorInfo},this.getCAPIJurisdiction=function(){return b.accountSettings.jurisdiction.capiJurisdiction},this.getJurisdiction=function(){return b.accountSettings.jurisdiction.jurisdiction},this.getJurisdictionContractNumber=function(){if(b.accountSettings.jurisdictionalData)return b.accountSettings.jurisdictionalData.contractNumber},this.getJurisdictionNationalIdentifier=function(){if(b.accountSettings.jurisdictionalData)return b.accountSettings.jurisdictionalData.nationalIdentifier},this.getLocaleCode=function(){return b.accountSettings.localeCode},this.isLoggedIn=function(){return b.accountSettings.loggedIn},this.getMinimumBSPLayLiability=function(){return b.accountSettings.minimumBSPLayLiability},this.getMinimumStake=function(){return b.accountSettings.minimumStake},this.getThrottles=function(){return b.throttles},this.isThrottleActive=function(a,d){return!!(angular.isString(a)&&b.throttles[a]&&b.throttles[a].activeSports)&&(d||(d=c),b.throttles[a].activeSports.indexOf(d.toString())>=0||b.throttles[a].activeSports.indexOf(c)>=0)},this.getTimezone=function(){return b.accountSettings.timezone},this.requestUserContext=function(b,c){var d={};return angular.isString(c)&&(d={headers:{"X-Country-Code":c}}),a.makeRequest(b,d)}}]),angular.module("betfair.extensions.utils.directives").directive("bfClick",["$parse",function(a){function b(b,c){var d=a(c.bfClick);return function(a,b){b.on("click",function(b){a.$apply(function(){d(a,{$event:b})})})}}return{restrict:"A",compile:b}}]),angular.module("betfair.extensions.utils.directives").directive("bfJurisdiction",["BF.User",function(a){function b(a){var c={blacklist:[],whitelist:[]};return angular.isArray(a)?(angular.forEach(a,function(a){a&&c.whitelist.push(a)}),c):angular.isString(a)?b(a.split(" ")):angular.isObject(a)?(angular.forEach(a,function(a,b){angular.forEach(b.split(" "),function(b){b&&(a?c.whitelist:c.blacklist).push(b)})}),c):null}function c(b){if(!b)return!0;if(b.whitelist.length&&b.blacklist.length)throw new Error("jurisdiction whitelist and blacklist cannot be defined simultaneously");var c=angular.lowercase(a.getJurisdiction());return b.whitelist.length?b.whitelist.some(function(a){return c===angular.lowercase(a)}):!b.blacklist.length||b.blacklist.every(function(a){return c!==angular.lowercase(a)})}function d(a,d,e,f,g){var h=e.bfJurisdiction.trim(),i=b(a.$eval(h));i||""===h||(i={blacklist:[],whitelist:[h]}),c(i)&&g(a,function(a){a[a.length++]=document.createComment(" end bfJurisdiction: "+h+" "),d.after(a)})}return{$$tlb:!0,restrict:"A",priority:1900,terminal:!0,multiElement:!0,transclude:"element",link:d}}]),angular.module("betfair.extensions.utils.directives").directive("bfOnerror",["$parse",function(a){function b(b,c,d){function e(a){b.$apply(function(){f(b,{$event:a})})}var f=a(d.bfOnerror);c.on("error",e),c.on("$destroy",function(){c.off("error",e)})}return{restrict:"A",link:b}}]),angular.module("betfair.extensions.utils.directives").directive("bfOnload",["$parse",function(a){function b(b,c,d){function e(a){b.$apply(function(){f(b,{$event:a})})}var f=a(d.bfOnload);c.on("load",e),c.on("$destroy",function(){c.off("load",e)})}return{restrict:"A",link:b}}]),angular.module("betfair.extensions.utils.directives").directive("bfThrottle",["BF.User","BF.SPORT","BF.Lodash",function(a,b,c){function d(a,b){var e=!!angular.isUndefined(b)||Boolean(b);return angular.isString(a)?d(a.split(" ")):angular.isArray(a)?a.filter(Boolean).reduce(function(a,b){return a[b]=e,a},{}):angular.isObject(a)?c.reduce(a,function(a,b,c){return angular.extend(a,d(c.split(" "),b))},{}):null}function e(e,f,g,h,i){var j,k=g.bfThrottle.trim(),l=d(e.$eval(k));l||""===k||(l={},l[k]=!0),(j=c.map(l,function(a,d){var e=d.split(":");return{name:e[0],eventTypeId:c.get(b.type,e[1]+".eventTypeId"),state:a}}).every(function(b){return a.isThrottleActive(b.name,b.eventTypeId)===b.state}))&&i(e,function(a){a[a.length++]=document.createComment(" end bfThrottle: "+k+" "),f.after(a)})}return{$$tlb:!0,restrict:"A",priority:2e3,terminal:!0,multiElement:!0,transclude:"element",link:e}}]),function(){function a(a){return/^\W*[A-Z]{2,}\W*$/.test(a)?a:null}function b(b,c){var d;return angular.isString(b)?(d=b.split(" ").map(function(b){return a(b)?b:b.toLowerCase()}).join(" "),d=d.replace(c,function(a){return a.toUpperCase()})):b}angular.module("betfair.extensions.utils.filters").filter("capitalize",[function(){return function(a){return b(a,new RegExp("(?:^|\\-)\\S","g"))}}]),angular.module("betfair.extensions.utils.filters").filter("capitalizeAll",[function(){return function(a){return b(a,new RegExp("(?:^|\\s|\\-)\\S","g"))}}])}(),angular.module("betfair.extensions.utils.filters").filter("format",[function(){return function(a){var b,c=a;return 0!==arguments.length&&angular.isString(a)?(b=angular.isObject(arguments[1])?arguments[1]:[].slice.call(arguments,1),angular.forEach(b,function(a,b){c=c.replace(new RegExp("\\{"+b+"\\}","gi"),a)}),c):a}}]),angular.module("betfair.extensions.utils.filters").filter("orderByDiacritics",["$filter",function(a){function b(a){return"string"!=typeof a?a:a.replace(/[^\u0000-\u007E]/g,function(a){return g[a]||a})}var c,d,e,f=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"OE",letters:""},{base:"oe",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],g={};for(d=0;d<f.length;d++)for(c=f[d].letters.split(""),e=0;e<c.length;e++)g[c[e]]=f[d].base;return function(c,e,f){var g,h;if(!angular.isArray(c))return c;if(!e)return c;if(g=e.split(/\s*\|\s*/),2===g.length&&"translate"===g[1]){for(d=0;d<c.length;d++)c[d].$$diacriticPredicate=a(g[1])(c[d][g[0]]),c[d].$$diacriticPredicate=b(c[d].$$diacriticPredicate);g=g.splice(1,1)}else for(d=0;d<c.length;d++)c[d].$$diacriticPredicate=b(c[d][g[0]]);for(g[0]="$$diacriticPredicate",e=g.join("|"),h=a("orderBy")(c,e,f),d=0;d<h.length;d++)delete h[d].$$diacriticPredicate;return h}}]),angular.module("betfair.extensions.utils.filters").filter("toFixed",[function(){return function(a,b){try{return a.toFixed(b)}catch(c){}return 0}}]),angular.module("betfair.extensions.utils.filters").filter("toPences",[function(){return function(a){var b=parseInt(100*a,10);return isNaN(b)?0:b}}]),angular.module("betfair.extensions.utils.helpers").provider("BF.CookiesHelper",function(){function a(a){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+a.replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function b(a,b,c){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;if(c.expires)switch(c.expires.constructor){case Number:c.expires=c.expires===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c.expires;break;case String:c.expires="; expires="+c.expires;break;case Date:c.expires="; expires="+c.expires.toUTCString()}document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+(c.expires||"")+(c.domain?"; domain="+c.domain:"")+(c.path?"; path="+c.path:"")+(c.secure?"; secure":"")}this.clearSSOId=function(){for(var a=window.location.hostname.split("."),b=[""];a.length>1;)b.push(a.join(".")),a.shift();angular.forEach(b,function(a){document.cookie="ssoid=; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain="+a+"; path=/"})},this.$get=["$location",function(c){function d(){var b=/^"(.*)"$/,c=a("ssoid");return c&&(c=c.replace(b,"$1")),c}function e(d){var e,f={path:"/",domain:c.topLevelDomain()};b("language",d,f),e=a("betexPtk")||"betexLocale=",e=e.replace(/(betexLocale=[\w]*)/,"betexLocale="+d),b("betexPtk",e,f)}return{getSSOId:d,setLanguage:e}}]}),angular.module("betfair.extensions.utils.helpers").factory("BF.GraphHelper",["BF.Lodash",function(a){function b(b,c){return a.find(b,function(a){return a.nodeId===c})}function c(b,c){return a.find(b,function(a){return a.competitionInfo&&a.competitionInfo.eventId===c})}function d(b,c){return a.find(b,function(a){return a.marketLiteInfo&&a.marketLiteInfo.eventId===c})}function e(a){var b=a.marketLiteInfo||{},c=b.marketLevels||[];return-1!==c.indexOf(g)||-1!==c.indexOf(h)}function f(b,c,d){var e,g=a.find(b,function(a){return a.to===c});if(g)return e=g.from,0===e.indexOf(d+i)?e:f(b,e,d)}var g="COMPETITION",h="SUB_COMPETITION",i=":";return{findNodeByNodeId:b,findCompetitionNodeByEventId:c,findMarketNodeByEventId:d,isOutrightMarket:e,findParentNodeIdOfType:f}}]),angular.module("betfair.extensions.utils.helpers").factory("BF.GTagManagerHelper",["BF.INTERNAL.GTM","BF.TAGGING","BF.Device","BF.User","$cookies","$window",function(a,b,c,d,e,f){function g(){var a=e.get("bfsd");return a&&-1!==a.indexOf("st=reg")}function h(){return{accountId:d.getAccountId(),locale:d.getLocaleCode(),loginStatus:d.isLoggedIn()?b.dimensions.loginStatus.loggedIn:b.dimensions.loginStatus.loggedOut,registeredStatus:g()?b.dimensions.registeredStatus.registered:b.dimensions.registeredStatus.unregistered,jurisdiction:d.getJurisdiction(),orientation:c.isDesktop()?b.dimensions.orientation.desktop:c.getOrientationMode(),country:d.getCountryCode(),mantisBucketId:d.getBucketId(),page:f.location.pathname+f.location.hash+f.location.search}}function i(){return["mantisTestName","mantisTestGroup"].reduce(function(a,b){return a[b]=void 0,a},{})}function j(){return["rfrCode","sidCode","efidCode","mpchCode","plaCode","clkIdCode","bidCode","pidCode","promoCode","ttpCode","stickyTags","trackingTags"].reduce(function(a,b){return a[b]=e.get(b),a},{})}return{getPageViewObject:function(b){b||(b={});var c=Object.keys(b).reduce(function(c,d){return a.rules.dimensions.hasOwnProperty(d)&&(c[d]=b[d]),c},{});return c.gaTargetProperty=b.gaTargetProperty,c.vertical=b.vertical,c.product=b.product,c.appId=b.appId,angular.extend({},h(),i(),j(),c)}}}]),angular.module("betfair.extensions.utils.helpers").factory("BF.Retry",["$q","$timeout",function(a,b){function c(a){return function(){return a>0&&--a}}function d(a){return function(){return a}}return function(e,f,g){var h=a.defer(),i=0;return angular.isNumber(f)&&(f=c(f)),angular.isFunction(g)||(g=d(g||0)),function j(){e().then(h.resolve,function(a){return f.call(this,a)?void b(j,g.call(this,++i,a),!1):h.reject(a)})}(),h.promise}}]),angular.module("betfair.extensions.utils.helpers").constant("BF.TIMEOUT_LISTENER",{codes:{broadcast:"CANCEL_ON_BROADCAST",timeout:"CANCEL_ON_TIMEOUT",canceled:"TIMEOUT_LISTENER_CANCELED"}}).factory("BF.TimeoutListener",["$q","$rootScope","$timeout","BF.TIMEOUT_LISTENER",function(a,b,c,d){return function(e,f,g){var h,i,j=a.defer(),k=g||function(){return!0};if(!angular.isNumber(e))throw new Error("timeoutValue value should be a number");if(!angular.isString(f))throw new Error("eventName should be a string");return h=b.$on(f,function(a,b){k(a,b)&&j.resolve({code:d.codes.broadcast,event:f})}),i=c(function(){j.resolve({code:d.codes.timeout,timeout:e})},e,!1),angular.extend(j.promise,{cancel:function(){j.reject({code:d.codes.canceled,event:f,timeout:e})}}),j.promise["finally"](function(){h(),c.cancel(i)}),j.promise}}]),angular.module("betfair.extensions.wrapper").constant("BF.NOTIFICATION",function(){var a={GROUP:{FOOTBALL:"FOOTBALL",TENNIS:"TENNIS",MARKETING:"MARKETING",HORSE_RACING:"HORSE_RACING"},TYPE:{FOOTBALL:["N_KO","N_HT","N_RC","N_SC","N_FT","N_ET","N_FS"],TENNIS:["N_TK","N_TS","N_TF"],MARKETING:["N_MT"],HORSE_RACING:["N_HK","N_HFR","N_HNR"],ADOBE:["ADOBE"]},TAGS:{FOOTBALL:["FRN1","FRN2","FRS1","FRS2","FSN","FPN","FTN","FMIN"],TENNIS:["TRN1","TRN2","TPS","TLS1","TLS2","TSW1","TSW2","TGS1","TGS2"],HORSE_RACING:["HWMID","HST","HEN","HWMN","HRN","HNRN"],GENERAL:["ID"]}};return a.BODY={MARKETING:{type:a.TYPE.ADOBE[0],group:a.GROUP.MARKETING,tags:{N_MT:void 0,CC:void 0,MARKETING_URL:void 0}}},a}()),angular.module("betfair.extensions.wrapper").constant("BF.WRAPPER",{ARCADE:{android:{packageName:"com.betfair.arcade.app",fallbackUrl:"https://marcade.betfair.com"},ios:{scheme:"bfarcade",appStoreUrl:"itms://itunes.apple.com/app/id656099219"}},BINGO:{android:{packageName:"com.betfair.bingo.app",fallbackUrl:"https://mbingo.betfair.com"},ios:{scheme:"bfbingo",appStoreUrl:"itms://itunes.apple.com/app/id763475754"}},CASINO:{android:{packageName:"com.betfair.casino.app",fallbackUrl:"https://mcasino.betfair.com"},ios:{scheme:"bfcasino",appStoreUrl:"itms://itunes.apple.com/app/id505191581"}},EXCHANGE:{android:{packageName:"com.betfair.exchange",fallbackUrl:"https://www.betfair.com/exchange"},ios:{scheme:"bfsportsbetting",appStoreUrl:"itms://itunes.apple.com/app/id347621336"}},EXCHANGE_GAMES:{android:{packageName:"com.betfair.exchangegames",fallbackUrl:"https://mgames.betfair.com/"},ios:{scheme:"bfxg",appStoreUrl:"itms://itunes.apple.com/app/id872952212"}},LIVE_CASINO:{android:{packageName:"com.betfair.livecasino",fallbackUrl:"https://mgames.betfair.com/xsell"},ios:{scheme:"ptlivenativefa",appStoreUrl:"itms://itunes.apple.com/app/id710409663"}},POKER:{android:{packageName:"com.betfair.poker",fallbackUrl:"https://mpoker.betfair.com"},ios:{scheme:"bfpoker",appStoreUrl:"itms://itunes.apple.com/app/id806190516"}},POKER_INPLAY:{android:{packageName:"com.betfair.pokerinplay",fallbackUrl:"https://mgames.betfair.com/xsell"},ios:{scheme:"bfPokerInplay",appStoreUrl:"itms://itunes.apple.com/app/id593012202"}},SPORTSBOOK:{android:{packageName:"com.betfair.sportsbook",fallbackUrl:"https://www.betfair.com/sport"},ios:{scheme:"bfe",appStoreUrl:"itms://itunes.apple.com/app/id552024276"}},VEGAS:{android:{packageName:"com.betfair.vegas",fallbackUrl:"https://mvegas.betfair.it"},ios:{scheme:"bfvegas",appStoreUrl:"itms://itunes.apple.com/app/id1193935570"}}}),angular.module("betfair.extensions.wrapper").run(["$window","BF.Device","BF.Internal.WrapperWebApi",function(a,b,c){b.isWrapper()&&(a.wrapper={event:{onAnalyticsEventReceived:c.triggerOnAnalyticsEventReceived,onDeepLinkReceived:c.triggerOnDeepLinkReceived,onNotificationReceived:c.triggerOnNotificationReceived,onNativeLoginSettingChanged:c.triggerOnNativeLoginSettingChanged,onNotificationsConfigurationChanged:c.triggerOnNotificationsConfigurationChanged},callback:{onLaunchNativeLoginResult:c.triggerOnLaunchNativeLoginResult,onSyncDeviceSettingsResult:c.triggerOnSyncDeviceSettingsResult,onSyncUserDataResult:c.triggerOnSyncUserDataResult}})}]),angular.module("betfair.extensions.wrapper").factory("BF.NotificationHelperAndroid",[function(){function a(a){return a["com.urbanairship.push.PUSH_ID"]&&a.TYPE}function b(a){return angular.isObject(a)&&["_mId","_dId","_msg","marketing_url"].every(function(b){return a.hasOwnProperty(b)})}return{isValidUrbanAirship:a,isValidAdobe:b}}]),angular.module("betfair.extensions.wrapper").factory("BF.NotificationHelperIOS",["BF.NOTIFICATION","BF.Lodash",function(a,b){function c(a){return b.has(a,"aps.alert.loc-key")&&b.has(a,"aps.alert.loc-args")}function d(a){return b.has(a,"_mId")&&b.has(a,"_dId")&&b.has(a,"aps.alert")}function e(b){var c=b.aps.alert["loc-key"];return a.TYPE.FOOTBALL.indexOf(c)>-1}function f(b){return a.TYPE.TENNIS.indexOf(b.aps.alert["loc-key"])>-1}function g(b){return a.TYPE.HORSE_RACING.indexOf(b.aps.alert["loc-key"])>-1}function h(b){return a.TYPE.MARKETING.indexOf(b.aps.alert["loc-key"])>-1}function i(a){return Boolean(a.marketing_url)}return{isAdobeMarketing:i,isFootball:e,isHorseRacing:g,isTennis:f,isUrbanAirshipMarketing:h,isValidAdobe:d,isValidUrbanAirship:c}}]),angular.module("betfair.extensions.wrapper").factory("BF.NotificationParserAndroid",["BF.NOTIFICATION","BF.Lodash",function(a,b){function c(a){return-1!==h.indexOf(a)}function d(a){return b.pickBy(a,function(a,b){return c(b)})}function e(c){return b.findKey(a.TYPE,function(a){return-1!==a.indexOf(c)})}function f(a){return{type:a.TYPE,group:e(a.TYPE),tags:d(a)}}function g(c){return b.merge({},a.BODY.MARKETING,{tags:{N_MT:c._msg,CC:c._dId,MARKETING_URL:c.marketing_url}})}var h=b.flatMap(a.TAGS);return{createAdobeMarketingNotification:g,createUrbanAirshipNotification:f}}]),angular.module("betfair.extensions.wrapper").factory("BF.NotificationParserIOS",["BF.NOTIFICATION","BF.Lodash",function(a,b){function c(b){var c=b.aps.alert["loc-key"],d=b.aps.alert["loc-args"],e={type:c,group:a.GROUP.FOOTBALL,tags:{FRN1:d[0],FRN2:d[1],FRS1:d[2],FRS2:d[3]}};switch(c){case"N_KO":case"N_HT":e.tags.ID=d[4];break;case"N_RC":e.tags.FPN=d[4],e.tags.FTN=d[5],e.tags.FMIN=d[6],e.tags.ID=d[7];break;case"N_SC":e.tags.FSN=d[4],e.tags.FMIN=d[5],e.tags.ID=d[6];break;case"N_FT":case"N_ET":case"N_FS":e.tags.FMIN=d[4],e.tags.ID=d[5];break;default:e=void 0}return e}function d(b){var c=b.aps.alert["loc-key"],d=b.aps.alert["loc-args"],e={type:c,group:a.GROUP.TENNIS,tags:{ID:d[0],TRN1:d[1],TRN2:d[2]}};switch(c){case"N_TK":e.tags.TGS1=d[3],e.tags.TGS2=d[4];break;case"N_TS":case"N_TF":e.tags.TPS=d[3],e.tags.TLS1=d[4],e.tags.TLS2=d[5],e.tags.TSW1=d[6],e.tags.TSW2=d[7];break;default:e=void 0}return e}function e(b){var c=b.aps.alert["loc-key"],d=b.aps.alert["loc-args"],e={type:c,group:a.GROUP.HORSE_RACING,tags:{HWMID:d[0],HST:d[1],HEN:d[2]}};switch(c){case"N_HK":e.tags.HWMN=d[3];break;case"N_HFR":e.tags.HRN=d[3];break;case"N_HNR":e.tags.HWMN=d[3],e.tags.HNRN=d[4];break;default:e=void 0}return e}function f(b){var c=b.aps.alert["loc-key"];if("N_MT"===c){var d=b.aps.alert["loc-args"];return{type:c,group:a.GROUP.MARKETING,tags:{N_MT:d[0],CC:b.cc,MARKETING_URL:b.marketing_url}}}}function g(c){return b.merge({},a.BODY.MARKETING,{tags:{N_MT:c.aps.alert,CC:c._dId,MARKETING_URL:c.marketing_url}})}return{createAdobeMarketingNotification:g,createFootballNotification:c,createHorseRacingNotification:e,createTennisNotification:d,createUrbanAirshipMarketingNotification:f}}]),angular.module("betfair.extensions.wrapper").factory("BF.NotificationParser",["BF.Device","BF.NotificationParserIOS","BF.NotificationHelperIOS","BF.NotificationParserAndroid","BF.NotificationHelperAndroid",function(a,b,c,d,e){function f(a){if(c.isValidUrbanAirship(a)||c.isValidAdobe(a))return c.isFootball(a)?b.createFootballNotification(a):c.isTennis(a)?b.createTennisNotification(a):c.isHorseRacing(a)?b.createHorseRacingNotification(a):c.isUrbanAirshipMarketing(a)?b.createUrbanAirshipMarketingNotification(a):c.isAdobeMarketing(a)?b.createAdobeMarketingNotification(a):void 0}function g(a){return e.isValidUrbanAirship(a)?d.createUrbanAirshipNotification(a):e.isValidAdobe(a)?d.createAdobeMarketingNotification(a):void 0}function h(b){if(!a.isWrapper())throw new Error("Notification Parser is only available on wrappers!");if(a.isIOS())return f(b);if(a.isAndroid())return g(b);throw new Error("Unsupported wrapper")}return{extractNotificationPayload:h}}]),angular.module("betfair.extensions.wrapper").factory("BF.Internal.WrapperAndroidApi",["$window",function(a){function b(){a.BFWrapper.launchNativeLogin()}function c(b){a.BFWrapper.syncUserData(angular.toJson(b))}function d(b){a.BFWrapper.syncDeviceSettings(angular.toJson(b))}function e(b){a.BFWrapper.openExternalLink(b)}function f(b){angular.isUndefined(b.android)||a.BFWrapper.openNativeApplication(b.android.packageName,b.android.fallbackUrl)}function g(){a.BFWrapper.setWebAppReady()}function h(){a.BFWrapper.setWebAppError()}return{launchNativeLogin:b,syncUserData:c,syncLocalStorage:angular.noop,syncDeviceSettings:d,openExternalLink:e,openNativeApplication:f,setWebAppReady:g,setWebAppError:h}}]),angular.module("betfair.extensions.wrapper").factory("BF.Internal.WrapperIOSApi",["$window",function(a){function b(){a.webkit.messageHandlers.launchNativeLogin.postMessage({})}function c(b){a.webkit.messageHandlers.syncUserData.postMessage({userData:b})}function d(b){a.webkit.messageHandlers.syncLocalStorage.postMessage({localStorageState:b})}function e(b){a.webkit.messageHandlers.syncDeviceSettings.postMessage({deviceSettings:b})}function f(b){a.webkit.messageHandlers.openExternalLink.postMessage({link:b})}function g(b,c){if(!angular.isUndefined(b.ios)){var d=b.ios.scheme.concat("://");angular.isDefined(c)&&(d=d.concat(c)),a.webkit.messageHandlers.openNativeApplication.postMessage({app:{schemeUrl:d,appStoreUrl:b.ios.appStoreUrl}})}}function h(){a.webkit.messageHandlers.setWebAppReady.postMessage({})}function i(){a.webkit.messageHandlers.setWebAppError.postMessage({})}return{launchNativeLogin:b,syncUserData:c,syncLocalStorage:d,syncDeviceSettings:e,openExternalLink:f,openNativeApplication:g,setWebAppReady:h,setWebAppError:i}}]),angular.module("betfair.extensions.wrapper").factory("BF.Internal.WrapperWebApi",["$rootScope",function(a){function b(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}function c(a,c){if(!angular.isFunction(c))throw new Error("callback is not a function");if(-1!==a.indexOf(c))throw new Error("duplicated callback");return a.push(c),angular.bind(null,b,a,c)}function d(b){return function(){var c=arguments;a.$evalAsync(function(){b.slice(0).forEach(function(a){a.apply(null,c)})})}}function e(a){return c(m.onAnalyticsEventReceived,a)}function f(a){return c(m.onDeepLinkReceived,a)}function g(a){return c(m.onNotificationReceived,a)}function h(a){return c(m.onLaunchNativeLoginResult,a)}function i(a){return c(m.onSyncDeviceSettingsResult,a)}function j(a){return c(m.onSyncUserDataResult,a)}function k(a){return c(m.onNativeLoginSettingChanged,a)}function l(a){return c(m.onNotificationsConfigurationChanged,a)}var m={onAnalyticsEventReceived:[],onDeepLinkReceived:[],onNotificationReceived:[],onLaunchNativeLoginResult:[],onSyncDeviceSettingsResult:[],onSyncUserDataResult:[],onNativeLoginSettingChanged:[],onNotificationsConfigurationChanged:[]};return{onAnalyticsEventReceived:e,triggerOnAnalyticsEventReceived:d(m.onAnalyticsEventReceived),onDeepLinkReceived:f,triggerOnDeepLinkReceived:d(m.onDeepLinkReceived),onNotificationReceived:g,triggerOnNotificationReceived:d(m.onNotificationReceived),onLaunchNativeLoginResult:h,triggerOnLaunchNativeLoginResult:d(m.onLaunchNativeLoginResult),onSyncDeviceSettingsResult:i,triggerOnSyncDeviceSettingsResult:d(m.onSyncDeviceSettingsResult),onSyncUserDataResult:j,triggerOnSyncUserDataResult:d(m.onSyncUserDataResult),onNativeLoginSettingChanged:k,triggerOnNativeLoginSettingChanged:d(m.onNativeLoginSettingChanged),onNotificationsConfigurationChanged:l,triggerOnNotificationsConfigurationChanged:d(m.onNotificationsConfigurationChanged)}}]),angular.module("betfair.extensions.wrapper").factory("BF.Wrapper",["BF.Device","BF.Internal.WrapperWebApi","BF.Internal.WrapperAndroidApi","BF.Internal.WrapperIOSApi",function(a,b,c,d){var e;if(!a.isWrapper())return{};if(a.isAndroid())e=c;else{if(!a.isIOS())throw new TypeError("Unsupported wrapper");e=d}return angular.extend(e,{onAnalyticsEventReceived:b.onAnalyticsEventReceived,onDeepLinkReceived:b.onDeepLinkReceived,onNotificationReceived:b.onNotificationReceived,onNativeLoginSettingChanged:b.onNativeLoginSettingChanged,onNotificationsConfigurationChanged:b.onNotificationsConfigurationChanged,onLaunchNativeLoginResult:b.onLaunchNativeLoginResult,onSyncDeviceSettingsResult:b.onSyncDeviceSettingsResult,onSyncUserDataResult:b.onSyncUserDataResult})}]),angular.module("marketview.components",["marketview.components.mvHeader","marketview.components.mvBetButton","marketview.components.mvRunnerPnl","marketview.components.runnerInfo","marketview.components.metadataModal","marketview.components.marketGraph"]),angular.module("marketview.components.mvBetButton",["betfair.lodash","ngAnimate","marketview.components.common"]),angular.module("marketview.components.common",[]),angular.module("marketview.components.mvHeader",["betfair.lodash"]),angular.module("marketview.components.metadataModal",["betfair.lodash","marketview.components.common"]),angular.module("marketview.components.marketGraph",["betfair.lodash","ng"]),angular.module("marketview.components.runnerInfo",["marketview.components.common","marketview.components.metadataModal"]),angular.module("marketview.components.mvRunnerPnl",[]),angular.module("marketview.components.mvBetButton").constant("BET_TYPES",{BACK:"back",LAY:"lay"}),angular.module("marketview.components.mvBetButton").directive("mvBetButton",["BET_TYPES","$animate","BF.Lodash","domUtils","duckTyping",function(a,b,c,d,e){"use strict";function f(b){var c={back:"back-button",lay:"lay-button"},d=c[b.type]||"";if("0"===b.depth)switch(b.type){case a.BACK:d+=" back-selection-button";break;case a.LAY:d+=" lay-selection-button"}return 0!==parseInt(b.price,10)||e.isTrue(b.isSp)||(d+=" empty"),d}function g(a,g,i){var j=c.memoize(c.partial(d.findNode,g));g.addClass(f(i)),(0===h(a.depth)||e.isTrue(a.isSp))&&a.$watch("isSelected",function(a){g.toggleClass("selected",e.isTrue(a))}),e.isTrue(a.isSp)||(g.on("mouseenter",function(){g.attr("title",a.toFraction({price:a.price}))}),a.$watch("[price, size]",function(c,d){var f=c[0],i=c[1];j(".mv-bet-button-info").toggleClass("ng-hide",h(f)<1),j(".bet-button-price").text(f),j(".bet-button-size").text(i),e.isTrue(a.highlight)&&c!==d&&b.removeClass(g,"changed").then(function(){b.addClass(g,"changed")})}))}var h=c.memoize(e.toNumber);return{restrict:"E",templateUrl:"/components/bet-button/views/bet-button-tpl.html",replace:!0,scope:{type:"@",depth:"@",price:"@",size:"@",highlight:"@",isSelected:"@",isSp:"@",spLabel:"@",toFraction:"&",disabled:"&ngDisabled"},link:g}}]),angular.module("marketview.components.common").service("domUtils",[function(){"use strict";this.findNode=function(a,b){return angular.element(a[0].querySelector(b))}}]),angular.module("marketview.components.common").service("duckTyping",[function(){"use strict";this.toNumber=function(){var a=/[^-0-9.]/g;return function(b){var c;return angular.isUndefined(b)?NaN:(c=b.toString().replace(a,""),c.length?Number(c):NaN)}}(),this.isTrue=function(a){return angular.isString(a)?"true"===a.toLowerCase():Boolean(a)}}]),angular.module("marketview.components.mvHeader").constant("mvHeaderConstants",{marketStatusTypeClasses:{inplay:"market-inplay",goingInplay:"market-going-inplay",closed:"market-closed"},themes:{miniMarketview:"mini-marketview",marketview:"marketview"}}),angular.module("marketview.components.mvHeader").directive("mvHeader",["mvHeaderConstants","BF.Lodash","$log",function(a,b,c){"use strict";function d(d){var e=d.theme&&b.includes(b.values(a.themes),d.theme);e||c.warn("Defined theme is not valid: "+d.theme+". A default one will be set: "+a.themes.marketview),d.theme=e?d.theme:a.themes.marketview,d.data={marketStatusTypeClass:""},d.$watch(function(){return d.marketStatusSettings()?d.marketStatusSettings().type:null},function(b){b&&(d.data.marketStatusTypeClass=a.marketStatusTypeClasses[b])})}return{restrict:"E",scope:{marketNameSettings:"&",marketStatusSettings:"&",cashoutIconSettings:"&",bspButtonSettings:"&",timeformSettings:"&",marketRulesButtonSettings:"&",marketMatchedSettings:"&",refreshMarketButtonSettings:"&",ahPnlSettings:"&",pinRunners:"&",theme:"=?"},templateUrl:"/components/header/views/header-directive.html",link:d}}]),angular.module("marketview.components.metadataModal").directive("metadataModal",["$interpolate","$parse","$window","$timeout","BF.Lodash","domUtils",function(a,b,c,d,e,f){"use strict";var g=function(){var a=25,b=5;return function(d,f,g){var h=c.innerHeight,i=e.first(g).getBoundingClientRect().top;return f+i+a>h?(f+b)*-1:a}}(),h=function(){var b=a("<li><strong>{{key}}: </strong>{{value}}</li>");return function(a){return e.reduce(a,function(a,c,d){return a+b({key:d,value:c})},"<ul class=runner-metadata-list>")+"</ul>"}}();return{restrict:"A",link:function(a,c,i){var j=b(i.metadataModal)(a);if(!e.isEmpty(j)){c.append(h(j));var k=f.findNode(c,".runner-metadata-list"),l=k.parent();k.removeClass("visible"),c.on("mouseover",function(){var a=g(k,k.prop("offsetHeight"),l);k.css("top",a+"px"),k.addClass("visible")}),c.on("mouseleave",function(){d(angular.bind(k,k.removeClass,"visible"))})}}}}]),angular.module("marketview.components.marketGraph").directive("marketGraph",["$window","marketGraphHelper",function(a,b){"use strict";function c(b,c){e&&!e.closed?(e.location.href=b,e.focus()):e=a.open(b,f,c)}function d(a,d){var e=b.buildUrl(a.marketId,a.selectionId,a.handicap,a.eventTypeId),f=b.retrieveWindowFeatures(a.marketId,a.selectionId,a.handicap,a.eventTypeId);d.on("click",function(){c(e,f)})}var e,f="mktGraphPopup";return{restrict:"E",templateUrl:"/components/market-graph/views/market-graph-directive.html",replace:!0,scope:{eventTypeId:"@",marketId:"@",selectionId:"@",handicap:"@"},link:d}}]),angular.module("marketview.components.marketGraph").provider("marketGraphHelper",function(){"use strict";var a,b={left:0,top:0};this.setUrlTemplate=function(b){a=b},this.setWindowFeatures=function(a){b=a},this.$get=["BF.Lodash",function(c){function d(b,c,d){if(!angular.isString(a))throw new Error("Market graph url template must be configured through .setUrlTemplate");var e=a.replace(/(:marketId)/,b).replace(/(:selectionId)/,c).replace(/(:handicap)/,d);
return e}function e(){return c.map(b,function(a,b){return b+"="+a}).join(",")}return{buildUrl:d,retrieveWindowFeatures:e}}]}),angular.module("marketview.components.runnerInfo").directive("mvRunnerInfo",["BF.Lodash","domUtils",function(a,b){"use strict";var c=angular.bind(/^([12]?\d[ABCDEFYXZ]?|30[F]?).\s(.+)/,RegExp.prototype.exec);return{restrict:"E",scope:{runner:"&",metadata:"&",type:"@",showRaceCard:"@",isSaddleClothRacing:"="},templateUrl:"/components/runner-info/views/runner-info-directive.html",link:{pre:function(a,b,d){var e=a.metadata()||{},f=a.runner()||{},g=c(f.name)||[],h=g[2]||f.name;a.silk=e.silk||{},a.cloth=e.cloth||{},a.hasSilkUrl=angular.isDefined(a.silk.url),a.stallDraw=e.stallDraw||{},a.alpha=a.cloth.alpha||g[1],a.hasAlpha=angular.isDefined(a.alpha),a.showExtraInfo="true"===a.showRaceCard,a.runnerName=f.name,d.$observe("showRaceCard",function(b){var c="true"===b;a.showExtraInfo=c,a.runnerName=!c||"horseRacing"===a.type&&!a.cloth.alpha?f.name:h})},post:function(a,c){a.$applyAsync(function(){b.findNode(c,".runner-silk > img").on("error",function(a){angular.element(a.target).remove()})})}}}}]),angular.module("marketview.components.mvRunnerPnl").constant("mvRunnerPnlConstants",{type:{actual:"actual",potential:"potential",cashout:"cashout"},prefix:{actual:"",potential:" ",cashout:"> "},separator:{comma:", ",space:" "}}),angular.module("marketview.components.mvRunnerPnl").directive("mvRunnerPnl",["mvRunnerPnlConstants",function(a){"use strict";function b(b){return a.prefix[b]||a.prefix.actual}function c(b){return a.separator[b]||a.separator.comma}function d(a,b){var c=a.formatter();return{cssClass:b>=0?"positive":"negative",value:c(b)}}function e(a,b,c){c.prefix.removeClass("hidden"),0===b.length&&c.prefix.addClass("hidden"),angular.forEach(c.pnl,function(c,e){var f;c.container.removeClass("hidden"),c.value.removeAttr("class"),c.value.addClass("pnl-value"),angular.isDefined(b[e])?(f=d(a,b[e]),c.value.addClass(f.cssClass),c.value.text(f.value)):c.container.addClass("hidden")})}function f(a,d){var f=angular.element(d[0].querySelector(".runner-elem-pnl")),g=function(a){var b={prefix:angular.element(a[0].querySelector(".prefix")),pnl:{}},c=a[0].querySelectorAll(".pnl-value-container");return angular.forEach(c,function(a,c){b.pnl[c]={container:angular.element(a),value:angular.element(a.querySelector(".pnl-value"))}}),b}(f);if(!angular.isArray(a.values())||angular.isUndefined(a.type))throw new Error("Invalid Directive. Attention: the values and type attributes are mandatory.");a.data={prefix:b(a.type),separator:c(a.separator)},e(a,a.values(),g),a.$watch("values()",function(b,c){angular.equals(b,c)||e(a,b,g)})}return{restrict:"E",scope:{type:"@",values:"&",separator:"@",formatter:"&"},templateUrl:"/components/runner-pnl/views/runner-pnl-directive.html",link:f}}]),angular.module("marketview.components.templates",[]).run(["$templateCache",function(a){a.put("/components/bet-button/views/bet-button-tpl.html",'<button class="mv-bet-button" data-bet-type="{{::type}}" data-ng-class="::{\'is-sp\': isSp}"><div class="sp-label" data-ng-if="::isSp" data-ng-bind="::spLabel"></div><div class="mv-bet-button-info" data-ng-if="::!isSp"><span class="bet-button-price"></span> <span class="bet-button-size"></span></div></button>'),a.put("/components/header/views/header-directive.html",'<div class="mv-header-container" data-ng-class="theme"><div class="mv-header-content"><div class="mv-header-main-section-wrapper"><!-- Market name --><div class="market-name" data-ng-if="theme === \'mini-marketview\' && marketNameSettings().visible"><span class="market-name-label" data-ng-bind="marketNameSettings().label"></span></div><div class="mv-header-main-section"><!-- Market Status --><div class="market-status mv-header-field" data-ng-class="data.marketStatusTypeClass" data-ng-if="marketStatusSettings().visible"><span class="market-status-icon"></span> <span class="market-status-label" data-ng-if="marketStatusSettings().label" data-ng-bind="marketStatusSettings().label"></span></div><!-- CashOut Icon--><div class="cashout-availability mv-header-field" data-ng-if="cashoutIconSettings().visible" data-ng-attr-title="{{::cashoutIconSettings().tooltip}}"><span class="cashout-icon"></span> <span class="cashout-label" data-ng-if="cashoutIconSettings().label" data-ng-bind="::cashoutIconSettings().label"></span></div><!-- Market Rules Icon --> <span class="market-rules mv-header-field" data-ng-if="marketRulesButtonSettings().visible"><a class="market-rules-link" data-ng-click="marketRulesButtonSettings().onClick()"><span class="market-rules-icon"></span> <span class="market-rules-label" data-ng-if="marketRulesButtonSettings().label" data-ng-bind="::marketRulesButtonSettings().label"></span> </a></span><!-- PnL table --><div class="ah-pnl mv-header-field checkbox-with-label" data-ng-if="ahPnlSettings().visible"><label><input type="checkbox" class="ah-pnl-checkbox" data-ng-model="ahPnlSettings().selected" data-ng-change="ahPnlSettings().onChange(ahPnlSettings().selected)"> <span class="preference-ah-table" data-ng-if="ahPnlSettings().label" data-ng-bind="::ahPnlSettings().label"></span></label></div><!-- My Pins Icon --><div class="pin-runners mv-header-field checkbox-with-label" title="{{::pinRunners().title}}" data-ng-class="{\'active\': pinRunners().editorStatus}" data-ng-if="pinRunners().visible"><label><input type="checkbox" class="pin-runners-checkbox" data-ng-model="pinRunners().editorStatus" data-ng-change="pinRunners().onClick(pinRunners().editorStatus)"> <span class="pin-runners-icon"></span> <span class="pin-runners-label" readonly="true" data-ng-if="::pinRunners().label" data-ng-bind="::pinRunners().label"></span></label></div><!-- BSP Button --><div class="bsp-preferences mv-header-field checkbox-with-label" data-ng-if="bspButtonSettings().visible"><label><input type="checkbox" class="bsp-checkbox" data-ng-model="bspButtonSettings().selected" data-ng-change="bspButtonSettings().onChange(bspButtonSettings().selected)"> <span class="preference-info visible-md-inline-block visible-lg-inline-block visible-xl-inline-block visible-xxl-inline-block" data-ng-if="bspButtonSettings().label" data-ng-bind="::bspButtonSettings().label"></span> <span class="preference-info-small hidden-md hidden-lg hidden-xl" data-ng-if="bspButtonSettings().smallLabel" data-ng-bind="::bspButtonSettings().smallLabel"></span> <span class="bsp-tooltip-icon">[<a class="bsp-tooltip-link" data-ng-click="bspButtonSettings().onHelpClick($event)">?</a>]</span></label></div><!-- TimeForm Checkbox --><div class="timeform-check mv-header-field checkbox-with-label" data-ng-if="timeformSettings().visible"><label class="timeform-checkbox-label"><input type="checkbox" class="timeform-checkbox" data-ng-checked="timeformSettings().selected" data-ng-model="timeformSettings().selected" data-ng-change="timeformSettings().onChange(timeformSettings().selected)"> <span data-ng-if="timeformSettings().label" data-ng-bind="timeformSettings().label"></span></label></div><!-- Refresh Market Button --><div class="refresh-btn-container mv-header-field" data-ng-if="theme === \'mini-marketview\' && refreshMarketButtonSettings().visible"><button class="refresh-btn marketview-resize" data-ng-click="refreshMarketButtonSettings().onClick()" data-ng-bind="::refreshMarketButtonSettings().label"></button></div></div></div><div class="mv-secondary-section" data-ng-if="marketMatchedSettings().visible || refreshMarketButtonSettings().visible"><div class="mv-header-total-matched-wrapper"><div class="market-matched" data-ng-if="marketMatchedSettings().visible"><!-- total matched label--> <span class="total-matched-label" data-ng-if="marketMatchedSettings().label" data-ng-bind="::marketMatchedSettings().label"></span><!-- total matched amount--> <span class="total-matched" data-ng-bind="marketMatchedSettings().totalMatched"></span></div><!-- Refresh Market Button --> <button class="refresh-btn marketview-resize" data-ng-if="refreshMarketButtonSettings().visible && theme === \'marketview\'" data-ng-click="refreshMarketButtonSettings().onClick()" data-ng-bind="::refreshMarketButtonSettings().label"></button></div></div></div></div>'),a.put("/components/market-graph/views/market-graph-directive.html",'<button class="market-graph"></button>'),a.put("/components/runner-info/views/runner-info-directive.html",'<div class="runner-info" data-ng-switch="::type"><div class="horse-racing" data-ng-switch-when="horseRacing"><div class="runner-numbers" data-ng-show="showExtraInfo" data-ng-class="::{double: cloth.number && stallDraw.number}" data-ng-if="(cloth.number || stallDraw.number) && !isSaddleClothRacing"><p class="saddle-cloth" title="{{::cloth.title}}" data-ng-if="::(cloth.number > 0)" data-ng-bind="{{::cloth.number}}"></p><p class="stall-draw" title="{{::stallDraw.title}}" data-ng-if="::(stallDraw.number > 0)" data-ng-bind-template="({{::stallDraw.number}})"></p></div><div class="runner-silk" data-ng-show="showExtraInfo"><img title="{{::silk.description}}" class="horse-racing-silk" data-ng-if="!isSaddleClothRacing && hasSilkUrl" data-ng-src="{{::silk.url}}"><div title="{{::alpha}}" class="saddle-cloth-alpha saddle-cloth-{{::alpha}}" data-ng-if="isSaddleClothRacing && hasAlpha"></div></div><div class="name" style="position: relative"><h3 class="runner-name" data-ng-if="!showExtraInfo">{{runnerName}}</h3><h3 class="runner-name" metadata-modal="::metadata().modal" data-ng-if="showExtraInfo" data-ng-class="::{\'runner-name-with-jockey\': runner().jockey}">{{runnerName}}</h3><h4 class="jockey-name" data-ng-if="::runner().jockey" data-ng-show="showExtraInfo" data-ng-bind="::runner().jockey"></h4></div></div><div class="greyhound-racing" data-ng-switch-when="greyhoundRacing"><div class="runner-silk" data-ng-show="showExtraInfo"><div class="greyhound-silk greyhound-silk-{{::runner().sortPriority}}" data-ng-if="::(runner().sortPriority > 0) && !isSaddleClothRacing"></div><div title="{{::alpha}}" class="saddle-cloth-alpha saddle-cloth-{{::alpha}}" data-ng-if="::isSaddleClothRacing"></div></div><div class="name"><h3 class="runner-name" data-ng-bind="runnerName"></h3></div></div><div class="default name" data-ng-switch-default=""><!-- Adding some semantic meaning to runner names (shouldn\'t just be meaningless divs --><h3 class="runner-name" data-ng-bind="::runnerName"></h3></div></div>'),a.put("/components/runner-pnl/views/runner-pnl-directive.html",'<!-- PnL --><div class="runner-elem-pnl {{::type}}-pnl"><span class="prefix hidden">{{::data.prefix}}</span><span class="pnl-value-container hidden"> <span class="pnl-value"></span> </span><span class="pnl-value-container hidden"><span class="separator">{{::data.separator}}</span> <span class="pnl-value"></span> </span><span class="pnl-value-container hidden"><span class="separator">{{::data.separator}}</span> <span class="pnl-value"></span></span></div>')}]),!function c(a,b,d){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,c,a,b,d)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],function(){return a.svg4everybody=d()}):"object"==typeof c?b.exports=d():a.svg4everybody=d()}(this,function(){function a(a,b){if(b){var c=document.createDocumentFragment(),d=!a.getAttribute("viewBox")&&b.getAttribute("viewBox");d&&a.setAttribute("viewBox",d);for(var e=document.importNode?document.importNode(b,!0):b.cloneNode(!0);e.childNodes.length;)c.appendChild(e.firstChild);a.appendChild(c)}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=b._cachedDocument;c||(c=b._cachedDocument=document.implementation.createHTMLDocument(""),c.body.innerHTML=b.responseText,b._cachedTarget={}),b._embeds.splice(0).map(function(d){var e=b._cachedTarget[d.id];e||(e=b._cachedTarget[d.id]=c.getElementById(d.id)),a(d.svg,e)})}},b.onreadystatechange()}function c(c){function d(){for(var c=0;c<l.length;){var g=l[c],h=g.parentNode;if(h&&/svg/i.test(h.nodeName)){var i=g.getAttribute("xlink:href");if(e&&(!f.validate||f.validate(i,h,g))){h.removeChild(g);var m=i.split("#"),n=m.shift(),o=m.join("#");if(n.length){var p=j[n];p||(p=j[n]=new XMLHttpRequest,p.open("GET",n),p.send(),p._embeds=[]),p._embeds.push({svg:h,id:o}),b(p)}else a(h,document.getElementById(o))}}else++c}k(d,67)}var e,f=Object(c),g=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,h=/\bAppleWebKit\/(\d+)\b/,i=/\bEdge\/12\.(\d+)\b/;e="polyfill"in f?f.polyfill:g.test(navigator.userAgent)||(navigator.userAgent.match(i)||[])[1]<10547||(navigator.userAgent.match(h)||[])[1]<537;var j={},k=window.requestAnimationFrame||setTimeout,l=document.getElementsByTagName("use");e&&d()}return c})},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates.js");var e=a("svg4everybody"),f=d(e),g=a("./directives/bf-quick-links-directive.js"),h=d(g),i=a("./controllers/bf-quick-links-controller.js"),j=d(i),k=a("./constants/sports-contants.js");(0,f["default"])();var l=angular.module("bfQuickLinks",["bfQuickLinksTemplates"]);l.directive("bfQuickLinks",h["default"]),l.controller("BF.QuickLinksController",j["default"]),l.constant("BF.QUICKLINKS.SPORTS",k.SPORTS)},{"./constants/sports-contants.js":3,"./controllers/bf-quick-links-controller.js":4,"./directives/bf-quick-links-directive.js":5,"./templates.js":6,svg4everybody:1}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.SPORTS={1:{CLASS_NAME:"football"},2:{CLASS_NAME:"tennis"},3:{CLASS_NAME:"golf"},4:{CLASS_NAME:"cricket"},5:{CLASS_NAME:"rugby-union"},6:{CLASS_NAME:"boxing"},7:{CLASS_NAME:"horse-racing"},8:{CLASS_NAME:"motor-sport"},10:{CLASS_NAME:"special-bets"},11:{CLASS_NAME:"cycling"},1477:{CLASS_NAME:"rugby-league"},3503:{CLASS_NAME:"darts"},4339:{CLASS_NAME:"greyhound-racing"},6422:{CLASS_NAME:"snooker"},6423:{CLASS_NAME:"american-football"},7511:{CLASS_NAME:"baseball"},7522:{CLASS_NAME:"basketball"},7524:{CLASS_NAME:"ice-hockey"},61420:{CLASS_NAME:"australian-rules"},72382:{CLASS_NAME:"pool"},468328:{CLASS_NAME:"handball"},998917:{CLASS_NAME:"volleyball"},2152880:{CLASS_NAME:"gaelic-games"},2378961:{CLASS_NAME:"politics"},2593174:{CLASS_NAME:"table-tennis"},26420387:{CLASS_NAME:"mixed-martial-arts"},27105927:{CLASS_NAME:"winter-olympics"}}},{}],4:[function(a,b,c){"use strict";function d(a){function b(b){if(angular.isDefined(b)&&!angular.isNumber(b))throw new Error("eventTypeId must be a Number");return a.hasOwnProperty(b)?a[b].CLASS_NAME:h}function c(){i.data.isCollapsed=!i.data.isCollapsed}function d(){return i.data.isCollapsed?i.labels().expandLabel:i.labels().collapseLabel}function e(){return i.allowedNumberOfLinks>0&&angular.isArray(i.links)&&i.links.length>i.allowedNumberOfLinks}function f(){return e()&&i.data.isCollapsed?i.allowedNumberOfLinks:i.links.length}function g(){i.onInplayLinkClick&&i.onInplayLinkClick({link:{url:i.inplayUrl,label:i.labels().inplay}})}var h="generic-icon",i=this;!function(){i.data={isCollapsed:!0},i.api={getIconClassNameForEventType:b,isCollapsable:e,toggleCollapse:c,getCollapseButtonLabel:d,getLinksLimit:f,inplayLinkClickHandler:g}}()}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.QUICKLINKS.SPORTS"],c["default"]=d},{}],5:[function(a,b,c){"use strict";function d(){return{restrict:"EA",templateUrl:"/views/bf-quick-links.html",controller:"BF.QuickLinksController",bindToController:!0,controllerAs:"ctrl",scope:{inplayCounter:"=",inplayUrl:"@",links:"=",onQuickLinkClick:"&",onInplayLinkClick:"&?",allowedNumberOfLinks:"@",labels:"&"}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],6:[function(a,b,c){"use strict";b.exports=angular.module("bfQuickLinksTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-quick-links.html",'<section class="mod-quick-links" data-ng-if="ctrl.links.length > 0"><h1 class="header">{{::ctrl.labels().title}}</h1><a class="inplay-events-link clearfix" data-ng-if="ctrl.inplayCounter > 0" data-ng-href="{{ctrl.inplayUrl}}" data-ng-click="ctrl.api.inplayLinkClickHandler()"><span class="inplay-counter">{{ctrl.inplayCounter}}</span> <span class="inplay-label">{{::ctrl.labels().inplay}}</span> <svg viewbox="0 0 100 100" class="arrow"><use xlink:href="/resources/eds/bundle/images/sprite-bf-quick-links_3641_.svg#icons-chevron"/></svg></a><ul class="links-list"><li class="link animate-repeat" data-ng-repeat="link in ctrl.links | limitTo:ctrl.api.getLinksLimit()" data-ng-click="ctrl.onQuickLinkClick({link: link})"><a class="clearfix" href="{{::link.url}}"><svg viewbox="0 0 100 100" class="icon"><use xlink:href="" data-ng-href="/resources/eds/bundle/images/sprite-bf-quick-links_3641_.svg#sports-{{::ctrl.api.getIconClassNameForEventType(link.eventTypeId)}}"/></svg> <span class="label">{{::link.label}}</span> <svg viewbox="0 0 100 100" class="arrow"><use xlink:href="/resources/eds/bundle/images/sprite-bf-quick-links_3641_.svg#icons-chevron"/></svg></a></li><li class="collapse-button clearfix" data-ng-if="ctrl.api.isCollapsable()" data-ng-class="{collapsed: ctrl.data.isCollapsed}" data-ng-click="ctrl.api.toggleCollapse()"><svg viewbox="0 0 100 100" class="arrow"><use xlink:href="/resources/eds/bundle/images/sprite-bf-quick-links_3641_.svg#icons-chevron"/></svg> <span class="label">{{ctrl.api.getCollapseButtonLabel()}}</span></li></ul></section>')}])},{}]},{},[2]),angular.module("games-widget",[]),angular.module("games-widget").constant("GAMES_WIDGET.ANALYTICS_CONFIG",{CATEGORY:{GAMING:"gaming",INTERFACE:"interface",NAVIGATION:"navigation"},MODULE:{NO_TABS:"cross-sell games module",WITH_TABS:"staticminigames"},ACTIONS:{CLICKED:"clicked",GAME_SAW:"saw game",GAME_HOVER:"hovered",GAME_CLICK:"clicked play now",CLAIM_NOW_CLICK:"clicked claim now",NAVIGATED_TO:"navigated to",SAW:"saw",MORE_CLICKED:"show",LESS_CLICKED:"show"},LABELS:{SAW_COMPONENT:"saw games module",MORE_CLICKED:"show more",LESS_CLICKED:"show less"}}),angular.module("games-widget").constant("GAMES_WIDGET.CONFIG",{NO_GAMES_MESSAGE_TYPE:{NO_ERRORS:"ok",GENERAL:"general",COMPATIBILITY:"compatibility"},TABS_TITLE_KEYS:["TAB_MY_GAMES","TAB_TOP_PICS","TAB_SUGGESTED","TAB_MORE"],TABS_TITLE:["My Games","Top Picks","Suggested","More"],NO_DATA_MESSAGE:"Service without data",ENDPOINT_DATA:{EDS:{webforms:[{type:"gameswidget"}]}},ITEMS_LIMIT:{BF:{COLLAPSED:6,EXPANDED:12,DEFAULT:"EXPANDED"},PP:{COLLAPSED:6,EXPANDED:12,DEFAULT:"COLLAPSED"}}}),angular.module("games-widget").constant("GAMES_WIDGET.DEPENDENCIES",{GTM:["sendEvent"]}),angular.module("games-widget").controller("PlayGamesNoTabsController",["$scope","$window","GamesWidgetService","GAMES_WIDGET.CONFIG","GamesWidgetAnalytics","GAMES_WIDGET.ANALYTICS_CONFIG","GamesWidgetDependencies",function(a,b,c,d,e,f,g){"use strict";function h(a){var b=l.getAssetsDomain();return(a=a||[]).filter(function(a){return!(!a.image||!a.image.url||!(a.fullGame&&a.fullGame.launchUrl||a.externalLink&&a.externalLink.launchUrl))}).map(function(a){return{name:a.name,image:{alt:a.image.alt,caption:a.image.caption,url:b+a.image.url.replace(k,"")},fullGame:{code:a.fullGame.code,launchUrl:a.fullGame.launchUrl},externalLink:{openType:a.externalLink.openType,launchUrl:a.externalLink.launchUrl},isFullGame:!!a.fullGame.launchUrl}})}function i(a){j.data.games=j.data.allGames.slice(0,a),j.data.toggleListLabelText=m(j.data.expanded?"I18N.GAMES_WIDGET.SHOW_LESS":"I18N.GAMES_WIDGET.SHOW_MORE")}var j=this,k=/^\//,l=new c,m=(new g).getTranslate();a.events={toggleList:function(a){var b=d.ITEMS_LIMIT[j.brand.toUpperCase()][a?"EXPANDED":"COLLAPSED"];j.data.expanded=a,i(b),e.onViewButtonClicked(a)},openFullSizeGame:function(a,c,d){return a.preventDefault(),a.stopPropagation(),c&&e.onPlayFullSizeClick(f.MODULE.NO_TABS,c.name,c.fullGame.code,d),c&&c.fullGame.launchUrl&&b.open(c.fullGame.launchUrl,"_blank","width=900,height=600,toolbar=no,menubar=no,scrollbars=no,resizable=no"),!1},openExternalLink:function(a,c,d){if(c&&c.externalLink&&(e.onClaimNowClick(f.MODULE.NO_TABS,c.name,c.externalLink.launchUrl,d),"POP_UP"===c.externalLink.openType))return a.preventDefault(),a.stopPropagation(),b.open(c.externalLink.launchUrl,"_blank","width=800,height=600,toolbar=no,menubar=no,scrollbars=no,resizable=no"),!1}},this.$onInit=function(){j.brand=j.brand||"bf",j.data={games:[],allGames:[],expanded:"EXPANDED"===d.ITEMS_LIMIT[j.brand.toUpperCase()].DEFAULT,toggleListLabelText:""},j.layout=j.layout||"vertical",j.moduleReadyFn=j.moduleReadyFn&&angular.isFunction(j.moduleReadyFn)?j.moduleReadyFn():void 0,l.getPlayGamesData(!0,j.brand.toUpperCase()).then(function(a){var b=d.ITEMS_LIMIT[j.brand.toUpperCase()];angular.extend(j.data.allGames,h(a.games)),i("horizontal"===j.layout?b.EXPANDED:b[b.DEFAULT])},function(){j.data.games.length=0})["finally"](function(){j.moduleReadyFn&&j.moduleReadyFn()})}}]),angular.module("games-widget").controller("PlayGamesWithTabsController",["$scope","$window","GamesWidgetService","GAMES_WIDGET.CONFIG","GamesWidgetAnalytics","GAMES_WIDGET.ANALYTICS_CONFIG","GamesWidgetDependencies",function(a,b,c,d,e,f,g){"use strict";function h(a){return(a=a||[]).filter(function(a,b){return!(!a.name||j.data.games.length<=b*m)}).map(function(a,b){var c,e=n("I18N.GAMES_WIDGET."+d.TABS_TITLE_KEYS[b]),f=e.length>15&&-1!==e.indexOf(" ")?"long-text":"",g={getIndex:function(){return j.data.tabs.indexOf(c)},isActive:function(){return this.getIndex()===j.data.selectedIndex}},h={name:d.TABS_TITLE[b],tabClass:f,translatedName:e,linkLabel:n("I18N.GAMES_WIDGET.VIEW_ALL"),linkUrl:a.url||"https://arcade.betfair.com",games:j.data.games.slice(b*m,(b+1)*m)};return c=angular.extend(g,h)})}function i(a){var b=l.getAssetsDomain();return(a=a||[]).filter(function(a){return!!(a.image&&a.image.url&&a.fullGame&&a.fullGame.launchUrl)}).map(function(a){return{name:a.name,image:{alt:a.image.alt,caption:a.image.caption,url:b+a.image.url.replace(k,"")},fullGame:{code:a.fullGame.code,launchUrl:a.fullGame.launchUrl,ctaLabel:n("I18N.GAMES_WIDGET.PLAY_NOW"),ctaLabelClass:n("I18N.GAMES_WIDGET.PLAY_NOW").length>10?"long-text":""}}})}var j=this,k=/^\//,l=new c,m=4,n=(new g).getTranslate();a.events={selectTab:function(a){angular.isNumber(a)&&a>=0&&a<j.data.tabs.length&&j.data.selectedIndex!==a&&(j.data.selectedIndex=a,e.onTabSelected(j.data.tabs[a].name))},openFullSizeGame:function(a,c,d){var g=c&&c.fullGame?c.fullGame:{};return a.preventDefault(),a.stopPropagation(),c&&e.onPlayFullSizeClick(f.MODULE.WITH_TABS,c.name,g.code||"",d),c&&g.launchUrl&&b.open(g.launchUrl,"_blank","width=800,height=600,toolbar=no,menubar=no,scrollbars=no,resizable=no"),!1},onGameTileHover:function(a,b){a&&a.fullGame&&e.onGameHovered(f.MODULE.WITH_TABS,a.name,a.fullGame.code,b)},onNavigatedTo:function(a){a&&e.onNavigatedTo("view all",a.linkUrl)}},j.data={games:[],tabs:[],selectedIndex:0},j.brand=j.brand||"",j.moduleReadyFn=j.moduleReadyFn&&angular.isFunction(j.moduleReadyFn)?j.moduleReadyFn():void 0,l.getPlayGamesData(!1).then(function(a){angular.extend(j.data.games,i(a.games)),angular.extend(j.data.tabs,h(a.tabs)),j.data.tabs.length>0&&e.onComponentSaw(f.MODULE.WITH_TABS)},function(){j.data.games.length=0,j.data.tabs.length=0})["finally"](function(){j.moduleReadyFn&&j.moduleReadyFn()})}]),angular.module("games-widget").directive("playGamesNoTabs",[function(){"use strict";return{replace:!0,scope:{moduleReadyFn:"&?",brand:"@",layout:"@"},controller:"PlayGamesNoTabsController",controllerAs:"noTabsCtrl",bindToController:!0,templateUrl:"COMPONENT_TEMPLATE.gamesWidget.play-games-no-tabs-view.html",link:function(){angular.noop()}}}]),angular.module("games-widget").directive("playGamesWithTabs",[function(){"use strict";return{replace:!0,scope:{moduleReadyFn:"&?",brand:"@"},controller:"PlayGamesWithTabsController",controllerAs:"withTabsCtrl",bindToController:!0,templateUrl:"COMPONENT_TEMPLATE.gamesWidget.play-games-with-tabs-view.html",link:function(){angular.noop()}}}]),angular.module("games-widget").filter("gwxTranslate",["GamesWidgetDependencies",function(a){"use strict";var b=(new a).getTranslate();return function(a){return b(a)}}]),angular.module("games-widget").factory("GamesWidgetAnalytics",["GAMES_WIDGET.ANALYTICS_CONFIG","GamesWidgetDependencies",function(a,b){"use strict";function c(b,c,e,f,g){var h={module:c,gameId:f,gameName:e,position:g};d.sendEvent(a.CATEGORY.GAMING,b,e,h)}var d=(new b).getGTM();return{onGameHovered:function(b,d,e,f){c(a.ACTIONS.GAME_HOVER,b,d,e,f)},onPlayFullSizeClick:function(b,d,e,f){c(a.ACTIONS.GAME_CLICK,b,d,e,f)},onClaimNowClick:function(b,d,e,f){c(a.ACTIONS.CLAIM_NOW_CLICK,b,d,e,f)},onTabSelected:function(b){var c={module:a.MODULE.WITH_TABS};d.sendEvent(a.CATEGORY.INTERFACE,a.ACTIONS.CLICKED,b,c)},onNavigatedTo:function(b,c){var e={module:a.MODULE.WITH_TABS,destinationUrl:c};d.sendEvent(a.CATEGORY.NAVIGATION,a.ACTIONS.NAVIGATED_TO,b,e)},onComponentSaw:function(b){var c={module:b};d.sendEvent(a.CATEGORY.INTERFACE,a.ACTIONS.SAW,a.LABELS.SAW_COMPONENT,c)},onViewButtonClicked:function(b){var c={module:a.MODULE.NO_TABS};b?d.sendEvent(a.CATEGORY.INTERFACE,a.ACTIONS.MORE_CLICKED,a.LABELS.MORE_CLICKED,c):d.sendEvent(a.CATEGORY.INTERFACE,a.ACTIONS.LESS_CLICKED,a.LABELS.LESS_CLICKED,c)}}}]),angular.module("games-widget").provider("GamesWidgetDependencies",["GAMES_WIDGET.DEPENDENCIES",function(a){"use strict";function b(b){var c;for(c=0;c<a.GTM.length;c++)if(angular.isUndefined(b)||angular.isUndefined(b[a.GTM[c]])||"function"!=typeof b[a.GTM[c]])throw new Error("games-widget GamesWidgetDependencies Provider: Must define "+a.GTM[c]+" in GTM provider! ");f=b}function c(a){if("function"!=typeof a)throw new Error("games-widget GamesWidgetDependencies Provider: Translate must be a function! ");g=a}function d(a){if("object"!=typeof a)throw new Error("games-widget GamesWidgetDependencies Provider: Endpoints must be a object! ");h=a}function e(a){if("string"!=typeof a)throw new Error("games-widget GamesWidgetDependencies Provider: ApplicationKey must be a string! ");i=a}var f,g,h,i;this.setGTM=b,this.setTranslate=c,this.setEndpoints=d,this.setApplicationKey=e,this.$get=[function(){function a(){if(angular.isUndefined(f))throw new Error("games-widget GamesWidgetDependencies Provider: Must define GTM provider! Please define them by calling GamesWidgetDependenciesProvider.setGTM");if(angular.isUndefined(g))throw new Error("games-widget GamesWidgetDependencies Provider: Must define Translate function! Please define them by calling GamesWidgetDependenciesProvider.setTranslate");if(angular.isUndefined(h))throw new Error("games-widget GamesWidgetDependencies Provider: Must define gaming endpoints! Please define them by calling GamesWidgetDependenciesProvider.setEndpoints");this.getGTM=function(){return f},this.getTranslate=function(){return g},this.getEndpoints=function(){return h},this.getApplicationKey=function(){return i}}return a.setGTM=b,a.setTranslate=c,a.setEndpoints=d,a.setApplicationKey=e,a}]}]),angular.module("games-widget").provider("GamesWidgetService",function(){"use strict";var a,b,c,d=function(a){c=a};this.setAssetsDomain=d,this.$get=["$http","GamesWidgetDependencies","GAMES_WIDGET.CONFIG",function(e,f,g){function h(){function d(a){var b=angular.isDefined(a.host)&&angular.isString(a.host),c=angular.isDefined(a.port)&&(!a.port||angular.isNumber(a.port)),d=angular.isDefined(a.path)&&angular.isString(a.path),e=[];return b&&c&&d?(e.push(a.host),angular.isNumber(a.port)&&e.push(":",a.port),e.push(a.path),e.join("")):null}function h(c,f){var h={contentType:"application/json",timeout:i,params:{},headers:{"X-Application":b},data:"",withCredentials:!0},j="";return c&&"BF"===f&&(j=g.ENDPOINT_DATA.EDS),j&&(h.data=JSON.stringify(j)),e(angular.extend(h,{method:a.method||"POST",url:d(a),cache:!1}))}var j=new f;if(a=j.getEndpoints(),b=j.getApplicationKey(),angular.isUndefined(c)||!angular.isString(c))throw new Error("games-widget GamesWidgetService Provider: Must define assets server domain! Please define them by calling GamesWidgetServiceProvider.setAssetsDomain");this.getAssetsDomain=function(){return c},this.getPlayGamesData=function(a,b){return h(a,b).then(function(c){var d={grid:[],tabs:[]};return a&&"BF"===b?d.grid=c.data&&c.data[0]&&c.data[0].result?c.data[0].result:[]:(d.grid=c.data&&c.data.grid?c.data.grid:[],d.tabs=c.data&&c.data.tabs?c.data.tabs:[]),{games:d.grid.map(function(a){return{name:a.name||"",image:{alt:a.image&&a.image.alt?a.image.alt:"",caption:a.image&&a.image.caption?a.image.caption:"",url:a.image&&a.image.url?a.image.url:""},launcherType:a.launcherType||"",fullGame:{code:a.fullCode,launchUrl:a.fullSizeGameLaunchUrl},miniGame:{code:a.miniCode,launchUrl:a.miniGameLaunchUrl},externalLink:{launchUrl:a.externalLinkUrl,openType:a.openType}}}),tabs:d.tabs.map(function(a){return{id:a.id||"",name:a.name||"",url:a.customLinkUrl||"",label:a.customLinkLabel||""}})}})}}var i=3e3;return h.setAssetsDomain=d,h}]}),angular.module("games-widget").run(["$templateCache",function(a){"use strict";a.put("COMPONENT_TEMPLATE.gamesWidget.play-games-no-tabs-view.html",'<section class="mod-games-widget {{::noTabsCtrl.brand }} {{::noTabsCtrl.layout }} games-widget no-tabs"><div class="container" ng-if="noTabsCtrl.data.games.length > 0"><div class="widget-header">{{::"I18N.GAMES_WIDGET.WIDGET_TITLE"|gwxTranslate}}</div><div class="widget-content"><div ng-repeat="game in noTabsCtrl.data.games" class="game-item"><img ng-src="{{::(noTabsCtrl.data.assetsDomain + game.image.url)}}" alt="{{::game.image.alt}}" class="game-item-image" caption="{{::game.image.caption}}"><div class="game-item-overlay"><div class="game-item-overlay-cta-wrapper" ng-if="!game.isFullGame"><a ng-href="{{::game.externalLink.launchUrl}}" target="_blank" ng-click="events.openExternalLink($event, game, $index + 1)" class="game-item-primary-cta game-item-play-full">{{::"I18N.GAMES_WIDGET.CLAIM_NOW"|gwxTranslate}}</a></div><div class="game-item-overlay-cta-wrapper" ng-if="game.isFullGame"><a ng-href="{{::game.fullGame.launchUrl}}" target="_blank" ng-click="events.openFullSizeGame($event, game, $index + 1)" class="game-item-primary-cta game-item-play-full">{{::"I18N.GAMES_WIDGET.PLAY_NOW"|gwxTranslate}}</a></div></div></div></div><div class="widget-footer" ng-if="noTabsCtrl.layout !== \'horizontal\'"><span class="widget-footer-label" ng-click="events.toggleList(!noTabsCtrl.data.expanded)">{{noTabsCtrl.data.toggleListLabelText}}<span class="widget-footer-arrow svg-chevron-up-gray" ng-class="{\'list-expanded\': noTabsCtrl.data.expanded}"></span></span></div></div></section>'),a.put("COMPONENT_TEMPLATE.gamesWidget.play-games-with-tabs-view.html",'<section class="mod-games-widget {{::withTabsCtrl.brand }} games-widget with-tabs"><div class="container" ng-if="withTabsCtrl.data.games.length > 0"><div class="widget-header">{{::"I18N.GAMES_WIDGET.PLAY_BETFAIR_GAMES_TITLE"|gwxTranslate}}</div><div class="widget-content"><div class="widget-tabs tabs-count-{{withTabsCtrl.data.tabs.length}}"><div class="widget-tab {{tab.tabClass}}" ng-repeat="tab in withTabsCtrl.data.tabs" ng-class="{\'selected\': tab.isActive()}" ng-click="events.selectTab(tab.getIndex())">{{::tab.translatedName}}</div></div><div class="widget-tabs-content"><div class="widget-tab-content" ng-class="{\'selected\': tab.isActive()}" ng-repeat="tab in withTabsCtrl.data.tabs"><div ng-repeat="game in tab.games" class="game-item" ng-mouseenter="events.onGameTileHover(game, $index + 1)"><img ng-src="{{::(noTabsCtrl.data.assetsDomain + game.image.url)}}" alt="{{::game.image.alt}}" class="game-item-image" caption="{{::game.image.caption}}"><div class="game-item-overlay"><div class="game-item-overlay-cta-wrapper"><a ng-href="{{::game.fullGame.launchUrl}}" target="_blank" ng-click="events.openFullSizeGame($event, game, $index + 1)" class="game-item-primary-cta {{::game.fullGame.ctaLabelClass}}">{{::game.fullGame.ctaLabel}}</a></div></div></div><div class="widget-footer"><a class="widget-footer-label" ng-if="::tab.linkUrl" href="#" ng-href="{{::tab.linkUrl}}" target="_blank" ng-click="events.onNavigatedTo(tab)">{{::tab.linkLabel}}<span class="widget-footer-arrow svg-icon-arrow-right"></span></a></div></div></div></div></div></section>');
}]),!function d(a,b,c){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,d,a,b,c)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<c.length;g++)e(c[g]);return e}({1:[function(a,b,c){!function(a,c){"function"==typeof define&&define.amd?define([],function(){return a.svg4everybody=c()}):"object"==typeof b&&b.exports?b.exports=c():a.svg4everybody=c()}(this,function(){function a(a,b,c){if(c){var d=document.createDocumentFragment(),e=!b.hasAttribute("viewBox")&&c.getAttribute("viewBox");e&&b.setAttribute("viewBox",e);for(var f=c.cloneNode(!0);f.childNodes.length;)d.appendChild(f.firstChild);a.appendChild(d)}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=b._cachedDocument;c||(c=b._cachedDocument=document.implementation.createHTMLDocument(""),c.body.innerHTML=b.responseText,b._cachedTarget={}),b._embeds.splice(0).map(function(d){var e=b._cachedTarget[d.id];e||(e=b._cachedTarget[d.id]=c.getElementById(d.id)),a(d.parent,d.svg,e)})}},b.onreadystatechange()}function c(c){function e(){for(var c=0;c<o.length;){var h=o[c],i=h.parentNode,j=d(i),k=h.getAttribute("xlink:href")||h.getAttribute("href");if(!k&&g.attributeName&&(k=h.getAttribute(g.attributeName)),j&&k){if(f)if(!g.validate||g.validate(k,j,h)){i.removeChild(h);var l=k.split("#"),q=l.shift(),r=l.join("#");if(q.length){var s=m[q];s||(s=m[q]=new XMLHttpRequest,s.open("GET",q),s.send(),s._embeds=[]),s._embeds.push({parent:i,svg:j,id:r}),b(s)}else a(i,j,document.getElementById(r))}else++c,++p}else++c}(!o.length||o.length-p>0)&&n(e,67)}var f,g=Object(c),h=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,i=/\bAppleWebKit\/(\d+)\b/,j=/\bEdge\/12\.(\d+)\b/,k=/\bEdge\/.(\d+)\b/,l=window.top!==window.self;f="polyfill"in g?g.polyfill:h.test(navigator.userAgent)||(navigator.userAgent.match(j)||[])[1]<10547||(navigator.userAgent.match(i)||[])[1]<537||k.test(navigator.userAgent)&&l;var m={},n=window.requestAnimationFrame||setTimeout,o=document.getElementsByTagName("use"),p=0;f&&e()}function d(a){for(var b=a;"svg"!==b.nodeName.toLowerCase()&&(b=b.parentNode););return b}return c})},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates.js");var e=a("svg4everybody"),f=d(e),g=a("./directives/calc-max-number-of-children-directive.js"),h=d(g),i=a("./directives/hide-element-directive.js"),j=d(i),k=a("./directives/bf-todays-racing-directive.js"),l=d(k),m=a("./controllers/bf-todays-racing-controller.js"),n=d(m);(0,f["default"])();var o=angular.module("bfTodaysRacing",["bfTodaysRacingTemplates","betfair.lodash"]);o.directive("hideElement",j["default"]),o.directive("calcMaxNumberOfChildren",h["default"]),o.directive("bfTodaysRacing",l["default"]),o.controller("BF.TodaysRacingController",n["default"])},{"./controllers/bf-todays-racing-controller.js":3,"./directives/bf-todays-racing-directive.js":4,"./directives/calc-max-number-of-children-directive.js":5,"./directives/hide-element-directive.js":6,"./templates.js":7,svg4everybody:1}],3:[function(a,b,c){"use strict";function d(a){function b(b){return b?b.meetingsLength||a.size(b.meetings):0}function c(a){return r[a]||a.toLowerCase()}function d(a){var b=angular.isArray(a)&&a.length>0;return b?a[0]:null}function e(b){var c=a.get(p.data.activeCountry,"countryCodes");p.data.activeCountry=b,p.onTabClickCallback&&p.onTabClickCallback({currentCountryCode:c,newCountryCode:b.countryCodes})}function f(a,b,c,d){p.onRaceClickCallback&&p.onRaceClickCallback({countryCodes:a,meetingName:b,raceStartTime:c,raceLink:d})}function g(a){q=a}function h(){p.data.isMoreDropdownVisible=!p.data.isMoreDropdownVisible}function i(){p.data.isMoreDropdownVisible=!0}function j(){p.data.isMoreDropdownVisible=!1}function k(){return angular.isArray(p.countries)&&p.countries.length>q}function l(){if(!angular.isArray(p.countries)||0===p.countries.length)return 0;var a=Math.min(q,p.countries.length);return k()?a-1:a}function m(a){return angular.isArray(p.countries)&&p.countries.length>0&&p.countries.indexOf(a)>=l()}function n(a){p.data.selectedSchedule=a,p.onScheduleClickCallback&&p.onScheduleClickCallback({scheduleClicked:a})}function o(a){return angular.isArray(a)&&a.length>1}var p=this,q=0,r={BRA:"br",JPN:"jp",FRA:"fr",ARG:"ar",AUS:"au",CAN:"ca",CHL:"cl",GER:"de",HKG:"hk",IRE:"ie",NZL:"nz",RSA:"za",SGP:"sg",UAE:"ae",URU:"uy",USA:"us",ITA:"it",TUR:"tr",CHE:"ch",CZE:"cz",SWE:"se",IND:"in",QAT:"qa"},s={TODAY:"TODAY",TOMORROW:"TOMORROW",AFTER_TOMORROW:"AFTER_TOMORROW"};p.$onChanges=function(a){a.countries&&(p.data.activeCountry=d(a.countries.currentValue))},p.data={activeCountry:d(p.countries),isMoreDropdownVisible:!1,selectedSchedule:p.selectedSchedule||s.TODAY,SCHEDULE_OPTIONS:s},p.api={onTabClick:e,onRaceClick:f,onAllowedNumberOfTabsChange:g,showMoreDropdown:i,hideMoreDropdown:j,toggleMoreDropdown:h,inMoreDropdown:m,hasMoreTab:k,calcTabsSize:l,getCountryCode:c,getMeetingsLength:b,onScheduleClick:n,isCountryGroup:o}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.Lodash"],c["default"]=d},{}],4:[function(a,b,c){"use strict";function d(){return{restrict:"EA",templateUrl:"/views/bf-todays-racing.html",controller:"BF.TodaysRacingController",bindToController:{labels:"&",countries:"<",allowedTabsUpdateTrigger:"@",showRacetrackConditions:"=",onTabClickCallback:"&?",onRaceClickCallback:"&?",onScheduleClickCallback:"&?",selectedSchedule:"@",isLoadingCountries:"<",isLoadingMeetings:"<"},scope:{},controllerAs:"ctrl"}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],5:[function(a,b,c){"use strict";function d(a,b){function c(a,b){return Math.floor(a/b)}function d(a){return parseInt(a,10)+g}function e(a){var b=c(a.offsetWidth,j);k(b)}var f=120,g=5,h=50,i={TRIGGER_FUNCTION_MANDATORY:"onMaxNumberOfChildrenChange is mandatory"},j=void 0,k=void 0;return{restrict:"A",scope:{onMaxNumberOfChildrenChange:"&?",tabSize:"@",allowedTabsUpdateTrigger:"@"},link:function(c,g){if(!angular.isDefined(c.onMaxNumberOfChildrenChange))throw new Error(i.TRIGGER_FUNCTION_MANDATORY);c.tabSize=c.tabSize||f;var l=g.parent()[0],m=e.bind(null,l);j=d(c.tabSize),k=c.onMaxNumberOfChildrenChange();var n=b.throttle(function(){m(),c.$applyAsync()},h);angular.element(a).unbind("resize",n).bind("resize",n),angular.isDefined(c.allowedTabsUpdateTrigger)&&c.$on(c.allowedTabsUpdateTrigger,m),m(),g.on("$destroy",function(){angular.element(a).unbind("resize",n)})}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$window","BF.Lodash"],c["default"]=d},{}],6:[function(a,b,c){"use strict";function d(a){return{restrict:"A",link:function(b,c,d){var e=function(){return b.$apply(d.hideElement)},f=function(a){return a.stopPropagation()};c.bind("click",f),a.unbind("click",e).bind("click",e),c.on("$destroy",function(){c.unbind("click",f),a.unbind("click",e)})}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$document"],c["default"]=d},{}],7:[function(a,b,c){"use strict";b.exports=angular.module("bfTodaysRacingTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-todays-racing.html",'<section class="mod-todays-racing"><div class="header"><span class="header-title">{{ctrl.labels().title}}</span><div class="header-schedule-filters"><button class="schedule-filter-button today-races" title="{{::ctrl.labels().todayButton}}" data-ng-class="{\'active\':ctrl.data.selectedSchedule === ctrl.data.SCHEDULE_OPTIONS.TODAY}" data-ng-disabled="ctrl.isLoadingCountries" data-ng-click="ctrl.api.onScheduleClick(ctrl.data.SCHEDULE_OPTIONS.TODAY)">{{::ctrl.labels().todayButton}}</button> <button class="schedule-filter-button tomorrow-races" title="{{::ctrl.labels().tomorrowButton}}" data-ng-class="{\'active\':ctrl.data.selectedSchedule === ctrl.data.SCHEDULE_OPTIONS.TOMORROW}" data-ng-disabled="ctrl.isLoadingCountries" data-ng-click="ctrl.api.onScheduleClick(ctrl.data.SCHEDULE_OPTIONS.TOMORROW)">{{::ctrl.labels().tomorrowButton}}</button> <button class="schedule-filter-button after-tomorrow-races" title="{{::ctrl.labels().afterTomorrowButton}}" data-ng-class="{\'active\':ctrl.data.selectedSchedule === ctrl.data.SCHEDULE_OPTIONS.AFTER_TOMORROW}" data-ng-disabled="ctrl.isLoadingCountries" data-ng-click="ctrl.api.onScheduleClick(ctrl.data.SCHEDULE_OPTIONS.AFTER_TOMORROW)">{{::ctrl.labels().afterTomorrowButton}}</button></div></div><div data-ng-if="!ctrl.isLoadingCountries"><div data-ng-if="ctrl.countries && ctrl.countries.length > 0"><div data-ng-include="\'/views/partials/tabs.html\'"></div><div data-ng-include="\'/views/partials/tabs-content.html\'"></div></div><div class="empty-content" data-ng-if="!ctrl.countries || ctrl.countries.length === 0"><span class="no-content-message">{{::ctrl.labels().noCountryContent}}</span></div></div><div class="todays-racing-loading-countries" data-ng-if="ctrl.isLoadingCountries"></div></section>'),a.put("/views/partials/tabs-content.html",'<div class="country-content"><li class="meeting-item" data-ng-repeat="meeting in ctrl.data.activeCountry.meetings" data-ng-if="ctrl.api.getMeetingsLength(ctrl.data.activeCountry) > 0"><div class="meeting-info"><div class="meeting-description"><div class="meeting-label">{{meeting.venue}}</div><div class="racetrack-conditions" data-ng-show="ctrl.showRacetrackConditions">{{meeting.racetrackConditions}}</div></div><div class="live-video-icon" title="{{::ctrl.labels().liveVideo}}" data-ng-if="meeting.liveVideoAvailable"><svg class="icon"><use xlink:href="" data-ng-href="/resources/eds/bundle/images/sprite-bf-todays-racing_3641_.svg#icons-live-video"/></svg></div></div><ul class="race-list"><li class="race-information" data-ng-repeat="race in meeting.races"><a href="{{race.link}}" class="race-link" data-ng-click="ctrl.api.onRaceClick(ctrl.data.activeCountry.countryCodes, meeting.venue, race.hour, race.link)" data-ng-class="{\n                    \'inplay-state\': race.isInplay,\n                    \'results-state\': race.hasResults\n                }"><span class="inplay-icon" data-ng-if="race.isInplay"><svg class="icon"><use xlink:href="" data-ng-href="/resources/eds/bundle/images/sprite-bf-todays-racing_3641_.svg#icons-inplay"/></svg> </span><span class="label">{{race.hour}}</span> <span class="results-icon" data-ng-if="race.hasResults"><svg class="icon"><use xlink:href="" data-ng-href="/resources/eds/bundle/images/sprite-bf-todays-racing_3641_.svg#icons-lolipop"/></svg></span></a></li></ul></li><div class="empty-content" data-ng-if="!ctrl.isLoadingMeetings && !(ctrl.api.getMeetingsLength(ctrl.data.activeCountry) > 0)"><span class="no-content-message">{{::ctrl.labels().noCountryContent}}</span></div><div class="todays-racing-loading-meetings" data-ng-if="ctrl.isLoadingMeetings"></div></div>'),a.put("/views/partials/tabs.html",'<ul calc-max-number-of-children="" on-max-number-of-children-change="ctrl.api.onAllowedNumberOfTabsChange" tab-size="85" class="country-tabs-container" allowed-tabs-update-trigger="{{ctrl.allowedTabsUpdateTrigger}}"><li class="country-tab" data-ng-repeat="country in ctrl.countries | limitTo : ctrl.api.calcTabsSize() : 0" data-ng-class="{active: country === ctrl.data.activeCountry}" data-ng-click="ctrl.api.onTabClick(country)"><div class="tab-wrapper" data-ng-if="!ctrl.api.isCountryGroup(country.countryCodes)"><svg class="flag"><use xlink:href="" data-ng-href="/resources/eds/bundle/images/sprite-bf-todays-racing_3641_.svg#country-flags-{{::ctrl.api.getCountryCode(country.countryCodes[0])}}"/></svg><div class="country-label">{{::country.countryCodes[0]}} ({{ctrl.api.getMeetingsLength(country)}})</div></div><div class="tab-wrapper grouped-countries-tab-wrapper" data-ng-if="ctrl.api.isCountryGroup(country.countryCodes)"><svg class="flag" data-ng-repeat="countryCode in country.countryCodes"><use xlink:href="" data-ng-href="/resources/eds/bundle/images/sprite-bf-todays-racing_3641_.svg#country-flags-{{::ctrl.api.getCountryCode(countryCode)}}"/></svg><div class="country-label"><span data-ng-repeat="countryCode in country.countryCodes">{{::countryCode}} <span data-ng-if="!$last">& </span></span><span>({{ctrl.api.getMeetingsLength(country)}})</span></div></div></li><li class="country-tab more" hide-element="ctrl.api.hideMoreDropdown()" data-ng-class="{active: ctrl.data.isMoreDropdownVisible || ctrl.api.inMoreDropdown(ctrl.data.activeCountry)}" data-ng-if="ctrl.api.hasMoreTab()" data-ng-click="ctrl.api.toggleMoreDropdown()"><div class="tab-wrapper"><span class="more-label" data-ng-if="!ctrl.api.inMoreDropdown(ctrl.data.activeCountry)">More</span><div class="more-active-country" data-ng-if="ctrl.api.inMoreDropdown(ctrl.data.activeCountry)"><svg class="flag" data-ng-if="!ctrl.api.isCountryGroup(moreCountry.countryCodes)" data-ng-repeat="moreCountry in ctrl.countries | limitTo : ctrl.countries.length - ctrl.api.calcTabsSize() + 1 : ctrl.api.calcTabsSize()" data-ng-show="moreCountry.countryCodes === ctrl.data.activeCountry.countryCodes"><use xlink:href="" data-ng-href="/resources/eds/bundle/images/sprite-bf-todays-racing_3641_.svg#country-flags-{{::ctrl.api.getCountryCode(moreCountry.countryCodes[0])}}"/></svg><div class="country-label">{{ctrl.data.activeCountry.countryCodes[0]}} ({{ctrl.api.getMeetingsLength(ctrl.data.activeCountry)}})</div></div><svg class="more-icon"><use xlink:href="" data-ng-href="/resources/eds/bundle/images/sprite-bf-todays-racing_3641_.svg#icons-arrow"/></svg></div><ul class="more-dropdown" data-ng-show="ctrl.data.isMoreDropdownVisible"><li class="more-country-tab" data-ng-if="!ctrl.api.isCountryGroup(moreCountry.countryCodes)" data-ng-repeat="moreCountry in ctrl.countries | limitTo : ctrl.countries.length - ctrl.api.calcTabsSize() + 1 : ctrl.api.calcTabsSize()" data-ng-click="ctrl.api.onTabClick(moreCountry)"><svg class="more-flag"><use xlink:href="" data-ng-href="/resources/eds/bundle/images/sprite-bf-todays-racing_3641_.svg#country-flags-{{::ctrl.api.getCountryCode(moreCountry.countryCodes[0])}}"/></svg> <span class="country-label">{{::moreCountry.countryCodes[0]}} ({{ctrl.api.getMeetingsLength(moreCountry)}})</span></li></ul></li></ul>')}])},{}]},{},[2]),!function e(a,b,c){function d(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return d(c?c:b)},k,k.exports,e,a,b,c)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<c.length;g++)d(c[g]);return d}({1:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],function(){return a.svg4everybody=d()}):"object"==typeof c?b.exports=d():a.svg4everybody=d()}(this,function(){function a(a,b){if(b){var c=document.createDocumentFragment(),d=!a.getAttribute("viewBox")&&b.getAttribute("viewBox");d&&a.setAttribute("viewBox",d);for(var e=document.importNode?document.importNode(b,!0):b.cloneNode(!0);e.childNodes.length;)c.appendChild(e.firstChild);a.appendChild(c)}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=b._cachedDocument;c||(c=b._cachedDocument=document.implementation.createHTMLDocument(""),c.body.innerHTML=b.responseText,b._cachedTarget={}),b._embeds.splice(0).map(function(d){var e=b._cachedTarget[d.id];e||(e=b._cachedTarget[d.id]=c.getElementById(d.id)),a(d.svg,e)})}},b.onreadystatechange()}function c(c){function d(){for(var c=0;c<l.length;){var g=l[c],h=g.parentNode;if(h&&/svg/i.test(h.nodeName)){var i=g.getAttribute("xlink:href");if(e&&(!f.validate||f.validate(i,h,g))){h.removeChild(g);var m=i.split("#"),n=m.shift(),o=m.join("#");if(n.length){var p=j[n];p||(p=j[n]=new XMLHttpRequest,p.open("GET",n),p.send(),p._embeds=[]),p._embeds.push({svg:h,id:o}),b(p)}else a(h,document.getElementById(o))}}else++c}k(d,67)}var e,f=Object(c),g=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,h=/\bAppleWebKit\/(\d+)\b/,i=/\bEdge\/12\.(\d+)\b/;e="polyfill"in f?f.polyfill:g.test(navigator.userAgent)||(navigator.userAgent.match(i)||[])[1]<10547||(navigator.userAgent.match(h)||[])[1]<537;var j={},k=window.requestAnimationFrame||setTimeout,l=document.getElementsByTagName("use");e&&d()}return c})},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates");var e=a("svg4everybody"),f=d(e),g=a("./directives/tooltip-guide/tooltip-guide-directive.js"),h=d(g),i=a("./directives/tooltip-guide/tooltip-guide-defaults.js"),j=d(i),k=a("./filters/trust-as-html-filter.js"),l=d(k),m=a("./providers/dom-utils.js"),n=d(m);(0,f["default"])(),angular.module("bfTooltipGuideMobile",["bfTooltipGuideTemplates","ngTouch"]).directive("tooltipGuide",h["default"]).constant("tooltipGuideDefaultsOptions",j["default"]).service("tooltipGuideDomUtilsService",n["default"]).filter("trustAsHtml",l["default"]),angular.module("bfTooltipGuide",["bfTooltipGuideTemplates"]).directive("tooltipGuide",h["default"]).constant("tooltipGuideDefaultsOptions",j["default"]).service("tooltipGuideDomUtilsService",n["default"]).filter("trustAsHtml",l["default"])},{"./directives/tooltip-guide/tooltip-guide-defaults.js":3,"./directives/tooltip-guide/tooltip-guide-directive.js":4,"./filters/trust-as-html-filter.js":5,"./providers/dom-utils.js":6,"./templates":7,svg4everybody:1}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=Object.freeze({tooltip:{initEvent:null,exitOnEsc:!0,exitOnOverlayClick:!0,keyboardNavigation:!0,swipeNavigation:!1,setTooltipFullWindowWidth:!1,enableTooltipArrow:!0,enableNavigationArrows:!0,tooltipFixedPosition:null,tooltipAnchorElement:null,tooltipAnchorMargin:20,onExitCallback:null,onInitCallback:null,onCompleteCallback:null,showDoneButton:!0,doneButtonLabel:"Done",onDoneButtonClickCallback:null,useAreYouSureStep:!1,areYouSureCancelButtonLabel:"Cancel",areYouSureCancelCallback:null,areYouSureContinueCallback:null,areYouSureContinueButtonLabel:"Continue",hideFinalStepNavigationButtons:!1},step:{bulletClass:"bullet-default"}})},{}],4:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=["bottom-right","top-right","bottom-left","top-left","right","left"],h=20,i=void 0,j=!1,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0,E=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a=a!==!1,z.useAreYouSureStep&&!a?(y.currentStep=r,y.areYouSureStepActive=!0,M()):(k.style.opacity=0,k.style.display="none",l.style.display="none","function"==typeof z.onExitCallback&&z.onExitCallback(),U())},F=function(a){if(27===a.keyCode)z.exitOnEsc===!0&&("function"==typeof z.onExitCallback&&z.onExitCallback(),E());else if(37===a.keyCode)H();else if(39===a.keyCode)G();else if(13===a.keyCode){var b=a.target||a.srcElement;b&&angular.element(b).hasClass("tooltip-prev-step")?H():b&&angular.element(b).hasClass("tooltip-step-close-button")?z.exitOnEsc===!0&&("function"==typeof z.onExitCallback&&z.onExitCallback(),E()):G(),a.preventDefault?a.preventDefault():a.returnValue=!1}},G=function(){y.areYouSureStepActive||(q<n.length-1&&!j&&q++,R())},H=function(){y.areYouSureStepActive||(q>0&&!j&&q--,R())},I=function(){var a=null,b=null,c="floating";return o?(a=f.getOffset(l),b=angular.copy(g),p.bottom+a.height>t.height&&(f.removeEntry(b,"bottom-right"),f.removeEntry(b,"bottom-left")),p.left+a.width>t.height&&(f.removeEntry(b,"bottom-left"),f.removeEntry(b,"top-left")),p.right-a.width<0&&(f.removeEntry(b,"bottom-right"),f.removeEntry(b,"top-right")),p.top-a.height<0&&(f.removeEntry(b,"top-right"),f.removeEntry(b,"top-left")),p.right+a.width>t.width&&f.removeEntry(b,"right"),p.left-p.width<0&&f.removeEntry(b,"left"),b.length>0&&(c=b[0]),c):c},J=function(){v.setAttribute("style",""),w.setAttribute("style",""),x.setAttribute("style",""),u.setAttribute("style","top: 0; left: 0; width: "+t.width+"px; height:"+t.height+"px")},K=function(){var a={};switch(z.tooltipFixedPosition){case"top":a.left=0,a.top=0;break;case"bottom":a.left=0,a.bottom=0}L(l,a)},L=function(a,b){angular.forEach(b,function(c,d){angular.isNumber(b[d])?a.style[d]=b[d]+"px":a.style[d]=null})},M=function(){if(J(),z.tooltipFixedPosition)K();else{var a=f.getOffset(l);L(l,{top:t.height/2-a.height/2,left:t.width/2-a.width/2})}},N=function(){z.enableTooltipArrow&&!z.tooltipFixedPosition?m.style.display="inherit":m.style.display="none"},O=function(){if(N(),z.tooltipFixedPosition)K();else if(B)L(l,B);else{var a=I(),b=angular.element(m),c={bottom:null,top:null,right:null,left:null},d=f.getOffset(l);switch(a){case"top-right":b.addClass("bottom"),c.top=p.top-d.height-h,c.left=p.left-d.width+p.width;break;case"top-left":b.addClass("bottom"),c.top=p.top-d.height-h,c.left=p.left;break;case"left":b.addClass("right"),c.right=p.width+h,c.top=p.top;break;case"right":b.addClass("left"),c.left=p.right+h,c.top=p.top;break;case"bottom-right":b.addClass("top"),c.top=p.bottom+h,c.left=p.left-d.width+p.width;break;case"bottom-left":b.addClass("top"),c.top=p.bottom+h,c.left=p.left}L(l,c)}},P=function(){if(k=i.querySelector("#tooltip-step-overlay"),l=i.querySelector(".tooltip-step-modal"),m=i.querySelector(".tooltip-arrow"),u=k.querySelector(".tooltip-step-overlay-top"),v=k.querySelector(".tooltip-step-overlay-bottom"),w=k.querySelector(".tooltip-step-overlay-left"),x=k.querySelector(".tooltip-step-overlay-right"),s=d[0].querySelector(z.tooltipAnchorElement),q=0,y.areYouSureStepActive=!1,s){var a=f.getOffset(s);B={top:a.bottom+z.tooltipAnchorMargin,left:a.left}}z.swipeNavigation&&angular.element(l).addClass("touch"),z.exitOnOverlayClick&&angular.element(k).on("click",E),l.style.opacity=0},Q=function(){var a=y.currentStepNumber===n.length-1;y.showNavigationButtons=!(z.hideFinalStepNavigationButtons&&a)},R=function(){j||(t=f.getWindowSize(),j=!0,b(function(){l.style.visibility="visible",y.currentStep=n[q]||null,y.currentStep.bulletClass=y.currentStep.bulletClass||A.bulletClass,y.currentStepNumber=q,Q(),a.$digest(),k.style.display="block",k.style.opacity=1,y.currentStep.element?(o=d[0].querySelector(y.currentStep.element),p=f.getOffset(o),u.setAttribute("style","top: 0; left: 0; width: "+t.width+"px; height:"+p.top+"px"),v.setAttribute("style","top: "+p.bottom+"px; left: 0; width: "+t.width+"px; height:"+(t.height-p.bottom)+"px"),w.setAttribute("style","top: "+p.top+"px; left: 0; width: "+p.left+"px; height:"+p.height+"px"),x.setAttribute("style","top: "+p.top+"px; left: "+p.right+"px; width: "+(t.width-p.right)+"px; height:"+p.height+"px"),O()):M(),l.style.opacity=1,z.setTooltipFullWindowWidth&&(l.style.width=t.width+"px"),"function"==typeof z.onCompleteCallback&&z.onCompleteCallback(),j=!1},500))},S=function(){P(),R(),"function"==typeof z.onInitCallback&&z.onInitCallback()},T=function(){C&&b.cancel(C),C=b(R,500)},U=function(){D&&D(),angular.element(c).off("resize",T),angular.element(c).off("scroll",T),z.keyboardNavigation&&angular.element(c).off("keydown",F),z.exitOnOverlayClick&&angular.element(k).off("click",E)};return{restrict:"E",transclude:!0,scope:{steps:"&",options:"&",areYouSureStep:"&"},templateUrl:"/views/tooltip-guide-directive.html",link:function(a,d){i=d[0],y=a,z=angular.copy(e.tooltip),A=angular.copy(e.step),q=0,n=a.steps(),a.tooltipSteps=n,angular.extend(z,a.options()),a.tooltipOptions=z,r=z.useAreYouSureStep?a.areYouSureStep():void 0,y.areYouSureStepActive=!1,z.initEvent?D=a.$on(z.initEvent,function(){b(S)}):b(S),a.events={nextStep:G,prevStep:H,swipeRight:function(){z.swipeNavigation&&H()},swipeLeft:function(){z.swipeNavigation&&G()},closeTooltipStep:function(){var a=!1;y.areYouSureStepActive&&(a=!0),E(a)},doneButtonClick:function(){E(!0),"function"==typeof z.onDoneButtonClickCallback&&z.onDoneButtonClickCallback()},areYouSureCancelButtonClick:function(){y.areYouSureStepActive=!1,R(),"function"==typeof z.areYouSureCancelCallback&&z.areYouSureCancelCallback()},areYouSureContinueButtonClick:function(){E(!0),"function"==typeof z.areYouSureContinueCallback&&z.areYouSureContinueCallback()},steps:[]},n.forEach(function(b,c){a.events.steps[c]={onLeftButtonClick:b.leftButton&&b.leftButton.onClick||angular.noop}}),a.$on("$destroy",function(){U()}),z.keyboardNavigation&&angular.element(c).on("keydown",F),angular.element(c).on("resize",T),angular.element(c).on("scroll",T),C&&b.cancel(C)}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$rootScope","$timeout","$window","$document","tooltipGuideDefaultsOptions","tooltipGuideDomUtilsService"],c["default"]=d},{}],5:[function(a,b,c){"use strict";function d(a){return function(b){return a.trustAsHtml(b)}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$sce"],c["default"]=d},{}],6:[function(a,b,c){"use strict";function d(a,b){this.getOffset=function(a){return a.getBoundingClientRect()},this.getWindowSize=function(){if(a.innerWidth)return{width:a.innerWidth,height:a.innerHeight};var c=b.documentElement;return{width:c.clientWidth,height:c.clientHeight}},this.removeEntry=function(a,b){a.indexOf(b)>-1&&a.splice(a.indexOf(b),1)}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$window","$document"],c["default"]=d},{}],7:[function(a,b,c){"use strict";b.exports=angular.module("bfTooltipGuideTemplates",[]).run(["$templateCache",function(a){a.put("/views/tooltip-guide-directive.html",'<div id="tooltip-step-overlay"><div class="tooltip-step-overlay-top"></div><div class="tooltip-step-overlay-bottom"></div><div class="tooltip-step-overlay-right"></div><div class="tooltip-step-overlay-left"></div></div><div data-ng-if="tooltipOptions.swipeNavigation" data-ng-swipe-right="events.swipeRight()" data-ng-swipe-left="events.swipeLeft()"><data-ng-include src="\'/views/partials/tooltip-guide-modal.html\'"></data-ng-include></div><div data-ng-if="!tooltipOptions.swipeNavigation"><data-ng-include src="\'/views/partials/tooltip-guide-modal.html\'"></data-ng-include></div>'),a.put("/views/partials/tooltip-guide-modal.html",'<div class="tooltip-step-modal"><div class="tooltip-arrow"></div><div class="tooltip-step-header-container"><span class="tooltip-step-header" data-ng-bind-html="currentStep.title | trustAsHtml"></span> <a class="tooltip-step-close-button" data-ng-click="events.closeTooltipStep()"><svg class="close-button-icon sprite-bf-tooltip-guide-cross"><use xlink:href="/resources/eds/bundle/images/sprite-bf-tooltip-guide_3641_.svg#cross"/></svg></a></div><div class="tooltip-step-subtitle" data-ng-if="currentStep.subtitle" data-ng-bind-html="currentStep.subtitle | trustAsHtml"></div><div class="tooltip-step-body" data-ng-bind-html="currentStep.text | trustAsHtml"></div><div class="tooltip-step-bullets" data-ng-if="!areYouSureStepActive"><div class="left-container" data-ng-if="!!currentStep.leftButton"><button class="tooltip-button left-button button-{{currentStepNumber}}" data-ng-click="events.steps[currentStepNumber].onLeftButtonClick()" data-ng-bind="currentStep.leftButton.label"></button></div><div class="tooltip-navigation-buttons-container" data-ng-if="showNavigationButtons"><a class="tooltip-prev-step" data-ng-click="events.prevStep()" data-ng-if="currentStepNumber > 0 && tooltipOptions.enableNavigationArrows"><svg class="left-arrow-icon sprite-bf-tooltip-guide-arrow"><use xlink:href="/resources/eds/bundle/images/sprite-bf-tooltip-guide_3641_.svg#arrow"/></svg></a><ul class="tooltip-step-bullets-list"><li class="tooltip-step-bullets-list-item {{step.bulletClass || \'\'}}" data-ng-repeat="step in tooltipSteps"><a class="tooltip-step-bullets-anchor" data-ng-class="{\'tooltip-step-bullets-active\': currentStepNumber === $index}"></a></li></ul><a class="tooltip-next-step" data-ng-click="events.nextStep()" data-ng-if="currentStepNumber < tooltipSteps.length - 1 && tooltipOptions.enableNavigationArrows"><svg class="right-arrow-icon sprite-bf-tooltip-guide-arrow"><use xlink:href="/resources/eds/bundle/images/sprite-bf-tooltip-guide_3641_.svg#arrow"/></svg></a></div><span class="tooltip-done-step-button-container" data-ng-if="tooltipOptions.showDoneButton && currentStepNumber === tooltipSteps.length - 1"><button class="tooltip-button done-step-button" data-ng-click="events.doneButtonClick()">{{tooltipOptions.doneButtonLabel}}</button></span></div><div class="tooltip-are-you-sure-step-button-container" data-ng-if="areYouSureStepActive"><button class="tooltip-button are-you-sure-step-cancel-button" data-ng-click="events.areYouSureCancelButtonClick()" data-ng-bind-template="{{tooltipOptions.areYouSureCancelButtonLabel}}"></button> <button class="tooltip-button are-you-sure-step-continue-button" data-ng-click="events.areYouSureContinueButtonClick()" data-ng-bind-template="{{tooltipOptions.areYouSureContinueButtonLabel}}"></button></div></div>')}])},{}]},{},[2]),!function f(a,b,c){function d(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(e)return e(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return d(c?c:b)},k,k.exports,f,a,b,c)}return b[g].exports}for(var e="function"==typeof require&&require,g=0;g<c.length;g++)d(c[g]);return d}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./constants/debounce-time-constant"),f=a("./providers/bf-pin-runners-persistence-service-provider"),g=d(f),h=a("./providers/helper"),i=d(h),j=a("./providers/runners-map"),k=d(j),l=a("./providers/storage-helper"),m=d(l),n=angular.module("bfPinRunnersPersistence",["betfair.extensions","betfair.lodash"]);n.constant("BF.DEBOUNCE_TIME",e.DEBOUNCE_TIME),n.service("BF.PinRunnersPersistenceHelper",i["default"]),n.service("BF.PinRunnersPersistenceRunnersMap",k["default"]),n.service("BF.PinRunnersPersistenceStorage",m["default"]),n.provider("BF.PinRunnersPersistenceService",g["default"])},{"./constants/debounce-time-constant":2,"./providers/bf-pin-runners-persistence-service-provider":3,"./providers/helper":4,"./providers/runners-map":5,"./providers/storage-helper":6}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DEBOUNCE_TIME=1e3},{}],3:[function(a,b,c){"use strict";function d(a){var b=angular.copy(a);this.overrideDebounceTime=function(a){if(!a)throw new Error("Required parameter debounce time not provided.");b=a},this.$get=["BF.ExchangeReadOnlyClient","BF.Lodash","BF.PinRunnersPersistenceHelper","BF.PinRunnersPersistenceStorage","BF.PinRunnersPersistenceRunnersMap",function(a,c,d,e,f){function g(){i=e.setValue(f.stringify())}var h=b,i=!0,j=c.debounce(function(){var b=f.getMarkets(),c=["MARKET_DESCRIPTION"];a.getByMarkets(b,c).then(d.filterClosedMarkets.bind(this,b)).then(f.removeMarkets)["finally"](g)},h);return this.get=function(a){if(!angular.isString(a))throw new Error("Required parameter market id must be a string.");return i||g(),e.getValue().then(function(b){var c=f.fromString(b);return c[a]||[]})},this.set=function(a,b){if(angular.isString(a)&&angular.isString(b)){var c=f.update(a,b);return i=!1,j(c),i}},this}]}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.DEBOUNCE_TIME"],c["default"]=d},{}],4:[function(a,b,c){"use strict";function d(a){this.filterClosedMarkets=function(b,c){var d=[];return c?(angular.forEach(c.eventTypes,function(a){angular.forEach(a.eventNodes,function(a){angular.forEach(a.marketNodes,function(a){d.push(a.marketId)})})}),a.difference(b,d)):[]}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.Lodash"],c["default"]=d},{}],5:[function(a,b,c){"use strict";function d(a){var b=this,c={};this.getMarkets=function(){return a.map(c,function(a,b){return b})},this.getRunners=function(a){return c[a]||[]},this.hasRunner=function(a,b){return!!c[a]&&c[a].indexOf(b)>-1},this.addRunner=function(a,b){return c.hasOwnProperty(a)||(c[a]=[]),c[a].push(b),c},this.removeRunner=function(a,b){var d=(c[a]||"").indexOf(b);return d!==-1&&c[a].splice(d,1),c},this.removeMarkets=function(a){return angular.isArray(a)||(a=[a]),angular.forEach(a,function(a){delete c[a]}),c},this.fromString=function(a){if(!a)return{};c={};var d=a.split(";").filter(function(a){
return a.length>0});return angular.forEach(d,function(a){var b=a.split("|"),d=e(b,2),f=d[0],g=d[1];angular.forEach(g.split(","),function(a){c=this.addRunner(f,a)},this)},b),c},this.stringify=function(){return a.reduce(c,function(a,b,c){return a+=c+"|"+b+";"},"")},this.update=function(a,b){return this.hasRunner(a,b)?(this.removeRunner(a,b),0===c[a].length&&this.removeMarkets(a)):this.addRunner(a,b),c}}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();d.$inject=["BF.Lodash"],c["default"]=d},{}],6:[function(a,b,c){"use strict";function d(a,b){var c="sports.pinrunners";this.getValue=function(){return a.resolve(b.getItem(c))},this.setValue=function(a){return b.setItem(c,a),!0}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$q","BF.LocalStorage"],c["default"]=d},{}]},{},[1]),!function g(a,b,c){function d(f,h){if(!b[f]){if(!a[f]){var i="function"==typeof require&&require;if(!h&&i)return i(f,!0);if(e)return e(f,!0);var j=new Error("Cannot find module '"+f+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[f]={exports:{}};a[f][0].call(k.exports,function(b){var c=a[f][1][b];return d(c?c:b)},k,k.exports,g,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],function(){return a.svg4everybody=d()}):"object"==typeof c?b.exports=d():a.svg4everybody=d()}(this,function(){function a(a,b){if(b){var c=document.createDocumentFragment(),d=!a.getAttribute("viewBox")&&b.getAttribute("viewBox");d&&a.setAttribute("viewBox",d);for(var e=document.importNode?document.importNode(b,!0):b.cloneNode(!0);e.childNodes.length;)c.appendChild(e.firstChild);a.appendChild(c)}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=b._cachedDocument;c||(c=b._cachedDocument=document.implementation.createHTMLDocument(""),c.body.innerHTML=b.responseText,b._cachedTarget={}),b._embeds.splice(0).map(function(d){var e=b._cachedTarget[d.id];e||(e=b._cachedTarget[d.id]=c.getElementById(d.id)),a(d.svg,e)})}},b.onreadystatechange()}function c(c){function d(){for(var c=0;c<l.length;){var g=l[c],h=g.parentNode;if(h&&/svg/i.test(h.nodeName)){var i=g.getAttribute("xlink:href");if(e&&(!f.validate||f.validate(i,h,g))){h.removeChild(g);var m=i.split("#"),n=m.shift(),o=m.join("#");if(n.length){var p=j[n];p||(p=j[n]=new XMLHttpRequest,p.open("GET",n),p.send(),p._embeds=[]),p._embeds.push({svg:h,id:o}),b(p)}else a(h,document.getElementById(o))}}else++c}k(d,67)}var e,f=Object(c),g=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,h=/\bAppleWebKit\/(\d+)\b/,i=/\bEdge\/12\.(\d+)\b/;e="polyfill"in f?f.polyfill:g.test(navigator.userAgent)||(navigator.userAgent.match(i)||[])[1]<10547||(navigator.userAgent.match(h)||[])[1]<537;var j={},k=window.requestAnimationFrame||setTimeout,l=document.getElementsByTagName("use");e&&d()}return c})},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates.js");var e=a("svg4everybody"),f=d(e),g=a("./directives/bf-sports-highlights-directive.js"),h=d(g),i=a("./controllers/bf-sports-highlights-controller.js"),j=d(i),k=a("./providers/sports-highlights-provider.js"),l=d(k),m=a("./providers/sports-highlights-capi-client-provider.js"),n=d(m),o=a("./providers/facet-requests-factory.js"),p=d(o),q=a("./providers/sports-highlights-analytics-factory.js"),r=d(q),s=a("./providers/seas-broadcasts-request-service.js"),t=d(s),u=a("./providers/view-mapper-factory.js"),v=d(u),w=a("./constants/config.js");(0,f["default"])(),angular.module("bfSportsHighlights",["bfSportsHighlightsTemplates","ngCookies","betfair.extensions","pascalprecht.translate","bfLink","bfEventLine"]).directive("bfSportsHighlights",h["default"]).controller("BF.SportsHighlightsController",j["default"]).provider("BF.SportsHighlights",l["default"]).provider("BF.SportsHighlightsCapiContent",n["default"]).factory("BF.FacetRequestsFactory",p["default"]).factory("BF.ViewMapperFactory",v["default"]).factory("BF.SportsHighlightsAnalyticsFactory",r["default"]).service("BF.SeasBroadcastsRequestService",t["default"]).value("BF.EventTypeNames",{}).constant("BF.SPORTS_HIGHLIGHTS.CONFIG",w.CONFIG).config(["BF.PollingProvider",function(a){a.extendConfiguration({"BF.SeasClient":{scoresAndBroadcast:"BF.SeasScoresAndBroadcastPoller",eventTimelines:"BF.SeasScoresAndEventTimelinesPoller",scores:"BF.SeasScoresAndEventTimelinesPoller"}}),a.extendConfiguration({"BF.ExchangeReadOnlyClient":{getByMarkets:"BF.ExchangeReadOnlyByMarketsPoller"}})}])},{"./constants/config.js":3,"./controllers/bf-sports-highlights-controller.js":4,"./directives/bf-sports-highlights-directive.js":5,"./providers/facet-requests-factory.js":6,"./providers/seas-broadcasts-request-service.js":7,"./providers/sports-highlights-analytics-factory.js":8,"./providers/sports-highlights-capi-client-provider.js":9,"./providers/sports-highlights-provider.js":10,"./providers/view-mapper-factory.js":11,"./templates.js":12,svg4everybody:1}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.CONFIG={layouts:{wide:{columns:3},narrow:{breakpoint:1200,columns:2}},marketTypesFacetFilter:["MATCH_ODDS","MATCH_ODDS_UNMANAGED","MONEYLINE","MONEY_LINE","TO_QUALIFY"],maxNumberEventsPerColumn:5,maxNumberOfSports:9,eventTypesList:[1,1,2]}},{}],4:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){function i(a,c){var d=b(a,{eventTypeId:c.eventTypeId,marketId:c.primaryMarketId});f.eventMarketLink({label:c.eventName,module:"featured sports - "+g.type[c.eventTypeId].eventTypeName,destinationUrl:d}),h.url(d)}function j(a){var b=void 0;return a.reduce(function(a,c){var d=c[0].eventTypeId;return b===d?e.last(a).columns++:a.push({eventTypeId:d,columns:1}),b=e.last(a).eventTypeId,a},[])}function k(a){return a.reduce(function(a,b){return a+b.columns},0)}function l(a){m.data.eventsList=a,m.data.sportsList=j(a).map(function(a){return{name:c[a.eventTypeId],eventTypeId:a.eventTypeId,columns:a.columns}}),m.data.totalColumns=k(m.data.sportsList)}var m=this,n=parseInt(d.sortOrder,10);m.data={totalColumns:0,sportsList:[],eventsList:[]},m.events={followMarketLink:function(a){return i("MARKET",a)}},d.$watch("layoutEnvironment",function(b){return a.retrieveModuleSportsHighlights(n,b).then(l)})}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.SportsHighlights","BF.LinkService","BF.EventTypeNames","$scope","BF.Lodash","BF.SportsHighlightsAnalyticsFactory","BF.SPORT","$location"],c["default"]=d},{}],5:[function(a,b,c){"use strict";function d(a,b){function c(){return a.retrieveLayoutEnvironment(b.innerWidth)}function d(a){a.$applyAsync(function(){return a.layoutEnvironment=c()})}function e(a){var e=this;a.layoutEnvironment=c(),b.addEventListener("resize",angular.bind(this,d,a)),a.$on("$destroy",function(){return b.removeEventListener("resize",angular.bind(e,d,a))})}return{restrict:"E",templateUrl:"/views/bf-sports-highlights.html",controller:"BF.SportsHighlightsController",controllerAs:"shCtrl",scope:{sortOrder:"@",layoutEnvironment:"@"},link:e}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.SportsHighlights","$window"],c["default"]=d},{}],6:[function(a,b,c){"use strict";function d(a,b,c,d){function e(){var e={exchangeIds:[1],productTypes:["EXCHANGE"],marketTypeCodes:c.marketTypesFacetFilter,contentGroup:a.getExchangeContentGroup(),selectBy:"RANK",maxResults:0,attachments:["EVENT_TYPE"]},f={facets:[{type:"EVENT_TYPE",maxValues:0,skipValues:0,applyNextTo:0}],locale:a.getExchangeLocale()};return b.facetedSearch(e,f).then(function(a){var b=d.get(a,"facets[0].values",[]),c=d.get(a,"attachments.eventTypes",{});return b.map(function(a){var b=a.key.eventTypeId;return{eventTypeId:b,name:c[b].name}})})}function f(d,e){var f=function(){var a={};return function(b){var c=a[b]||0;return a[b]=c+1,c}}(),g={exchangeIds:[1],eventTypeIds:d.map(function(a){var b=a.eventTypeId;return b}),productTypes:["EXCHANGE"],marketTypeCodes:c.marketTypesFacetFilter,contentGroup:a.getExchangeContentGroup(),selectBy:"MAXIMUM_TRADED",maxResults:0},h=d.reduce(function(a,b){var c=b.eventTypeId,d=b.eventIds,g=void 0===d?[]:d,h=g.length,i={type:"EVENT_TYPE",maxValues:0,skipValues:0,applyNextTo:0,values:[c],next:{type:"EVENT",maxValues:e,skipValues:e*f(c),applyNextTo:0,values:[],next:{type:"MARKET",maxValues:1,skipValues:0,applyNextTo:0}}};return h&&a.push(angular.merge({},i,{next:{maxValues:0,skipValues:0,values:g.slice(0,e)}})),h<e&&a.push(i),a},[]);return b.facetedSearch(g,{facets:h,locale:a.getExchangeLocale()}).then(function(a){return{markets:a.attachments.markets,events:a.attachments.events}})}return{requestSportFacetRanking:e,requestEventData:f}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.User","BF.FacetExchangeClient","BF.SPORTS_HIGHLIGHTS.CONFIG","BF.Lodash"],c["default"]=d},{}],7:[function(a,b,c){"use strict";function d(a,b,c,d){function e(a){var e=c.getExchangeContentGroup().regionCode||g,h=c.getLocaleCode(),i=c.getCountryCode();return b.scoresAndBroadcast(a,e,h).then(function(a){var b={};return a.forEach(function(a){var c=a.eventId,e=d.get(a,"broadcasts",{}),g=d.chain(e.tv).map(function(a){return a.channel}).uniq().join(", ").value();b[c]={isLiveVideoAvailable:f.indexOf(i)===-1&&e.isLiveVideoAvailable,broadcastTvChannels:g}}),b})}var f=[a.au.alpha2,a.nz.alpha2],g="UK";return e}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.COUNTRY","BF.SeasClient","BF.User","BF.Lodash"],c["default"]=d},{}],8:[function(a,b,c){"use strict";function d(a,b){var c=["label","module","destinationUrl"],d=function(d){var e=b.every(c,function(a){return b.has(d,a)});e&&a.sendEvent("navigation","navigated to",d.label,{module:d.module,destinationUrl:d.destinationUrl})};return{eventMarketLink:d}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.GTagManager","BF.Lodash"],c["default"]=d},{}],9:[function(a,b,c){"use strict";function d(){var a=this,b={};return this.setEndpoint=function(c){return b.ENDPOINT=c,a},this.setWebformName=function(c){return b.WEBFORM_NAME=c,a},this.$get=["BF.Fabric","BF.Lodash",function(a,c){return function(){return a.makeRequest(b.ENDPOINT,{method:"POST",data:{webforms:[{type:b.WEBFORM_NAME}]}}).then(function(a){return c.chain(a).first().get("result",[]).value()||[]})}}],this}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],10:[function(a,b,c){"use strict";function d(a){var b=this,c=function(a){return{eventTypeId:a}},d=a.layouts,e=a.maxNumberEventsPerColumn,f=a.maxNumberOfSports,g=a.eventTypesList.map(c);this.setModulesLayout=function(a){return d=a,b},this.setMaxNumberEventsPerColumn=function(a){return e=a,b},this.setMaxNumberOfSports=function(a){return f=a,b},this.setEventTypesList=function(a){return g=a.map(c),b},this.$get=["BF.FacetRequestsFactory","BF.SportsHighlightsCapiContent","BF.ViewMapperFactory","BF.SeasBroadcastsRequestService","BF.EventTypeNames","BF.Lodash","$q",function(a,c,h,i,j,k,l){function m(a){return a.forEach(function(a){var b=a.eventTypeId,c=a.name;return j[b]=c}),a}function n(a){return a.length?a.map(function(a){var b=a.eventTypeId,c=a.eventIds;return{eventTypeId:parseInt(b,10),eventIds:c}}):g}var o=function(a){var b=a.facetSports,c=a.capiConfig,d=b.reduce(function(a,b){var d=b.eventTypeId,e=c.some(function(a){return a.eventTypeId===d});return e||a.push({eventTypeId:d}),a},[]);return[].concat(c,d).slice(0,f+c.length)},p=k.curry(function(b,c){return a.requestEventData(c,b).then(function(a){var b=a.markets,d=a.events,e=k.keys(d);return i(e).then(function(a){return angular.merge({},d,a)}).then(function(a){return{events:a,eventTypeIds:c,markets:b}})})}),q=k.curry(function(a,b){var c=b.markets,d=b.events,e=b.eventTypeIds;return h(c,d,e,a)}),r=l.all({facetSports:a.requestSportFacetRanking().then(m),capiConfig:c().then(n)["catch"](function(){return g})}).then(o).then(p(e)).then(q(e));return b.retrieveLayoutEnvironment=function(a){var b=k(a).map(function(a,b){return{envName:b,breakpoint:a.breakpoint||Number.POSITIVE_INFINITY}}).sortBy(function(a){return a.breakpoint}).value();return function(a){return k.find(b,function(b){return b.breakpoint>=a}).envName}}(d),b.retrieveModuleSportsHighlights=function(a,b){var c=d[b]&&d[b].columns||1,e=a*c,f=e+c;return r.then(function(a){return a.slice(e,f)})},b}]}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.SPORTS_HIGHLIGHTS.CONFIG"],c["default"]=d},{}],11:[function(a,b,c){"use strict";function d(a,b){var c=function(b,c){return a.find(b,{sortPriority:c})||{}},d=function(a){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{eventTypeId:a.eventTypeId,eventId:a.eventId,date:new Date(a.marketTime),inPlay:a.inplay,primaryMarketId:a.marketId,canTurnInPlay:a.canTurnInPlay,homeRunnerName:c(a.runners,1).runnerName,awayRunnerName:c(a.runners,2).runnerName,eventName:d.name,productType:"EXCHANGE",isLiveVideoAvailable:d.isLiveVideoAvailable,broadcastTvChannels:d.broadcastTvChannels,liveVideoTooltip:b.instant("I18N.SPORTS_HIGHLIGHTS.LIVE_VIDEO")}};return function(b,c,e,f){var g=a.map(e,"eventTypeId"),h=a.memoize(function(b){return a.find(e,{eventTypeId:b})||{}}),i=a.memoize(function(b){return a.filter(e,{eventTypeId:b}).length}),j=a.memoize(function(b){return a.includes(g,b)});return a.chain(b).filter(function(a){return j(a.eventTypeId)}).sortBy(function(a){var b=h(a.eventTypeId).eventIds||[],c=b.indexOf(a.eventId.toString());return c<0?-a.totalMatched:-Number.MAX_SAFE_INTEGER+c}).map(function(a){return d(a,c[a.eventId])}).groupBy("eventTypeId").map(function(b){var c=a.first(b).eventTypeId;return b.slice(0,i(c)*f)}).reduce(function(b,c){return[].push.apply(b,a.chunk(c,f)),b},[]).sortBy(function(b){var c=a.first(b).eventTypeId,d=g.indexOf(c);return g[d]=void 0,d}).value()}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.Lodash","$translate"],c["default"]=d},{}],12:[function(a,b,c){"use strict";b.exports=angular.module("bfSportsHighlightsTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-sports-highlights.html",'<article class="mod-sports-highlights"><header><ul><li class="{{\'col-\' + sport.columns + \'-\' + shCtrl.data.totalColumns}}" data-ng-repeat="sport in shCtrl.data.sportsList"><data-bf-link link-type="SPORT" event-type-id="{{::sport.eventTypeId}}" title="{{::sport.name}}" data-ng-bind="::sport.name"></data-bf-link></li></ul></header><section class="events-list"><ul class="{{\'col-1-\' + shCtrl.data.totalColumns}}" data-event-type-id="{{::events[0].eventTypeId}}" data-ng-repeat="events in shCtrl.data.eventsList"><li class="event-data" data-ng-repeat="event in events" data-ng-click="shCtrl.events.followMarketLink(event)"><data-bf-event-line event-data="event"></data-bf-event-line></li></ul></section><footer><ul><li class="{{\'col-\' + sport.columns + \'-\' + shCtrl.data.totalColumns}}" data-ng-repeat="sport in shCtrl.data.sportsList"><data-bf-link link-type="SPORT" event-type-id="{{::sport.eventTypeId}}"><span translate="I18N.SPORTS_HIGHLIGHTS.VIEW_ALL_SPORT" translate-value-sport-name="{{::sport.name}}"></span> <svg class="icon-arrow"><use xlink:href="/resources/eds/bundle/images/sprite-bf-sports-highlights_3641_.svg#chevron"/></svg></data-bf-link></li></ul></footer></article>')}])},{}]},{},[2]),!function h(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var i="function"==typeof require&&require;if(!g&&i)return i(f,!0);if(e)return e(f,!0);var j=new Error("Cannot find module '"+f+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[f]={exports:{}};a[f][0].call(k.exports,function(b){var c=a[f][1][b];return d(c?c:b)},k,k.exports,h,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){!function d(b,c,e){function f(h,i){if(!c[h]){if(!b[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=c[h]={exports:{}};b[h][0].call(l.exports,function(a){var c=b[h][1][a];return f(c?c:a)},l,l.exports,d,b,c,e)}return c[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./directives/tooltip-directive.js"),f=d(e),g=angular.module("bfTooltip",[]);g.directive("bfTooltip",f["default"])},{"./directives/tooltip-directive.js":2}],2:[function(a,b,c){"use strict";function d(){return{restrict:"EA",transclude:!0,scope:{options:"@",bfTooltip:"@",defaultOptions:"=?defaultOptions",scrollContainer:"@scroll",closeButton:"@",visible:"="},template:'<div class="bf-tooltip-wrapper {{ defaultOptions }}"><div class="bf-tooltip" ng-class="{\'has-close-button\':closeButton==\'true\' , \'visible\':visible==true}"><div class="text" ng-transclude></div><div class="close-button" ng-click="events.closeTooltip()" ng-if="closeButton"></div></div></div>',link:function(a,b,c,d,e){function f(){a.$apply(function(a){j=i.prop("scrollTop")+k.prop("offsetHeight"),j>b.parent().prop("offsetTop")?a.defaultOptions=l.replace("top","bottom"):a.defaultOptions=l})}function g(){a.visible=!1}var h,i,j,k,l="top left";a.options&&(l=a.options),a.defaultOptions=l,c.bfTooltip&&e(a,function(c){c.addClass(b.attr("class")),b.attr("class",""),b.after(c),h=angular.element(b[0].querySelector(".text")),h.html(a.bfTooltip)}),a.scrollContainer&&(i=angular.element(document.body.querySelector(a.scrollContainer)),k=angular.element(b[0].querySelector(".bf-tooltip")),i.on("scroll",f)),b.parent().addClass("bf-tooltip-parent"),a.$on("$destroy",function(){angular.isElement(i)&&i.off("scroll",f)}),a.events={closeTooltip:g}}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}]},{},[1])},{}],2:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],function(){return a.svg4everybody=d()}):"object"==typeof c?b.exports=d():a.svg4everybody=d()}(this,function(){function a(a,b){if(b){var c=document.createDocumentFragment(),d=!a.getAttribute("viewBox")&&b.getAttribute("viewBox");d&&a.setAttribute("viewBox",d);for(var e=document.importNode?document.importNode(b,!0):b.cloneNode(!0);e.childNodes.length;)c.appendChild(e.firstChild);a.appendChild(c)}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=b._cachedDocument;c||(c=b._cachedDocument=document.implementation.createHTMLDocument(""),c.body.innerHTML=b.responseText,b._cachedTarget={}),b._embeds.splice(0).map(function(d){var e=b._cachedTarget[d.id];e||(e=b._cachedTarget[d.id]=c.getElementById(d.id)),a(d.svg,e)})}},b.onreadystatechange()}function c(c){function d(){for(var c=0;c<l.length;){var g=l[c],h=g.parentNode;if(h&&/svg/i.test(h.nodeName)){var i=g.getAttribute("xlink:href");if(e&&(!f.validate||f.validate(i,h,g))){h.removeChild(g);var m=i.split("#"),n=m.shift(),o=m.join("#");if(n.length){var p=j[n];p||(p=j[n]=new XMLHttpRequest,p.open("GET",n),p.send(),p._embeds=[]),p._embeds.push({svg:h,id:o}),b(p)}else a(h,document.getElementById(o))}}else++c}k(d,67)}var e,f=Object(c),g=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,h=/\bAppleWebKit\/(\d+)\b/,i=/\bEdge\/12\.(\d+)\b/;e="polyfill"in f?f.polyfill:g.test(navigator.userAgent)||(navigator.userAgent.match(i)||[])[1]<10547||(navigator.userAgent.match(h)||[])[1]<537;var j={},k=window.requestAnimationFrame||setTimeout,l=document.getElementsByTagName("use");e&&d()}return c})},{}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates.js"),a("bf-tooltip");var e=a("svg4everybody"),f=d(e),g=a("./components/bf-event-line-component.js"),h=d(g),i=a("./filters/counter-filter.js"),j=d(i);(0,f["default"])();var k=angular.module("bfEventLine",["bfEventLineTemplates","pascalprecht.translate","bfLivescores","bfBreakpoint","bfTooltip"]);k.component("bfEventLine",h["default"]),k.filter("bfCounterFilter",j["default"]),k.config(["BF.LivescoresConfigServiceProvider",function(a){a.setProductType("EXCHANGE")}])},{"./components/bf-event-line-component.js":4,"./filters/counter-filter.js":5,"./templates.js":6,"bf-tooltip":1,svg4everybody:2}],4:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={restrict:"E",templateUrl:"/views/bf-event-line.html",controllerAs:"vm",bindings:{eventData:"<"}};c["default"]=d},{}],5:[function(a,b,c){"use strict";function d(){var a=99;return function(b){return b=b||0,b>a?a+"+":b.toString()}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],6:[function(a,b,c){"use strict";b.exports=angular.module("bfEventLineTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-event-line.html",'<section class="mod-event-line" data-ng-if="vm.eventData" data-bf-below-width="{\'small\': 300, \'medium\': 350, \'large\': 400}"><data-bf-livescores event-data="vm.eventData" mini=""></data-bf-livescores><ul class="runners"><li title="{{::vm.eventData.homeRunnerName}}">{{::vm.eventData.homeRunnerName}}</li><li title="{{::vm.eventData.awayRunnerName}}">{{::vm.eventData.awayRunnerName}}</li></ul><ul class="bet-counters"><li class="bet-counter unmatched" data-ng-class="{visible: vm.eventData.unmatchedBetsCount > 0}"><span class="bet-counter-indicator">{{vm.eventData.unmatchedBetsCount | bfCounterFilter}}</span><data-bf-tooltip options="top center"><span class="bet-counter-tooltip-count">{{vm.eventData.unmatchedBetsCount}}</span> <span>{{vm.eventData.unmatchedBetsTooltip}}</span></data-bf-tooltip></li><li class="bet-counter matched" data-ng-class="{visible: vm.eventData.matchedBetsCount > 0}"><span class="bet-counter-indicator">{{vm.eventData.matchedBetsCount | bfCounterFilter}}</span><data-bf-tooltip options="top center"><span class="bet-counter-tooltip-count">{{vm.eventData.matchedBetsCount}}</span> <span>{{vm.eventData.matchedBetsTooltip}}</span></data-bf-tooltip></li></ul><ul class="matched-amount" title="{{::vm.eventData.matchedAmount.label}} {{vm.eventData.matchedAmount.value}}" data-ng-if="vm.eventData.matchedAmount !== undefined"><li class="matched-amount-value">{{vm.eventData.matchedAmount.value}}</li></ul><ul class="icons"><li class="icon-tv" title="{{::vm.eventData.broadcastTvChannels}}" data-ng-if="::vm.eventData.broadcastTvChannels"><svg><use xlink:href="/resources/eds/bundle/images/sprite-bf-event-line_3641_.svg#ontv"/></svg></li><li class="icon-live" title="{{::vm.eventData.liveVideoTooltip}}" data-ng-if="::vm.eventData.isLiveVideoAvailable"><svg><use xlink:href="/resources/eds/bundle/images/sprite-bf-event-line_3641_.svg#livestream"/></svg></li></ul></section>')}])},{}]},{},[3]),!function i(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var j=new Error("Cannot find module '"+f+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[f]={exports:{}};a[f][0].call(k.exports,function(b){var c=a[f][1][b];return d(c?c:b)},k,k.exports,i,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./providers/raf-throttle-service.js"),f=d(e),g=a("./directives/bf-below-width-directive.js"),h=d(g),i=a("./directives/bf-element-width-directive.js"),j=d(i);angular.module("bfBreakpoint",["betfair.lodash"]).directive("bfBelowWidth",h["default"]).directive("bfElementWidth",j["default"]).service("RafThrottleService",f["default"])},{"./directives/bf-below-width-directive.js":2,"./directives/bf-element-width-directive.js":3,"./providers/raf-throttle-service.js":4}],2:[function(a,b,c){"use strict";function d(a,b){return{restrict:"A",scope:{rules:"<bfBelowWidth"},link:function(c,d){function e(a,b){return a.filter(b)[0]}function f(a){return Object.keys(a).map(function(b){return[b,a[b]]})}function g(a){return f(a).sort(function(a,b){return a[1]-b[1]})}function h(a){var b=k.getBoundingClientRect();angular.equals(m,b)||i(a,k.offsetWidth),m=b}function i(a,b){a.map(function(a){return a[0]}).forEach(d.removeClass.bind(d));var c=e(a,function(a){return a[1]>=b});c&&d.addClass(c[0])}function j(){l()}var k=d[0],l=angular.noop,m=null,n=c.$watch(function(){return angular.isDefined(c.rules)},function(d){if(d){var e=5,f=c.rules;n(),a.isObject(f)&&!a.isEmpty(f)&&(f=g(f),l=b(h.bind(null,f),e))}});c.$on("$destroy",j)}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.Lodash","RafThrottleService"],c["default"]=d},{}],3:[function(a,b,c){"use strict";function d(a){return{restrict:"A",scope:{onElementWidthChange:"&bfElementWidth"},link:function(b,c){function d(a){var c=f.offsetWidth;angular.equals(h,c)||b.$applyAsync(a({width:c})),h=c}function e(){g()}var f=c[0],g=angular.noop,h=null,i=b.$watch(function(){return angular.isDefined(b.onElementWidthChange)},function(c){if(c){var e=3;i(),g=a(d.bind(null,b.onElementWidthChange),e)}});b.$on("$destroy",e)}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["RafThrottleService"],c["default"]=d},{}],4:[function(a,b,c){"use strict";function d(a){return function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,d=1e3/c,e=Date.now(),f=!1,g=void 0;return function h(){if(!f){g=a.requestAnimationFrame(h);var c=Date.now(),i=c-e;i>d&&(e=c-i%d,b())}}(),b(),function(){f=!0,a.cancelAnimationFrame(g)}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$window"],c["default"]=d},{}]},{},[1]),!function j(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var k=b[f]={exports:{}};a[f][0].call(k.exports,function(b){var c=a[f][1][b];return d(c?c:b)},k,k.exports,j,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates.js");var e=a("./constants/data-model-constant"),f=a("./constants/primary-market-types-constant"),g=a("./constants/product-types-constant"),h=a("./constants/seas-method-config-constant"),i=a("./constants/match-status-constant"),j=a("./constants/runner-constant"),k=a("./constants/template-config-constant"),l=a("./constants/default-partials-template-config-constant"),m=a("./constants/market-state-polling-options-constant"),n=a("./constants/seas-polling-options-constant"),o=a("./constants/facet-clients-constant"),p=a("./constants/display-type-constant"),q=a("./constants/view-type-constant"),r=a("./bootstrap"),s=d(r),t=a("./directives/bf-livescores-directive"),u=d(t),v=a("./directives/bf-ui-livescores-directive"),w=d(v),x=a("./controllers/bf-livescores-controller"),y=d(x),z=a("./controllers/bf-ui-livescores-controller"),A=d(z),B=a("./providers/request-service"),C=d(B),D=a("./providers/process-data-factory"),E=d(D),F=a("./providers/process-facet-data-helper"),G=d(F),H=a("./providers/helper"),I=d(H),J=a("./providers/poller-helper"),K=d(J),L=a("./providers/partials-helper"),M=d(L),N=a("./providers/template-service"),O=d(N),P=a("./providers/seas-method-service"),Q=d(P),R=a("./providers/polling-options-service"),S=d(R),T=a("./providers/facet-clients-helper"),U=d(T),V=a("./providers/config-service-provider"),W=d(V),X=a("./directives/start-date/src/start-date-directive"),Y=d(X),Z=a("./directives/start-date/src/start-date-controller"),$=d(Z),_=a("./directives/start-date/src/start-date-helper"),aa=d(_),ba=a("./directives/time-elapsed/src/time-elapsed-controller"),ca=d(ba),da=a("./directives/time-elapsed/src/time-elapsed-directive"),ea=d(da),fa=a("./directives/additional-info/src/additional-info-directive"),ga=d(fa),ha=a("./directives/additional-info/src/additional-info-controller"),ia=d(ha),ja=a("./directives/additional-info/src/additional-info-helper"),ka=d(ja),la=a("./directives/match-scores/src/match-scores-directive"),ma=d(la),na=a("./directives/match-scores/src/match-scores-controller"),oa=d(na),pa=a("./directives/innings/src/innings-directive"),qa=d(pa),ra=a("./directives/innings/src/innings-controller"),sa=d(ra),ta=a("./directives/innings/src/innings-constant"),ua=a("./directives/extended-scores/src/extended-scores-controller"),va=d(ua),wa=a("./directives/extended-scores/src/extended-scores-directive"),xa=d(wa),ya=a("./directives/scores/src/scores-directive"),za=d(ya),Aa=a("./directives/penalties/src/penalties-directive"),Ba=d(Aa),Ca=a("./directives/penalties/src/penalties-controller"),Da=d(Ca),Ea=a("./directives/runners/src/runners-directive"),Fa=d(Ea),Ga=a("./directives/runners/src/runners-controller"),Ha=d(Ga),Ia=a("./directives/timeline/src/timeline-directive"),Ja=d(Ia),Ka=a("./directives/timeline/src/timeline-bar-directive"),La=d(Ka),Ma=a("./directives/timeline/src/timeline-controller"),Na=d(Ma),Oa=a("./directives/timeline/src/timeline-constant"),Pa=a("./directives/broadcasts-icons/src/broadcasts-icons-directive"),Qa=d(Pa),Ra=a("./directives/broadcasts-icons/src/broadcasts-icons-controller"),Sa=d(Ra),Ta=angular.module("bfLivescores",["bfLivescoresTemplates","betfair.extensions","pascalprecht.translate"]);Ta.run(s["default"]),Ta.constant("BF.LIVESCORES.DATA_MODEL",e.DATA_MODEL),Ta.constant("BF.LIVESCORES.PRIMARY_MARKET_TYPES",f.PRIMARY_MARKET_TYPES),Ta.constant("BF.LIVESCORES.SEAS_CONFIG",h.SEAS_METHOD_CONFIG),Ta.constant("BF.LIVESCORES.MATCH_STATUS",i.MATCH_STATUS),Ta.constant("BF.LIVESCORES.RUNNER",j.RUNNER),Ta.constant("BF.LIVESCORES.PRODUCT_TYPES",g.PRODUCT_TYPES),Ta.constant("BF.LIVESCORES.TEMPLATE_CONFIG",k.TEMPLATE_CONFIG),Ta.constant("BF.LIVESCORES.DEFAULT_PARTIALS_TEMPLATE_CONFIG",l.DEFAULT_PARTIALS_TEMPLATE_CONFIG),Ta.constant("BF.LIVESCORES.MARKET_STATE_POLLING_OPTIONS",m.MARKET_STATE_POLLING_OPTIONS),Ta.constant("BF.LIVESCORES.SEAS_POLLING_OPTIONS",n.SEAS_POLLING_OPTIONS),Ta.constant("BF.LIVESCORES.FACET_CLIENTS",o.FACET_CLIENTS),Ta.constant("BF.LIVESCORES.DISPLAY_TYPE",p.DISPLAY_TYPE),Ta.constant("BF.LIVESCORES.VIEW_TYPE",q.VIEW_TYPE),Ta.directive("bfLivescores",u["default"]),Ta.directive("bfUiLivescores",w["default"]),Ta.controller("BF.LivescoresController",y["default"]),Ta.controller("BF.UiLivescoresController",A["default"]),Ta.factory("BF.LivescoresProcessDataFactory",E["default"]),Ta.factory("BF.LivescoresProcessFacetDataHelper",G["default"]),Ta.factory("BF.LivescoresHelper",I["default"]),Ta.factory("BF.LivescoresPollerHelper",K["default"]),Ta.factory("BF.LivescoresPartialsHelper",M["default"]),Ta.factory("BF.LivescoresFacetClientsHelper",U["default"]),Ta.factory("BF.LivescoresRequestService",C["default"]),Ta.factory("BF.LivescoresTemplateService",O["default"]),Ta.factory("BF.LivescoresPollingOptionsService",S["default"]),Ta.factory("BF.LivescoresSeasMethodService",Q["default"]),Ta.provider("BF.LivescoresConfigService",W["default"]),Ta.directive("bfLivescoresStartDate",Y["default"]),Ta.controller("BF.LivescoresStartDateController",$["default"]),Ta.service("BF.LivescoresStartDateHelper",aa["default"]),Ta.directive("bfLivescoresTimeElapsed",ea["default"]),Ta.controller("BF.LivescoresTimeElapsedController",ca["default"]),Ta.directive("bfLivescoresAdditionalInfo",ga["default"]),Ta.controller("BF.LivescoresAdditionalInfoController",ia["default"]),Ta.factory("BF.LivescoresAdditionalInfoHelper",ka["default"]),Ta.directive("bfLivescoresMatchScores",ma["default"]),Ta.controller("BF.LivescoresMatchScoresController",oa["default"]),Ta.directive("bfLivescoresInnings",qa["default"]),Ta.controller("BF.LivescoresInningsController",sa["default"]),Ta.constant("BF.LIVESCORES.INNINGS_CONSTANTS",ta.INNINGS_CONSTANTS),Ta.directive("bfLivescoresExtendedScores",xa["default"]),Ta.controller("BF.LivescoresExtendedScoresController",va["default"]),Ta.directive("bfLivescoresScores",za["default"]),Ta.directive("bfLivescoresPenalties",Ba["default"]),
Ta.controller("BF.LivescoresPenaltiesController",Da["default"]),Ta.directive("bfLivescoresRunners",Fa["default"]),Ta.controller("BF.LivescoresRunnersController",Ha["default"]),Ta.directive("bfLivescoresTimeline",Ja["default"]),Ta.directive("bfLivescoresTimelineBar",La["default"]),Ta.controller("BF.LivescoresTimelineController",Na["default"]),Ta.constant("BF.LIVESCORES.TIMELINE",Oa.TIMELINE),Ta.directive("bfLivescoresBroadcastsIcons",Qa["default"]),Ta.controller("BF.LivescoresBroadcastsIconsController",Sa["default"])},{"./bootstrap":2,"./constants/data-model-constant":3,"./constants/default-partials-template-config-constant":4,"./constants/display-type-constant":5,"./constants/facet-clients-constant":6,"./constants/market-state-polling-options-constant":7,"./constants/match-status-constant":8,"./constants/primary-market-types-constant":9,"./constants/product-types-constant":10,"./constants/runner-constant":11,"./constants/seas-method-config-constant":12,"./constants/seas-polling-options-constant":13,"./constants/template-config-constant":14,"./constants/view-type-constant":15,"./controllers/bf-livescores-controller":16,"./controllers/bf-ui-livescores-controller":17,"./directives/additional-info/src/additional-info-controller":18,"./directives/additional-info/src/additional-info-directive":19,"./directives/additional-info/src/additional-info-helper":20,"./directives/bf-livescores-directive":21,"./directives/bf-ui-livescores-directive":22,"./directives/broadcasts-icons/src/broadcasts-icons-controller":23,"./directives/broadcasts-icons/src/broadcasts-icons-directive":24,"./directives/extended-scores/src/extended-scores-controller":25,"./directives/extended-scores/src/extended-scores-directive":26,"./directives/innings/src/innings-constant":27,"./directives/innings/src/innings-controller":28,"./directives/innings/src/innings-directive":29,"./directives/match-scores/src/match-scores-controller":30,"./directives/match-scores/src/match-scores-directive":31,"./directives/penalties/src/penalties-controller":32,"./directives/penalties/src/penalties-directive":33,"./directives/runners/src/runners-controller":34,"./directives/runners/src/runners-directive":35,"./directives/scores/src/scores-directive":36,"./directives/start-date/src/start-date-controller":37,"./directives/start-date/src/start-date-directive":38,"./directives/start-date/src/start-date-helper":39,"./directives/time-elapsed/src/time-elapsed-controller":40,"./directives/time-elapsed/src/time-elapsed-directive":41,"./directives/timeline/src/timeline-bar-directive":42,"./directives/timeline/src/timeline-constant":43,"./directives/timeline/src/timeline-controller":44,"./directives/timeline/src/timeline-directive":45,"./providers/config-service-provider":46,"./providers/facet-clients-helper":47,"./providers/helper":48,"./providers/partials-helper":49,"./providers/poller-helper":50,"./providers/polling-options-service":51,"./providers/process-data-factory":52,"./providers/process-facet-data-helper":53,"./providers/request-service":54,"./providers/seas-method-service":55,"./providers/template-service":56,"./templates.js":57}],2:[function(a,b,c){"use strict";function d(a){try{a.get("BF.LIVESCORES.PRODUCT")}catch(b){throw new Error("Product Type is a mandatory configuration for livescores. Use `BF.LivescoresConfigServiceProvider.setProductType(product)` to set it.")}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$injector"],c["default"]=d},{}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DATA_MODEL={EVENT_MODEL_TEMPLATE:{eventId:void 0,eventName:void 0,eventTypeId:void 0,date:void 0,inPlay:void 0,homeRunnerName:void 0,awayRunnerName:void 0,productType:void 0,primaryMarketId:void 0,canTurnInPlay:void 0},SEAS_MODEL_TEMPLATE:{timeElapsed:void 0,injuryTime:void 0,liveStream:void 0,liveVideo:void 0,tvChannels:void 0,matchStatus:void 0,matchType:void 0,stateOfPlay:void 0,stateOfBall:void 0,matchInfo:{surface:void 0,numberOfSets:void 0},scores:{home:{score:void 0,halfTimeScore:void 0,fullTimeScore:void 0,innings:[void 0,void 0],games:void 0,sets:void 0,quarterByQuarter:void 0,gameSequence:void 0,penaltiesSequence:void 0,penaltiesScore:void 0,highlight:void 0,playerSeed:void 0},away:{score:void 0,halfTimeScore:void 0,fullTimeScore:void 0,innings:[void 0,void 0],games:void 0,sets:void 0,quarterByQuarter:void 0,gameSequence:void 0,penaltiesSequence:void 0,penaltiesScore:void 0,highlight:void 0,playerSeed:void 0},currentSet:void 0},timeline:void 0,hasSets:void 0}}},{}],4:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DEFAULT_PARTIALS_TEMPLATE_CONFIG={ADDITIONAL_INFO:{DEFAULT:"/views/directives/additional-info/views/additional-info.html"},EXTENDED_SCORES:{DEFAULT:"/views/directives/extended-scores/views/extended-scores-default.html",3503:"/views/directives/extended-scores/views/extended-scores-darts.html",998917:"/views/directives/extended-scores/views/extended-scores-volleyball.html",6422:"/views/directives/extended-scores/views/extended-scores-snooker.html"},MATCH_SCORES:{DEFAULT:"/views/directives/match-scores/views/match-scores.html"},INNINGS:{DEFAULT:"/views/directives/innings/views/innings.html"},PENALTIES:{DEFAULT:"/views/directives/penalties/views/penalties.html"},RUNNERS:{DEFAULT:"/views/directives/runners/views/runners.html"},START_DATE:{DEFAULT:"/views/directives/start-date/views/start-date.html"},TIME_ELAPSED:{DEFAULT:"/views/directives/time-elapsed/views/time-elapsed.html"},TIMELINE:{DEFAULT:"/views/directives/timeline/views/timeline.html"},BROADCASTS_ICONS:{DEFAULT:"/views/directives/broadcasts-icons/views/broadcasts-icons.html"}}},{}],5:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DISPLAY_TYPE={COUPON:"COUPON",FULL:"FULL",MINI:"MINI"}},{}],6:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.FACET_CLIENTS={EXCHANGE:"BF.FacetExchangeClient",SPORTSBOOK:"BF.FacetSportsbookClient"}},{}],7:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.MARKET_STATE_POLLING_OPTIONS={"default":{getByMarkets:{firstExecution:!0,interval:1e4},getMarketPrices:{firstExecution:!0,interval:1e4}}}},{}],8:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.MATCH_STATUS={EXTRA_TIME_END:"ExtraTimeEnd",EXTRA_TIME_KICK_OFF:"ExtraTimeKickOff",EXTRA_TIME_PAUSE:"ExtraTimePause",EXTRA_TIME_SECOND_HALF_KICK_OFF:"ExtraTimeSecondHalfKickOff",FINISHED:"Finished",FIRST_HALF_END:"FirstHalfEnd",KICK_OFF:"KickOff",PENALTIES:"Penalties",SECOND_HALF_END:"SecondHalfEnd",SECOND_HALF_KICK_OFF:"SecondHalfKickOff",START_FIRST_QUARTER:"StartFirstQuarter",START_FOURTH_QUARTER:"StartFourthQuarter",START_OVERTIME:"StartOvertime",OVERTIME:"Overtime",AWAITING_OVERTIME:"AwaitingOvertime",FIRST_HALF_OVERTIME:"FirstHalfOvertime",HALF_TIME_OVERTIME:"HalfTimeOvertime",SECOND_HALF_OVERTIME:"SecondHalfOvertime",START_SECOND_QUARTER:"StartSecondQuarter",START_THIRD_QUARTER:"StartThirdQuarter",FIRST_PERIOD:"FirstPeriod",SECOND_PERIOD:"SecondPeriod",THIRD_PERIOD:"ThirdPeriod",INPROGRESS:"Inprogress",SUSPENDED:"Suspended",TOILETBREAK:"ToiletBreak",MEDICALTIMEOUT:"MedicalTimeout",CHALLENGE:"Challenge",REPLAYPOINT:"ReplayPoint",CORRECTIONMODE:"CorrectionMode",STOP_QUARTER:"StopQuarter",STOP_FIRST_QUARTER:"StopFirstQuarter",STOP_SECOND_QUARTER:"StopSecondQuarter",STOP_THIRD_QUARTER:"StopThirdQuarter",STOP_FOURTH_QUARTER:"StopFourthQuarter",SETBREAK:"SetBreak",STARTSET1:"StartSet1",STARTSET2:"StartSet2",STARTSET3:"StartSet3",STARTSET4:"StartSet4",STARTSET5:"StartSet5",STARTSET6:"StartSet6",STARTSET7:"StartSet7",STARTSET8:"StartSet8",STARTSET9:"StartSet9",STARTSET10:"StartSet10",STARTSET11:"StartSet11",STARTSET12:"StartSet12",STARTSET13:"StartSet13",PREMATCH:"PreMatch",FRAMEBREAK:"FrameBreak",STARTFRAME1:"StartFrame1",STARTFRAME2:"StartFrame2",STARTFRAME3:"StartFrame3",STARTFRAME4:"StartFrame4",STARTFRAME5:"StartFrame5",STARTFRAME6:"StartFrame6",STARTFRAME7:"StartFrame7",STARTFRAME8:"StartFrame8",STARTFRAME9:"StartFrame9",STARTFRAME10:"StartFrame10",STARTFRAME11:"StartFrame11",STARTFRAME12:"StartFrame12",STARTFRAME13:"StartFrame13",STARTFRAME14:"StartFrame14",STARTFRAME15:"StartFrame15",STARTFRAME16:"StartFrame16",STARTFRAME17:"StartFrame17",STARTFRAME18:"StartFrame18",STARTFRAME19:"StartFrame19",STARTFRAME20:"StartFrame20",STARTFRAME21:"StartFrame21",STARTFRAME22:"StartFrame22",STARTFRAME23:"StartFrame23",STARTFRAME24:"StartFrame24",STARTFRAME25:"StartFrame25",STARTFRAME26:"StartFrame26",STARTFRAME27:"StartFrame27",STARTFRAME28:"StartFrame28",STARTFRAME29:"StartFrame29",STARTFRAME30:"StartFrame30",STARTFRAME31:"StartFrame31",STARTFRAME32:"StartFrame32",STARTFRAME33:"StartFrame33",STARTFRAME34:"StartFrame34",STARTFRAME35:"StartFrame35",IN_PLAY:"InPlay",TEA:"Tea",LUNCH:"Lunch",BETWEEN_INNINGS:"BetweenInnings",STUMPS:"Stumps",RAIN_DELAY:"RainDelay",BAD_LIGHT:"BadLight",CROWD_TROUBLE:"CrowdTrouble",PITCH_CONDITION:"PitchCondition",ABANDONED:"Abandoned",FLOODLIGHT_FAILURE:"FloodlightFailure",PLAY_SUSPENDED:"PlaySuspended",START_DELAYED:"StartDelayed",DRINKS:"Drinks"}},{}],9:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.PRIMARY_MARKET_TYPES={1:{EXCHANGE:["MATCH_ODDS","TO_QUALIFY","WINNER","MATCH_ODDS_UNMANAGED"],SPORTSBOOK:["MATCH_ODDS","EXTRA_TIME_RESULT","LIFT_THE_TROPHY","TO_QUALIFY"]},2:{EXCHANGE:["MATCH_ODDS","TO_QUALIFY","WINNER","MATCH_ODDS_UNMANAGED"],SPORTSBOOK:["MATCH_ODDS","EXTRA_TIME_RESULT","LIFT_THE_TROPHY","TO_QUALIFY"]},3503:{EXCHANGE:["MATCH_ODDS"],SPORTSBOOK:["MATCH_ODDS"]},6422:{EXCHANGE:["MATCH_ODDS"],SPORTSBOOK:["MATCH_ODDS"]},4:{EXCHANGE:["MATCH_ODDS"],SPORTSBOOK:["MATCH_ODDS"]},468328:{EXCHANGE:["MATCH_ODDS"],SPORTSBOOK:["MATCH_ODDS"]},7522:{EXCHANGE:["MATCH_ODDS","TO_QUALIFY","WINNER","MATCH_ODDS_UNMANAGED"],SPORTSBOOK:["MONEY_LINE","MATCH_ODDS_HANDICAP","OVER/UNDER_POINTS","TO_QUALIFY"]},7524:{EXCHANGE:["RT_MATCH_ODDS","TO_QUALIFY","WINNER","MATCH_ODDS_UNMANAGED"],SPORTSBOOK:["MATCH_ODDS","TO_QUALIFY"]},6423:{EXCHANGE:["MATCH_ODDS","TO_QUALIFY","WINNER","MATCH_ODDS_UNMANAGED"],SPORTSBOOK:["MONEY_LINE","MATCH_HANDICAP_(2-WAY)","TOTAL_POINTS_(OVER/UNDER)","TO_QUALIFY"]},998917:{EXCHANGE:["MATCH_ODDS"],SPORTSBOOK:["MATCH_ODDS","MATCH_ODDS_HANDICAP","TO_QUALIFY"]},"default":{EXCHANGE:["MATCH_ODDS","WINNER"],SPORTSBOOK:["MATCH_ODDS","MONEY_LINE","WINNER"]}}},{}],10:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.PRODUCT_TYPES={TYPE:{EXCHANGE:"EXCHANGE",SPORTSBOOK:"SPORTSBOOK"},PRIORITY:["EXCHANGE","SPORTSBOOK"]}},{}],11:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.RUNNER={HOME:"home",AWAY:"away",DEFAULT_ORDER:["home","away"]}},{}],12:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.SEAS_METHOD_CONFIG={1:{firstLoad:"scoresAndBroadcast",update:"eventTimelines"},2:{firstLoad:"eventDetails",update:"scores"},3503:{firstLoad:"eventDetails",update:"scores"},6422:{firstLoad:"eventDetails",update:"scores"},4:{firstLoad:"scoresAndBroadcast",update:"scores"},468328:{firstLoad:"scoresAndBroadcast",update:"scores"},7522:{firstLoad:"scoresAndBroadcast",update:"scores"},7524:{firstLoad:"scoresAndBroadcast",update:"scores"},6423:{firstLoad:"scoresAndBroadcast",update:"scores"},998917:{firstLoad:"scoresAndBroadcast",update:"scores"}}},{}],13:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.SEAS_POLLING_OPTIONS={"default":{scores:{firstLoad:{delayedFirstExecution:300},update:{interval:1e4}},scoresAndBroadcast:{firstLoad:{delayedFirstExecution:300},update:{interval:1e4}},eventDetails:{firstLoad:{delayedFirstExecution:300},update:{interval:1e4}},eventTimelines:{firstLoad:{delayedFirstExecution:300},update:{interval:1e4}}},1:{eventTimelines:{update:{firstExecution:!0,interval:1e4}}}}},{}],14:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.TEMPLATE_CONFIG={DEFAULT:{FULL:"/views/default-full-template.html",MINI:"/views/default-mini-template.html",COUPON:"/views/default-coupon-template.html"},1:{FULL:"/views/football-template.html"},2:{MINI:"/views/tennis-mini-template.html",COUPON:"/views/tennis-coupon-template.html"},4:{FULL:"/views/cricket-template.html",MINI:"/views/cricket-mini-template.html",COUPON:"/views/cricket-coupon-template.html"},998917:{MINI:"/views/volleyball-mini-template.html",COUPON:"/views/volleyball-coupon-template.html"},3503:{COUPON:"/views/darts-coupon-template.html",MINI:"/views/darts-mini-template.html"},468328:{FULL:"/views/handball-template.html"},6422:{MINI:"/views/snooker-mini-template.html",COUPON:"/views/snooker-coupon-template.html"},7524:{FULL:"/views/ice-hockey-template.html"}}},{}],15:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.VIEW_TYPE={FULL:"FULL",MINI:"MINI",COUPON:"COUPON",ADDITIONAL_INFO:"ADDITIONAL_INFO",EXTENDED_SCORES:"EXTENDED_SCORES",MATCH_SCORES:"MATCH_SCORES",INNINGS:"INNINGS",PENALTIES:"PENALTIES",RUNNERS:"RUNNERS",START_DATE:"START_DATE",TIME_ELAPSED:"TIME_ELAPSED",TIMELINE:"TIMELINE",BROADCASTS_ICONS:"BROADCASTS_ICONS"}},{}],16:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){return f.isEventModelCompliant(a)?b.resolve(a):i.requestEventData(a.eventId).then(k.buildEventDataFromFacet)}function o(a){var b=a.eventTypeId,d=a.primaryMarketId;if(a.productType===c.TYPE.SPORTSBOOK)return h.registerFobPoller(d,r,p,b);if(a.productType===c.TYPE.EXCHANGE)return h.registerEroPoller(d,r,p,b);throw new Error("Unknown product type: '"+a.productType+"'")}function p(){z.ready=!0}function q(a,b,c){var d=a.eventTypeId,e=a.eventId,f=j.getSeasMethod(a.eventTypeId,b);return c&&(c.firstLoad&&b&&(f=c.firstLoad),c.update&&!b&&(f=c.update)),b?h.registerSeasPoller(e,t,p,d,f,b):h.registerSeasPoller(e,s,angular.noop,d,f,b)}function r(a){z.data.inPlay=k.isMarketInPlay(a),z.data.inPlay?(h.removeCallback(C),C=null,angular.isDefined(d[z.data.eventTypeId])&&(B=q(z.data,!0,z.seasMethod),A=q(z.data,!1,z.seasMethod)),v()):p()}function s(a){var b=k.buildSeasDataModel(z.data,a);k.mergeSeasModels(z.data,b),v(),g.isEventFinished(z.data)&&(p(),u())}function t(a){s(a),h.removeCallback(B),B=null,p()}function u(){h.removeCallback(C),C=null,h.removeCallback(A),A=null,h.removeCallback(B),B=null}function v(){z.templates=g.getTemplateHelpers(z.data)}function w(a,b){angular.forEach(a,function(c,d){b[d]||delete a[d]})}function x(){f.validateEventData(z.eventData),n(z.eventData).then(function(a){return w(z.data,a),m.merge(z.data,a),z.data.inPlay||(C=o(z.data)),z.templateUrl=l.getTemplateUrl(z.data.eventTypeId,e[z.viewType],z.templatesOverride),angular.isUndefined(d[a.eventTypeId])?void p():(B=q(z.data,!0,z.seasMethod),void(z.data.inPlay&&(A=q(z.data,!1,z.seasMethod))))})}var y=this,z=this,A=void 0,B=void 0,C=void 0;z.data={},z.templates={hasScores:!1,hasTimeline:!1,hasPenalties:!1,hasAdditionalInfo:!1,hasInnings:!1,hasBroadcastsIcons:!1},angular.isDefined(z.mini)?z.viewType=e.MINI:angular.isDefined(z.coupon)?z.viewType=e.COUPON:z.viewType=e.FULL,x(),a.$on("$destroy",u),a.$watch(function(){return y.eventData.eventId},function(a,b){a!==b&&(u(),x())})}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","$q","BF.LIVESCORES.PRODUCT_TYPES","BF.LIVESCORES.PRIMARY_MARKET_TYPES","BF.LIVESCORES.VIEW_TYPE","BF.LivescoresHelper","BF.LivescoresPartialsHelper","BF.LivescoresPollerHelper","BF.LivescoresRequestService","BF.LivescoresSeasMethodService","BF.LivescoresProcessDataFactory","BF.LivescoresTemplateService","BF.Lodash"],c["default"]=d},{}],17:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){function i(a){c.validateEventData(a),f.merge(k.data,h.EVENT_MODEL_TEMPLATE,a),k.templateUrl=f.memoize(e.getTemplateUrl)(k.data.eventTypeId,b[k.viewType],k.templatesOverride)}function j(a){var b=g.buildSeasDataModel(k.data,[a]);g.mergeSeasModels(k.data,b),k.templates=d.getTemplateHelpers(k.data),k.ready=!0}var k=this;k.data={},k.templates={hasScores:!1,hasTimeline:!1,hasPenalties:!1,hasAdditionalInfo:!1,hasInnings:!1,hasBroadcastsIcons:!1},angular.isDefined(k.mini)?k.viewType=b.MINI:angular.isDefined(k.coupon)?k.viewType=b.COUPON:k.viewType=b.FULL,a.$watchCollection("livescoresCtrl.eventData",i),a.$watchCollection("livescoresCtrl.scoresData",j)}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","BF.LIVESCORES.VIEW_TYPE","BF.LivescoresHelper","BF.LivescoresPartialsHelper","BF.LivescoresTemplateService","BF.Lodash","BF.LivescoresProcessDataFactory","BF.LIVESCORES.DATA_MODEL"],c["default"]=d},{}],18:[function(a,b,c){"use strict";function d(a,b,c,d,e){function f(a){h.additionalInfo=c.buildAdditionalInfo(a)}var g=this,h=this,i=a.livescoresCtrl.data;h.additionalInfo=null,h.templateUrl=d.getTemplateUrl(i.eventTypeId,e.ADDITIONAL_INFO,a.livescoresCtrl.templatesOverride),this.getAdditionalInfo=function(){return b.trustAsHtml(c.buildAdditionalInfoString(g.additionalInfo))};var j=[function(){return i.matchStatus},function(){return i.stateOfPlay}];a.$watchGroup(j,function(){f(i)}),a.$watchCollection(function(){return i.stateOfBall},function(){f(i)})}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","$sce","BF.LivescoresAdditionalInfoHelper","BF.LivescoresTemplateService","BF.LIVESCORES.VIEW_TYPE"],c["default"]=d},{}],19:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,template:'<ng-include src="::additionalInfoCtrl.templateUrl"></ng-include>',controller:"BF.LivescoresAdditionalInfoController",controllerAs:"additionalInfoCtrl"}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],20:[function(a,b,c){"use strict";function d(a,b,c){function d(a){var d=b.isRunnersOrderReversed(a),e=d?a.scores.away.score:a.scores.home.score,f=d?a.scores.home.score:a.scores.away.score;return b.hasSets(a)&&(e=a.scores.home.sets,f=a.scores.away.sets),e>f?c.HOME:c.AWAY}function e(a){var d=b.isRunnersOrderReversed(a),e=d?a.scores.away.penaltiesScore:a.scores.home.penaltiesScore,f=d?a.scores.home.penaltiesScore:a.scores.away.penaltiesScore;return e>f?c.HOME:c.AWAY}function f(a){return!b.hasSets(a)&&!b.hasLegs(a)&&a.scores.home.score===a.scores.away.score}function g(b){return a("I18N.LIVESCORES.INFO_WINNER_PENALTIES",{winner:b[e(b)+"RunnerName"],homeScore:b.scores.home.penaltiesScore,awayScore:b.scores.away.penaltiesScore})}function h(c){var e=c.scores.home.score,f=c.scores.away.score;return b.hasSets(c)?(e=c.scores.home.sets,f=c.scores.away.sets):b.hasLegs(c)&&(e=c.scores.home.games,f=c.scores.away.games),a("I18N.LIVESCORES.INFO_WINNER",{winner:c[d(c)+"RunnerName"],homeScore:e,awayScore:f})}function i(c){var d=b.isRunnersOrderReversed(c)?"I18N.LIVESCORES.INFO_DRAW_REVERSED":"I18N.LIVESCORES.INFO_DRAW";return a(d,{home:c.homeRunnerName,away:c.awayRunnerName,homeScore:c.scores.home.score,awayScore:c.scores.away.score})}function j(a){return b.hasPenalties(a)?g(a):f(a)?i(a):h(a)}function k(c){var d={};return d.halfTimeLabel=a("I18N.LIVESCORES.HALF_TIME"),d.halfTimeScore=c.scores.home.halfTimeScore+"-"+c.scores.away.halfTimeScore,b.hasFullTimeScores(c)&&!b.isEventOnSecondHalfEnd(c)&&(d.fullTimeLabel=""+a("I18N.LIVESCORES.FULL_TIME"),d.fullTimeScore=c.scores.home.fullTimeScore+"-"+c.scores.away.fullTimeScore),b.isEventOnPenalties(c)&&(d.extraTimeLabel=""+a("I18N.LIVESCORES.EXTRA_TIME"),d.extraTimeScore=c.scores.home.score+"-"+c.scores.away.score),d}function l(b){var c=b.matchInfo&&b.matchInfo.surface||"";return{surface:c&&a("I18N.LIVESCORES."+c.toUpperCase())}}function m(b){var c=Number(b.scores.home.score)+Number(b.scores.away.score);return{currentBreak:a("I18N.LIVESCORES.CURRENT_BREAK",{score:c})}}function n(a){return{stateOfPlay:a.stateOfPlay}}function o(b){var c=0,d=void 0,e={noBall:"NO_BALL",legBye:"LEG_BYE",bye:"BYE"},f=Object.keys(e).some(function(a){return c=parseInt(b[a],10),d=a,c>0});return"1"===b.referralOutcome||["1","2","3"].indexOf(b.outcomeId)>-1?a("I18N.LIVESCORES.WICKET",b):f?a("I18N.LIVESCORES."+e[d],angular.extend(b,{runSuffix:c>1?"I18N.LIVESCORES.RUN":"I18N.LIVESCORES.RUNS"})):"0"!==b.appealId?a("I18N.LIVESCORES.APPEAL",b):"0"===b.batsmanRuns?a("I18N.LIVESCORES.NO_RUN",b):a("I18N.LIVESCORES.BATSMAN_RUNS",angular.extend(b,{runSuffix:"1"!==b.batsmanRuns?"I18N.LIVESCORES.RUN":"I18N.LIVESCORES.RUNS"}))}function p(b){if(!b.stateOfBall)return{};var c=a("I18N.LIVESCORES.BALL",angular.extend(b.stateOfBall,{stateOfBallMessage:o(b.stateOfBall)}));return{stateOfBall:c}}function q(a){var c={};return b.isEventFinished(a)?c.eventFinishedLabel=j(a):b.hasHalfTimeScores(a)?c=k(a):b.hasSurfaceInfo(a)?c=l(a):b.hasCurrentBreakInfo(a)?c=m(a):b.hasStateOfPlay(a)?c=n(a):b.hasStateOfBall(a)&&(c=p(a)),c}function r(a){if(a){var b="";return a.eventFinishedLabel?b+=a.eventFinishedLabel:(a.halfTimeScore&&(b+="<b>"+a.halfTimeLabel+"</b> "+a.halfTimeScore),a.fullTimeScore&&(b+=", <b>"+a.fullTimeLabel+"</b> "+a.fullTimeScore),a.extraTimeScore&&(b+=", <b>"+a.extraTimeLabel+"</b> "+a.extraTimeScore)),["surface","stateOfPlay","stateOfBall","currentBreak"].forEach(function(c){a[c]&&(b+=" "+a[c])}),b}}return{buildAdditionalInfo:q,buildAdditionalInfoString:r}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["translateFilter","BF.LivescoresPartialsHelper","BF.LIVESCORES.RUNNER"],c["default"]=d},{}],21:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,templateUrl:"/views/bf-livescores.html",controller:"BF.LivescoresController",controllerAs:"livescoresCtrl",bindToController:{eventData:"=",mini:"@",coupon:"@",seasMethod:"=?",templatesOverride:"=?"}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],22:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,templateUrl:"/views/bf-livescores.html",controller:"BF.UiLivescoresController",controllerAs:"livescoresCtrl",bindToController:{eventData:"=",scoresData:"=",mini:"@",coupon:"@",templatesOverride:"=?"}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],23:[function(a,b,c){"use strict";function d(a,b,c,d,e){function f(a){var d=c.isInPlay(a)?"I18N.LIVESCORES.WATCH":"I18N.LIVESCORES.LIVE_VIDEO";return b.instant(d)}function g(){i.liveVideoLabel=f(h)}var h=a.livescoresCtrl.data,i=this;i.templateUrl=d.getTemplateUrl(h.eventTypeId,e.BROADCASTS_ICONS,a.livescoresCtrl.templatesOverride),i.hasTvChannels=c.hasTvChannels(h),i.hasLiveVideo=c.hasLiveVideo(h),a.$watch(function(){return h.inPlay},function(){g()})}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","$translate","BF.LivescoresPartialsHelper","BF.LivescoresTemplateService","BF.LIVESCORES.VIEW_TYPE"],c["default"]=d},{}],24:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,template:'<ng-include src="::broadcastsIconsCtrl.templateUrl"></ng-include>',controller:"BF.LivescoresBroadcastsIconsController",controllerAs:"broadcastsIconsCtrl"}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],25:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){function i(){q.isInPlay=b.isInPlay(q.data)}function j(){return q.data.scores.currentSet-1}function k(a){var c=j();(b.isInPlay(q.data)||q.data.scores.home.games||q.data.scores.away.games)&&(q.sequences[a][c]=q.data.scores[a].games)}function l(a){var b=j();q.sequences[a][b]=q.data.scores[a].score}function m(a){q.data.scores[a].gameSequence&&q.data.scores[a].gameSequence.forEach(function(b,c){q.sequences[a][c]=b})}function n(a){var b=q.data.scores[a].quarterByQuarter;b&&b.slice(0,u).forEach(function(b,c){q.sequences[a][c]=b})}function o(){switch(q.data.matchStatus){case c.FIRST_PERIOD:case c.START_FIRST_QUARTER:case c.STOP_FIRST_QUARTER:q.activeColumn=0;break;case c.SECOND_PERIOD:case c.START_SECOND_QUARTER:case c.STOP_SECOND_QUARTER:q.activeColumn=1;break;case c.THIRD_PERIOD:case c.START_THIRD_QUARTER:case c.STOP_THIRD_QUARTER:q.activeColumn=2;break;case c.START_FOURTH_QUARTER:case c.STOP_FOURTH_QUARTER:q.activeColumn=3;break;default:q.activeColumn=void 0}}function p(){q.activeColumn=j()}var q=this,r=4,s=3,t=1;q.data=a.livescoresCtrl.data,q.hasPoints=b.hasPoints(q.data),q.hasDartsSets=b.hasDartsSets(q.data),q.isDarts=b.isDarts(q.data),q.viewType=a.livescoresCtrl.viewType,q.inPlay=null,q.runnersOrder=b.getRunnersByOrder(q.data),q.templateUrl=e.getTemplateUrl(q.data.eventTypeId,f.EXTENDED_SCORES,a.livescoresCtrl.templatesOverride);var u=function(){switch(q.data.eventTypeId){case g.type["ice-hockey"].eventTypeId:return s;case g.type.tennis.eventTypeId:case g.type.volleyball.eventTypeId:return parseInt(q.data.matchInfo.numberOfSets,10);case g.type.basketball.eventTypeId:return r;case g.type.darts.eventTypeId:return t;default:return r}}();q.sequences={home:h.fill(Array(u),"-"),away:h.fill(Array(u),"-")},q.isEventFinished=function(){return b.isEventFinished(q.data)},b.hasSets(q.data)?(a.$watch(function(){return q.data.scores.home.gameSequence},function(){m(d.HOME)},!0),a.$watch(function(){return q.data.scores.away.gameSequence},function(){m(d.AWAY)},!0),a.$watch(function(){return q.data.scores.currentSet},function(){p()}),b.isVolleyBall(q.data)?(a.$watch(function(){return q.data.scores.home.score},function(){l(d.HOME)}),a.$watch(function(){return q.data.scores.away.score},function(){l(d.AWAY)})):(a.$watch(function(){return q.data.scores.home.games},function(){k(d.HOME)}),a.$watch(function(){return q.data.scores.away.games},function(){k(d.AWAY)}))):(a.$watch(function(){return q.data.scores.home.quarterByQuarter},function(){n(d.HOME)},!0),a.$watch(function(){return q.data.scores.away.quarterByQuarter},function(){n(d.AWAY)},!0)),a.$watch(function(){return q.data.inPlay},function(){i()}),a.$watch(function(){return q.data.matchStatus},function(){i(),(b.hasPeriods(q.data)||b.hasQuarters(q.data))&&o()})}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","BF.LivescoresPartialsHelper","BF.LIVESCORES.MATCH_STATUS","BF.LIVESCORES.RUNNER","BF.LivescoresTemplateService","BF.LIVESCORES.VIEW_TYPE","BF.SPORT","BF.Lodash"],c["default"]=d},{}],26:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,template:'<ng-include src="::extendedScoresCtrl.templateUrl"></ng-include>',controller:"BF.LivescoresExtendedScoresController",controllerAs:"extendedScoresCtrl"}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],27:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.INNINGS_CONSTANTS={TWO_INNINGS_MATCH_TYPE:["TEST","FIRST_CLASS"],DEC:"DEC",ALL_OUT:"ALL_OUT"}},{}],28:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){function h(){l(),a.$watch(function(){return u.inPlay},function(){k()}),a.$watch(function(){return u.matchStatus},function(){k()}),a.$watch(function(){return u.scores},function(){j()}),a.$watch(function(){return u.scores&&u.scores.home&&u.scores.home.highlight},function(){r()},!0),a.$watch(function(){return u.scores&&u.scores.away&&u.scores.away.highlight},function(){r()},!0),a.$watch(function(){return u.scores&&u.scores.home&&u.scores.home.innings},function(){m("home",u.scores.home.innings)},!0),a.$watch(function(){return u.scores&&u.scores.away&&u.scores.away.innings},function(){m("away",u.scores.away.innings)},!0)}function i(a){return isNaN(parseInt(a,10))?"-":a}function j(){t.scores=u.scores}function k(){t.isInPlay=c.isInPlay(u)}function l(){function a(){return{home:{runsWickets:"-",oversTries:"",decString:"",isHighlighted:!1},away:{runsWickets:"-",oversTries:"",decString:"",isHighlighted:!1}}}t.innings=t.hasTwoInnings?[a(),a()]:[a()]}function m(a,b){b&&angular.forEach(b,function(b,c){t.innings[c]&&(t.innings[c][a].runsWickets=n(b),t.innings[c][a].decString=p(b),t.innings[c][a].oversTries=o(b))})}function n(a){var b="-";if(a&&a.wickets)switch(a.wickets){case f.DEC:case f.ALL_OUT:b=a.runs;break;default:b=a.runs+"/"+a.wickets}return b}function o(a){return a&&a.overs?"("+a.overs+")":""}function p(a){return a&&a.wickets===f.DEC?" "+g("I18N.LIVESCORES.DEC"):""}function q(){var a=b.get(u,["scores","home","innings",1])||b.get(u,["scores","away","innings",1]);return a?2:1}function r(){for(var a=q(),b=0;b<t.innings.length;b++)b===a-1?(t.innings[b].home.isHighlighted=u.scores.home.highlight,t.innings[b].away.isHighlighted=u.scores.away.highlight):(t.innings[b].home.isHighlighted=!1,t.innings[b].away.isHighlighted=!1)}function s(a){return"-"===a.runsWickets}var t=this,u=a.livescoresCtrl.data;t.isInPlay=null,t.scores=null,t.templateUrl=d.getTemplateUrl(u.eventTypeId,e.INNINGS,a.livescoresCtrl.templatesOverride),t.hasTwoInnings=f.TWO_INNINGS_MATCH_TYPE.indexOf(u.matchType)>-1,t.viewType=a.livescoresCtrl.viewType,t.innings=[],t.isUnplayed=s,t.isHomeHighlighted=!1,t.isAwayHighlighted=!1,t.hasBroadcastsIcons=a.livescoresCtrl.templates.hasBroadcastsIcons,h(),t.getCurrentInning=function(a){var b=q()-1,c=u.scores[a].innings[b];if(angular.isUndefined(c))return"-";var d=i(c.runs),e=i(c.wickets);return"-"===d&&"-"===e?"-":d+"/"+e},t.getGameState=function(){if(t.isInPlay&&t.scores){var a=t.scores.currentDay;return a>1&&g("I18N.LIVESCORES.DAY")+" "+a}return!!c.isEventFinished(u)&&g("I18N.LIVESCORES.FULL_TIME")}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","BF.Lodash","BF.LivescoresPartialsHelper","BF.LivescoresTemplateService","BF.LIVESCORES.VIEW_TYPE","BF.LIVESCORES.INNINGS_CONSTANTS","translateFilter"],c["default"]=d},{}],29:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,template:'<ng-include src="::inningsCtrl.templateUrl"></ng-include>',controller:"BF.LivescoresInningsController",controllerAs:"inningsCtrl"}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],30:[function(a,b,c){"use strict";function d(a,b,c,d,e){function f(){l.isInPlay=b.isInPlay(m)}function g(){l.finished=b.isEventFinished(m)}function h(){var a=b.isEventOnPenalties(m),c=b.isEventFinished(m)&&b.hasPenalties(m);return n&&(a||c)}function i(){if(h())l.scoreType="penaltiesScore";else switch(m.eventTypeId){case e.type.snooker.eventTypeId:l.scoreType="games";break;case e.type.darts.eventTypeId:l.scoreType=b.hasDartsSets(m)?"sets":"games";break;default:l.scoreType=b.hasSets(m)?"sets":"score"}}function j(){f(),g(),i()}function k(){l.scores=m.scores,i()}var l=this,m=a.livescoresCtrl.data,n=b.isMiniDisplay(a.livescoresCtrl.viewType)||b.isCouponDisplay(a.livescoresCtrl.viewType);l.isInPlay=null,l.finished=null,l.scoreType=null,l.scores=null,l.runnersOrder=b.getRunnersByOrder(m),l.templateUrl=c.getTemplateUrl(m.eventTypeId,d.MATCH_SCORES,a.livescoresCtrl.templatesOverride),a.$watch(function(){return m.inPlay},function(){f()}),a.$watch(function(){return m.matchStatus},function(){j()}),a.$watch(function(){return m.scores},function(){k()})}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","BF.LivescoresPartialsHelper","BF.LivescoresTemplateService","BF.LIVESCORES.VIEW_TYPE","BF.SPORT"],c["default"]=d},{}],31:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,template:'<ng-include src="::matchScoresCtrl.templateUrl"></ng-include>',controller:"BF.LivescoresMatchScoresController",controllerAs:"matchScoresCtrl"}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],32:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){function g(a){return a===d.HOME?d.AWAY:d.HOME}function h(a){var b=o.data.scores[a].penaltiesSequence,c=b.length%m;return 1===c}function i(a){if(angular.isUndefined(a))return n;switch(o.data.eventTypeId){case e.type["ice-hockey"].eventTypeId:return a?"ice-hockey-scored":"ice-hockey-missed";case e.type.handball.eventTypeId:return a?"handball-scored":"handball-missed";default:return a?"default-scored":"default-missed"}}function j(a){var b=o.data.scores[a].penaltiesSequence,c=b.length%m||(h(g(a))?0:m);f.fill(o.penalties[a],n),b.slice(b.length-c).forEach(function(b,c){o.penalties[a][c]=i(b)})}var k=3,l=5,m=function(){switch(a.livescoresCtrl.data.eventTypeId){case e.type["ice-hockey"].eventTypeId:return k;default:return l}}(),n="empty",o=this;o.data=a.livescoresCtrl.data,
o.penalties={home:Array(m),away:Array(m)},o.templateUrl=b.getTemplateUrl(o.data.eventTypeId,c.PENALTIES,a.livescoresCtrl.templatesOverride),a.$watch(function(){return o.data.scores.home.penaltiesSequence},function(){j(d.HOME)},!0),a.$watch(function(){return o.data.scores.away.penaltiesSequence},function(){j(d.AWAY)},!0)}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","BF.LivescoresTemplateService","BF.LIVESCORES.VIEW_TYPE","BF.LIVESCORES.RUNNER","BF.SPORT","BF.Lodash"],c["default"]=d},{}],33:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,template:'<ng-include src="::penaltiesCtrl.templateUrl"></ng-include>',controller:"BF.LivescoresPenaltiesController",controllerAs:"penaltiesCtrl"}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],34:[function(a,b,c){"use strict";function d(a,b,c,d,e){function f(a){return angular.isNumber(a)?a.toString().length:0}function g(a){var b=[e.type.tennis.eventTypeId,e.type["american-football"].eventTypeId,e.type.darts.eventTypeId,e.type.cricket.eventTypeId,e.type.volleyball.eventTypeId,e.type.snooker.eventTypeId];return b.indexOf(a)!==-1}var h=this;this.data=a.livescoresCtrl.data,this.areRunnersReversed=b.isRunnersOrderReversed(this.data),this.runnersOrder=b.getRunnersByOrder(this.data),this.isHomeLoser=null,this.isAwayLoser=null,this.isShowingTurns=null,this.homeSeedDigits=0,this.awaySeedDigits=0,this.templateUrl=c.getTemplateUrl(this.data.eventTypeId,d.RUNNERS,a.livescoresCtrl.templatesOverride),this.getSideSeedDigits=function(a){return"home"===a?this.homeSeedDigits:this.awaySeedDigits},this.isLoser=function(a){return"home"===a?this.isHomeLoser:this.isAwayLoser},this.getRunnerName=function(a){return"home"===a?this.data.homeRunnerName:this.data.awayRunnerName};var i=function(){var a=b.hasInnings(h.data),c=b.hasScores(h.data),d=b.isEventFinished(h.data),e=d&&c,i=b.isTennis(h.data);if(h.isShowingTurns=!d&&(c||a)&&g(h.data.eventTypeId),i&&c&&(h.homeSeedDigits=f(h.data.scores.home.playerSeed),h.awaySeedDigits=f(h.data.scores.away.playerSeed)),e){var j=b.hasSets(h.data),k=b.hasLegs(h.data),l=b.hasPenalties(h.data),m=h.data.scores.home,n=h.data.scores.away;j||i?(h.isHomeLoser=m.sets<n.sets,h.isAwayLoser=m.sets>n.sets):k?(h.isHomeLoser=m.games<n.games,h.isAwayLoser=m.games>n.games):l?(h.isHomeLoser=m.penaltiesScore<n.penaltiesScore,h.isAwayLoser=m.penaltiesScore>n.penaltiesScore):(h.isHomeLoser=m.score<n.score,h.isAwayLoser=m.score>n.score)}else h.isHomeLoser=!1,h.isAwayLoser=!1};a.$watch(function(){return{matchStatus:h.data.matchStatus,scores:h.data.scores}},function(){i()},!0)}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","BF.LivescoresPartialsHelper","BF.LivescoresTemplateService","BF.LIVESCORES.VIEW_TYPE","BF.SPORT"],c["default"]=d},{}],35:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,template:'<ng-include src="::runnersCtrl.templateUrl"></ng-include>',controller:"BF.LivescoresRunnersController",controllerAs:"runnersCtrl"}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],36:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,templateUrl:"/views/directives/scores/views/scores.html"}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],37:[function(a,b,c){"use strict";function d(a,b,c,d,e){function f(){h.isInPlay=c.isInPlay(g)}var g=a.livescoresCtrl.data,h=this;h.templateUrl=d.getTemplateUrl(g.eventTypeId,e.START_DATE,a.livescoresCtrl.templatesOverride),this.getLabel=function(){return b.getEventStartTime(g,a.livescoresCtrl.viewType)},a.$watch(function(){return{inplay:g.inPlay,matchStatus:g.matchStatus}},function(){f()},!0)}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","BF.LivescoresStartDateHelper","BF.LivescoresPartialsHelper","BF.LivescoresTemplateService","BF.LIVESCORES.VIEW_TYPE"],c["default"]=d},{}],38:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,template:'<ng-include src="::startDateCtrl.templateUrl"></ng-include>',controller:"BF.LivescoresStartDateController",controllerAs:"startDateCtrl"}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],39:[function(a,b,c){"use strict";function d(a,b,c){function d(a){var b=a-new Date;return Math.round(b/6e4)}function e(a){var b=d(a);return b<0?0:b}function f(a){return e(a)<=2}function g(a){var b=d(a);return b>=0&&b<60}function h(a){var b=new Date,c=angular.copy(a);return b.setHours(0,0,0,0),c.setHours(0,0,0,0),c.getTime()===b.getTime()}function i(a){var b=new Date,c=angular.copy(a);return b.setHours(b.getHours()+24),b.setHours(0,0,0,0),c.setHours(0,0,0,0),c.getTime()===b.getTime()}this.getEventStartTime=function(d,j){if(!d.date||c.isEventFinished(d))return null;if(d.inPlay)return b("I18N.LIVESCORES.INPLAY");var k=d.date,l=c.isMiniDisplay(j)||c.isCouponDisplay(j);return f(k)&&d.canTurnInPlay?b("I18N.LIVESCORES.STARTING_SOON"):g(k)&&d.canTurnInPlay?b("I18N.LIVESCORES.STARTING_IN",{remainingTime:e(k)}):h(k)?b("I18N.LIVESCORES.STARTING_TODAY",{startTime:a(k,"HH:mm")}):i(k)?l?a(k,"EEE HH:mm"):b("I18N.LIVESCORES.STARTING_TOMORROW",{startTime:a(k,"HH:mm")}):l?a(k,"MMM d HH:mm"):a(k,"EEE, d MMM, HH:mm")}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["dateFilter","translateFilter","BF.LivescoresPartialsHelper"],c["default"]=d},{}],40:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){function h(a){switch(a.matchStatus){case c.KICK_OFF:case c.FIRST_HALF_END:if(!d.isFootball(a))return b.instant("I18N.LIVESCORES.FIRST_HALF");break;case c.SECOND_HALF_KICK_OFF:case c.SECOND_HALF_END:if(!d.isFootball(a))return b.instant("I18N.LIVESCORES.SECOND_HALF");break;case c.EXTRA_TIME_KICK_OFF:case c.EXTRA_TIME_PAUSE:case c.EXTRA_TIME_SECOND_HALF_KICK_OFF:return b.instant("I18N.LIVESCORES.EXTRA_TIME");case c.START_OVERTIME:case c.OVERTIME:case c.AWAITING_OVERTIME:case c.FIRST_HALF_OVERTIME:case c.HALF_TIME_OVERTIME:case c.SECOND_HALF_OVERTIME:return b.instant("I18N.LIVESCORES.OVERTIME")+(d.getOvertimesCount(a)||"");case c.FIRST_PERIOD:return b.instant("I18N.LIVESCORES.FIRST_PERIOD");case c.SECOND_PERIOD:return b.instant("I18N.LIVESCORES.SECOND_PERIOD");case c.THIRD_PERIOD:return b.instant("I18N.LIVESCORES.THIRD_PERIOD");case c.START_FIRST_QUARTER:return b.instant("I18N.LIVESCORES.FIRST_QUARTER");case c.START_SECOND_QUARTER:return b.instant("I18N.LIVESCORES.SECOND_QUARTER");case c.START_THIRD_QUARTER:return b.instant("I18N.LIVESCORES.THIRD_QUARTER");case c.START_FOURTH_QUARTER:return b.instant("I18N.LIVESCORES.FOURTH_QUARTER");case c.STOP_FIRST_QUARTER:return d.hasPeriods(a)?b.instant("I18N.LIVESCORES.FIRST_PERIOD"):b.instant("I18N.LIVESCORES.FIRST_QUARTER");case c.STOP_SECOND_QUARTER:return d.hasPeriods(a)?b.instant("I18N.LIVESCORES.SECOND_PERIOD"):b.instant("I18N.LIVESCORES.SECOND_QUARTER");case c.STOP_THIRD_QUARTER:return d.hasPeriods(a)?b.instant("I18N.LIVESCORES.THIRD_PERIOD"):b.instant("I18N.LIVESCORES.THIRD_QUARTER");case c.STOP_FOURTH_QUARTER:return b.instant("I18N.LIVESCORES.OVERTIME")}}function i(a){switch(a.matchStatus){case c.FIRST_HALF_END:case c.EXTRA_TIME_PAUSE:return b.instant("I18N.LIVESCORES.HALF_TIME");case c.PENALTIES:return b.instant("I18N.LIVESCORES.PENALTIES");case c.FINISHED:return d.hasPenalties(a)&&p?b.instant("I18N.LIVESCORES.PENALTIES"):b.instant("I18N.LIVESCORES.END");case c.SECOND_HALF_END:return b.instant("I18N.LIVESCORES.FULL_TIME");case c.EXTRA_TIME_END:return b.instant("I18N.LIVESCORES.EXTRA_TIME");case c.KICK_OFF:case c.SECOND_HALF_KICK_OFF:case c.EXTRA_TIME_KICK_OFF:case c.EXTRA_TIME_SECOND_HALF_KICK_OFF:case c.START_OVERTIME:case c.OVERTIME:case c.AWAITING_OVERTIME:case c.FIRST_HALF_OVERTIME:case c.HALF_TIME_OVERTIME:case c.SECOND_HALF_OVERTIME:case c.FIRST_PERIOD:case c.SECOND_PERIOD:case c.THIRD_PERIOD:case c.START_FIRST_QUARTER:case c.START_SECOND_QUARTER:case c.START_THIRD_QUARTER:case c.START_FOURTH_QUARTER:return d.hasTimeElapsed(a)&&a.timeElapsed+"'";case c.STOP_FIRST_QUARTER:case c.STOP_SECOND_QUARTER:case c.STOP_THIRD_QUARTER:return d.hasPeriods(a)?b.instant("I18N.LIVESCORES.END"):d.hasTimeElapsed(a)&&a.timeElapsed+"'";case c.STOP_FOURTH_QUARTER:return d.hasTimeElapsed(a)&&a.timeElapsed+"'"}}function j(a){return d.isEventFinished(a)}function k(a){var d=[c.KICK_OFF,c.SECOND_HALF_KICK_OFF,c.EXTRA_TIME_KICK_OFF,c.EXTRA_TIME_SECOND_HALF_KICK_OFF];if(g.find(d,function(b){return b===a.matchStatus}))return a.injuryTime&&"+"+a.injuryTime;switch(a.matchStatus){case c.EXTRA_TIME_END:return b.instant("I18N.LIVESCORES.END")}}var l=this,m=this,n=a.livescoresCtrl.data,o=a.livescoresCtrl.viewType,p=d.isMiniDisplay(o)||d.isCouponDisplay(o);m.templateUrl=e.getTemplateUrl(n.eventTypeId,f.TIME_ELAPSED,a.livescoresCtrl.templatesOverride),a.$watch(function(){return{timeElapsed:n.timeElapsed,injuryTime:n.injuryTime,matchStatus:n.matchStatus}},function(){l.topLabel=h(n),l.middleLabel=i(n),l.middleLabelStyle=j(n),l.bottomLabel=k(n)},!0)}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","$translate","BF.LIVESCORES.MATCH_STATUS","BF.LivescoresPartialsHelper","BF.LivescoresTemplateService","BF.LIVESCORES.VIEW_TYPE","BF.Lodash"],c["default"]=d},{}],41:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,template:'<ng-include src="::timeElapsedCtrl.templateUrl"></ng-include>',controller:"BF.LivescoresTimeElapsedController",controllerAs:"timeElapsedCtrl"}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],42:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:{model:"="},templateUrl:"/views/directives/timeline/views/timeline-bar.html"}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],43:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.TIMELINE={PERIODS:{regularTime:{firstHalf:{elapsedTime:void 0,events:[]},secondHalf:{elapsedTime:void 0,events:[]}},extraTime:{firstHalf:{elapsedTime:void 0,events:[]},secondHalf:{elapsedTime:void 0,events:[]}}}}},{}],44:[function(a,b,c){"use strict";function d(a,b,c,d,e){function f(a){return Math.min(Math.floor(100*a/t),100)}function g(a){return a=t-(v-a),Math.min(Math.floor(100*a/t),100)}function h(a){return a=u-(v+u-a),Math.min(Math.floor(100*a/u),100)}function i(a){return a=u-(v+2*u-a),Math.min(Math.floor(100*a/u),100)}function j(a,c){switch(c){case b.KICK_OFF:return f(a);case b.SECOND_HALF_KICK_OFF:return g(a);case b.EXTRA_TIME_KICK_OFF:return h(a);case b.EXTRA_TIME_SECOND_HALF_KICK_OFF:return i(a)}}function k(){return x.indexOf(B.matchStatus)!==-1}function l(){k()&&(C.timeline.extraTime=angular.copy(c.PERIODS.extraTime),D())}function m(){var a=B.matchStatus;switch(a===b.FINISHED&&(a=C.timeline.extraTime?w.EXTRA_TIME:w.REGULAR_TIME),a){case w.EXTRA_TIME:case b.EXTRA_TIME_SECOND_HALF_KICK_OFF:case b.EXTRA_TIME_END:case b.PENALTIES:C.timeline.extraTime.secondHalf.elapsedTime=i(B.timeElapsed),C.timeline.extraTime.firstHalf.elapsedTime=100,C.timeline.regularTime.secondHalf.elapsedTime=100,C.timeline.regularTime.firstHalf.elapsedTime=100;break;case b.EXTRA_TIME_KICK_OFF:case b.EXTRA_TIME_PAUSE:C.timeline.extraTime.firstHalf.elapsedTime=h(B.timeElapsed),C.timeline.regularTime.secondHalf.elapsedTime=100,C.timeline.regularTime.firstHalf.elapsedTime=100;break;case w.REGULAR_TIME:case b.SECOND_HALF_KICK_OFF:case b.SECOND_HALF_END:C.timeline.regularTime.secondHalf.elapsedTime=g(B.timeElapsed),C.timeline.regularTime.firstHalf.elapsedTime=100;break;case b.KICK_OFF:case b.FIRST_HALF_END:C.timeline.regularTime.firstHalf.elapsedTime=f(B.timeElapsed)}}function n(a,b){return{type:A[a.type],time:a.time,team:a.team,teamName:a.teamName,position:j(a.time,b)}}function o(){C.timeline.regularTime.firstHalf.events.length=0,C.timeline.regularTime.secondHalf.events.length=0,C.timeline.extraTime&&(C.timeline.extraTime.firstHalf.events.length=0,C.timeline.extraTime.secondHalf.events.length=0)}function p(a){switch(a){case b.KICK_OFF:return C.timeline.regularTime.firstHalf;case b.SECOND_HALF_KICK_OFF:return C.timeline.regularTime.secondHalf;case b.EXTRA_TIME_KICK_OFF:return C.timeline.extraTime.firstHalf;case b.EXTRA_TIME_SECOND_HALF_KICK_OFF:return C.timeline.extraTime.secondHalf}}function q(a){return y.indexOf(a)!==-1}function r(a){return z.indexOf(a)!==-1}function s(){var a=void 0,b=void 0;o(),B.timeline.forEach(function(c){return r(c.type)?void a.events.push(n(c,b)):void(q(c.type)&&(a=p(c.type),b=c.type))})}var t=45,u=15,v=2*t,w={REGULAR_TIME:b.FINISHED+"_REGULAR_TIME",EXTRA_TIME:b.FINISHED+"_EXTRA_TIME"},x=[b.EXTRA_TIME_KICK_OFF,b.EXTRA_TIME_PAUSE,b.EXTRA_TIME_SECOND_HALF_KICK_OFF,b.EXTRA_TIME_END],y=[b.KICK_OFF,b.SECOND_HALF_KICK_OFF,b.EXTRA_TIME_KICK_OFF,b.EXTRA_TIME_SECOND_HALF_KICK_OFF],z=["Goal","YellowCard","RedCard","YellowRedCard"],A={Goal:"goal",YellowCard:"yellow-card",RedCard:"red-card",YellowRedCard:"yellow-red-card"},B=a.livescoresCtrl.data,C=this;C.timeline={regularTime:angular.copy(c.PERIODS.regularTime)},C.templateUrl=d.getTemplateUrl(B.eventTypeId,e.TIMELINE,a.livescoresCtrl.templatesOverride);var D=a.$watch(function(){return B.matchStatus},function(){l()});a.$watch(function(){return B.timeline&&B.timeline.length},function(a){a&&s()}),a.$watch(function(){return B.timeElapsed},function(){m()})}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$scope","BF.LIVESCORES.MATCH_STATUS","BF.LIVESCORES.TIMELINE","BF.LivescoresTemplateService","BF.LIVESCORES.VIEW_TYPE"],c["default"]=d},{}],45:[function(a,b,c){"use strict";function d(){return{restrict:"E",scope:!0,template:'<div class="template-container" ng-include="::timelineCtrl.templateUrl"></div>',controller:"BF.LivescoresTimelineController",controllerAs:"timelineCtrl"}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],46:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=angular.copy(b),h=angular.copy(e),i=angular.copy(d),j=angular.copy(f);this.overrideMarketStatePollingOptions=function(a,b,c){if(!a||!b||!c)throw new Error("Required parameters eventTypeId, method and pollingOptions not provided.");g[a]||(g[a]={}),g[a][b]||(g[a][b]={}),g[a][b]=c},this.overrideSeasPollingOptions=function(a,b,c,d){if(!a||!b||angular.isUndefined(c)||!d)throw new Error("Required parameters eventTypeId, method, isFirstLoad and pollingOptions not provided.");h[a]||(h[a]={}),h[a][b]||(h[a][b]={}),c?h[a][b].firstLoad=d:h[a][b].update=d},this.overrideSeasMethod=function(a,b){if(!a||!b)throw new Error("Required parameters eventTypeId and seasMethod not provided.");if(!b.firstLoad&&!b.update)throw new Error("Parameter seasMethod needs to have firstLoad and/or update.");if(!i[a])throw new Error("Event type id "+a+" is not yet supported.");b.firstLoad&&(i[a].firstLoad=b.firstLoad),b.update&&(i[a].update=b.update)},this.overrideTemplate=function(a,b){if(!a||!b)throw new Error("Required parameters eventTypeId and templateConfig not provided.");if(!b.FULL&&!b.MINI&&!b.COUPON)throw new Error("Parameter templateConfig needs to have FULL and/or MINI and/or COUPON.");j[a]||(j[a]={}),b.FULL&&(j[a].FULL=b.FULL),b.MINI&&(j[a].MINI=b.MINI),b.COUPON&&(j[a].COUPON=b.COUPON)},this.setProductType=function(b){switch(b){case c.TYPE.SPORTSBOOK:case c.TYPE.EXCHANGE:return a.constant("BF.LIVESCORES.PRODUCT",b);default:throw new Error("Unknown product type: '"+b+"'")}},this.$get=function(){function a(){return g}function b(){return h}function c(){return i}function d(){return j}return{getMarketStatePollingOptionsConfig:a,getSeasPollingOptionsConfig:b,getSeasMethodConfig:c,getTemplateUrlConfig:d}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$provide","BF.LIVESCORES.MARKET_STATE_POLLING_OPTIONS","BF.LIVESCORES.PRODUCT_TYPES","BF.LIVESCORES.SEAS_CONFIG","BF.LIVESCORES.SEAS_POLLING_OPTIONS","BF.LIVESCORES.TEMPLATE_CONFIG"],c["default"]=d},{}],47:[function(a,b,c){"use strict";function d(a,b){var c=function(){if(a[b])return a[b];throw new Error("There is no Facet Client for product type: '"+b+"'")};return{getFacetClient:c}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.LIVESCORES.FACET_CLIENTS","BF.LIVESCORES.PRODUCT"],c["default"]=d},{}],48:[function(a,b,c){"use strict";function d(a,b,c){function d(c){var d=Object.keys(b.EVENT_MODEL_TEMPLATE),e=Object.keys(c),f=a.difference(d,e);return 0===f.length}function e(a){return/\s@ | la\s/.test(a)}function f(){return a.reduce(c,function(b,c){return a.union(b,c.EXCHANGE,c.SPORTSBOOK)},[])}function g(a){if(!angular.isObject(a))throw new Error("Required parameter: `bf-livescores` requires `event-data`");if(!a.eventId)throw new Error("Required parameter: `bf-livescores` requires `event-data` to have an eventId")}return{getPrimaryMarketTypesSet:f,isEventModelCompliant:d,isRunnersOrderReversed:e,validateEventData:g}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.Lodash","BF.LIVESCORES.DATA_MODEL","BF.LIVESCORES.PRIMARY_MARKET_TYPES"],c["default"]=d},{}],49:[function(a,b,c){"use strict";function d(a,b,c,d,e){function f(a){return a.matchStatus===b.FINISHED}function g(a){return a.matchStatus===b.FIRST_HALF_END}function h(a){return a.matchStatus===b.PENALTIES}function i(a){return a.matchStatus===b.SECOND_HALF_END}function j(a){return a.inPlay&&!f(a)}function k(a){return a===c.COUPON}function l(a){return a===c.MINI}function m(a){return e.isRunnersOrderReversed(a.eventName)}function n(b){return b.eventTypeId===a.type.football.eventTypeId}function o(b){return b.eventTypeId===a.type.tennis.eventTypeId}function p(b){return b.eventTypeId===a.type.darts.eventTypeId}function q(b){return b.eventTypeId===a.type.volleyball.eventTypeId}function r(b){return b.eventTypeId===a.type.snooker.eventTypeId}function s(b){return b.eventTypeId===a.type.cricket.eventTypeId}function t(b){return b.eventTypeId===a.type.basketball.eventTypeId&&b.scores.home.quarterByQuarter&&b.scores.home.quarterByQuarter.length>Q?b.scores.home.quarterByQuarter.length-Q:0}function u(a){return m(a)?d.DEFAULT_ORDER.slice().reverse():d.DEFAULT_ORDER}function v(a){return a.tvChannels&&a.tvChannels.length>0}function w(a){return a.liveVideo}function x(a){var b="Penalties"===a.matchStatus;return{hasTimeElapsed:L(a),isInPlay:j(a),hasInnings:K(a),hasScores:A(a),hasTimeline:a.timeline&&!f(a)&&!b,hasPenalties:b,hasAdditionalInfo:z(a),hasBroadcastsIcons:w(a)||v(a)}}function y(a){return f(a)&&s(a)}function z(a){return!y(a)&&(f(a)||C(a)&&!g(a)||N(a)||M(a)||P(a))}function A(a){return Boolean(a.scores&&null!=a.scores.home.score&&null!=a.scores.away.score)}function B(a){return R.indexOf(a.eventTypeId)!==-1}function C(a){return A(a)&&null!=a.scores.home.halfTimeScore&&null!=a.scores.away.halfTimeScore}function D(a){return A(a)&&null!=a.scores.home.fullTimeScore&&null!=a.scores.away.fullTimeScore}function E(a){return Boolean(a.scores&&angular.isNumber(a.scores.home.penaltiesScore)&&angular.isNumber(a.scores.away.penaltiesScore))}function F(a){return Boolean(a.scores&&angular.isNumber(a.scores.home.sets)&&angular.isNumber(a.scores.away.sets))}function G(a){return Boolean(a.scores&&angular.isNumber(a.scores.home.games)&&angular.isNumber(a.scores.away.games))}function H(a){return p(a)&&a.hasSets}function I(b){var c=[a.type["ice-hockey"].eventTypeId];return c.indexOf(b.eventTypeId)!==-1}function J(b){var c=[a.type.basketball.eventTypeId,a.type["american-football"].eventTypeId];return c.indexOf(b.eventTypeId)!==-1}function K(b){return Boolean(b.eventTypeId===a.type.cricket.eventTypeId&&b.scores&&(b.scores.home.innings[0]||b.scores.away.innings[0]))}function L(a){return!F(a)&&a.timeElapsed>-1}function M(a){return Boolean(a.stateOfPlay)}function N(a){return Boolean(a.matchInfo&&a.matchInfo.surface)}function O(a){return r(a)&&j(a)&&angular.isDefined(a.scores.home.score)&&angular.isDefined(a.scores.away.score)}function P(a){return angular.isObject(a.stateOfBall)}var Q=4,R=[a.type.tennis.eventTypeId,a.type.darts.eventTypeId,a.type.snooker.eventTypeId];return{isEventFinished:f,isEventOnFirstHalfEnd:g,isEventOnPenalties:h,isEventOnSecondHalfEnd:i,isInPlay:j,isCouponDisplay:k,isMiniDisplay:l,isRunnersOrderReversed:m,isFootball:n,isTennis:o,isDarts:p,isVolleyBall:q,isSnooker:r,isCricket:s,getOvertimesCount:t,getRunnersByOrder:u,getTemplateHelpers:x,hasTvChannels:v,hasLiveVideo:w,hasAdditionalInfo:z,hasScores:A,hasPoints:B,hasHalfTimeScores:C,hasFullTimeScores:D,hasPenalties:E,hasSets:F,hasLegs:G,hasDartsSets:H,hasPeriods:I,hasQuarters:J,hasInnings:K,hasTimeElapsed:L,hasStateOfPlay:M,hasSurfaceInfo:N,hasCurrentBreakInfo:O,hasStateOfBall:P}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.SPORT","BF.LIVESCORES.MATCH_STATUS","BF.LIVESCORES.DISPLAY_TYPE","BF.LIVESCORES.RUNNER","BF.LivescoresHelper"],c["default"]=d},{}],50:[function(a,b,c){"use strict";function d(a,b,c){function d(a,c){var d="UK",e=b.getExchangeContentGroup(),f=e&&e.regionCode||d,g=b.getLocaleCode();switch(a){case"eventDetails":return[[c],g,f];case"eventTimelines":return[[c],g];case"scores":return[[c],g];case"scoresAndBroadcast":return[[c],f,g];default:throw new Error("Unknown SEAS method '"+a+"'")}}function e(b,d,e,f){var g=["MARKET_STATE"],h=c.getMarketStatePollingOptions(f,"getByMarkets"),i=[[b],g];return a.addCallback("BF.ExchangeReadOnlyClient","getByMarkets",i,d,e,h)}function f(b,d,e,f){var g=c.getMarketStatePollingOptions(f,"getMarketPrices"),h=[[b],{}];return a.addCallback("BF.FixedOddsReadOnlyClient","getMarketPrices",h,d,e,g)}function g(b,e,f,g,h,i){var j=c.getSeasPollingOptions(g,h,i),k=d(h,b);return a.addCallback("BF.SeasClient",h,k,e,f,j)}function h(a){a&&a.removeCallback()}return{getSeasRequestParamsPerMethod:d,registerEroPoller:e,registerFobPoller:f,registerSeasPoller:g,removeCallback:h}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.Polling","BF.User","BF.LivescoresPollingOptionsService"],c["default"]=d},{}],51:[function(a,b,c){"use strict";function d(a){function b(a,b){if(d[a]&&d[a][b])return d[a][b];if(d["default"]&&d["default"][b])return d["default"][b];throw new Error("Method '"+b+"' has no default configuration.")}function c(a,b,c){var d=c?"firstLoad":"update";if(e[a]&&e[a][b]&&e[a][b][d])return e[a][b][d];if(e["default"]&&e["default"][b]&&e["default"][b][d])return e["default"][b][d];throw new Error("Method '"+b+"' has no default configuration.")}var d=a.getMarketStatePollingOptionsConfig(),e=a.getSeasPollingOptionsConfig();return{getMarketStatePollingOptions:b,getSeasPollingOptions:c}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.LivescoresConfigService"],c["default"]=d},{}],52:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){function h(a){return a===e.KICK_OFF||a===e.FIRST_HALF_END}function i(a){return a===e.SECOND_HALF_KICK_OFF||a===e.SECOND_HALF_END||a===e.FINISHED}function j(a){return a===e.EXTRA_TIME_KICK_OFF||a===e.EXTRA_TIME_PAUSE}function k(a){return a===e.EXTRA_TIME_SECOND_HALF_KICK_OFF||a===e.FINISHED}function l(a){return a>M}function m(a){return a>O}function n(a){return a>P}function o(a){return a>P}function p(a){return angular.isString(a)&&a.length?parseInt(a,10):null}function q(a,b){switch(b){case g.type.tennis.eventTypeId:var c=p(a);return c?c:a&&a.length?a:null;default:return p(a)}}function r(a,b){var c=p(a);return b===e.PENALTIES?c||0:c}function s(a){var b=a.eventTypes[0].eventNodes;if(b&&1===b.length){var c=b[0].marketNodes;if(c&&1===c.length)return c[0].state.inplay}return!1}function t(a){return a[0].inplay}function u(a){var b=a.inPlayMatchStatus||a.matchStatus,c=a.timeElapsed,d=c,e=void 0;return angular.isNumber(a.elapsedRegularTime)?(e=a.elapsedAddedTime,d=a.elapsedRegularTime):h(b)&&l(c)?(e=c-M,d=M):i(b)&&m(c)?(e=c-O,d=O):j(b)&&n(c)?(e=c-P,d=P):k(b)&&o(c)&&(e=c-Q,d=Q),{timeElapsed:d,injuryTime:e||null}}function v(a){return{timeElapsed:a.timeElapsed}}function w(a,b){var c=b.state||b,d=c.score;if(d)return{home:{score:q(d.home.score,a.eventTypeId),halfTimeScore:p(d.home.halfTimeScore),fullTimeScore:p(d.home.fullTimeScore),innings:[d.home.inning1,d.home.inning2],games:p(d.home.games),sets:p(d.home.sets),quarterByQuarter:d.home.quarterByQuarter,gameSequence:d.home.gameSequence,penaltiesSequence:d.home.penaltiesSequence,penaltiesScore:r(d.home.penaltiesScore,c.matchStatus),highlight:d.home.highlight,playerSeed:d.home.playerSeed},away:{score:q(d.away.score,a.eventTypeId),halfTimeScore:p(d.away.halfTimeScore),fullTimeScore:p(d.away.fullTimeScore),innings:[d.away.inning1,d.away.inning2],games:p(d.away.games),sets:p(d.away.sets),quarterByQuarter:d.away.quarterByQuarter,gameSequence:d.away.gameSequence,penaltiesSequence:d.away.penaltiesSequence,penaltiesScore:r(d.away.penaltiesScore,c.matchStatus),highlight:d.away.highlight,playerSeed:d.away.playerSeed},currentSet:c.currentSet,currentDay:p(c.currentDay)}}function x(a){var b=a.broadcasts;if(b)return b.isLiveVideoAvailable||b.isDataVisualizationAvailable}function y(a){var b=a.broadcasts;return b&&b.isLiveVideoAvailable}function z(a){var b=a.state||a;return b.inPlayMatchStatus||b.matchStatus}function A(a){var b=a.state||a;return b.matchType}function B(a){return a.stateOfPlayStr}function C(a){return a.stateOfBall||a.state&&a.state.stateOfBall}function D(a){var b=a.matchInfo;return b||(b={}),{surface:b.surface,numberOfSets:b.numberOfSets||5}}function E(a){var b=a.state||a;return b.hasSets||!1}function F(a){return a.broadcasts&&a.broadcasts.tv}function G(a,b){var c=b.state||b;switch(a.eventTypeId){case g.type.football.eventTypeId:return u(c)}return v(c)}function H(a){var b=a.state||a,c=b.updateDetails;if(c)return c.reduce(function(a,b){return a.push({time:b.matchTime,type:b.type,team:b.team,teamName:b.teamName}),a},[])}function I(a){function b(a){return a.eventTypes&&1===a.eventTypes.length}function c(a){return 1===a.length}return b(a)?s(a):!!c(a)&&t(a)}function J(a){var e=angular.copy(c.EVENT_MODEL_TEMPLATE);if(!a.facets||1!==a.facets.length)throw new Error("Unexpected facet response");var g=a.facets[0].values,h=g[0].key.eventId,i=f.getEventFromFacetAttachments(h,a),j=i.eventTypeId,k=g[0].next.values,l=f.getPriorityFacetIndex(k,d.PRIORITY),m=k[l].value,n=k[l].next.values,o=angular.isUndefined(b[j])?b["default"][m]:b[j][m],p=f.getPriorityFacetIndex(n,o),q=n[p].next.values,r=q[0].key.marketId||q[0].key.sportsbookMarketId,s=f.getMarketFromFacetAttachments(r,m,a);return e.eventId=h,e.eventName=i.name,e.eventTypeId=j,e.date=new Date(i.openDate),e.productType=m,e.primaryMarketId=r,e.inPlay=f.isInPlay(s),e.homeRunnerName=f.getHomeRunnerName(i,s),e.awayRunnerName=f.getAwayRunnerName(i,s),e.canTurnInPlay=f.canTurnInPlay(s),e}function K(b,d){var e=d[0];return e?a.merge(angular.copy(c.SEAS_MODEL_TEMPLATE),G(b,e),{scores:w(b,e)},{liveStream:x(e)},{liveVideo:y(e)},{tvChannels:F(e)},{timeline:H(e)},{matchStatus:z(e)},{matchType:A(e)},{stateOfPlay:B(e)},{matchInfo:D(e)},{hasSets:E(e)},{stateOfBall:C(e)}):{}}function L(b,c){a.mergeWith(b,c,function(a,b,c){if(R.indexOf(c)>-1)return b})}var M=45,N=15,O=2*M,P=2*M+N,Q=2*M+2*N,R=["timeline","homePenaltiesSequence","awayPenaltiesSequence"];return{isMarketInPlay:I,buildEventDataFromFacet:J,buildSeasDataModel:K,mergeSeasModels:L}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.Lodash","BF.LIVESCORES.PRIMARY_MARKET_TYPES","BF.LIVESCORES.DATA_MODEL","BF.LIVESCORES.PRODUCT_TYPES","BF.LIVESCORES.MATCH_STATUS","BF.LivescoresProcessFacetDataHelper","BF.SPORT"],c["default"]=d},{}],53:[function(a,b,c){"use strict";function d(a,b,c){function d(a){return r.indexOf(a.selectionId)!==-1}function e(b){return b===a.TYPE.EXCHANGE}function f(a,b){if(!angular.isObject(b.attachments.events))throw new Error("No event data available in facet response");return b.attachments.events[a]}function g(b,c,d){var e=void 0;if(c===a.TYPE.EXCHANGE){if(!angular.isObject(d.attachments.markets))throw new Error("No exchange market data available in facet response");e=d.attachments.markets}else{if(c!==a.TYPE.SPORTSBOOK)throw new Error("Unknown product type: '"+c+"'");if(!angular.isObject(d.attachments.sportsBookMarkets))throw new Error("No sportsbook market data available in facet response");e=d.attachments.sportsBookMarkets}return e[b]}function h(a,b){var c=null,d=null;if(angular.forEach(a,function(a,e){var f=b.indexOf(a.value);f>-1&&a.cardinality>0&&(null===c||f<c)&&(c=f,d=e)}),null===d)throw new Error("Unsupported priority item");return d}function i(a,b){var d=c.find(b,function(b){return b.result&&b.result.type===a});return d&&d.runnerName}function j(a,c){var d=c.split(/\s[-|@|v|x]\s|\sla\s/),e=b.isRunnersOrderReversed(c);return"HOME"===a?e?d[1]:d[0]:e?d[0]:d[1]}function k(a,b,c){return i(b,a)||j(b,c)}function l(a,c,e){var f=b.isRunnersOrderReversed(e);return"HOME"===c&&!f||"AWAY"===c&&f?a[0].runnerName:d(a[1])?a[2].runnerName:a[1].runnerName}function m(a,b,c){if(0===b.runners.length)throw new Error("No runners found");return e(b.productType)?l(b.runners,c,a.name):k(b.runners,c,a.name)}function n(a,b){return m(a,b,"HOME")}function o(a,b){return m(a,b,"AWAY")}function p(a){return Boolean(a.inplay||a.inPlay)}function q(a){return Boolean(a.canTurnInPlay)}var r=[58805];return{getEventFromFacetAttachments:f,getMarketFromFacetAttachments:g,getPriorityFacetIndex:h,getHomeRunnerName:n,getAwayRunnerName:o,isInPlay:p,canTurnInPlay:q}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.LIVESCORES.PRODUCT_TYPES","BF.LivescoresHelper","BF.Lodash"],c["default"]=d},{}],54:[function(a,b,c){"use strict";function d(a,b,c){function d(a){var b={eventIds:[a],maxResults:0},d={facets:[{type:"EVENT",maxValues:0,skipValues:0,applyNextTo:0,next:{type:"PRODUCT_TYPE",maxValues:0,skipValues:0,applyNextTo:0,next:{type:"MARKET_TYPE",maxValues:0,skipValues:0,applyNextTo:0,values:c.getPrimaryMarketTypesSet(),next:{type:"MARKET",maxValues:0,skipValues:0,applyNextTo:0}}}}]};return e.facetedSearch(b,d)}var e=a.get(b.getFacetClient());return{requestEventData:d}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$injector","BF.LivescoresFacetClientsHelper","BF.LivescoresHelper"],c["default"]=d},{}],55:[function(a,b,c){"use strict";function d(a){function b(a,b){if(!c[a])throw new Error("Event type id "+a+" is not yet supported.");return c[a][b?"firstLoad":"update"]}var c=a.getSeasMethodConfig();return{getSeasMethod:b}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.LivescoresConfigService"],c["default"]=d},{}],56:[function(a,b,c){"use strict";function d(a,b,c){function d(c,d,f){if(!a.type[c])throw new Error("Unknown eventTypeId "+c);if(f&&f[d])return f[d];if(e[c]&&e[c][d])return e[c][d];if(b[d]&&b[d][c])return b[d][c];var g=e.DEFAULT[d]||b[d]&&b[d].DEFAULT;if(!g)throw new Error("Unknown view type");return g}var e=c.getTemplateUrlConfig();return{getTemplateUrl:d}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.SPORT","BF.LIVESCORES.DEFAULT_PARTIALS_TEMPLATE_CONFIG","BF.LivescoresConfigService"],c["default"]=d},{}],57:[function(a,b,c){"use strict";b.exports=angular.module("bfLivescoresTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-livescores.html",'<section class="bf-livescores {{::livescoresCtrl.viewType | lowercase}}"><div data-ng-if="livescoresCtrl.ready" data-ng-include="::livescoresCtrl.templateUrl"></div></section>'),a.put("/views/cricket-coupon-template.html",'<div class="default-template cricket" data-ng-class="{\'has-broadcasts-icons\': livescoresCtrl.templates.hasBroadcastsIcons}"><div class="mini-coupon"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasInnings"></data-bf-livescores-start-date><data-bf-livescores-innings data-ng-if="livescoresCtrl.templates.hasInnings"></data-bf-livescores-innings></div><div class="right-content"><data-bf-livescores-runners></data-bf-livescores-runners><data-bf-livescores-broadcasts-icons data-ng-if="livescoresCtrl.templates.hasBroadcastsIcons"></data-bf-livescores-broadcasts-icons></div></div>'),a.put("/views/cricket-mini-template.html",'<div class="default-template"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasInnings"></data-bf-livescores-start-date><data-bf-livescores-innings data-ng-if="livescoresCtrl.templates.hasInnings"></data-bf-livescores-innings></div>'),
a.put("/views/cricket-template.html",'<div class="default-template cricket"><div class="results-board"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasInnings"></data-bf-livescores-start-date><data-bf-livescores-innings data-ng-if="livescoresCtrl.templates.hasInnings"></data-bf-livescores-innings><data-bf-livescores-runners></data-bf-livescores-runners></div><data-bf-livescores-additional-info data-ng-if="livescoresCtrl.templates.hasAdditionalInfo"></data-bf-livescores-additional-info></div>'),a.put("/views/darts-coupon-template.html",'<div class="default-template darts" data-ng-class="{\'has-broadcasts-icons\': livescoresCtrl.templates.hasBroadcastsIcons}"><div class="mini-coupon"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-time-elapsed data-ng-if="!livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores><data-bf-livescores-extended-scores data-ng-if="livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-extended-scores></div><div class="right-content"><data-bf-livescores-runners></data-bf-livescores-runners><data-bf-livescores-broadcasts-icons data-ng-if="livescoresCtrl.templates.hasBroadcastsIcons"></data-bf-livescores-broadcasts-icons></div></div>'),a.put("/views/darts-mini-template.html",'<div class="default-template darts"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-time-elapsed data-ng-if="!livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores><data-bf-livescores-extended-scores data-ng-if="livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-extended-scores></div>'),a.put("/views/default-coupon-template.html",'<div class="default-template" data-ng-class="{\'has-broadcasts-icons\': livescoresCtrl.templates.hasBroadcastsIcons}"><div class="mini-coupon"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-time-elapsed data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores></div><div class="right-content"><data-bf-livescores-runners></data-bf-livescores-runners><data-bf-livescores-broadcasts-icons data-ng-if="livescoresCtrl.templates.hasBroadcastsIcons"></data-bf-livescores-broadcasts-icons></div></div>'),a.put("/views/default-full-template.html",'<div class="default-template"><div class="results-board"><data-bf-livescores-time-elapsed data-ng-if="livescoresCtrl.templates.hasTimeElapsed"></data-bf-livescores-time-elapsed><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-scores><data-bf-livescores-runners></data-bf-livescores-runners></div><data-bf-livescores-penalties data-ng-if="livescoresCtrl.templates.hasPenalties"></data-bf-livescores-penalties><data-bf-livescores-additional-info data-ng-if="livescoresCtrl.templates.hasAdditionalInfo"></data-bf-livescores-additional-info></div>'),a.put("/views/default-mini-template.html",'<div class="default-template"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-time-elapsed data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores></div>'),a.put("/views/football-template.html",'<div class="default-template football" data-ng-class="{\'timeline\': livescoresCtrl.templates.hasTimeline, \'penalties\': livescoresCtrl.templates.hasPenalties}"><div class="results-board"><data-bf-livescores-time-elapsed data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-runners></data-bf-livescores-runners></div><data-bf-livescores-additional-info data-ng-if="livescoresCtrl.templates.hasAdditionalInfo"></data-bf-livescores-additional-info><data-bf-livescores-penalties data-ng-if="livescoresCtrl.templates.hasPenalties"></data-bf-livescores-penalties><data-bf-livescores-timeline data-ng-if="livescoresCtrl.templates.hasTimeline"></data-bf-livescores-timeline></div>'),a.put("/views/handball-template.html",'<div class="default-template handball" data-ng-class="{\'penalties\': livescoresCtrl.templates.hasPenalties}"><div class="results-board"><data-bf-livescores-time-elapsed data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-runners></data-bf-livescores-runners></div><data-bf-livescores-additional-info data-ng-if="livescoresCtrl.templates.hasAdditionalInfo"></data-bf-livescores-additional-info><data-bf-livescores-penalties data-ng-if="livescoresCtrl.templates.hasPenalties"></data-bf-livescores-penalties></div>'),a.put("/views/ice-hockey-template.html",'<div class="default-template ice-hockey" data-ng-class="{\'penalties\': livescoresCtrl.templates.hasPenalties}"><div class="results-board"><data-bf-livescores-time-elapsed data-ng-if="livescoresCtrl.templates.hasTimeElapsed"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores && livescoresCtrl.templates.hasPenalties"></data-bf-livescores-match-scores><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-scores data-ng-if="livescoresCtrl.templates.hasScores && !livescoresCtrl.templates.hasPenalties"></data-bf-livescores-scores><data-bf-livescores-runners></data-bf-livescores-runners></div><data-bf-livescores-penalties data-ng-if="livescoresCtrl.templates.hasPenalties"></data-bf-livescores-penalties><data-bf-livescores-additional-info data-ng-if="livescoresCtrl.templates.hasAdditionalInfo"></data-bf-livescores-additional-info></div>'),a.put("/views/snooker-coupon-template.html",'<div class="default-template snooker" data-ng-class="{\'has-broadcasts-icons\': livescoresCtrl.templates.hasBroadcastsIcons}"><div class="mini-coupon"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-time-elapsed data-ng-if="!livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores><data-bf-livescores-extended-scores data-ng-if="livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-extended-scores></div><div class="right-content"><data-bf-livescores-runners></data-bf-livescores-runners><data-bf-livescores-broadcasts-icons data-ng-if="livescoresCtrl.templates.hasBroadcastsIcons"></data-bf-livescores-broadcasts-icons></div></div>'),a.put("/views/snooker-mini-template.html",'<div class="default-template snooker"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-time-elapsed data-ng-if="!livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores><data-bf-livescores-extended-scores data-ng-if="livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-extended-scores></div>'),a.put("/views/tennis-coupon-template.html",'<div class="default-template tennis" data-ng-class="{\'has-broadcasts-icons\': livescoresCtrl.templates.hasBroadcastsIcons}"><div class="mini-coupon"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-time-elapsed data-ng-if="!livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores><data-bf-livescores-extended-scores data-ng-if="livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-extended-scores></div><div class="right-content"><data-bf-livescores-runners></data-bf-livescores-runners><data-bf-livescores-broadcasts-icons data-ng-if="livescoresCtrl.templates.hasBroadcastsIcons"></data-bf-livescores-broadcasts-icons></div></div>'),a.put("/views/tennis-mini-template.html",'<div class="default-template tennis"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-time-elapsed data-ng-if="!livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores><data-bf-livescores-extended-scores data-ng-if="livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-extended-scores></div>'),a.put("/views/volleyball-coupon-template.html",'<div class="default-template volleyball" data-ng-class="{\'has-broadcasts-icons\': livescoresCtrl.templates.hasBroadcastsIcons}"><div class="mini-coupon"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-time-elapsed data-ng-if="!livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores><data-bf-livescores-extended-scores data-ng-if="livescoresCtrl.templates.hasScores && livescoresCtrl.templates.isInPlay"></data-bf-livescores-extended-scores></div><div class="right-content"><data-bf-livescores-runners></data-bf-livescores-runners><data-bf-livescores-broadcasts-icons data-ng-if="livescoresCtrl.templates.hasBroadcastsIcons"></data-bf-livescores-broadcasts-icons></div></div>'),a.put("/views/volleyball-mini-template.html",'<div class="default-template volleyball"><data-bf-livescores-start-date data-ng-if="!livescoresCtrl.templates.hasScores"></data-bf-livescores-start-date><data-bf-livescores-time-elapsed data-ng-if="!livescoresCtrl.templates.isInPlay && livescoresCtrl.templates.hasScores"></data-bf-livescores-time-elapsed><data-bf-livescores-match-scores data-ng-if="livescoresCtrl.templates.hasScores"></data-bf-livescores-match-scores><data-bf-livescores-extended-scores data-ng-if="livescoresCtrl.templates.hasScores && livescoresCtrl.templates.isInPlay"></data-bf-livescores-extended-scores></div>'),a.put("/views/directives/broadcasts-icons/views/broadcasts-icons.html",'<div class="bf-livescores-broadcasts-icons"><span class="on-tv" data-ng-if="broadcastsIconsCtrl.hasTvChannels"></span><div class="live-video" data-ng-if="broadcastsIconsCtrl.hasLiveVideo"><span class="icon"></span> <span class="label">{{broadcastsIconsCtrl.liveVideoLabel}}</span></div></div>'),a.put("/views/directives/additional-info/views/additional-info.html",'<div class="bf-livescores-additional-info"><span data-ng-bind-html="additionalInfoCtrl.getAdditionalInfo()"></span></div>'),a.put("/views/directives/extended-scores/views/extended-scores-darts.html",'<div class="bf-livescores-extended-scores" on="::extendedScoresCtrl.viewType | lowercase" data-ng-switch=""><div class="darts legs" data-ng-switch-default="" data-ng-if="extendedScoresCtrl.hasDartsSets"><div class="cell"><div class="home"><span class="quarter" data-ng-class="{active : extendedScoresCtrl.isInPlay}">{{extendedScoresCtrl.data.scores.home.games}}</span></div><div class="away"><span class="quarter" data-ng-class="{active : extendedScoresCtrl.isInPlay}">{{extendedScoresCtrl.data.scores.away.games}}</span></div></div></div><div class="darts points" data-ng-switch-default="" data-ng-if="extendedScoresCtrl.hasPoints"><div class="cell"><div class="home"><span class="quarter" data-ng-class="{active : extendedScoresCtrl.isInPlay}">{{extendedScoresCtrl.data.scores.home.score}}</span></div><div class="away"><span class="quarter" data-ng-class="{active : extendedScoresCtrl.isInPlay}">{{extendedScoresCtrl.data.scores.away.score}}</span></div></div></div><div class="darts games" data-ng-switch-when="mini" data-ng-if="::extendedScoresCtrl.hasPoints"><div class="cell"><div class="home"><span class="quarter">{{extendedScoresCtrl.data.scores.home.score}}</span></div><div class="away"><span class="quarter">{{extendedScoresCtrl.data.scores.away.score}}</span></div></div></div><!--When we update to angular +1.5.9, we should use ng-switch-when="mini|coupon" ng-switch-when-separator="|"--><div class="darts games" data-ng-switch-when="coupon" data-ng-if="::extendedScoresCtrl.hasPoints"><div class="cell"><div class="home"><span class="quarter">{{extendedScoresCtrl.data.scores.home.score}}</span></div><div class="away"><span class="quarter">{{extendedScoresCtrl.data.scores.away.score}}</span></div></div></div></div>'),a.put("/views/directives/extended-scores/views/extended-scores-default.html",'<div class="bf-livescores-extended-scores" on="::extendedScoresCtrl.viewType | lowercase" data-ng-switch=""><div class="sequence" data-ng-switch-default=""><div class="cell"><div data-ng-repeat="side in ::extendedScoresCtrl.runnersOrder track by $index" data-ng-class="side"><span class="quarter" data-ng-repeat="item in extendedScoresCtrl.sequences[side] track by $index" data-ng-class="{active : extendedScoresCtrl.activeColumn === $index && extendedScoresCtrl.isInPlay}">{{item}}</span></div></div></div><div class="points" data-ng-switch-default="" data-ng-if="extendedScoresCtrl.hasPoints && extendedScoresCtrl.isInPlay"><div class="cell"><div data-ng-repeat="side in ::extendedScoresCtrl.runnersOrder track by $index" data-ng-class="side"><span class="quarter" data-ng-class="{active : extendedScoresCtrl.isInPlay}">{{extendedScoresCtrl.data.scores[side].score}}</span></div></div></div><div class="games" data-ng-switch-when="mini" data-ng-if="::extendedScoresCtrl.hasPoints"><div class="cell"><div data-ng-repeat="side in ::extendedScoresCtrl.runnersOrder track by $index" data-ng-class="side"><span class="quarter">{{extendedScoresCtrl.data.scores[side].games}}</span></div></div></div><!--When we update to angular +1.5.9, we should use ng-switch-when="mini|coupon" ng-switch-when-separator="|"--><div class="games" data-ng-switch-when="coupon" data-ng-if="::extendedScoresCtrl.hasPoints"><div class="cell"><div data-ng-repeat="side in ::extendedScoresCtrl.runnersOrder track by $index" data-ng-class="side"><span class="quarter">{{extendedScoresCtrl.data.scores[side].games}}</span></div></div></div></div>'),a.put("/views/directives/extended-scores/views/extended-scores-snooker.html",'<div class="bf-livescores-extended-scores" on="::extendedScoresCtrl.viewType | lowercase" data-ng-switch=""><div class="snooker points" data-ng-switch-default="" data-ng-if="::extendedScoresCtrl.hasPoints"><div class="cell"><div class="home"><span class="quarter" data-ng-class="{active : extendedScoresCtrl.isInPlay}">{{extendedScoresCtrl.data.scores.home.score}}</span></div><div class="away"><span class="quarter" data-ng-class="{active : extendedScoresCtrl.isInPlay}">{{extendedScoresCtrl.data.scores.away.score}}</span></div></div></div><div class="snooker points" data-ng-switch-when="mini" data-ng-if="::extendedScoresCtrl.hasPoints"><div class="cell"><div class="home"><span class="quarter">{{extendedScoresCtrl.data.scores.home.score}}</span></div><div class="away"><span class="quarter">{{extendedScoresCtrl.data.scores.away.score}}</span></div></div></div><!--When we update to angular +1.5.9, we should use ng-switch-when="mini|coupon" ng-switch-when-separator="|"--><div class="snooker points" data-ng-switch-when="coupon" data-ng-if="::extendedScoresCtrl.hasPoints"><div class="cell"><div class="home"><span class="quarter">{{extendedScoresCtrl.data.scores.home.score}}</span></div><div class="away"><span class="quarter">{{extendedScoresCtrl.data.scores.away.score}}</span></div></div></div></div>'),a.put("/views/directives/extended-scores/views/extended-scores-volleyball.html",'<div class="bf-livescores-extended-scores" on="::extendedScoresCtrl.viewType | lowercase" data-ng-switch=""><div class="sequence" data-ng-switch-default=""><div class="cell"><div data-ng-repeat="side in ::extendedScoresCtrl.runnersOrder track by $index" data-ng-class="side"><span class="quarter" data-ng-repeat="item in extendedScoresCtrl.sequences[side] track by $index" data-ng-class="{active : extendedScoresCtrl.activeColumn === $index && extendedScoresCtrl.isInPlay}">{{item}}</span></div></div></div><div class="games" data-ng-switch-when="mini"><div class="cell"><div data-ng-repeat="side in ::extendedScoresCtrl.runnersOrder track by $index" data-ng-class="side"><span class="quarter">{{extendedScoresCtrl.sequences[side][extendedScoresCtrl.activeColumn]}}</span></div></div></div><!--When we update to angular +1.5.9, we should use ng-switch-when="mini|coupon" ng-switch-when-separator="|"--><div class="games" data-ng-switch-when="coupon"><div class="cell"><div data-ng-repeat="side in ::extendedScoresCtrl.runnersOrder track by $index" data-ng-class="side"><span class="quarter">{{extendedScoresCtrl.sequences[side][extendedScoresCtrl.activeColumn]}}</span></div></div></div></div>'),a.put("/views/directives/match-scores/views/match-scores.html",'<div class="bf-livescores-match-scores" data-ng-class="{\'in-play\': matchScoresCtrl.isInPlay, \'finished\': matchScoresCtrl.finished}"><div class="scores"><span data-ng-repeat="side in ::matchScoresCtrl.runnersOrder track by $index" data-ng-class="side">{{matchScoresCtrl.scores[side][matchScoresCtrl.scoreType] || \'0\'}}</span></div></div>'),a.put("/views/directives/innings/views/innings.html",'<div class="bf-livescores-innings" data-ng-switch="inningsCtrl.viewType" data-ng-class="{\'in-play\': inningsCtrl.isInPlay}"><div class="current-inning" data-ng-switch-when="MINI"><div data-ng-if="inningsCtrl.getGameState()">{{inningsCtrl.getGameState()}}</div><div><div class="home">{{inningsCtrl.getCurrentInning(\'home\')}}</div><div class="away">{{inningsCtrl.getCurrentInning(\'away\')}}</div></div></div><!--When we update to angular +1.5.9, we should use ng-switch-when="mini|coupon" ng-switch-when-separator="|"--><div class="current-inning" data-ng-switch-when="COUPON"><div data-ng-if="!inningsCtrl.hasBroadcastsIcons && inningsCtrl.getGameState()">{{inningsCtrl.getGameState()}}</div><div><div class="home">{{inningsCtrl.getCurrentInning(\'home\')}}</div><div class="away">{{inningsCtrl.getCurrentInning(\'away\')}}</div></div><div data-ng-if="inningsCtrl.hasBroadcastsIcons && inningsCtrl.getGameState()">{{inningsCtrl.getGameState()}}</div></div><div class="inning" data-ng-switch-default="" data-ng-repeat="inning in inningsCtrl.innings track by $index"><div class="home" data-ng-class="{highlight: inning.home.isHighlighted}"><span class="runs-wickets" data-ng-class="{unplayed: inningsCtrl.isUnplayed(inning.home)}">{{inning.home.runsWickets}} <span class="run-wickets-dec">{{inning.home.decString}}</span> </span><span class="over-tries">{{inning.home.oversTries}}</span></div><div class="away" data-ng-class="{highlight: inning.away.isHighlighted}"><span class="runs-wickets" data-ng-class="{unplayed: inningsCtrl.isUnplayed(inning.away)}">{{inning.away.runsWickets}} <span class="run-wickets-dec">{{inning.away.decString}}</span> </span><span class="over-tries">{{inning.away.oversTries}}</span></div></div></div>'),a.put("/views/directives/penalties/views/penalties.html",'<div class="bf-livescores-penalties"><div class="runner home"><div class="icon" data-ng-repeat="goal in penaltiesCtrl.penalties.home track by $index" data-ng-class="goal"></div></div><div class="score"><div class="taker-indicator" data-ng-if="penaltiesCtrl.data.scores.home.highlight"></div><div class="score-element"><span>{{penaltiesCtrl.data.scores.home.penaltiesScore}} - {{penaltiesCtrl.data.scores.away.penaltiesScore}}</span></div><div class="taker-indicator" data-ng-if="penaltiesCtrl.data.scores.away.highlight"></div></div><div class="runner away"><div class="icon" data-ng-repeat="goal in penaltiesCtrl.penalties.away track by $index" data-ng-class="goal"></div></div></div>'),a.put("/views/directives/runners/views/runners.html",'<div class="bf-livescores-runners" data-ng-class="{\'showing-turns\': runnersCtrl.isShowingTurns}"><div class="runner {{side}} seed-with-{{runnersCtrl.getSideSeedDigits(side)}}-digits" data-ng-repeat="side in ::runnersCtrl.runnersOrder" data-ng-class="{\n        \'loser\': runnersCtrl.isLoser(side),\n        \'showing-seed\': !!runnersCtrl.data.scores[side].playerSeed\n    }"><span class="bullet" data-ng-if="runnersCtrl.isShowingTurns" data-ng-class="{\'highlight\': runnersCtrl.data.scores[side].highlight}"></span> <span class="name" data-ng-class="::{ \'reversed\': runnersCtrl.areRunnersReversed && side === \'home\'}">{{::runnersCtrl.getRunnerName(side)}}</span> <span class="player-seed" data-ng-if="runnersCtrl.data.scores[side].playerSeed">({{::runnersCtrl.data.scores[side].playerSeed}})</span></div></div>'),a.put("/views/directives/start-date/views/start-date.html",'<div class="bf-livescores-start-date" data-ng-class="{\'in-play\': startDateCtrl.isInPlay}"><div class="start-date-wrapper"><span class="label">{{startDateCtrl.getLabel()}}</span></div></div>'),a.put("/views/directives/scores/views/scores.html",'<div class="bf-livescores-scores"><data-bf-livescores-match-scores></data-bf-livescores-match-scores><data-bf-livescores-extended-scores></data-bf-livescores-extended-scores></div>'),a.put("/views/directives/time-elapsed/views/time-elapsed.html",'<div class="bf-livescores-time-elapsed"><div class="cell" data-ng-class="{\'finished\': timeElapsedCtrl.middleLabelStyle}"><div class="top-label" data-ng-if="timeElapsedCtrl.topLabel">{{timeElapsedCtrl.topLabel}}</div><div class="middle-label" data-ng-if="timeElapsedCtrl.middleLabel">{{timeElapsedCtrl.middleLabel}}</div><div class="bottom-label" data-ng-if="timeElapsedCtrl.bottomLabel">{{timeElapsedCtrl.bottomLabel}}</div></div></div>'),a.put("/views/directives/timeline/views/timeline-bar.html",'<div class="bf-livescores-timeline-bar"><!-- EVENTS --><div class="event-tooltip" data-ng-repeat="event in model.events track by $index"><div class="event-item" data-ng-class="[event.team, event.type]" data-ng-style="{left:event.position + \'%\'}"><span class="tooltip-text"><span class="icon" data-ng-class="event.type"></span>{{event.teamName}} {{event.time}}\'</span></div></div><!-- ELAPSED TIME --><div class="elapsed-time" data-ng-style="{width: model.elapsedTime + \'%\'}"></div></div>'),a.put("/views/directives/timeline/views/timeline.html",'<div class="bf-livescores-timeline"><!-- REGULAR TIME --><div class="regular-time" data-ng-class="{\'has-et\': timelineCtrl.timeline.extraTime}"><div class="first-half"><data-bf-livescores-timeline-bar model="timelineCtrl.timeline.regularTime.firstHalf"></data-bf-livescores-timeline-bar></div><div class="second-half"><data-bf-livescores-timeline-bar model="timelineCtrl.timeline.regularTime.secondHalf"></data-bf-livescores-timeline-bar></div></div><!-- EXTRA TIME --><div class="extra-time" data-ng-if="timelineCtrl.timeline.extraTime"><div class="first-half"><data-bf-livescores-timeline-bar model="timelineCtrl.timeline.extraTime.firstHalf"></data-bf-livescores-timeline-bar></div><div class="second-half"><data-bf-livescores-timeline-bar model="timelineCtrl.timeline.extraTime.secondHalf"></data-bf-livescores-timeline-bar></div></div></div>')}])},{}]},{},[1]),!function k(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,k,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./directives/bf-link-directive.js"),f=d(e),g=a("./providers/bf-link-provider.js"),h=d(g),i=a("./filters/bf-event-type-name-filter.js"),j=d(i),k=a("./constants/bf-link-templates.js"),l=angular.module("bfLink",["betfair.extensions"]);l.directive("bfLink",f["default"]),l.provider("BF.LinkService",h["default"]),l.constant("BF.LINK.LINK_TEMPLATES",k.LINKS_TEMPLATES),l.filter("toEventTypeName",j["default"])},{"./constants/bf-link-templates.js":2,"./directives/bf-link-directive.js":3,"./filters/bf-event-type-name-filter.js":4,"./providers/bf-link-provider.js":5}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.LINKS_TEMPLATES={MARKET:"/#/{{eventTypeId | toEventTypeName}}/market/{{marketId}}",EVENT:"/#/{{eventTypeId | toEventTypeName}}/event/{{eventId}}",COMPETITION:"/#/{{eventTypeId | toEventTypeName}}/competition/{{competitionId}}",SPORT:"/#/{{eventTypeId | toEventTypeName}}",INPLAY:"/#/inplay",CASHOUT:"/#/cashout"}},{}],3:[function(a,b,c){"use strict";function d(a,b){function c(a){var b=function(){var a=["class","id","type","$attr","$$element","$$observers","linkType","queryParams"];return function(b){return a.indexOf(b)===-1}}(),c={};return Object.keys(a).filter(b).forEach(function(b){return c[b]=a[b]}),c}function d(d,e,f){var g=f.linkType,h=f.queryParams,i=c(f),j=a(g,i,b(h)(d));e.attr("href",j)}return{restrict:"E",template:'<a class="mod-link" ng-transclude></a>',transclude:!0,replace:!0,link:d}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.LinkService","$parse"],c["default"]=d},{}],4:[function(a,b,c){"use strict";function d(a){return function(b){var c=a.type[b];return angular.isDefined(c)?c.eventTypeName:b}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.SPORT"],c["default"]=d},{}],5:[function(a,b,c){"use strict";function d(a){var b=a;this.overrideLinkTemplates=function(a){angular.extend(b,a)},this.$get=["$httpParamSerializer","$interpolate",function(a,c){function d(d,e,f){var g=b[d];if(angular.isUndefined(g))throw Error("Link type "+d+" is not configured");var h=c(g),i=Object.keys(f||{}).length?"?"+a(f):"";return h(e)+i}return d}]}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.LINK.LINK_TEMPLATES"],c["default"]=d},{}]},{},[1]),!function l(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,l,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){!function(a,c){"function"==typeof define&&define.amd?define([],function(){return a.svg4everybody=c()}):"object"==typeof b&&b.exports?b.exports=c():a.svg4everybody=c()}(this,function(){function a(a,b,c){if(c){var d=document.createDocumentFragment(),e=!b.hasAttribute("viewBox")&&c.getAttribute("viewBox");e&&b.setAttribute("viewBox",e);for(var f=c.cloneNode(!0);f.childNodes.length;)d.appendChild(f.firstChild);a.appendChild(d)}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=b._cachedDocument;c||(c=b._cachedDocument=document.implementation.createHTMLDocument(""),c.body.innerHTML=b.responseText,b._cachedTarget={}),b._embeds.splice(0).map(function(d){var e=b._cachedTarget[d.id];e||(e=b._cachedTarget[d.id]=c.getElementById(d.id)),a(d.parent,d.svg,e)})}},b.onreadystatechange()}function c(c){function e(){for(var c=0;c<o.length;){var h=o[c],i=h.parentNode,j=d(i),k=h.getAttribute("xlink:href")||h.getAttribute("href");if(!k&&g.attributeName&&(k=h.getAttribute(g.attributeName)),j&&k){if(f)if(!g.validate||g.validate(k,j,h)){i.removeChild(h);var l=k.split("#"),q=l.shift(),r=l.join("#");if(q.length){var s=m[q];s||(s=m[q]=new XMLHttpRequest,s.open("GET",q),s.send(),s._embeds=[]),s._embeds.push({parent:i,svg:j,id:r}),b(s)}else a(i,j,document.getElementById(r))}else++c,++p}else++c}(!o.length||o.length-p>0)&&n(e,67)}var f,g=Object(c),h=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,i=/\bAppleWebKit\/(\d+)\b/,j=/\bEdge\/12\.(\d+)\b/,k=/\bEdge\/.(\d+)\b/,l=window.top!==window.self;f="polyfill"in g?g.polyfill:h.test(navigator.userAgent)||(navigator.userAgent.match(j)||[])[1]<10547||(navigator.userAgent.match(i)||[])[1]<537||k.test(navigator.userAgent)&&l;var m={},n=window.requestAnimationFrame||setTimeout,o=document.getElementsByTagName("use"),p=0;f&&e()}function d(a){for(var b=a;"svg"!==b.nodeName.toLowerCase()&&(b=b.parentNode););return b}return c})},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates.js");var e=a("svg4everybody"),f=d(e),g=a("./directives/calc-max-number-of-children-directive.js"),h=d(g),i=a("./directives/hide-element-directive.js"),j=d(i),k=a("./directives/lazy-load-directive.js"),l=d(k),m=a("./components/bf-tabs-component.js"),n=d(m),o=a("./controllers/bf-tabs-controller.js"),p=d(o);(0,f["default"])();var q=angular.module("bfTabs",["bfTabsTemplates","betfair.lodash","pascalprecht.translate"]);q.directive("bfTabsHideElement",j["default"]),q.directive("bfTabsCalcMaxNumberOfChildren",h["default"]),q.directive("bfTabsLazyLoad",l["default"]),q.component("bfTabs",n["default"]),q.controller("BF.TabsController",p["default"])},{"./components/bf-tabs-component.js":3,"./controllers/bf-tabs-controller.js":4,"./directives/calc-max-number-of-children-directive.js":5,"./directives/hide-element-directive.js":6,"./directives/lazy-load-directive.js":7,"./templates.js":8,svg4everybody:1}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={restrict:"EA",templateUrl:"/views/bf-tabs.html",controller:"BF.TabsController",controllerAs:"tabsCtrl",bindings:{selectedTabId:"@?",tabs:"<",tabWidth:"@?",tabHeight:"@?",tabMargin:"@?",hideOnSingleTab:"@",onTabClickCallback:"<",onOpenMoreTabCallback:"<",onCloseMoreTabCallback:"<",forceResizeBroadcastName:"@?"}};c["default"]=d},{}],4:[function(a,b,c){"use strict";function d(a,b){function c(){return m.tabs.length>t}function d(){var a=Math.min(t,m.tabs.length);return c()?a-1:a}function e(b){return a.findIndex(m.tabs,function(a){return null!==b&&a.id===b.id})>=d()}function f(){m.data.isMoreDropdownVisible&&(m.data.isMoreDropdownVisible=!1,s())}function g(b){var c=a.findIndex(m.tabs,function(a){return a.id.toString()===b.toString()});return c!==-1?m.tabs[c]:m.tabs[0]}function h(){m.data.isMoreDropdownVisible=!m.data.isMoreDropdownVisible,m.data.isMoreDropdownVisible?r():s()}function i(a){q(a,m.data.selectedTab),m.selectedTabId&&!angular.isUndefined(m.selectedTabId)||(m.data.selectedTab=a)}function j(){if(!a.isArray(m.tabs)||a.isEmpty(m.tabs))throw new Error("bf-tabs requires tabs to make tabs.");
}function k(){return m.tabs.length-m.api.calcTabsSize()+1}function l(a){return null!==m.data.selectedTab&&a.id===m.data.selectedTab.id}var m=this,n=32,o=100,p=1,q=angular.isFunction(m.onTabClickCallback)&&m.onTabClickCallback||angular.noop,r=angular.isFunction(m.onOpenMoreTabCallback)?m.onOpenMoreTabCallback:angular.noop,s=angular.isFunction(m.onCloseMoreTabCallback)?m.onCloseMoreTabCallback:angular.noop,t=0;!function(){j(),m.data={selectedTab:null,forceResizeBroadcastName:m.forceResizeBroadcastName,isMoreDropdownVisible:!1,hideOnSingleTab:"true"===m.hideOnSingleTab,tabHeight:parseInt(m.tabHeight,10)||n,tabWidth:parseInt(m.tabWidth,10)||o,tabMargin:parseInt(m.tabMargin,10)||p},m.api={calcTabsSize:d,hasMoreTab:c,hideMoreDropdown:f,inMoreDropdown:e,onMaxNumberOfChildrenChange:function(a){return t=a},toggleMoreDropdown:h,onTabClickFn:i,getNumberOfMoreTabItems:k,showTabContent:l},b.$watchGroup(["tabsCtrl.tabs","tabsCtrl.selectedTabId"],function(a,b){b&&b.length>0&&(m.data.selectedTab=g(m.selectedTabId||0))})}()}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.Lodash","$scope"],c["default"]=d},{}],5:[function(a,b,c){"use strict";function d(a,b){function c(a,b){return Math.floor(a/b)}function d(a,b){return a+b}function e(a){var b=c(a.offsetWidth,j);k(b)}var f=100,g=0,h=50,i={TRIGGER_FUNCTION_MANDATORY:"onMaxNumberOfChildrenChange is mandatory"},j=void 0,k=void 0;return{restrict:"A",scope:{onMaxNumberOfChildrenChange:"&?bfTabsOnMaxNumberOfChildrenChange",tabWidth:"@?bfTabsTabWidth",tabMargin:"@?bfTabsTabMargin",allowedTabsUpdateTrigger:"@?bfTabsAllowedTabsUpdateTrigger"},link:function(c,l){if(!angular.isDefined(c.onMaxNumberOfChildrenChange))throw new Error(i.TRIGGER_FUNCTION_MANDATORY);c.tabWidth=parseInt(c.tabWidth||f,10),c.tabMargin=parseInt(c.tabMargin||g,10);var m=l.parent()[0],n=e.bind(null,m);j=d(c.tabWidth,c.tabMargin),k=c.onMaxNumberOfChildrenChange();var o=b.throttle(function(){n(),c.$applyAsync()},h);angular.element(a).unbind("resize",o).bind("resize",o),angular.isDefined(c.allowedTabsUpdateTrigger)&&""!==c.allowedTabsUpdateTrigger&&c.$on(c.allowedTabsUpdateTrigger,n),n(),l.on("$destroy",function(){angular.element(a).unbind("resize",o)})}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$window","BF.Lodash"],c["default"]=d},{}],6:[function(a,b,c){"use strict";function d(a){return{restrict:"A",link:function(b,c,d){var e=function(){return b.$apply(d.bfTabsHideElement)},f=function(a){return a.stopPropagation()};c.bind("click",f),a.unbind("click",e).bind("click",e),c.on("$destroy",function(){c.unbind("click",f),a.unbind("click",e)})}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$document"],c["default"]=d},{}],7:[function(a,b,c){"use strict";function d(){function a(a){angular.extend(a,{isLoaded:!1,isVisible:!1}),a.$watch(b,function(b){b&&(a.isLoaded=!0),a.isVisible=b})}var b="show";return{restrict:"A",link:a,templateUrl:"/views/lazy-load-directive-template.html",scope:{show:"=bfTabsLazyLoad",templateUrl:"@bfTabsLazyLoadTemplateUrl",content:"=bfTabsLazyLoadContent"}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}],8:[function(a,b,c){"use strict";b.exports=angular.module("bfTabsTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-tabs.html",'<section class="mod-tabs" data-ng-if="tabsCtrl.tabs && tabsCtrl.tabs.length"><ul class="tabs-container" data-ng-if="tabsCtrl.tabs.length > 1 || !tabsCtrl.data.hideOnSingleTab" data-ng-style="{\'height\': tabsCtrl.data.tabHeight + \'px\'}" data-bf-tabs-calc-max-number-of-children="" data-bf-tabs-on-max-number-of-children-change="tabsCtrl.api.onMaxNumberOfChildrenChange" data-bf-tabs-tab-width="{{tabsCtrl.data.tabWidth}}" data-bf-tabs-tab-margin="{{tabsCtrl.data.tabMargin}}" data-bf-tabs-allowed-tabs-update-trigger="{{tabsCtrl.data.forceResizeBroadcastName}}"><!-- Element Tab --><li class="tab-container" data-ng-repeat="tab in tabsCtrl.tabs | limitTo : tabsCtrl.api.calcTabsSize() : 0" data-ng-class="{active: tab.id === tabsCtrl.data.selectedTab.id}" data-ng-click="tabsCtrl.api.onTabClickFn(tab)" data-ng-style="{\n                \'width\': tabsCtrl.data.tabWidth + \'px\',\n                \'line-height\': tabsCtrl.data.tabHeight + \'px\'\n            }"><a class="tab-heading" data-ng-href="{{tab.url}}"><!-- Thumbnail container --><div class="tab-thumbnail-wrapper" data-ng-if="tab.thumbnail" data-ng-class="{\'with-label\': tab.label}"><img class="tab-thumbnail" title="{{tab.tooltip}}" data-ng-if="!tab.thumbnail.isSvg" data-ng-src="{{tab.thumbnail.url}}"> <svg class="tab-thumbnail" title="{{tab.tooltip}}" data-ng-if="tab.thumbnail.isSvg"><use xlink:href="" data-ng-href="{{tab.thumbnail.url}}"/></svg></div><!-- Label container --><h4 class="tab-label" title="{{tab.tooltip}}" data-ng-if="tab.label" data-ng-class="{\'with-thumbnail\': tab.thumbnail}">{{tab.label}}</h4></a></li><!-- More Tab --><li class="tab-container more" data-ng-class="{active: tabsCtrl.data.isMoreDropdownVisible || tabsCtrl.api.inMoreDropdown(tabsCtrl.data.selectedTab)}" data-ng-click="tabsCtrl.api.toggleMoreDropdown()" data-ng-if="tabsCtrl.api.hasMoreTab()" data-bf-tabs-hide-element="tabsCtrl.api.hideMoreDropdown()" data-ng-style="{\n                \'width\': tabsCtrl.data.tabWidth + \'px\'\n            }"><div class="tab-heading"><!-- Label container --><h4 class="more-tab-text" title="{{tab.tooltip}}" translate="I18N.TABS.MORE" data-ng-if="!tabsCtrl.api.inMoreDropdown(tabsCtrl.data.selectedTab)"></h4><div class="more-tab-selected" data-ng-if="tabsCtrl.api.inMoreDropdown(tabsCtrl.data.selectedTab)"><!-- Thumbnail container --><div class="tab-thumbnail-wrapper" data-ng-if="tabsCtrl.data.selectedTab.thumbnail" data-ng-class="{\'with-label\': tabsCtrl.data.selectedTab.label}"><img class="tab-thumbnail" title="{{tabsCtrl.data.selectedTab.tooltip}}" data-ng-if="!tabsCtrl.data.selectedTab.thumbnail.isSvg" data-ng-src="{{tabsCtrl.data.selectedTab.thumbnail.url}}"> <svg class="tab-thumbnail" title="{{tabsCtrl.data.selectedTab.tooltip}}" data-ng-if="tabsCtrl.data.selectedTab.thumbnail.isSvg"><use xlink:href="" data-ng-href="{{tabsCtrl.data.selectedTab.thumbnail.url}}"/></svg> <svg class="more-icon with-thumbnail"><use xlink:href="" data-ng-href="/resources/eds/bundle/images/sprite-bf-tabs_3641_.svg#icons-arrow"/></svg></div><!-- Label container --><h4 class="tab-label" title="{{tabsCtrl.data.selectedTab.tooltip}}" data-ng-if="tabsCtrl.data.selectedTab.label" data-ng-class="{\'with-thumbnail\': tabsCtrl.data.selectedTab.thumbnail}">{{tabsCtrl.data.selectedTab.label}}</h4></div><svg class="more-icon" data-ng-if="!tabsCtrl.api.inMoreDropdown(tabsCtrl.data.selectedTab) || !tabsCtrl.data.selectedTab.thumbnail"><use xlink:href="" data-ng-href="/resources/eds/bundle/images/sprite-bf-tabs_3641_.svg#icons-arrow"/></svg></div><ul class="more-dropdown" data-ng-show="tabsCtrl.data.isMoreDropdownVisible" data-ng-style="{\n                    \'top\': tabsCtrl.data.tabHeight + \'px\'\n                }"><li class="more-tab-item" data-ng-repeat="tab in tabsCtrl.tabs | limitTo : tabsCtrl.api.getNumberOfMoreTabItems() : tabsCtrl.api.calcTabsSize()" data-ng-click="tabsCtrl.api.onTabClickFn(tab)"><a class="item-link" data-ng-href="{{tab.url}}"><!-- Thumbnail container --><div class="more-thumbnail-wrapper" data-ng-if="tab.thumbnail"><img title="{{tab.tooltip}}" data-ng-if="!tab.thumbnail.isSvg" data-ng-src="{{tab.thumbnail.url}}"> <svg class="more-thumbnail" title="{{tab.tooltip}}" data-ng-if="tab.thumbnail.isSvg"><use xlink:href="" data-ng-href="{{tab.thumbnail.url}}"/></svg></div><!-- Hidden tab name --><h4 class="more-tab-label" title="{{tab.tooltip}}" data-ng-if="tab.label" data-ng-class="{\'without-thumbnail\': !tab.thumbnail}">{{tab.label}}</h4></a></li></ul></li></ul><div class="tab-content" data-ng-repeat="tab in tabsCtrl.tabs" data-bf-tabs-lazy-load="tabsCtrl.api.showTabContent(tab)" data-bf-tabs-lazy-load-content="tab.content" data-bf-tabs-lazy-load-template-url="{{tab.templateUrl}}"></div></section>'),a.put("/views/lazy-load-directive-template.html",'<div class="lazy-load-directive" data-ng-if="isLoaded" data-ng-show="isVisible"><div data-ng-include="templateUrl"></div></div>')}])},{}]},{},[2]),!function m(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,m,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={restrict:"E",transclude:!0,templateUrl:"/views/bf-progress-bar.html",controller:"BF.ProgressBarController",controllerAs:"self",bindings:{value:"<",max:"<"}},b.exports=c["default"]},{}],2:[function(a,b,c){"use strict";function d(){var a=this,b=function(a,b){return+(100*a/b).toFixed(2)};this.$onChanges=function(){a.percent=b(a.value,a.max)}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d,b.exports=c["default"]},{}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./bf-progress-bar-controller.js"),f=d(e),g=a("./bf-progress-bar-component.js"),h=d(g);a("./templates.js"),angular.module("BF.ProgressBar",["bfProgressBarTemplates"]).controller("BF.ProgressBarController",f["default"]).component("bfProgressBar",h["default"])},{"./bf-progress-bar-component.js":1,"./bf-progress-bar-controller.js":2,"./templates.js":4}],4:[function(a,b,c){"use strict";b.exports=angular.module("bfProgressBarTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-progress-bar.html",'<div class="progress"><div class="progress-bar" data-ng-style="{width: (self.percent < 100 ? self.percent : 100) + \'%\'}" data-ng-transclude=""></div></div>')}])},{}]},{},[3]),!function n(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,n,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./directives/tooltip-directive.js"),f=d(e),g=angular.module("bfTooltip",[]);g.directive("bfTooltip",f["default"])},{"./directives/tooltip-directive.js":2}],2:[function(a,b,c){"use strict";function d(){return{restrict:"EA",transclude:!0,scope:{options:"@",bfTooltip:"@",defaultOptions:"=?defaultOptions",scrollContainer:"@scroll",closeButton:"@",visible:"="},template:'<div class="bf-tooltip-wrapper {{ defaultOptions }}"><div class="bf-tooltip" ng-class="{\'has-close-button\':closeButton==\'true\' , \'visible\':visible==true}"><div class="text" ng-transclude></div><div class="close-button" ng-click="events.closeTooltip()" ng-if="closeButton"></div></div></div>',link:function(a,b,c,d,e){function f(){a.$apply(function(a){j=i.prop("scrollTop")+k.prop("offsetHeight"),j>b.parent().prop("offsetTop")?a.defaultOptions=l.replace("top","bottom"):a.defaultOptions=l})}function g(){a.visible=!1}var h,i,j,k,l="top left";a.options&&(l=a.options),a.defaultOptions=l,c.bfTooltip&&e(a,function(c){c.addClass(b.attr("class")),b.attr("class",""),b.after(c),h=angular.element(b[0].querySelector(".text")),h.html(a.bfTooltip)}),a.scrollContainer&&(i=angular.element(document.body.querySelector(a.scrollContainer)),k=angular.element(b[0].querySelector(".bf-tooltip")),i.on("scroll",f)),b.parent().addClass("bf-tooltip-parent"),a.$on("$destroy",function(){angular.isElement(i)&&i.off("scroll",f)}),a.events={closeTooltip:g}}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d},{}]},{},[1]),!function o(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,o,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates.js");var e=a("./directives/bf-bet-button-directive.js"),f=d(e),g=a("./constants/bf-bet-button-constants.js"),h=d(g),i=angular.module("bfBetButton",["bfBetButtonTemplates","betfair.lodash"]);i.directive("bfBetButton",f["default"]),i.constant("BF.BetButtonSConstants",h["default"])},{"./constants/bf-bet-button-constants.js":2,"./directives/bf-bet-button-directive.js":3,"./templates.js":4}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={BACK:"back",LAY:"lay"}},{}],3:[function(a,b,c){"use strict";function d(a,b,c){function d(a){var b=/[^-0-9.]/g;if(angular.isUndefined(a))return NaN;var c=a.toString().replace(b,"");return c.length?Number(c):NaN}function e(a){return angular.isString(a)?"true"===a.toLowerCase():Boolean(a)}function f(a,b){return angular.element(a[0].querySelector(b))}function g(a){return!a}function h(b){var c={back:{"default":"back-button",empty:"back-button-empty"},lay:{"default":"lay-button",empty:"lay-button-empty"}},d=c[b.type],f=[];if(d&&f.push(d["default"]),d&&g(b.selectionId)&&f.push(d.empty),"0"===b.depth)switch(b.type){case a.BACK:f.push("back-selection-button");break;case a.LAY:f.push("lay-selection-button")}return 0!==parseInt(b.price,10)||e(b.isSp)||f.push("empty"),f.join(" ")}function i(a,d,g){var i=c.memoize(c.partial(f,d));d.addClass(h(g)),g.selectionId&&((0===j(a.depth)||e(a.isSp))&&a.$watch("isSelected",function(a){d.toggleClass("selected",e(a))}),e(a.isSp)||(d.on("mouseenter",function(){d.attr("title",a.toFraction({price:a.price}))}),a.$watch("[price, size]",function(c,f){var g=c[0],h=c[1];i(".bf-bet-button-info").toggleClass("ng-hide",j(g)<1),i(".bet-button-price").text(g),i(".bet-button-size").text(h),e(a.highlight)&&c!==f&&b.removeClass(d,"changed").then(function(){b.addClass(d,"changed")})})))}var j=c.memoize(d);return{restrict:"E",templateUrl:"/views/bf-bet-button.html",replace:!0,scope:{type:"@",depth:"@",price:"@",size:"@",highlight:"@",isSelected:"@",isSp:"@",spLabel:"@",toFraction:"&",disabled:"&ngDisabled",selectionId:"@"},link:i}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.BetButtonSConstants","$animate","BF.Lodash"],c["default"]=d},{}],4:[function(a,b,c){"use strict";b.exports=angular.module("bfBetButtonTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-bet-button.html",'<button class="bf-bet-button" data-bet-type="{{::type}}" data-ng-class="::{\'is-sp\': isSp}"><div class="sp-label" data-ng-if="::isSp" data-ng-bind="::spLabel"></div><div class="bf-bet-button-info" data-ng-if="::!isSp"><span class="bet-button-price">-</span> <span class="bet-button-size"></span></div></button>')}])},{}]},{},[1]),!function(a,b){"undefined"!=typeof module&&module.exports?(b("undefined"==typeof angular?require("angular"):angular),module.exports="ngDialog"):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a){"use strict";var b=a.module("ngDialog",[]),c=a.element,d=a.isDefined,e=(document.body||document.documentElement).style,f=d(e.animation)||d(e.WebkitAnimation)||d(e.MozAnimation)||d(e.MsAnimation)||d(e.OAnimation),g="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",h="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",i="ngdialog-disabled-animation",j={html:!1,body:!1},k={},l=[],m=!1,n=!1;return b.provider("ngDialog",function(){var b=this.defaults={className:"ngdialog-theme-default",appendClassName:"",disableAnimation:!1,plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,overlay:!0,cache:!0,trapFocus:!0,preserveFocus:!0,ariaAuto:!0,ariaRole:null,ariaLabelledById:null,ariaLabelledBySelector:null,ariaDescribedById:null,ariaDescribedBySelector:null,bodyClassName:"ngdialog-open",width:null,height:null};this.setForceHtmlReload=function(a){j.html=a||!1},this.setForceBodyReload=function(a){j.body=a||!1},this.setDefaults=function(c){a.extend(b,c)},this.setOpenOnePerName=function(a){n=a||!1};var d,e=0,o=0,p={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(q,r,s,t,u,v,w,x,y,z){var A=[],B={onDocumentKeydown:function(a){27===a.keyCode&&C.close("$escape")},activate:function(a){var b=a.data("$ngDialogOptions");b.trapFocus&&(a.on("keydown",B.onTrapFocusKeydown),A.body.on("keydown",B.onTrapFocusKeydown))},deactivate:function(a){a.off("keydown",B.onTrapFocusKeydown),A.body.off("keydown",B.onTrapFocusKeydown)},deactivateAll:function(b){a.forEach(b,function(b){var c=a.element(b);B.deactivate(c)})},setBodyPadding:function(a){var b=parseInt(A.body.css("padding-right")||0,10);A.body.css("padding-right",b+a+"px"),A.body.data("ng-dialog-original-padding",b),v.$broadcast("ngDialog.setPadding",a)},resetBodyPadding:function(){var a=A.body.data("ng-dialog-original-padding");a?A.body.css("padding-right",a+"px"):A.body.css("padding-right",""),v.$broadcast("ngDialog.setPadding",0)},performCloseDialog:function(a,b){var c=a.data("$ngDialogOptions"),e=a.attr("id"),h=k[e];if(h){if("undefined"!=typeof x.Hammer){var i=h.hammerTime;i.off("tap",d),i.destroy&&i.destroy(),delete h.hammerTime}else a.unbind("click");1===o&&A.body.unbind("keydown",B.onDocumentKeydown),a.hasClass("ngdialog-closing")||(o-=1);var j=a.data("$ngDialogPreviousFocus");j&&j.focus&&j.focus(),v.$broadcast("ngDialog.closing",a,b),o=o<0?0:o,f&&!c.disableAnimation?(h.$destroy(),a.unbind(g).bind(g,function(){B.closeDialogElement(a,b)}).addClass("ngdialog-closing")):(h.$destroy(),B.closeDialogElement(a,b)),p[e]&&(p[e].resolve({id:e,value:b,$dialog:a,remainingDialogs:o}),delete p[e]),k[e]&&delete k[e],l.splice(l.indexOf(e),1),l.length||(A.body.unbind("keydown",B.onDocumentKeydown),m=!1)}},closeDialogElement:function(a,b){var c=a.data("$ngDialogOptions");a.remove(),0===o&&(A.html.removeClass(c.bodyClassName),A.body.removeClass(c.bodyClassName),B.resetBodyPadding()),v.$broadcast("ngDialog.closed",a,b)},closeDialog:function(b,c){var d=b.data("$ngDialogPreCloseCallback");if(d&&a.isFunction(d)){var e=d.call(b,c);if(a.isObject(e))e.closePromise?e.closePromise.then(function(){B.performCloseDialog(b,c)},function(){return!1}):e.then(function(){B.performCloseDialog(b,c)},function(){return!1});else{if(e===!1)return!1;B.performCloseDialog(b,c)}}else B.performCloseDialog(b,c)},onTrapFocusKeydown:function(b){var c,d=a.element(b.currentTarget);if(d.hasClass("ngdialog"))c=d;else if(c=B.getActiveDialog(),null===c)return;var e=9===b.keyCode,f=b.shiftKey===!0;e&&B.handleTab(c,b,f)},handleTab:function(a,b,c){var d=B.getFocusableElements(a);if(0===d.length)return void(document.activeElement&&document.activeElement.blur&&document.activeElement.blur());var e=document.activeElement,f=Array.prototype.indexOf.call(d,e),g=f===-1,h=0===f,i=f===d.length-1,j=!1;c?(g||h)&&(d[d.length-1].focus(),j=!0):(g||i)&&(d[0].focus(),j=!0),j&&(b.preventDefault(),b.stopPropagation())},autoFocus:function(a){var b=a[0],d=b.querySelector("*[autofocus]");if(null===d||(d.focus(),document.activeElement!==d)){var e=B.getFocusableElements(a);if(e.length>0)return void e[0].focus();var f=B.filterVisibleElements(b.querySelectorAll("h1,h2,h3,h4,h5,h6,p,span"));if(f.length>0){var g=f[0];c(g).attr("tabindex","-1").css("outline","0"),g.focus()}}},getFocusableElements:function(a){var b=a[0],c=b.querySelectorAll(h),d=B.filterTabbableElements(c);return B.filterVisibleElements(d)},filterTabbableElements:function(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];"-1"!==c(e).attr("tabindex")&&b.push(e)}return b},filterVisibleElements:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];(d.offsetWidth>0||d.offsetHeight>0)&&b.push(d)}return b},getActiveDialog:function(){var a=document.querySelectorAll(".ngdialog");return 0===a.length?null:c(a[a.length-1])},applyAriaAttributes:function(a,b){if(b.ariaAuto){if(!b.ariaRole){var c=B.getFocusableElements(a).length>0?"dialog":"alertdialog";b.ariaRole=c}b.ariaLabelledBySelector||(b.ariaLabelledBySelector="h1,h2,h3,h4,h5,h6"),b.ariaDescribedBySelector||(b.ariaDescribedBySelector="article,section,p")}b.ariaRole&&a.attr("role",b.ariaRole),B.applyAriaAttribute(a,"aria-labelledby",b.ariaLabelledById,b.ariaLabelledBySelector),B.applyAriaAttribute(a,"aria-describedby",b.ariaDescribedById,b.ariaDescribedBySelector)},applyAriaAttribute:function(a,b,d,e){if(d&&a.attr(b,d),e){var f=a.attr("id"),g=a[0].querySelector(e);if(!g)return;var h=f+"-"+b;return c(g).attr("id",h),a.attr(b,h),h}},detectUIRouter:function(){try{return a.module("ui.router"),!0}catch(b){return!1}},getRouterLocationEventName:function(){return B.detectUIRouter()?"$stateChangeStart":"$locationChangeStart"}},C={__PRIVATE__:B,open:function(f){function g(b,c){var c=c||{};return c.headers=c.headers||{},a.extend(c.headers,{Accept:"text/html"}),v.$broadcast("ngDialog.templateLoading",b),u.get(b,c).then(function(a){return v.$broadcast("ngDialog.templateLoaded",b),a.data||""})}function h(b){return b?a.isString(b)&&q.plain?b:"boolean"!=typeof q.cache||q.cache?g(b,{cache:r}):g(b,{cache:!1}):"Empty template"}var j=null;if(f=f||{},!(n&&f.name&&(j=f.name.toLowerCase().replace(/\s/g,"-")+"-dialog",this.isOpen(j)))){var q=a.copy(b),D=++e;j=j||"ngdialog"+D,l.push(j),"undefined"!=typeof q.data&&("undefined"==typeof f.data&&(f.data={}),f.data=a.merge(a.copy(q.data),f.data)),a.extend(q,f);var E;p[j]=E=t.defer();var F;k[j]=F=a.isObject(q.scope)?q.scope.$new():v.$new();var G,H,I,J=a.extend({},q.resolve);return a.forEach(J,function(b,c){J[c]=a.isString(b)?z.get(b):z.invoke(b,null,null,c)}),t.all({template:h(q.template||q.templateUrl),locals:t.all(J)}).then(function(b){var e=b.template,f=b.locals;q.showClose&&(e+='<div class="ngdialog-close"></div>');var g=q.overlay?"":" ngdialog-no-overlay";if(G=c('<div id="'+j+'" class="ngdialog'+g+'"></div>'),G.html(q.overlay?'<div class="ngdialog-overlay"></div><div class="ngdialog-content" role="document">'+e+"</div>":'<div class="ngdialog-content" role="document">'+e+"</div>"),G.data("$ngDialogOptions",q),F.ngDialogId=j,q.data&&a.isString(q.data)){var h=q.data.replace(/^\s*/,"")[0];F.ngDialogData="{"===h||"["===h?a.fromJson(q.data):new String(q.data),F.ngDialogData.ngDialogId=j}else q.data&&a.isObject(q.data)&&(F.ngDialogData=q.data,F.ngDialogData.ngDialogId=j);if(q.className&&G.addClass(q.className),q.appendClassName&&G.addClass(q.appendClassName),q.width&&(I=G[0].querySelector(".ngdialog-content"),a.isString(q.width)?I.style.width=q.width:I.style.width=q.width+"px"),q.height&&(I=G[0].querySelector(".ngdialog-content"),a.isString(q.height)?I.style.height=q.height:I.style.height=q.height+"px"),q.disableAnimation&&G.addClass(i),H=q.appendTo&&a.isString(q.appendTo)?a.element(document.querySelector(q.appendTo)):A.body,B.applyAriaAttributes(G,q),q.preCloseCallback){var k;a.isFunction(q.preCloseCallback)?k=q.preCloseCallback:a.isString(q.preCloseCallback)&&F&&(a.isFunction(F[q.preCloseCallback])?k=F[q.preCloseCallback]:F.$parent&&a.isFunction(F.$parent[q.preCloseCallback])?k=F.$parent[q.preCloseCallback]:v&&a.isFunction(v[q.preCloseCallback])&&(k=v[q.preCloseCallback])),k&&G.data("$ngDialogPreCloseCallback",k)}if(F.closeThisDialog=function(a){B.closeDialog(G,a)},q.controller&&(a.isString(q.controller)||a.isArray(q.controller)||a.isFunction(q.controller))){var l;q.controllerAs&&a.isString(q.controllerAs)&&(l=q.controllerAs);var n=y(q.controller,a.extend(f,{$scope:F,$element:G}),!0,l);q.bindToController&&a.extend(n.instance,{ngDialogId:F.ngDialogId,ngDialogData:F.ngDialogData,closeThisDialog:F.closeThisDialog,confirm:F.confirm}),"function"==typeof n?G.data("$ngDialogControllerController",n()):G.data("$ngDialogControllerController",n)}if(w(function(){var a=document.querySelectorAll(".ngdialog");B.deactivateAll(a),s(G)(F);var b=x.innerWidth-A.body.prop("clientWidth");A.html.addClass(q.bodyClassName),A.body.addClass(q.bodyClassName);var c=b-(x.innerWidth-A.body.prop("clientWidth"));c>0&&B.setBodyPadding(c),H.append(G),B.activate(G),q.trapFocus&&B.autoFocus(G),q.name?v.$broadcast("ngDialog.opened",{dialog:G,name:q.name}):v.$broadcast("ngDialog.opened",G)}),m||(A.body.bind("keydown",B.onDocumentKeydown),m=!0),q.closeByNavigation){var p=B.getRouterLocationEventName();v.$on(p,function(a){B.closeDialog(G)===!1&&a.preventDefault()})}if(q.preserveFocus&&G.data("$ngDialogPreviousFocus",document.activeElement),d=function(a){var b=!!q.closeByDocument&&c(a.target).hasClass("ngdialog-overlay"),d=c(a.target).hasClass("ngdialog-close");(b||d)&&C.close(G.attr("id"),d?"$closeButton":"$document")},"undefined"!=typeof x.Hammer){var r=F.hammerTime=x.Hammer(G[0]);r.on("tap",d)}else G.bind("click",d);return o+=1,C}),{id:j,closePromise:E.promise,close:function(a){B.closeDialog(G,a)}}}},openConfirm:function(d){var e=t.defer(),f=a.copy(b);d=d||{},"undefined"!=typeof f.data&&("undefined"==typeof d.data&&(d.data={}),d.data=a.merge(a.copy(f.data),d.data)),a.extend(f,d),f.scope=a.isObject(f.scope)?f.scope.$new():v.$new(),f.scope.confirm=function(a){e.resolve(a);var b=c(document.getElementById(g.id));B.performCloseDialog(b,a)};var g=C.open(f);if(g)return g.closePromise.then(function(a){return a?e.reject(a.value):e.reject()}),e.promise},isOpen:function(a){var b=c(document.getElementById(a));return b.length>0},close:function(a,b){var d=c(document.getElementById(a));if(d.length)B.closeDialog(d,b);else if("$escape"===a){var e=l[l.length-1];d=c(document.getElementById(e)),d.data("$ngDialogOptions").closeByEscape&&B.closeDialog(d,"$escape")}else C.closeAll(b);return C},closeAll:function(a){for(var b=document.querySelectorAll(".ngdialog"),d=b.length-1;d>=0;d--){var e=b[d];B.closeDialog(c(e),a)}},getOpenDialogs:function(){return l},getDefaults:function(){return b}};return a.forEach(["html","body"],function(a){if(A[a]=q.find(a),j[a]){var b=B.getRouterLocationEventName();v.$on(b,function(){A[a]=q.find(a)})}}),C}]}),b.directive("ngDialog",["ngDialog",function(b){return{restrict:"A",scope:{ngDialogScope:"="},link:function(c,d,e){d.on("click",function(d){d.preventDefault();var f=a.isDefined(c.ngDialogScope)?c.ngDialogScope:"noScope";a.isDefined(e.ngDialogClosePrevious)&&b.close(e.ngDialogClosePrevious);var g=b.getDefaults();b.open({template:e.ngDialog,className:e.ngDialogClass||g.className,appendClassName:e.ngDialogAppendClass,controller:e.ngDialogController,controllerAs:e.ngDialogControllerAs,bindToController:e.ngDialogBindToController,disableAnimation:e.ngDialogDisableAnimation,scope:f,data:e.ngDialogData,showClose:"false"!==e.ngDialogShowClose&&("true"===e.ngDialogShowClose||g.showClose),closeByDocument:"false"!==e.ngDialogCloseByDocument&&("true"===e.ngDialogCloseByDocument||g.closeByDocument),closeByEscape:"false"!==e.ngDialogCloseByEscape&&("true"===e.ngDialogCloseByEscape||g.closeByEscape),overlay:"false"!==e.ngDialogOverlay&&("true"===e.ngDialogOverlay||g.overlay),preCloseCallback:e.ngDialogPreCloseCallback||g.preCloseCallback,bodyClassName:e.ngDialogBodyClass||g.bodyClassName})})}}}]),b}),angular.module("ngLazyRender",[]),angular.module("ngLazyRender").directive("lazyModule",["$animate","$compile","$parse","$q","$templateCache","VisibilityService",function(a,b,c,d,e,f){"use strict";var g=function(b,c,e,f,g){null!==c&&(c.$destroy(),c=null,b(function(b){var c=a.enter(b,f.parent(),f),h=a.leave(e),i=d.all([c,h]).then(function(){e=null});g&&i["finally"](g)}))};return{priority:500,terminal:!0,transclude:"element",link:function(d,h,i,j,k){if(c(i.lazyIf)(d)===!1)return void k(function(b){a.enter(b,h.parent(),h)});var l=angular.element(e.get(i.lazyModule)),m=d.$new(!0),n=void 0;i.lazyHide?(a.enter(l,h.parent(),h).then(function(){b(l)(m)}),n=d.$watch(i.lazyHide,function(a){a&&g(k,m,l,h,n)})):(m.showModule=function(){d.$applyAsync(function(){g(k,m,l,h)})},a.enter(l,h.parent(),h).then(function(){b(l)(m),f.whenVisible(l,m,m.showModule)}))}}}]),angular.module("ngLazyRender").directive("lazyRepeater",["$animate","$compile","$parse","$templateCache","VisibilityService",function(a,b,c,d,e){return{restrict:"A",priority:2e3,compile:function(f,g){var h=g.ngRepeat.indexOf("track by");h===-1?g.ngRepeat+="| limitTo: getLazyLimit()":g.ngRepeat=g.ngRepeat.substr(0,h)+"| limitTo: getLazyLimit() "+g.ngRepeat.substr(h);var i=g.ngRepeat.match(/in (.*?)?([ |\n|]|$)/)[1];return function(f,g,h){function j(){return f.$eval(i).length}function k(){var c=h.lazyPlaceholder?d.get(h.lazyPlaceholder)||h.lazyPlaceholder:"",i=angular.element("<div>"+c+"</div>"),k=f.$new(!0);k.increaseLimit=function(){f.$apply(function(){var b=j();l*=2,l>=b&&(k.$destroy(),a.leave(i),m=!1)})};var n=g.parent().children(),o=0===n.length?g:n.eq(-1);a.enter(i,g.parent(),o).then(function(){e.whenVisible(i,k,k.increaseLimit)}),b(i)(k),m=!0}var l=h.lazyRepeater,m=!1;l<j()&&c(h.lazyIf)(f)!==!1&&(k(),f.getLazyLimit=function(){return l},f.$watch(j,function(a){l<a&&!m&&k()}))}}}}]),angular.module("ngLazyRender").provider("VisibilityService",[function(){var a=500;this.setDelay=function(b){a=b},this.$get=["$interval","$q",function(b,c){function d(){var a,b,c;return(a=window.innerHeight)?a:(b=document.compatMode,!b&&("undefined"!=typeof $&&null!==$&&null!=(c=$.support)?c.boxModel:void 0)||(a="CSS1Compat"===b?document.documentElement.clientHeight:document.body.clientHeight),a)}function e(a){var b,c,d;if(null!=a.getBoundingClientRect)return a.getBoundingClientRect();for(d=0,b=a;b;)d+=b.offsetTop,b=b.offsetParent;for(c=a.parentElement;c;)null!=c.scrollTop&&(d-=c.scrollTop),c=c.parentElement;return{top:d,bottom:d+a.offsetHeight}}function f(){!j&&a&&(j=b(this.checkInView,a,0,!1))}function g(){j&&(b.cancel(j),j=null)}function h(){var a={top:0,bottom:d()},b=[];k.forEach(function(c){var d=e(c.element[0]);d.top<a.bottom&&d.bottom>=a.top&&b.push(c.callback)}),b.forEach(function(a){a()})}function i(a,b,c){var d=this,e=l++;k.push({element:a,callback:c,scope:b,id:e}),b.$on("$destroy",function(){k=k.filter(function(a){return a.id!==e}),0===k.length&&d._stopWatching()}),this._startWatching()}var j=void 0,k=[],l=0;return{_startWatching:f,_stopWatching:g,checkInView:h,whenVisible:i}}]}]),!function p(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,p,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){"use strict";function d(a){function b(b){a.notifyWhenStable(function(){b.$applyAsync(function(){b.ready=!0})})}return{restrict:"E",transclude:!0,link:b,template:'<ng-transclude ng-if="::ready"></ng-transclude>',scope:{}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["OnHttpStableService"],c["default"]=d},{}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c,e){d(this,a),this.$rootScope=b,this.$browser=c,this.$http=e}return e(a,[{key:"notifyWhenStable",value:function(a){var b=this;if(angular.isFunction(this.$browser.notifyWhenNoOutstandingRequests))return this.$browser.notifyWhenNoOutstandingRequests(a);
var c=this.$rootScope.$watch(function(){return b.$http.pendingRequests.length},function(b,d){0===b&&(a(),c())})}}]),a}();f.$inject=["$rootScope","$browser","$http"],c["default"]=f},{}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./ng-on-http-stable-directive"),f=d(e),g=a("./ng-on-http-stable-service"),h=d(g),i=angular.module("ngOnHttpStable",[]);i.directive("ngOnHttpStable",f["default"]),i.service("OnHttpStableService",h["default"])},{"./ng-on-http-stable-directive":1,"./ng-on-http-stable-service":2}]},{},[3]),!function q(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,q,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define([],function(){return a.svg4everybody=d()}):"object"==typeof c?b.exports=d():a.svg4everybody=d()}(this,function(){function a(a,b){if(b){var c=document.createDocumentFragment(),d=!a.getAttribute("viewBox")&&b.getAttribute("viewBox");d&&a.setAttribute("viewBox",d);for(var e=document.importNode?document.importNode(b,!0):b.cloneNode(!0);e.childNodes.length;)c.appendChild(e.firstChild);a.appendChild(c)}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=b._cachedDocument;c||(c=b._cachedDocument=document.implementation.createHTMLDocument(""),c.body.innerHTML=b.responseText,b._cachedTarget={}),b._embeds.splice(0).map(function(d){var e=b._cachedTarget[d.id];e||(e=b._cachedTarget[d.id]=c.getElementById(d.id)),a(d.svg,e)})}},b.onreadystatechange()}function c(c){function d(){for(var c=0;c<l.length;){var g=l[c],h=g.parentNode;if(h&&/svg/i.test(h.nodeName)){var i=g.getAttribute("xlink:href");if(e&&(!f.validate||f.validate(i,h,g))){h.removeChild(g);var m=i.split("#"),n=m.shift(),o=m.join("#");if(n.length){var p=j[n];p||(p=j[n]=new XMLHttpRequest,p.open("GET",n),p.send(),p._embeds=[]),p._embeds.push({svg:h,id:o}),b(p)}else a(h,document.getElementById(o))}}else++c}k(d,67)}var e,f=Object(c),g=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,h=/\bAppleWebKit\/(\d+)\b/,i=/\bEdge\/12\.(\d+)\b/;e="polyfill"in f?f.polyfill:g.test(navigator.userAgent)||(navigator.userAgent.match(i)||[])[1]<10547||(navigator.userAgent.match(h)||[])[1]<537;var j={},k=window.requestAnimationFrame||setTimeout,l=document.getElementsByTagName("use");e&&d()}return c})},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates");var e=a("svg4everybody"),f=d(e),g=a("./directives/trigger-focus-directive"),h=d(g),i=a("./directives/restrict-number-directive"),j=d(i),k=a("./components/inline-betting-component"),l=d(k),m=a("./controllers/inline-betting-controller"),n=d(m),o=a("./providers/action-creator-service"),p=d(o),q=a("./constants/inline-betting-constants"),r=d(q),s=a("./constants/component-default-state"),t=d(s),u=a("./constants/bet-edition-state"),v=d(u),w=a("./constants/place-confirmation-state"),x=d(w),y=a("./constants/bet-receipt-state"),z=d(y);(0,f["default"])(),angular.module("bfInlineBetting",["bfInlineBettingTemplates","betfair.lodash","pascalprecht.translate","BF.ProgressBar","bfBreakpoint"]).directive("bfTriggerFocus",h["default"]).directive("bfRestrictNumber",j["default"]).component("bfInlineBetting",l["default"]).controller("BF.InlineBettingController",n["default"]).service("BF.InlineBettingActionCreator",p["default"]).constant("BF.InlineBettingConstants",r["default"]).constant("BF.InlineBettingDefaultState",t["default"]).constant("BF.InlineBettingEditState",v["default"]).constant("BF.InlineBettingConfirmState",x["default"]).constant("BF.InlineBettingReceiptState",z["default"])},{"./components/inline-betting-component":3,"./constants/bet-edition-state":4,"./constants/bet-receipt-state":5,"./constants/component-default-state":6,"./constants/inline-betting-constants":7,"./constants/place-confirmation-state":8,"./controllers/inline-betting-controller":9,"./directives/restrict-number-directive":10,"./directives/trigger-focus-directive":11,"./providers/action-creator-service":12,"./templates":13,svg4everybody:1}],3:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={restrict:"E",templateUrl:"/views/bf-inline-betting.html",controller:"BF.InlineBettingController",controllerAs:"vm",bindings:{state:"<",onCancel:"&",onEdit:"&",onSubmit:"&",onValueChange:"&",onBlur:"&",onFocusSize:"&",onFocusPrice:"&",onToggleLiabilityView:"&",onToggleInplayBetOption:"&",onDismissMessage:"&",onNudgeDownPrice:"&",onNudgeUpPrice:"&",onNudgeDownSize:"&",onNudgeUpSize:"&"}};c["default"]=d},{}],4:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={placeBetPanel:{visible:!0,cancelButton:{visible:!0},editButton:{visible:!1},placeBetButton:{visible:!0,enabled:!1,message:null},confirmBetButton:{visible:!1,message:null},priceInput:{enabled:!0,hasError:!1},sizeInput:{enabled:!0}},notificationPanel:{visible:!1}}},{}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./inline-betting-constants"),f=d(e);c["default"]={placeBetPanel:{visible:!1},notificationPanel:{visible:!0,autoCloseMilliseconds:3e3,messageType:f["default"].MESSAGE_TYPE.RECEIPT,type:f["default"].NOTIFICATION_TYPE.SUCCESS,content:{title:"I18N.INLINE_BETTING.BET_MATCHED",message:"I18N.INLINE_BETTING.BET_MATCHED_DETAILS",profitString:"I18N.INLINE_BETTING.PROFIT",formattedPrice:null,formattedSize:null,formattedProfit:null,formattedSizeUnmatched:null,formattedSizeMatched:null},cancelButton:{visible:!1},editButton:{visible:!1},closeButton:{visible:!0}}}},{"./inline-betting-constants":7}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./inline-betting-constants"),f=d(e);c["default"]={isSuspended:!1,isPotential:!0,isNarrowEnabled:!1,breakPointRules:{narrow:338},placeBetPanel:{runnerName:"",marketName:"",visible:!1,currencySymbol:"$",fractionSize:2,betType:f["default"].BET_TYPE.BACK,betInfo:{visible:!1},cancelButton:{visible:!1},editButton:{visible:!1},nudgeButtons:{visible:!1},placeBetButton:{visible:!1,enabled:!1,message:null},confirmBetButton:{visible:!1,message:null,focus:!1},priceInput:{placeholder:"I18N.INLINE_BETTING.ODDS",enabled:!1,hasError:!1,value:null,maxLength:6,focus:!1,isLocked:!1},sizeInput:{placeholder:"I18N.INLINE_BETTING.STAKE",enabled:!1,value:null,maxLength:7,isLocked:!1},liabilityView:{visible:!1,value:f["default"].LIABILITY_VIEW.LIABILITY},inplayBetOptions:{enabled:!1,value:f["default"].INPLAY_BET_OPTIONS.CANCEL,keep:{visible:!1},cancel:{visible:!1},takeSp:{visible:!1}},pnlInfo:{visible:!1,values:[]}},notificationPanel:{visible:!1,type:f["default"].NOTIFICATION_TYPE.SUCCESS,autoCloseMilliseconds:null,content:{profitString:"I18N.INLINE_BETTING.PROFIT",title:null,message:null,formattedPrice:null,formattedSize:null,formattedProfit:null,formattedSizeUnmatched:null,formattedSizeMatched:null},cancelButton:{visible:!1,enabled:!0},editButton:{visible:!1,enabled:!0},closeButton:{visible:!0}},loadingPanel:{visible:!1,maxPercentage:null,currentPercentage:null,secondsRemaining:null}}},{"./inline-betting-constants":7}],7:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={BET_TYPE:{BACK:"BACK",LAY:"LAY"},LIABILITY_VIEW:{PAYOUT:"PAYOUT",LIABILITY:"LIABILITY"},INPLAY_BET_OPTIONS:{TAKE_SP:"TAKE_SP",CANCEL:"CANCEL",KEEP:"KEEP"},MESSAGE_TYPE:{RECEIPT:"receipt",MESSAGE:"message"},NOTIFICATION_TYPE:{WARNING:"warning",ERROR:"error",SUCCESS:"success",CANCELED:"canceled"},RECEIPT_TYPE:{UNMATCHED:"UNMATCHED",PARTIALLY_MATCHED:"PARTIALLY_MATCHED",MATCHED:"MATCHED",SP:"SP"},KEY_CODES:{ENTER:13,ARROW_UP:38,ARROW_DOWN:40}}},{}],8:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={placeBetPanel:{visible:!0,cancelButton:{visible:!1},editButton:{visible:!0},placeBetButton:{visible:!1},confirmBetButton:{visible:!0,focus:!0},priceInput:{enabled:!1,focus:!1},sizeInput:{enabled:!1}}}},{}],9:[function(a,b,c){"use strict";function d(a,b,c,d){var e=void 0;this.CONSTANTS=a,this.$onChanges=function(){var a=this;d.cancel(e),this.data=c.mergeWith({},b,this.state,function(a,b,d){if("breakPointRules"===d)return c.isObject(b)?b:a}),this.price=this.data.placeBetPanel.priceInput.value,this.size=this.data.placeBetPanel.sizeInput.value,this.liabilityView=this.data.placeBetPanel.liabilityView.value,this.inplayBetOption=this.data.placeBetPanel.inplayBetOptions.value,this.betTypeStyleClass=this.data.placeBetPanel.betType.toLowerCase();var f=this.data.notificationPanel.autoCloseMilliseconds;c.isFinite(f)&&(e=d(function(){return a.onDismissMessage({state:a.data})},f))},this.$onDestroy=function(){d.cancel(e),this.data=null},this.onKeypress=function(b){if(b.keyCode===a.KEY_CODES.ENTER||b.which===a.KEY_CODES.ENTER){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return this.onSubmit.apply(this,d)}},this.onPriceKeydown=function(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return b.keyCode===a.KEY_CODES.ARROW_UP||b.which===a.KEY_CODES.ARROW_UP?this.onNudgeUpPrice.apply(this,d):b.keyCode===a.KEY_CODES.ARROW_DOWN||b.which===a.KEY_CODES.ARROW_DOWN?this.onNudgeDownPrice.apply(this,d):void 0}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.InlineBettingConstants","BF.InlineBettingDefaultState","BF.Lodash","$timeout"],c["default"]=d},{}],10:[function(a,b,c){"use strict";function d(a){var b=/[^\d|\.]/,c=/(\..*?)(\.)/,d=/(.*?\.\d{2})(\d*)/,e=/,/g,f=".",g=/^0+/,h=/^\.+/,i=a.memoize(function(a){return a.replace(g,"").replace(h,"").replace(e,f).replace(b,"").replace(c,"$1").replace(d,"$1")});return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){var b=i(a);b!==a&&(d.$setViewValue(b),d.$render());var c=parseFloat(b);if(!isNaN(c))return c})}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.Lodash"],c["default"]=d},{}],11:[function(a,b,c){"use strict";function d(){return{restrict:"A",scope:{trigger:"=bfTriggerFocus"},link:function(a,b){a.$watch("trigger",function(c){c===!0&&(b[0].focus(),b[0].select&&b[0].select(),a.trigger=!1)})}}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],12:[function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(a,b,c,e){this.openEditPanel=function(){return angular.extend({},b)},this.hideEditPanel=function(){return{placeBetPanel:{visible:!1}}},this.focusPriceInput=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{placeBetPanel:{priceInput:{focus:a}}}},this.enableInputField=function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{placeBetPanel:d({},a+"Input",{enabled:b})}},this.lockInputFields=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{placeBetPanel:{priceInput:{isLocked:a},sizeInput:{isLocked:a}}}},this.updateInputFieldPlaceholder=function(a,b){return{placeBetPanel:d({},a+"Input",{placeholder:b})}},this.enableSubmitButton=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{placeBetPanel:{placeBetButton:{visible:!0,enabled:a}}}},this.displayMessage=function(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{notificationPanel:{visible:!0,type:a.NOTIFICATION_TYPE[b],messageType:a.MESSAGE_TYPE.MESSAGE,content:{title:d,message:c},closeButton:{visible:!0}}}},this.dismissMessage=function(){return{notificationPanel:{visible:!1,content:{title:"",message:""}}}},this.updateBetValues=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{placeBetPanel:{priceInput:{value:a},sizeInput:{value:b},placeBetButton:{message:c},confirmBetButton:{message:c}}}},this.changeLiabilityView=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{placeBetPanel:{placeBetButton:{message:b},confirmBetButton:{message:b},liabilityView:{value:a}}}},this.showPlaceConfirmation=function(){return angular.extend({},c)},this.updateLoadingProgress=function(a,b){return{isSuspended:!1,placeBetPanel:{visible:!1},notificationPanel:{visible:!1},loadingPanel:{visible:!0,maxPercentage:100,currentPercentage:a,secondsRemaining:b}}},this.showReceipt=function(b,c,d,f,g){var h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,j=void 0,k=void 0,l=void 0,m=3e3,n=!1,o=!1,p=!0;switch(b){case a.RECEIPT_TYPE.MATCHED:j=a.NOTIFICATION_TYPE.SUCCESS,k="I18N.INLINE_BETTING.BET_MATCHED",l="I18N.INLINE_BETTING.BET_MATCHED_DETAILS",i=null;break;case a.RECEIPT_TYPE.PARTIALLY_MATCHED:m=1e4,j=a.NOTIFICATION_TYPE.ERROR,k="I18N.INLINE_BETTING.BET_PARTIALLY_MATCHED",l="I18N.INLINE_BETTING.BET_PARTIALLY_MATCHED_DETAILS",n=!0,o=!0,p=!1;break;case a.RECEIPT_TYPE.UNMATCHED:h=null,m=1e4,j=a.NOTIFICATION_TYPE.ERROR,k="I18N.INLINE_BETTING.BET_UNMATCHED",l="I18N.INLINE_BETTING.BET_UNMATCHED_DETAILS",n=!0,o=!0,p=!1;break;case a.RECEIPT_TYPE.SP:j=a.NOTIFICATION_TYPE.SUCCESS,k="I18N.INLINE_BETTING.BET_PLACED",l="I18N.INLINE_BETTING.BET_SP_DETAILS",c=null,g=null,h=null,i=null;break;case a.NOTIFICATION_TYPE.CANCELED:j=a.NOTIFICATION_TYPE.CANCELED,k="I18N.INLINE_BETTING.BET_CANCELED",l="I18N.INLINE_BETTING.BET_CANCELED_DETAILS",c=null,g=null,h=null,i=null;break;default:return{}}return angular.merge({},e,{notificationPanel:{autoCloseMilliseconds:m,type:j,content:{title:k,message:l,profitString:c,formattedPrice:d,formattedSize:f,formattedProfit:g,formattedSizeMatched:h,formattedSizeUnmatched:i},cancelButton:{visible:n},editButton:{visible:o},closeButton:{visible:p}}})},this.displayInplayBetOptions=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{placeBetPanel:{inplayBetOptions:{keep:{visible:a},cancel:{visible:b},takeSp:{visible:c}}}}},this.enableInplayBetOptions=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{placeBetPanel:{inplayBetOptions:{enabled:a}}}},this.updateInplayBetOptionLabel=function(a){return{placeBetPanel:{inplayBetOptions:{label:a}}}},this.displayNudgeButtons=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{placeBetPanel:{nudgeButtons:{visible:a}}}},this.displayBetInfo=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{placeBetPanel:{betInfo:{visible:a}}}},this.displayPnlInfo=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{placeBetPanel:{pnlInfo:{visible:a}}}},this.updatePnlValues=function(a){return{placeBetPanel:{pnlInfo:{values:a}}}}}Object.defineProperty(c,"__esModule",{value:!0}),e.$inject=["BF.InlineBettingConstants","BF.InlineBettingEditState","BF.InlineBettingConfirmState","BF.InlineBettingReceiptState"],c["default"]=e},{}],13:[function(a,b,c){"use strict";b.exports=angular.module("bfInlineBettingTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-inline-betting.html",'<!--\nWe are using tabindex="-1" because we can then focus the user attention, programmatically\nand it isn\'t included in the tab order.\nIn other words, it cant be reached by someone using the tab key to navigate through content,\nbut it can be focused on with scripting.\n--><section class="mod-inline-betting" tabindex="-1" data-ng-class="{\'narrow\': vm.data.isNarrowEnabled}" data-bf-below-width="vm.data.breakPointRules"><div class="loading-panel-animate" src="\'/views/partials/loading-panel-template.html\'" data-ng-if="vm.data.loadingPanel.visible" data-ng-include=""></div><div class="notification-panel-animate" src="\'/views/partials/notification-panel-template.html\'" data-ng-if="vm.data.notificationPanel.visible" data-ng-include=""></div><div class="place-bet-panel-animate" src="\'/views/partials/place-bet-panel-template.html\'" data-ng-if="vm.data.placeBetPanel.visible" data-ng-include=""></div></section>'),a.put("/views/partials/loading-panel-template.html",'<div class="loading-panel"><div class="message-container"><div class="title" data-ng-bind="\'I18N.INLINE_BETTING.PLEASE_WAIT_WHILE_PLACING_BETS\' | translate"></div><div class="message" data-ng-bind="\'I18N.INLINE_BETTING.N_SECONDS_REMAINING\' | translate:vm.data.loadingPanel"></div><data-bf-progress-bar class="progress-bar-container" value="vm.data.loadingPanel.currentPercentage" max="vm.data.loadingPanel.maxPercentage"></data-bf-progress-bar></div></div>'),a.put("/views/partials/notification-panel-template.html",'<div class="notification-panel" data-ng-class="vm.data.notificationPanel.type"><div class="message-container"><div class="text-container"><div class="title" data-ng-if="vm.data.notificationPanel.content.title" data-ng-bind="vm.data.notificationPanel.content.title | translate:vm.data.notificationPanel.content"></div><div class="message" data-ng-if="vm.data.notificationPanel.content.message" data-ng-bind="vm.data.notificationPanel.content.message | translate:vm.data.notificationPanel.content"></div></div><div class="close-container"><div class="close-notification" data-ng-if="vm.data.notificationPanel.closeButton.visible" data-ng-click="vm.onDismissMessage({state: vm.data})"><svg class="close-icon sprite-bf-inline-betting-close-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-inline-betting_3641_.svg#close-icon"/></svg></div></div></div><div class="button-container"><button translate="{{::\'I18N.INLINE_BETTING.CANCEL_BET\'}}" class="cancel-notification" data-ng-if="vm.data.notificationPanel.cancelButton.visible" data-ng-disabled="!vm.data.notificationPanel.cancelButton.enabled" data-ng-click="vm.onCancel({state: vm.data})"></button> <button translate="{{::\'I18N.INLINE_BETTING.EDIT_BET\'}}" class="edit-notification" data-ng-if="vm.data.notificationPanel.editButton.visible" data-ng-disabled="!vm.data.notificationPanel.editButton.enabled" data-ng-click="vm.onEdit({state: vm.data})"></button></div></div>'),a.put("/views/partials/place-bet-panel-template.html",'<div class="place-bet-panel" data-ng-class="vm.betTypeStyleClass" data-bf-below-width="{\'extra-small\': 540, \'small\': 600, \'medium\': 660, \'large\': 720, \'extra-large\': 800}"><div class="liability-view-options-container" data-ng-if="vm.data.placeBetPanel.liabilityView.visible"><form><label><input type="radio" name="bet-options-payout-liability-group" tabindex="0" data-ng-model="vm.liabilityView" data-ng-change="vm.onToggleLiabilityView({state: vm.data, liabilityView: vm.liabilityView})" data-ng-value="vm.CONSTANTS.LIABILITY_VIEW.PAYOUT"> {{::\'I18N.INLINE_BETTING.PAYOUT\' | translate}}</label><label><input type="radio" name="bet-options-payout-liability-group" tabindex="0" data-ng-model="vm.liabilityView" data-ng-change="vm.onToggleLiabilityView({state: vm.data, liabilityView: vm.liabilityView})" data-ng-value="vm.CONSTANTS.LIABILITY_VIEW.LIABILITY"> {{::\'I18N.INLINE_BETTING.LIABILITY\' | translate}}</label></form></div><div class="place-bet-container"><div class="bet-info" data-ng-if="vm.data.placeBetPanel.betInfo.visible"><div class="bet-info-back" translate="{{::\'I18N.INLINE_BETTING.BET_FOR_BACK\'}}"></div><div class="bet-info-lay" translate="{{::\'I18N.INLINE_BETTING.BET_FOR_LAY\'}}"></div><div class="bet-info-description" title="{{vm.data.placeBetPanel.runnerName}} - {{vm.data.placeBetPanel.marketName}}"><span>{{vm.data.placeBetPanel.runnerName}}</span> <span data-ng-if="vm.data.placeBetPanel.marketName.length > 0 && vm.data.placeBetPanel.runnerName.length > 0">-</span> <span>{{vm.data.placeBetPanel.marketName}}</span></div></div><div class="inplay-bet-options-container" data-ng-if="vm.data.placeBetPanel.inplayBetOptions.cancel.visible\n                    || vm.data.placeBetPanel.inplayBetOptions.keep.visible\n                    || vm.data.placeBetPanel.inplayBetOptions.takeSp.visible"><span class="at-inplay-label" data-ng-bind="vm.data.placeBetPanel.inplayBetOptions.label ||\n                          (\'I18N.INLINE_BETTING.AT_IN_PLAY\' | translate)"></span><form><label data-ng-if="vm.data.placeBetPanel.inplayBetOptions.cancel.visible"><input type="radio" name="bet-cancel-option" tabindex="0" data-ng-disabled="!vm.data.placeBetPanel.inplayBetOptions.enabled" data-ng-model="vm.inplayBetOption" data-ng-change="vm.onToggleInplayBetOption({state: vm.data, inplayBetOption: vm.inplayBetOption})" data-ng-value="vm.CONSTANTS.INPLAY_BET_OPTIONS.CANCEL"> {{::\'I18N.INLINE_BETTING.CANCEL\' | translate}}</label><label data-ng-if="vm.data.placeBetPanel.inplayBetOptions.keep.visible"><input type="radio" name="bet-keep-option" tabindex="0" data-ng-disabled="!vm.data.placeBetPanel.inplayBetOptions.enabled" data-ng-model="vm.inplayBetOption" data-ng-change="vm.onToggleInplayBetOption({state: vm.data, inplayBetOption: vm.inplayBetOption})" data-ng-value="vm.CONSTANTS.INPLAY_BET_OPTIONS.KEEP"> {{::\'I18N.INLINE_BETTING.KEEP\' | translate}}</label><label data-ng-if="vm.data.placeBetPanel.inplayBetOptions.takeSp.visible"><input type="radio" name="bet-take-sp-option" tabindex="0" data-ng-disabled="!vm.data.placeBetPanel.inplayBetOptions.enabled" data-ng-model="vm.inplayBetOption" data-ng-change="vm.onToggleInplayBetOption({state: vm.data, inplayBetOption: vm.inplayBetOption})" data-ng-value="vm.CONSTANTS.INPLAY_BET_OPTIONS.TAKE_SP"> {{::\'I18N.INLINE_BETTING.TAKE_SP\' | translate}}</label></form></div><div class="bet-actions-container" data-ng-class="{\'nudges-visible\': vm.data.placeBetPanel.nudgeButtons.visible}"><button class="reset-bet not-visible-when-narrow" tabindex="0" data-ng-if="vm.data.placeBetPanel.cancelButton.visible" data-ng-click="vm.onCancel({state: vm.data})" data-ng-bind="vm.data.isPotential ?\n                           \'I18N.INLINE_BETTING.CANCEL\' :\n                           \'I18N.INLINE_BETTING.CANCEL_BET\' | translate"></button> <button translate="{{::\'I18N.INLINE_BETTING.EDIT_BET\'}}" class="edit-bet not-visible-when-narrow" type="button" tabindex="0" data-ng-if="vm.data.placeBetPanel.editButton.visible" data-ng-click="vm.onEdit({state: vm.data})"></button><div class="price-container"><div class="price-to-confirm" data-ng-if="vm.data.placeBetPanel.priceInput.isLocked"><span class="price-label" data-ng-bind="::(\'I18N.INLINE_BETTING.ODDS\' | translate)"></span> <span class="price-value" data-ng-bind="::vm.price"></span></div><div class="input" data-ng-if="!vm.data.placeBetPanel.priceInput.isLocked"><button class="negative-nudge" data-ng-if="vm.data.placeBetPanel.nudgeButtons.visible" data-ng-click="vm.onNudgeDownPrice({state: vm.data, price: vm.price})" data-ng-disabled="!vm.data.placeBetPanel.priceInput.enabled"><svg class="nudge-icon sprite-bf-inline-betting-minus-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-inline-betting_3641_.svg#minus-icon"/></svg></button> <input class="price-input" maxlength="{{::vm.data.placeBetPanel.priceInput.maxLength}}" tabindex="0" data-ng-attr-placeholder="{{ vm.data.placeBetPanel.priceInput.placeholder | translate }}" data-ng-class="{\'price-error\': vm.data.placeBetPanel.priceInput.hasError}" data-ng-disabled="!vm.data.placeBetPanel.priceInput.enabled" data-bf-trigger-focus="vm.data.placeBetPanel.priceInput.focus" data-bf-restrict-number="" data-ng-model="vm.price" data-ng-change="vm.onValueChange({state: vm.data, price: vm.price, size: vm.size})" data-ng-blur="vm.onBlur({state: vm.data, price: vm.price, size: vm.size})" data-ng-focus="vm.onFocusPrice({state: vm.data})" data-ng-keypress="vm.onKeypress($event, {state: vm.data, isConfirmed: false, price: vm.price, size: vm.size})" data-ng-keydown="vm.onPriceKeydown($event, {state: vm.data, price: vm.price})"> <button class="positive-nudge" data-ng-if="vm.data.placeBetPanel.nudgeButtons.visible" data-ng-click="vm.onNudgeUpPrice({state: vm.data, price: vm.price})" data-ng-disabled="!vm.data.placeBetPanel.priceInput.enabled"><svg class="nudge-icon sprite-bf-inline-betting-plus-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-inline-betting_3641_.svg#plus-icon"/></svg></button></div></div><span class="separator" data-ng-if="vm.data.placeBetPanel.priceInput.isLocked"></span><div class="size-container"><div class="size-to-confirm" data-ng-if="vm.data.placeBetPanel.sizeInput.isLocked"><span class="size-label" data-ng-bind="::(\'I18N.INLINE_BETTING.STAKE\' | translate)"></span> <span class="size-value" data-ng-bind="::vm.size | currency : vm.data.placeBetPanel.currencySymbol : vm.data.placeBetPanel.fractionSize"></span></div><div class="input" data-ng-if="!vm.data.placeBetPanel.sizeInput.isLocked"><button class="negative-nudge" data-ng-if="vm.data.placeBetPanel.nudgeButtons.visible" data-ng-click="vm.onNudgeDownSize({state: vm.data, size: vm.size})" data-ng-disabled="!vm.data.placeBetPanel.sizeInput.enabled"><svg class="nudge-icon sprite-bf-inline-betting-minus-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-inline-betting_3641_.svg#minus-icon"/></svg></button> <input class="size-input" maxlength="{{::vm.data.placeBetPanel.sizeInput.maxLength}}" tabindex="0" data-ng-attr-placeholder="{{ vm.data.placeBetPanel.sizeInput.placeholder | translate }}" data-ng-disabled="!vm.data.placeBetPanel.sizeInput.enabled" data-ng-model="vm.size" data-bf-restrict-number="" data-ng-change="vm.onValueChange({state: vm.data, price: vm.price, size: vm.size})" data-ng-blur="vm.onBlur({state: vm.data, price: vm.price, size: vm.size})" data-ng-focus="vm.onFocusSize({state: vm.data})" data-ng-keypress="vm.onKeypress($event, {state: vm.data, isConfirmed: false, price: vm.price, size: vm.size})"> <button class="positive-nudge" data-ng-if="vm.data.placeBetPanel.nudgeButtons.visible" data-ng-click="vm.onNudgeUpSize({state: vm.data, size: vm.size})" data-ng-disabled="!vm.data.placeBetPanel.sizeInput.enabled"><svg class="nudge-icon sprite-bf-inline-betting-plus-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-inline-betting_3641_.svg#plus-icon"/></svg></button></div></div><div class="pnl-info-container" data-ng-if="vm.data.placeBetPanel.pnlInfo.visible"><div class="pnl-info" data-ng-repeat="value in vm.data.placeBetPanel.pnlInfo.values track by $index"><span class="outcome-label" data-ng-bind="::value.outcome"></span> <span class="pnl-value" data-ng-class="value.pnl >= 0 ? \'positive\' : \'negative\'" data-ng-bind="::value.pnl | currency : vm.data.placeBetPanel.currencySymbol : vm.data.placeBetPanel.fractionSize"></span></div></div><button class="reset-bet visible-when-narrow" tabindex="1" data-ng-if="vm.data.placeBetPanel.cancelButton.visible" data-ng-click="vm.onCancel({state: vm.data})" data-ng-bind="vm.data.isPotential ?\n                           \'I18N.INLINE_BETTING.CANCEL\' :\n                           \'I18N.INLINE_BETTING.CANCEL_BET\' | translate"></button> <button translate="{{::\'I18N.INLINE_BETTING.EDIT_BET\'}}" class="edit-bet visible-when-narrow" type="button" tabindex="0" data-ng-if="vm.data.placeBetPanel.editButton.visible" data-ng-click="vm.onEdit({state: vm.data})"></button> <button class="place-bet" type="submit" tabindex="0" data-ng-if="vm.data.placeBetPanel.placeBetButton.visible" data-ng-disabled="!vm.data.placeBetPanel.placeBetButton.enabled" data-ng-click="vm.onSubmit({state: vm.data, isConfirmed: false, price: vm.price, size: vm.size})"><span class="place-bet-title" data-ng-bind="vm.data.isPotential ?\n                           \'I18N.INLINE_BETTING.PLACE_BET\' :\n                           \'I18N.INLINE_BETTING.UPDATE_BET\' | translate"></span> <span class="place-bet-profit" data-ng-if="vm.data.placeBetPanel.placeBetButton.message" data-ng-bind-template="{{vm.data.placeBetPanel.placeBetButton.message}}"></span></button> <button class="confirm-bet" type="submit" tabindex="0" data-ng-if="vm.data.placeBetPanel.confirmBetButton.visible" data-bf-trigger-focus="vm.data.placeBetPanel.confirmBetButton.focus" data-ng-click="vm.onSubmit({state: vm.data, isConfirmed: true, price: vm.price, size: vm.size})"><span class="confirm-bet-title" translate="{{::\'I18N.INLINE_BETTING.CONFIRM_BET\'}}"></span> <span class="confirm-bet-profit" data-ng-if="vm.data.placeBetPanel.confirmBetButton.message" data-ng-bind-template="{{vm.data.placeBetPanel.confirmBetButton.message}}"></span></button></div></div></div>')}])},{}]},{},[2]);var betEngineHelper=function(){function a(a,b){if(!a||isNaN(+b))return b;var b="-"==a.charAt(0)?-b:+b,c=0>b?b=-b:0,d=a.match(/[^\d\-\+#]/g),e=d&&d[d.length-1]||".",f=d&&d[1]&&d[0]||",",a=a.split(e);b=b.toFixed(a[1]&&a[1].length),b=+b+"";var g=a[1]&&a[1].lastIndexOf("0"),h=b.split(".");(!h[1]||h[1]&&h[1].length<=g)&&(b=(+b).toFixed(g+1));var i=a[0].split(f);a[0]=i.join("");var j=a[0]&&a[0].indexOf("0");if(j>-1)for(;h[0].length<a[0].length-j;)h[0]="0"+h[0];else 0==+h[0]&&(h[0]="");b=b.split("."),b[0]=h[0];var k=i[1]&&i[i.length-1].length;if(k){for(var l=b[0],m="",n=l.length%k,o=0,p=l.length;p>o;o++)m+=l.charAt(o),!((o-n+1)%k)&&p-k>o&&(m+=f);b[0]=m}return b[1]=a[1]&&b[1]?e+b[1]:"",(c?"-":"")+b[0]+b[1]}function b(a){return a}function c(a){return a}function d(b,c){var d=betEngineConfigurations.miscellaneous.currencyFormatCriteriaMap[b]||betEngineConfigurations.miscellaneous.currencyFormatCriteriaMap.DEFAULT;return a(d,c)}function e(a){var b,c=betEngineConfigurations.miscellaneous.currencySymbol,e=betEngineHelper.roundPnl(Math.abs(a));return"string"==typeof e&&(e=parseFloat(e.replace(/,/g,""))),b=""!==c?d(c,e):e,"kr."===c||"kr"===c||"RON"===c?(0>a?"-":"")+b+" "+c:(0>a?"-":"")+c+b}function f(a,b){var c,e=0>a?"-":"",f=betEngineHelper.roundProfit(Math.abs(a));return b="undefined"==typeof b?"":b,c=""!==b?d(b,f):f,"kr."===b||"kr"===b||"RON"===b?e+c+" "+b:e+b+c}function g(a){return a}function h(a){return a}function i(a,b){for(var c in b)if(b.hasOwnProperty(c)&&b[c]===a)return!0;return!1}function j(a){return!!a&&["COMBINED_TOTAL","ALT_TOTAL_GOALS"].indexOf(a)>-1}function k(a,b){if(isNaN(a))throw new Error("Invalid handicap number");var c=Math.abs(a%1),d=j(b)?"":0>a?"-":"+",e=Math.abs(a);if(0===a)return a.toString();if(0===c)return d+e+".0";if(.5===c)return d+e.toString();if(.75===c||.25===c)return.25===e?"0 & "+d+(e+.25).toFixed(1):d+(e-.25).toFixed(1)+" & "+d+(e+.25).toFixed(1);throw new Error("Invalid handicap format")}function l(a){return a instanceof Array}function m(a,b){var c;return betEngineConfigurations.miscellaneous.includeNetCommission&&a>0&&b&&(c=b.discountAllowed?.01*parseFloat(betEngineConfigurations.miscellaneous.discount):0,a*=1-b.marketBaseRate*(1-c)/100),a}function n(a,b){return b&&betEngineConfigurations.miscellaneous.includeSettledBets&&(a+=b.settledProfit),a}function o(a,b){return m(n(a,b),b)}function p(a,b){var c=betEngineConfigurations.bettingBehaviour.MARKET_TYPES,d=betEngineConfigurations.bettingBehaviour.BETTING_TYPES,e=betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR;return c.EACH_WAY===a?e.ODDS_EACH_WAY:d.ASIAN_HANDICAP_SINGLE_LINE===b?e.ASIAN_HANDICAP_SINGLE_LINE:d.ASIAN_HANDICAP_DOUBLE_LINE===b&&a!==c.ASIAN_HANDICAP?e.SPREADS_AND_TOTALS:d.ASIAN_HANDICAP_DOUBLE_LINE===b?e.ASIAN_HANDICAP_DOUBLE_LINE:e.ODDS_GENERIC}function q(a){return a}function r(a){return a.priceLadderDescription?a.priceLadderDescription.type:"CLASSIC"}function s(a){var b={CLASSIC:PriceLadder,FINEST:AsianHandicapPriceLadder};return b.hasOwnProperty(a)?b[a]:PriceLadder}return{roundPnl:b,formatPnl:e,roundProfit:c,formatProfit:f,roundLiability:g,applyCommission:m,applySettledProfit:n,applyCommissionAndSettledProfit:o,memoize:h,valueExists:i,asianHandicapConversion:k,isArray:l,truncateDecimals:q,getBettingBehaviour:p,getPriceLadder:s,getPriceLadderType:r,isOverAndUnder:j}}(),AHExposureCalculator=function(a){
this.market={rates:a.rates},this.worstCaseTable=[],this.pnlTable=[],this.unmatchedPnlTable=[],this.potentialBetsTable=[],this.homeRunner={id:a.homeRunner.id,name:a.homeRunner.name},this.awayRunner={id:a.awayRunner.id,name:a.awayRunner.name},this.upperLimit=a.asianHandicapUpperLimit,this.lowerLimit=a.asianHandicapLowerLimit,this.exposureArrayPositions=Math.abs(this.upperLimit)+Math.abs(this.lowerLimit)};AHExposureCalculator.prototype.calculateDesignator=function(a,b,c){var d;switch(this.getAHBetType(a)){case betEngineConfigurations.bets.asianHandicap.types.whole:d=b>c?betEngineConfigurations.bets.asianHandicap.exposureDesignator.win:b===c?betEngineConfigurations.bets.asianHandicap.exposureDesignator.stakeRefund:betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss;break;case betEngineConfigurations.bets.asianHandicap.types.half:d=b>c?betEngineConfigurations.bets.asianHandicap.exposureDesignator.win:betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss;break;case betEngineConfigurations.bets.asianHandicap.types.lowerQuarter:d=b>c?betEngineConfigurations.bets.asianHandicap.exposureDesignator.win:b===c?a.handicap<0?betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfLoss:betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfWin:betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss;break;case betEngineConfigurations.bets.asianHandicap.types.upperQuarter:d=b>c?betEngineConfigurations.bets.asianHandicap.exposureDesignator.win:b===c?a.handicap>0?betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfLoss:betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfWin:betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss}return a.selectionId===this.awayRunner.id&&b!=c&&(d===betEngineConfigurations.bets.asianHandicap.exposureDesignator.win?d=betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss:d===betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss&&(d=betEngineConfigurations.bets.asianHandicap.exposureDesignator.win)),d},AHExposureCalculator.prototype.populateExposureArray=function(a,b,c){var d,e=b-1,f=c+1;for(e;e>=0;e--)d={},d.outcome=this.convertIndexToOutcome(e),d.exposureRaw=a[e+1].exposureRaw,a[e]=d;for(f;f<=this.exposureArrayPositions;f++)d={},d.outcome=this.convertIndexToOutcome(f),d.exposureRaw=a[f-1].exposureRaw,a[f]=d;return a},AHExposureCalculator.prototype.getAHBetIdentifier=function(a){return(a.placedStatus||"P")+"_"+a.selectionId+"_"+a.handicap+"_"+a.type},AHExposureCalculator.prototype.getAHBetType=function(a){switch(Math.abs(a.handicap%1)){case 0:return betEngineConfigurations.bets.asianHandicap.types.whole;case.25:return betEngineConfigurations.bets.asianHandicap.types.lowerQuarter;case.5:return betEngineConfigurations.bets.asianHandicap.types.half;case.75:return betEngineConfigurations.bets.asianHandicap.types.upperQuarter}},AHExposureCalculator.prototype.convertOutcomeToIndex=function(a){return this.upperLimit-a},AHExposureCalculator.prototype.convertIndexToOutcome=function(a){return-a+this.upperLimit},AHExposureCalculator.prototype.getOutcomeThreshold=function(a){var b=Math.round(a.handicap);return a.selectionId===this.homeRunner.id&&0!==b?-b:b},AHExposureCalculator.prototype.calculateBetOutcomeExposure=function(a,b,c,d){var e,f,g,h={},i=this.calculateDesignator(a,b,c);if(d=d||!1,a.hasOpenUnmatchedChanges?(f=a.originalPrice,g=a.originalSize):(f=a.price,g=a.size),f&&g)switch(i){case betEngineConfigurations.bets.asianHandicap.exposureDesignator.win:e=(f-1)*g;break;case betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss:e=-g;break;case betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfWin:e=(f-1)*g/2;break;case betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfLoss:e=-g/2;break;case betEngineConfigurations.bets.asianHandicap.exposureDesignator.stakeRefund:e=0}else e=0;return e=a.type===betEngineConfigurations.bets.types.lay&&0!==e?-e:e,e=a.placedStatus===betEngineConfigurations.bets.placedStatus.unmatched&&e>0&&!d?0:e,h.outcome=b,h.exposureRaw=e,h},AHExposureCalculator.prototype.calculateTotalBetExposure=function(a,b,c,d){var e=c+1,f=c-1,g=this.convertOutcomeToIndex(e),h=this.convertOutcomeToIndex(c),i=this.convertOutcomeToIndex(f),j=this.calculateBetOutcomeExposure(b,e,c,d),k=this.calculateBetOutcomeExposure(b,c,c,d),l=this.calculateBetOutcomeExposure(b,f,c,d);return a[g]?a[g].exposureRaw=parseFloat(a[g].exposureRaw)+parseFloat(j.exposureRaw):a[g]=j,a[h]?a[h].exposureRaw=parseFloat(a[h].exposureRaw)+parseFloat(k.exposureRaw):a[h]=k,a[i]?a[i].exposureRaw=parseFloat(a[i].exposureRaw)+parseFloat(l.exposureRaw):a[i]=l,a=this.populateExposureArray(a,g,i)},AHExposureCalculator.prototype.getAHPnl=function(a){var b,c,d,e=[],f=this.getOutcomeThreshold(a),g=this.convertOutcomeToIndex(f),h=this.convertOutcomeToIndex(f+1),i=this.convertOutcomeToIndex(f-1),j=this.getAHBetIdentifier(a);for(d=a.isPotentialBet?this.potentialBetsTable[j]:a.placedStatus===betEngineConfigurations.bets.placedStatus.unmatched?this.unmatchedPnlTable[a.id]:this.worstCaseTable[j],e[0]=d[h],e[1]=this.getAHBetType(a)===betEngineConfigurations.bets.asianHandicap.types.half?void 0:d[g],e[2]=d[i],c=e.length,b=0;c>=b;b++)e[b]&&(e[b].exposure=betEngineHelper.formatPnl(e[b].exposureRaw));return e=a.selectionId===this.awayRunner.id?e.reverse():e},AHExposureCalculator.prototype.getAHPnlLabels=function(a){var b,c,d=a.handicap,e=Math.round(Math.abs(d))||2,f=[];return a.selectionId===this.homeRunner.id?(b=this.homeRunner.name,c=this.awayRunner.name):(b=this.awayRunner.name,c=this.homeRunner.name),-.5>d&&d%1!=-.5?f[0]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerWinByOrMore,param1:b,param2:e+1}:-.5>d?f[0]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerWinByOrMore,param1:b,param2:e}:d>=1.5?f[0]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerDoNotWinByOrMore,param1:c,param2:e}:d>=.5?f[0]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerDrawOrWin,param1:b}:f[0]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerWin,param1:b},-.25>d?f[1]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerWinBy,param1:b,param2:e}:.5>d?f[1]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifMatchDraw}:f[1]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerWinBy,param1:c,param2:e},-1.5>=d?f[2]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerDoNotWinByOrMore,param1:b,param2:e}:-.25>d?f[2]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerDoNotWin,param1:b}:.5>=d?f[2]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerWin,param1:c}:d%1==.5?f[2]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerWinByOrMore,param1:c,param2:e}:f[2]={type:betEngineConfigurations.bets.asianHandicap.betslipExposureLabels.ifRunnerWinByOrMore,param1:c,param2:e+1},f},AHExposureCalculator.prototype.sumTableExposure=function(a){var b,c,d,e=[];for(c=0;c<=this.exposureArrayPositions;c++)for(d in a)a.hasOwnProperty(d)&&(e[c]?e[c].exposureRaw=parseFloat(e[c].exposureRaw)+parseFloat(a[d][c].exposureRaw):(b={},b.outcome=this.convertIndexToOutcome(c),b.exposureRaw=a[d][c].exposureRaw,e[c]=b));return e},AHExposureCalculator.prototype.sumTablesExposure=function(a,b){var c,d,e=[];for(d=0;d<=this.exposureArrayPositions;d++)e[d]?e[d].exposureRaw=e[d].exposureRaw+(parseFloat(a[d].exposureRaw)+parseFloat(b[d].exposureRaw)):(c={},c.outcome=this.convertIndexToOutcome(d),c.exposureRaw=parseFloat(a[d].exposureRaw)+parseFloat(b[d].exposureRaw),e[d]=c);return e},AHExposureCalculator.prototype.applyCommissionAndSettledProfitAndFormatExposure=function(a){var b;if(a&&a.length>0)for(b=0;b<=this.exposureArrayPositions;b++)a[b].exposureRaw=betEngineHelper.applyCommissionAndSettledProfit(a[b].exposureRaw,this.market.rates),a[b].exposure=betEngineHelper.formatPnl(a[b].exposureRaw);return a},AHExposureCalculator.prototype.addOpenAHBet=function(a){var b=this.getAHBetIdentifier(a),c=this.worstCaseTable[b]||[],d=this.pnlTable[b]||[],e=this.unmatchedPnlTable[a.id]||[],f=this.getOutcomeThreshold(a);this.worstCaseTable[b]=this.calculateTotalBetExposure(c,a,f),a.placedStatus===betEngineConfigurations.bets.placedStatus.matched?this.pnlTable[b]=this.calculateTotalBetExposure(d,a,f):a.placedStatus===betEngineConfigurations.bets.placedStatus.unmatched&&(this.unmatchedPnlTable[a.id]=this.calculateTotalBetExposure(e,a,f,!0))},AHExposureCalculator.prototype.addPotentialAHBet=function(a){var b=this.getAHBetIdentifier(a),c=this.potentialBetsTable[b]||[],d=this.getOutcomeThreshold(a);this.potentialBetsTable[b]=this.calculateTotalBetExposure(c,a,d)},AHExposureCalculator.prototype.calculateWorstCasePnLSum=function(){var a=this.sumTableExposure(this.worstCaseTable);return this.applyCommissionAndSettledProfitAndFormatExposure(a)},AHExposureCalculator.prototype.calculatePnLSum=function(){var a=this.sumTableExposure(this.pnlTable);return this.applyCommissionAndSettledProfitAndFormatExposure(a)},AHExposureCalculator.prototype.calculatePotentialPnLSum=function(){var a=this.sumTableExposure(this.potentialBetsTable);return this.applyCommissionAndSettledProfitAndFormatExposure(a)},AHExposureCalculator.prototype.calculatePnLAndPotentialPnLSum=function(){var a,b=this.sumTableExposure(this.pnlTable),c=this.sumTableExposure(this.potentialBetsTable);return a=this.sumTablesExposure(b,c),this.applyCommissionAndSettledProfitAndFormatExposure(a)},AHExposureCalculator.prototype.calculateWorstCasePnLAndPotentialPnLSum=function(){var a,b=this.sumTableExposure(this.worstCaseTable),c=this.sumTableExposure(this.potentialBetsTable);return a=this.sumTablesExposure(b,c),this.applyCommissionAndSettledProfitAndFormatExposure(a)},AHExposureCalculator.prototype.getPnlArrayAndLabels=function(a){var b,c=this.getAHPnlLabels(a),d=this.getAHPnl(a),e=d.length,f=[];for(b=0;e>=b;b++)d[b]&&f.push({label:c[b],whatif:d[b]});return f},AHExposureCalculator.prototype.getBetPnlArray=function(a){var b,c,d,e,f,g,h,i,j,k,l=[],m=[];for(a.hasOpenUnmatchedChanges=!1,b=this.getOutcomeThreshold(a),c=this.calculateTotalBetExposure([],a,b,a.placedStatus===betEngineConfigurations.bets.placedStatus.unmatched),d=this.convertOutcomeToIndex(b),e=this.convertOutcomeToIndex(b+1),f=this.convertOutcomeToIndex(b-1),g=this.getAHPnlLabels(a),l[0]=c[e],l[1]=this.getAHBetType(a)===betEngineConfigurations.bets.asianHandicap.types.half?void 0:c[d],l[2]=c[f],j=l.length,h=0;j>=h;h++)k=l[h],k&&(k.exposure=betEngineHelper.formatPnl(k.exposureRaw));for(l=a.selectionId===this.awayRunner.id?l.reverse():l,i=l.length,h=0;i>=h;h++)k=l[h],k&&m.push({label:g[h],whatif:k});return m};var AhSlCalculator=function(a){this.marketRates=a,this.pnlTable=[]};AhSlCalculator.prototype.initialisePnlTable=function(a){var b=buildHandicapArray(a);this.pnlTable=b.map(function(a){return{handicap:a,pnl:0,worstCase:0}})},AhSlCalculator.prototype.addOpenAHBet=function(a){var b,c,d,e,f=a.type,g=a.handicap,h=a.placedStatus;h===betEngineConfigurations.bets.placedStatus.unmatched&&a.hasOpenUnmatchedChanges?(b=a.originalPrice,c=a.originalSize):(b=a.price,c=a.size),e=this.pnlTable.map(function(a){return a.handicap}),d=updatePnlSum(e,g,f,b,c,h),d.forEach(function(a,b){this.pnlTable[b].worstCase+=a,h===betEngineConfigurations.bets.placedStatus.matched&&(this.pnlTable[b].pnl+=a)},this)},AhSlCalculator.prototype.getPnlTableWithCommissionAndSettledProfit=function(){return this.pnlTable.map(function(a){var b=betEngineHelper.applyCommissionAndSettledProfit(a.pnl,this.marketRates),c=betEngineHelper.applyCommissionAndSettledProfit(a.worstCase,this.marketRates);return{handicap:a.handicap,pnlRaw:b,pnl:betEngineHelper.formatPnl(b),worstCaseRaw:c,worstCase:betEngineHelper.formatPnl(c)}},this)};var AsianHandicapPriceLadder={maxPrice:1e3,minPrice:1.01,incrementStep:.01,isPrice:function(a){return!!a&&(a>=this.minPrice&&a<=this.maxPrice)},nudge:function(a,b){var c=parseFloat(a);return c===this.minPrice&&!b||c===this.maxPrice&&b?c:this.isPrice(a)?b?parseFloat((c+this.incrementStep).toFixed(2)):parseFloat((c-this.incrementStep).toFixed(2)):c?c<this.minPrice?this.minPrice:this.maxPrice:this.minPrice}},DefaultSizeLadder=function(){};DefaultSizeLadder.prototype.getMinSize=function(a,b){return a===betEngineConfigurations.bets.orderTypes.limit||b===betEngineConfigurations.bets.types.back?betEngineConfigurations.bets.sizeLimits.min:betEngineConfigurations.bets.sizeLimits.bsplaymin},DefaultSizeLadder.prototype.isSize=function(a,b,c){return"number"==typeof a&&!(a<this.getMinSize(b,c))},DefaultSizeLadder.prototype.nudge=function(a,b,c,d){var e=this.getMinSize(c,d);return this.isSize(a,c,d)?(a=Math.round(100*(a+(b?1:-1)))/100,e>a?e:a):e},DefaultSizeLadder.prototype.getLadderInfo=function(a,b,c){},DefaultSizeLadder.prototype.isSizeMultipleOfDefinedValue=function(a){return!0};var ItalySizeLadder=function(){DefaultSizeLadder.call(this)};ItalySizeLadder.prototype=Object.create(DefaultSizeLadder.prototype),ItalySizeLadder.prototype.nudge=function(a,b,c,d){var e,f,g=this.getMinSize(c,d);return this.isSize(a,c,d)?(d===betEngineConfigurations.bets.types.back?(e=Math.round(2*a)/2,f=Math.round(2*(a+(b?.5:-.5)))/2,a=b&&e>a||!b&&a>e?e:f):a=Math.round(100*(a+(b?1:-1)))/100,g>a?g:a):g},ItalySizeLadder.prototype.isSizeMultipleOfDefinedValue=function(a,b){return a%b===0};var PriceLadder=new DefaultPriceLadder,SizeLadder=new DefaultSizeLadder,STExposureCalculator=function(a){this.market={rates:a.rates},this.worstCaseTable=[],this.pnlTable=[],this.unmatchedPnlTable=[],this.potentialBetsTable=[],this.homeRunner={id:a.homeRunner.id,name:a.homeRunner.name},this.awayRunner={id:a.awayRunner.id,name:a.awayRunner.name},this.upperLimit=a.asianHandicapUpperLimit,this.lowerLimit=a.asianHandicapLowerLimit,this.exposureArrayPositions=Math.abs(this.upperLimit)+Math.abs(this.lowerLimit)};STExposureCalculator.prototype.calculateDesignator=function(a,b,c){var d;switch(this.getAHBetType(a)){case betEngineConfigurations.bets.asianHandicap.types.whole:d=b>c?betEngineConfigurations.bets.asianHandicap.exposureDesignator.win:b===c?betEngineConfigurations.bets.asianHandicap.exposureDesignator.stakeRefund:betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss;break;case betEngineConfigurations.bets.asianHandicap.types.half:d=b>c?betEngineConfigurations.bets.asianHandicap.exposureDesignator.win:betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss;break;case betEngineConfigurations.bets.asianHandicap.types.lowerQuarter:d=b>c?betEngineConfigurations.bets.asianHandicap.exposureDesignator.win:b===c?a.selectionId===this.homeRunner.id?betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfWin:betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfLoss:betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss;break;case betEngineConfigurations.bets.asianHandicap.types.upperQuarter:d=b>c?betEngineConfigurations.bets.asianHandicap.exposureDesignator.win:b===c?a.selectionId===this.homeRunner.id?betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfLoss:betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfWin:betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss}return a.selectionId===this.homeRunner.id&&b!=c&&(d===betEngineConfigurations.bets.asianHandicap.exposureDesignator.win?d=betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss:d===betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss&&(d=betEngineConfigurations.bets.asianHandicap.exposureDesignator.win)),d},STExposureCalculator.prototype.populateExposureArray=function(a,b,c){var d,e=b-1,f=c+1;for(e;e>=0;e--)d={},d.outcome=this.convertIndexToOutcome(e),d.exposureRaw=a[e+1].exposureRaw,a[e]=d;for(f;f<=this.exposureArrayPositions;f++)d={},d.outcome=this.convertIndexToOutcome(f),d.exposureRaw=a[f-1].exposureRaw,a[f]=d;return a},STExposureCalculator.prototype.getAHBetIdentifier=function(a){return(a.placedStatus||"P")+"_"+a.selectionId+"_"+a.handicap+"_"+a.type},STExposureCalculator.prototype.getAHBetType=function(a){switch(Math.abs(a.handicap%1)){case 0:return betEngineConfigurations.bets.asianHandicap.types.whole;case.25:return betEngineConfigurations.bets.asianHandicap.types.lowerQuarter;case.5:return betEngineConfigurations.bets.asianHandicap.types.half;case.75:return betEngineConfigurations.bets.asianHandicap.types.upperQuarter}},STExposureCalculator.prototype.convertOutcomeToIndex=function(a){return this.upperLimit-a},STExposureCalculator.prototype.convertIndexToOutcome=function(a){return-a+this.upperLimit},STExposureCalculator.prototype.getOutcomeThreshold=function(a){var b=Math.round(a.handicap),c=betEngineHelper.isOverAndUnder(a.marketType);return c?b:a.selectionId===this.homeRunner.id&&0!==b?-b:b},STExposureCalculator.prototype.calculateBetOutcomeExposure=function(a,b,c,d){var e,f,g,h={},i=this.calculateDesignator(a,b,c);if(d=d||!1,a.hasOpenUnmatchedChanges?(f=a.originalPrice,g=a.originalSize):(f=a.price,g=a.size),f&&g)switch(i){case betEngineConfigurations.bets.asianHandicap.exposureDesignator.win:e=(f-1)*g;break;case betEngineConfigurations.bets.asianHandicap.exposureDesignator.loss:e=-g;break;case betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfWin:e=(f-1)*g/2;break;case betEngineConfigurations.bets.asianHandicap.exposureDesignator.halfLoss:e=-g/2;break;case betEngineConfigurations.bets.asianHandicap.exposureDesignator.stakeRefund:e=0}else e=0;return e=a.type===betEngineConfigurations.bets.types.lay&&0!==e?-e:e,e=a.placedStatus===betEngineConfigurations.bets.placedStatus.unmatched&&e>0&&!d?0:e,h.outcome=b,h.exposureRaw=e,h},STExposureCalculator.prototype.calculateTotalBetExposure=function(a,b,c,d){var e=c+1,f=c-1,g=this.convertOutcomeToIndex(e),h=this.convertOutcomeToIndex(c),i=this.convertOutcomeToIndex(f),j=this.calculateBetOutcomeExposure(b,e,c,d),k=this.calculateBetOutcomeExposure(b,c,c,d),l=this.calculateBetOutcomeExposure(b,f,c,d);return a[g]?a[g].exposureRaw=parseFloat(a[g].exposureRaw)+parseFloat(j.exposureRaw):a[g]=j,a[h]?a[h].exposureRaw=parseFloat(a[h].exposureRaw)+parseFloat(k.exposureRaw):a[h]=k,a[i]?a[i].exposureRaw=parseFloat(a[i].exposureRaw)+parseFloat(l.exposureRaw):a[i]=l,a=this.populateExposureArray(a,g,i)},STExposureCalculator.prototype.getAHPnl=function(a){var b,c,d,e=[],f=this.getOutcomeThreshold(a),g=this.convertOutcomeToIndex(f),h=this.convertOutcomeToIndex(f+1),i=this.convertOutcomeToIndex(f-1),j=this.getAHBetIdentifier(a),k=a.marketType;for(d=a.isPotentialBet?this.potentialBetsTable[j]:a.placedStatus===betEngineConfigurations.bets.placedStatus.unmatched?this.unmatchedPnlTable[a.id]:this.worstCaseTable[j],a.selectionId===this.homeRunner.id||k===betEngineConfigurations.bettingBehaviour.MARKET_TYPES.HANDICAP?(e[0]=d[h],e[2]=d[i]):(e[0]=d[i],e[2]=d[h]),e[1]=this.getAHBetType(a)===betEngineConfigurations.bets.asianHandicap.types.half?void 0:d[g],c=e.length,b=0;c>=b;b++)e[b]&&(e[b].exposure=betEngineHelper.formatPnl(e[b].exposureRaw));return e=a.selectionId===this.homeRunner.id?e.reverse():e},STExposureCalculator.prototype.getAHPnlLabels=function(a){var b,c,d=a.handicap,e=Math.abs(d),f=Math.round(e),g=[],h=a.marketType,i=h===betEngineConfigurations.bettingBehaviour.MARKET_TYPES.ALT_TOTAL_GOALS?"GOAL":"POINT",j="S",k=betEngineConfigurations.bets.asianHandicap.betslipExposureLabels;return a.selectionId===this.homeRunner.id?(b=this.homeRunner.name,c=this.awayRunner.name):(b=this.awayRunner.name,c=this.homeRunner.name),h!==betEngineConfigurations.bettingBehaviour.MARKET_TYPES.HANDICAP?(.5===e?(g[0]={type:k.zero+i+j},g[1]={type:k.exactly+i},g[2]={type:k.moreThan+i}):(f-1===0?(g[0]={type:k.exactlyZero+i+j,param1:0},g[1]={type:k.exactly+i,param1:f}):(f-1===1?g[0]={type:k.lessThan+i,param1:f-1}:g[0]={type:k.lessThan+i+j,param1:f-1},g[1]={type:k.exactly+i+j,param1:f}),e%1===.5?g[2]={type:k.moreThan+i+j,param1:f}:g[2]={type:k.moreThan+i+j,param1:f+1}),g):(-.5>d&&d%1!=-.5?g[0]={type:k.ifRunnerWinByOrMore,param1:b,param2:f+1}:-.5>d?g[0]={type:k.ifRunnerWinByOrMore,param1:b,param2:f}:d>=1.5?g[0]={type:k.ifRunnerDoNotWinByOrMore,param1:c,param2:f}:d>=.5?g[0]={type:k.ifRunnerDrawOrWin,param1:b}:g[0]={type:k.ifRunnerWin,param1:b},-.25>d?g[1]={type:k.ifRunnerWinBy,param1:b,param2:f}:.5>d?g[1]={type:k.ifMatchDraw}:g[1]={type:k.ifRunnerWinBy,param1:c,param2:f},-1.5>=d?g[2]={type:k.ifRunnerDoNotWinByOrMore,param1:b,param2:f}:-.25>d?g[2]={type:k.ifRunnerDoNotWin,param1:b}:.5>=d?g[2]={type:k.ifRunnerWin,param1:c}:d%1==.5?g[2]={type:k.ifRunnerWinByOrMore,param1:c,param2:f}:g[2]={type:k.ifRunnerWinByOrMore,param1:c,param2:f+1},g)},STExposureCalculator.prototype.sumTableExposure=function(a){var b,c,d,e=[];for(c=0;c<=this.exposureArrayPositions;c++)for(d in a)a.hasOwnProperty(d)&&(e[c]?e[c].exposureRaw=parseFloat(e[c].exposureRaw)+parseFloat(a[d][c].exposureRaw):(b={},b.outcome=this.convertIndexToOutcome(c),b.exposureRaw=a[d][c].exposureRaw,e[c]=b));return e},STExposureCalculator.prototype.sumTablesExposure=function(a,b){var c,d,e=[];for(d=0;d<=this.exposureArrayPositions;d++)e[d]?e[d].exposureRaw=e[d].exposureRaw+(parseFloat(a[d].exposureRaw)+parseFloat(b[d].exposureRaw)):(c={},c.outcome=this.convertIndexToOutcome(d),c.exposureRaw=parseFloat(a[d].exposureRaw)+parseFloat(b[d].exposureRaw),e[d]=c);return e},STExposureCalculator.prototype.applyCommissionAndSettledProfitAndFormatExposure=function(a){var b;if(a&&a.length>0)for(b=0;b<=this.exposureArrayPositions;b++)a[b].exposureRaw=betEngineHelper.applyCommissionAndSettledProfit(a[b].exposureRaw,this.market.rates),a[b].exposure=betEngineHelper.formatPnl(a[b].exposureRaw);return a},STExposureCalculator.prototype.addOpenAHBet=function(a){var b=this.getAHBetIdentifier(a),c=this.worstCaseTable[b]||[],d=this.pnlTable[b]||[],e=this.unmatchedPnlTable[a.id]||[],f=this.getOutcomeThreshold(a);this.worstCaseTable[b]=this.calculateTotalBetExposure(c,a,f),a.placedStatus===betEngineConfigurations.bets.placedStatus.matched?this.pnlTable[b]=this.calculateTotalBetExposure(d,a,f):a.placedStatus===betEngineConfigurations.bets.placedStatus.unmatched&&(this.unmatchedPnlTable[a.id]=this.calculateTotalBetExposure(e,a,f,!0))},STExposureCalculator.prototype.addPotentialAHBet=function(a){var b=this.getAHBetIdentifier(a),c=this.potentialBetsTable[b]||[],d=this.getOutcomeThreshold(a);this.potentialBetsTable[b]=this.calculateTotalBetExposure(c,a,d)},STExposureCalculator.prototype.calculateWorstCasePnLSum=function(){var a=this.sumTableExposure(this.worstCaseTable);return this.applyCommissionAndSettledProfitAndFormatExposure(a)},STExposureCalculator.prototype.calculatePnLSum=function(){var a=this.sumTableExposure(this.pnlTable);return this.applyCommissionAndSettledProfitAndFormatExposure(a)},STExposureCalculator.prototype.calculatePotentialPnLSum=function(){var a=this.sumTableExposure(this.potentialBetsTable);return this.applyCommissionAndSettledProfitAndFormatExposure(a)},STExposureCalculator.prototype.calculatePnLAndPotentialPnLSum=function(){var a,b=this.sumTableExposure(this.pnlTable),c=this.sumTableExposure(this.potentialBetsTable);return a=this.sumTablesExposure(b,c),this.applyCommissionAndSettledProfitAndFormatExposure(a)},STExposureCalculator.prototype.calculateWorstCasePnLAndPotentialPnLSum=function(){var a,b=this.sumTableExposure(this.worstCaseTable),c=this.sumTableExposure(this.potentialBetsTable);return a=this.sumTablesExposure(b,c),this.applyCommissionAndSettledProfitAndFormatExposure(a)},STExposureCalculator.prototype.getPnlArrayAndLabels=function(a){var b,c=this.getAHPnlLabels(a),d=this.getAHPnl(a),e=d.length,f=[];for(b=0;e>=b;b++)d[b]&&f.push({label:c[b],whatif:d[b]});return f},STExposureCalculator.prototype.getBetPnlArray=function(a){var b,c,d,e,f,g,h,i,j,k,l=[],m=[];for(a.hasOpenUnmatchedChanges=!1,b=this.getOutcomeThreshold(a),c=this.calculateTotalBetExposure([],a,b,a.placedStatus===betEngineConfigurations.bets.placedStatus.unmatched),d=this.convertOutcomeToIndex(b),e=this.convertOutcomeToIndex(b+1),f=this.convertOutcomeToIndex(b-1),g=this.getAHPnlLabels(a),l[0]=c[e],l[1]=this.getAHBetType(a)===betEngineConfigurations.bets.asianHandicap.types.half?void 0:c[d],l[2]=c[f],j=l.length,h=0;j>=h;h++)k=l[h],k&&(k.exposure=betEngineHelper.formatPnl(k.exposureRaw));for(i=l.length,h=0;i>=h;h++)k=l[h],k&&m.push({label:g[h],whatif:k});return m},STExposureCalculator.prototype.getRunnerOfTheSameLine=function(a,b){var c,d,e=null,f=a.runners,g=f.length;for(c=0;g>c;c++)if(d=f[c],d.selectionId!==b.selectionId)if(a.description.marketType!==betEngineConfigurations.bettingBehaviour.MARKET_TYPES.HANDICAP){if(b.handicap===d.handicap){e=d;break}}else if(b.handicap===-d.handicap){e=d;break}return e},STExposureCalculator.prototype.getLineIdentifier=function(a,b,c,d){return a+"_"+b+":"+c+"_"+d},STExposureCalculator.prototype.buildLineKey=function(a,b){return a&&b?this.getLineIdentifier(a.selectionId,a.handicap,b.selectionId,b.handicap):void 0},STExposureCalculator.prototype.findLineKey=function(a,b){if(a&&b){var c=a.handicap,d=b.handicap;return b.selectionId===this.homeRunner.id&&(c=b.handicap,d=a.handicap),this.getLineIdentifier(this.homeRunner.id,c,this.awayRunner.id,d)}},STExposureCalculator.prototype.buildRunnerLines=function(a){var b,c,d,e=a.length,f={};for(b=0;e>b;b+=2)c=a[b],d=a[b+1],void 0!==d&&(f[this.buildLineKey(c,d)]={potentialLoss:0,actualLoss:0});return f};var betEngineConfigurations={miscellaneous:{currencySymbol:"",currencyFormatCriteriaMap:{"kr.":"#.##0,00",kr:"#.##0,00",RON:"#.##0,00",DEFAULT:"#,###,##0.00"},minimumStake:"",discount:"",rollupLimit:"",displayMarketDepth:"",showFractionalOdds:"",displayProfitAndLoss:"",displayFutureProfitAndLoss:"",includeNetCommission:"",includeSettledBets:"",labelBetween:"between",labelEvens:"evens"},cashout:{unavailable:"UNAVAILABLE"},profitsAndLoses:{visible:!0,displayWhatIf:!0,includeNetOfCommission:!0,includeSettledBets:!0,applyCustomLayout:!0,symbols:{separator:",",whatIfPrefix:"",cashoutWhatIfPrefix:">"}},market:{marketDepthSize:3,eventTypes:{football:"1",horseRacing:"7",greyhoundRacing:"4339"},marketTypes:{win:"WIN",place:"PLACE",asianHandicap:"ASIAN_HANDICAP",eachWay:"EACH_WAY"},bettingTypes:{odds:"ODDS",singleAsian:"ASIAN_HANDICAP_SINGLE_LINE",doubleAsian:"ASIAN_HANDICAP_DOUBLE_LINE"},marketStatus:{open:"OPEN",suspended:"SUSPENDED",closed:"CLOSED"},runnerStatus:{active:"ACTIVE",hidden:"HIDDEN",winner:"WINNER",removed:"REMOVED",removedVacant:"REMOVED_VACANT",loser:"LOSER"},horseRacing:{silkColoursUrl:"",unitConversions:{poundToStone:.071428575,stoneToPound:14}},runners:{fractionalOddsStrings:{between:"between"}},origin:{potentialBets:"potentialBets",openBets:"openBets"},eachWayDivisorToCharCodeMapper:{2:189,3:8531,4:188,5:8533,6:8537,7:8528,8:8539,9:8529,10:8530}},bets:{types:{back:"back",lay:"lay",sp:"sp"},asianHandicap:{side:{home:"Home",away:"Away"},types:{whole:"Whole",lowerQuarter:"LowerQuarter",half:"Half",upperQuarter:"UpperQuarter"},exposureDesignator:{win:"W",loss:"L",halfWin:"HW",halfLoss:"HL",stakeRefund:"SR"},betslipExposureLabels:{ifRunnerWinByOrMore:"IF_RUNNER_WIN_BY_OR_MORE",ifRunnerDoNotWinByOrMore:"IF_RUNNER_DO_NOT_WIN_BY_OR_MORE",ifRunnerDrawOrWin:"IF_RUNNER_DRAW_OR_WIN",ifRunnerWin:"IF_RUNNER_WIN",ifRunnerDoNotWin:"IF_RUNNER_DO_NOT_WIN",ifRunnerWinBy:"IF_RUNNER_WIN_BY",ifMatchDraw:"IF_MATCH_DRAW",lessThan:"SPREADS_AND_TOTALS_LESS_THAN_",exactly:"SPREADS_AND_TOTALS_EXACTLY_",moreThan:"SPREADS_AND_TOTALS_MORE_THAN_",zero:"SPREADS_AND_TOTALS_ZERO_",exactlyZero:"SPREADS_AND_TOTALS_EXACTLY_ZERO_"}},placeAction:{none:"NONE",placePotential:"PLACE_POTENTIAL_BETS",placeOpen:"PLACE_OPEN_BETS"},orderTypes:{limit:"LIMIT",limitOnClose:"LIMIT_ON_CLOSE",marketOnClose:"MARKET_ON_CLOSE"},persistenceTypes:{lapse:"LAPSE",keep:"PERSIST",takeSP:"MARKET_ON_CLOSE"},placedStatus:{matched:"M",unmatched:"U",sp:"SP"},categoryTypes:{exchange:"E",multiples:"M",bsp:"SP"},priceLimits:{min:1.01,max:1e3},sizeLimits:{min:2,bsplaymin:10,max:1e4},useSizeLadder:!1,validationPolicy:{payoutLimit:null,minimumUpdate:null,backMultiple:null,layMultiple:null},validationErrorCodes:{minStakeBSPLay:"ERR_MIN_MAX_STAKE_BSP_LAY",minMaxOdds:"ERR_MIN_MAX_ODDS",minOdds:"ERR_MIN_ODDS",maxOdds:"ERR_MAX_ODDS",minMaxStake:"ERR_MIN_MAX_STAKE",minStake:"ERR_MIN_STAKE",minUpdate:"ERR_MIN_UPDATE",minBSPLayLiability:"ERR_MIN_BSP_LAY_LIABILITY",payoutLimit:"ERR_PAYOUT_LIMIT",pricesCrossed:"ERR_PRICES_CROSSED",spOddsTooLow:"STARTING_PRICE_ODDS_TOO_LOW",spOddsTooHigh:"STARTING_PRICE_ODDS_TOO_HIGH",stakeBelowMin:"ERR_STAKE_BELOW_MIN",stakeHasToBeMultiple:"ERR_STAKE_MULTIPLE"},oddsConversions:{lookupTable:[[1.01,1,100],[1.02,1,50],[1.03,1,33],[1.04,1,25],[1.05,1,20],[1.06,1,18],[1.07,1,14],[1.08,1,12],[1.09,1,11],[1.1,1,10],[1.11,1,9],[1.12,1,8],[1.13,2,15],[1.14,1,7],[1.15,2,13],[1.16,2,13],[1.17,1,6],[1.18,2,11],[1.19,2,11],[1.2,1,5],[1.21,1,5],[1.22,2,9],[1.23,2,9],[1.24,1,4],[1.25,1,4],[1.26,1,4],[1.27,1,4],[1.28,2,7],[1.29,2,7],[1.3,30,100],[1.31,30,100],[1.32,1,3],[1.33,1,3],[1.34,1,3],[1.35,1,3],[1.36,4,11],[1.37,4,11],[1.38,4,11],[1.39,2,5],[1.4,2,5],[1.41,2,5],[1.42,2,5],[1.43,4,9],[1.44,4,9],[1.45,4,9],[1.46,40,85],[1.47,40,85],[1.48,40,85],[1.49,1,2],[1.5,1,2],[1.51,1,2],[1.52,8,15],[1.53,8,15],[1.54,8,15],[1.55,8,15],[1.56,4,7],[1.57,4,7],[1.58,4,7],[1.59,4,7],[1.6,8,13],[1.61,8,13],[1.62,5,8],[1.63,5,8],[1.64,5,8],[1.65,4,6],[1.66,4,6],[1.67,4,6],[1.68,4,6],[1.69,5,7],[1.7,5,7],[1.71,5,7],[1.72,8,11],[1.73,8,11],[1.74,8,11],[1.75,8,11],[1.76,8,11],[1.77,4,5],[1.78,4,5],[1.79,4,5],[1.8,4,5],[1.81,4,5],[1.82,4,5],[1.83,4,5],[1.84,5,6],[1.85,5,6],[1.86,5,6],[1.87,5,6],[1.88,10,11],[1.89,10,11],[1.9,10,11],[1.91,10,11],[1.92,10,11],[1.93,10,11],[1.94,20,21],[1.95,20,21],[1.96,20,21],[1.97,20,21],[1.98,1,1],[1.99,1,1],[2,1,1],[2.02,1,1],[2.04,21,20],[2.06,21,20],[2.08,11,10],[2.1,11,10],[2.12,11,10],[2.14,11,10],[2.16,6,5],[2.18,6,5],[2.2,6,5],[2.22,6,5],[2.24,5,4],[2.26,5,4],[2.28,5,4],[2.3,5,4],[2.32,11,8],[2.34,11,8],[2.36,11,8],[2.38,11,8],[2.4,7,5],[2.42,7,5],[2.44,7,5],[2.46,6,4],[2.48,6,4],[2.5,6,4],[2.52,6,4],[2.54,6,4],[2.56,8,5],[2.58,8,5],[2.6,8,5],[2.62,13,8],[2.64,13,8],[2.66,13,8],[2.68,13,8],[2.7,7,4],[2.72,7,4],[2.74,7,4],[2.76,7,4],[2.78,9,5],[2.8,9,5],[2.82,9,5],[2.84,15,8],[2.86,15,8],[2.88,15,8],[2.9,15,8],[2.92,15,8],[2.94,2,1],[2.96,2,1],[2.98,2,1],[3,2,1],[3.05,2,1],[3.1,85,40],[3.15,11,5],[3.2,11,5],[3.25,9,4],[3.3,9,4],[3.35,12,5],[3.4,12,5],[3.5,5,2],[3.6,13,5],[3.7,11,4],[3.75,11,4],[3.8,14,5],[3.85,14,5],[3.95,3,1],[4,3,1],[4.2,16,5],[4.3,100,30],[4.4,7,2],[4.5,7,2],[4.6,7,2],[4.7,7,2],[4.8,4,1],[4.9,4,1],[5,4,1],[5.1,4,1],[5.2,4,1],[5.3,9,2],[5.4,9,2],[5.5,9,2],[5.6,9,2],[5.7,9,2],[5.8,5,1],[5.9,5,1],[6,5,1],[6.2,5,1],[6.4,11,2],[6.6,11,2],[6.8,6,1],[7,6,1],[7.2,6,1],[7.4,13,2],[7.6,13,2],[7.8,7,1],[8,7,1],[8.2,7,1],[8.4,15,2],[8.6,15,2],[8.8,8,1],[9,8,1],[9.2,8,1],[9.4,17,2],[9.6,17,2],[9.8,9,1],[10,9,1],[11,10,1],[12,11,1],[13,12,1],[14,13,1],[15,14,1],[16,15,1],[17,16,1],[18,17,1],[19,18,1],[20,19,1],[21,20,1],[22,21,1],[23,22,1],[24,23,1],[25,24,1],[26,25,1],[27,26,1],[28,27,1],[29,28,1],[30,29,1],[32,31,1],[34,33,1],[36,35,1],[38,37,1],[40,39,1],[42,41,1],[44,43,1],[46,45,1],[48,47,1],[50,49,1],[55,54,1],[60,59,1],[65,64,1],[70,69,1],[75,74,1],[80,79,1],[85,84,1],[90,89,1],[95,94,1],[100,99,1],[110,109,1],[120,119,1],[130,129,1],[140,139,1],[150,149,1],[160,159,1],[170,169,1],[180,179,1],[190,189,1],[200,199,1],[210,209,1],[220,219,1],[230,229,1],[240,239,1],[250,249,1],[260,259,1],[270,269,1],[280,279,1],[290,289,1],[300,299,1],[310,309,1],[320,319,1],[330,329,1],[340,339,1],[350,349,1],[360,359,1],[370,369,1],[380,379,1],[390,389,1],[400,399,1],[410,409,1],[420,419,1],[430,429,1],[440,439,1],[450,449,1],[460,459,1],[470,469,1],[480,479,1],[490,489,1],[500,499,1],[510,509,1],[520,519,1],[530,529,1],[540,539,1],[550,549,1],[560,559,1],[570,569,1],[580,579,1],[590,589,1],[600,599,1],[610,609,1],[620,619,1],[630,629,1],[640,639,1],[650,649,1],[660,659,1],[670,669,1],[680,679,1],[690,689,1],[700,699,1],[710,709,1],[720,719,1],[730,729,1],[740,739,1],[750,749,1],[760,759,1],[770,769,1],[780,779,1],[790,789,1],[800,799,1],[810,809,1],[820,819,1],[830,829,1],[840,839,1],[850,849,1],[860,859,1],[870,869,1],[880,879,1],[890,889,1],[900,899,1],[910,909,1],[920,919,1],[930,929,1],[940,939,1],[950,949,1],[960,959,1],[970,969,1],[980,979,1],[990,989,1],[1e3,999,1]]
}},bettingBehaviour:{MARKET_TYPES:{ASIAN_HANDICAP:"ASIAN_HANDICAP",EACH_WAY:"EACH_WAY",HANDICAP:"HANDICAP",COMBINED_TOTAL:"COMBINED_TOTAL",ALT_TOTAL_GOALS:"ALT_TOTAL_GOALS"},BETTING_TYPES:{ODDS:"ODDS",ASIAN_HANDICAP_SINGLE_LINE:"ASIAN_HANDICAP_SINGLE_LINE",ASIAN_HANDICAP_DOUBLE_LINE:"ASIAN_HANDICAP_DOUBLE_LINE"},BETTING_BEHAVIOUR:{ODDS_GENERIC:"ODDS_GENERIC",ODDS_EACH_WAY:"ODDS_EACH_WAY",ASIAN_HANDICAP_SINGLE_LINE:"ASIAN_HANDICAP_SINGLE_LINE",ASIAN_HANDICAP_DOUBLE_LINE:"ASIAN_HANDICAP_DOUBLE_LINE",SPREADS_AND_TOTALS:"SPREADS_AND_TOTALS"}}},MarketPosition=function(a){this.market=a,this.market.marketPosition={},this.validationErrors=[],this.validationErrorsForUnMatchedBets=[],this.marketPotentialErrors=[],this.dutchingErrors=[],this.marketOpenErrors=[],this.cashout={},this.resetMarketPosition()};MarketPosition.prototype.resetMarketPosition=function(){if(this.exposure=0,this.backBook=0,this.layBook=0,this.hasPotentialBackBets=!1,this.hasPotentialLayBets=!1,this.hasPotentialSPBackBets=!1,this.hasPotentialSPLayBets=!1,this.hasValidPotentialBackBets=!1,this.hasValidPotentialLayBets=!1,this.hasValidPotentialBets=!1,this.hasValidPotentialSPBackBets=!1,this.hasValidPotentialSPLayBets=!1,this.totalPotentialBets=0,this.totalPotentialBackBets=0,this.totalPotentialLayBets=0,this.totalPotentialSPBets=0,this.totalPotentialSPBackBets=0,this.totalPotentialSPLayBets=0,this.validationErrors.length=0,this.validationErrorsForUnMatchedBets.length=0,this.errorsTypes={},this.hasErrorsThatInvalidatePlacement=0,this.isPlaceable=!1,this.filledBets=0,this.hasOpenBets=!1,this.hasMatchedPosition=!1,this.hasMatchedLays=!1,this.hasMatchedBacks=!1,this.hasMatchedSPBacks=!1,this.hasMatchedSPLays=!1,this.hasUnMatchedBets=!1,this.hasUnMatchedBacks=!1,this.hasUnMatchedLays=!1,this.hasSPBacks=!1,this.hasSPLays=!1,this.hasSPBets=!1,this.hasPotentialSPOddsLimit=!1,this.hasSPOddsLimit=!1,this.hasMatchedSPBacks=!1,this.hasMatchedSPLays=!1,this.unMatcheBetsPlaceable=!1,this.isAsianHandicapBettingType=!1,this.isEWMarket=!1,this.runnerLines=null,this.market.description)switch(this.market.bettingType){case betEngineConfigurations.market.bettingTypes.singleAsian:this.isAsianHandicapBettingType=!0,this.asianHandicap={exposureCalculator:new AhSlCalculator(this.market.rates),pnlTable:[]};break;case betEngineConfigurations.market.bettingTypes.doubleAsian:this.isAsianHandicapBettingType=!0,shouldCalculateAHDLPnlTable(this.market)&&(this.market.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE?this.asianHandicap={exposureCalculator:new AHExposureCalculator(this.market),pnlSum:[],potentialPnlSum:[],worstCaseSum:[]}:this.market.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS&&(this.asianHandicap={exposureCalculator:new STExposureCalculator(this.market),pnlSum:[],potentialPnlSum:[],worstCaseSum:[]}));break;default:this.market.description.marketType===betEngineConfigurations.market.marketTypes.eachWay&&(this.isEWMarket=!0,this.eachWayDivisor=this.market.description.eachWayDivisor)}},MarketPosition.prototype.recalculateMarketPosition=function(a){var b,c,d,e,f,g,h,i,j=[],k=this.market.runners.length,l=0,m=0,n=this.market.priceLadder;for(this.resetMarketPosition(),this.market.bettingType===betEngineConfigurations.market.bettingTypes.singleAsian&&this.asianHandicap.exposureCalculator.initialisePnlTable(this.market.runners),b=0;k>b;b++)if(c=this.market.runners[b],d=c.runnerPosition,c.state.status===betEngineConfigurations.market.runnerStatus.active||c.state.status===betEngineConfigurations.market.runnerStatus.hidden){if(d.recalculateRunnerPosition(this.validationErrors),a===betEngineConfigurations.bets.placeAction.placePotential&&d.potentialBackBet&&(d.potentialBackBet.isPlaceable=d.potentialBackBet.isValid(a),d.potentialBackBet.filledBet()&&!d.potentialBackBet.isPlaceable))return this.isPlaceable=!1,this.validationErrors=d.potentialBackBet.hasBetValidationErrors(this.validationErrors),this.isPlaceable;if(d.potentialBackBet&&d.potentialBackBet.isVisible&&(this.hasPotentialBackBets=!0,this.totalPotentialBets++,this.totalPotentialBackBets++,!d.potentialBackBet.hasStakeError&&!d.potentialBackBet.hasCrossedPriceError&&d.potentialBackBet.size&&d.potentialBackBet.price&&d.potentialBackBet.isPlaceable&&(this.isPlaceable=!0,this.hasValidPotentialBets=!0,this.hasValidPotentialBackBets=!0),(d.potentialBackBet.hasStakeError||d.potentialBackBet.hasCrossedPriceError)&&(this.hasErrorsThatInvalidatePlacement+=1),this.filledBets+=d.potentialBackBet.filledBet(),d.potentialBackBet&&d.potentialBackBet.betValidationErrors.length>0&&(this.validationErrors=d.potentialBackBet.hasBetValidationErrors(this.validationErrors))),a===betEngineConfigurations.bets.placeAction.placePotential&&d.potentialLayBet&&(d.potentialLayBet.isPlaceable=d.potentialLayBet.isValid(a),d.potentialLayBet.filledBet()&&!d.potentialLayBet.isPlaceable))return this.isPlaceable=!1,this.validationErrors=d.potentialLayBet.hasBetValidationErrors(this.validationErrors),this.isPlaceable;if(d.potentialLayBet&&d.potentialLayBet.isVisible&&(this.hasPotentialLayBets=!0,this.totalPotentialBets++,this.totalPotentialLayBets++,!d.potentialLayBet.hasStakeError&&!d.potentialLayBet.hasCrossedPriceError&&d.potentialLayBet.size&&d.potentialLayBet.price&&d.potentialLayBet.isPlaceable&&(this.isPlaceable=!0,this.hasValidPotentialBets=!0,this.hasValidPotentialLayBets=!0),(d.potentialLayBet.hasStakeError||d.potentialLayBet.hasCrossedPriceError)&&(this.hasErrorsThatInvalidatePlacement+=1),this.filledBets+=d.potentialLayBet.filledBet(),d.potentialLayBet&&d.potentialLayBet.betValidationErrors.length>0&&(this.validationErrors=d.potentialLayBet.hasBetValidationErrors(this.validationErrors))),a===betEngineConfigurations.bets.placeAction.placePotential&&d.potentialSPBackBet&&(d.potentialSPBackBet.isPlaceable=d.potentialSPBackBet.isValid(a),d.potentialSPBackBet.filledBet()&&!d.potentialSPBackBet.isPlaceable))return this.isPlaceable=!1,this.validationErrors=d.potentialSPBackBet.hasBetValidationErrors(this.validationErrors),this.isPlaceable;if(d.potentialSPBackBet&&d.potentialSPBackBet.isVisible&&(this.hasPotentialSPBackBets=!0,this.totalPotentialBets++,this.totalPotentialSPBets++,this.totalPotentialSPBackBets++,d.potentialSPBackBet.isPlaceable&&d.potentialSPBackBet.size&&(this.isPlaceable=!0,this.hasValidPotentialBets=!0,this.hasValidPotentialSPBackBets=!0),d.potentialSPBackBet.hasStakeError&&(this.hasErrorsThatInvalidatePlacement+=1),this.filledBets+=d.potentialSPBackBet.filledBet(),d.potentialSPBackBet.betValidationErrors.length>0&&(this.validationErrors=d.potentialSPBackBet.hasBetValidationErrors(this.validationErrors)),d.potentialSPBackBet.orderType===betEngineConfigurations.bets.orderTypes.limitOnClose&&(this.hasPotentialSPOddsLimit=!0)),a===betEngineConfigurations.bets.placeAction.placePotential&&d.potentialSPLayBet&&(d.potentialSPLayBet.isPlaceable=d.potentialSPLayBet.isValid(a),d.potentialSPLayBet.filledBet()&&!d.potentialSPLayBet.isPlaceable))return this.isPlaceable=!1,this.validationErrors=d.potentialSPLayBet.hasBetValidationErrors(this.validationErrors),this.isPlaceable;if(d.potentialSPLayBet&&d.potentialSPLayBet.isVisible&&(this.hasPotentialSPLayBets=!0,this.totalPotentialBets++,this.totalPotentialSPBets++,this.totalPotentialSPLayBets++,d.potentialSPLayBet.isPlaceable&&d.potentialSPLayBet.size&&(this.isPlaceable=!0,this.hasValidPotentialBets=!0,this.hasValidPotentialSPLayBets=!0),d.potentialSPLayBet.hasStakeError&&(this.hasErrorsThatInvalidatePlacement+=1),this.filledBets+=d.potentialSPLayBet.filledBet(),d.potentialSPLayBet&&(d.potentialSPLayBet.betValidationErrors.length>0&&(this.validationErrors=d.potentialSPLayBet.hasBetValidationErrors(this.validationErrors)),d.potentialSPLayBet.orderType===betEngineConfigurations.bets.orderTypes.limitOnClose&&(this.hasPotentialSPOddsLimit=!0))),j.push(c),d.hasMatchedPosition&&(this.hasMatchedPosition=!0),d.hasMatchedLays&&(this.hasMatchedLays=!0),d.hasMatchedBacks&&(this.hasMatchedBacks=!0),d.hasUnMatchedBacks&&(this.hasUnMatchedBacks=!0),d.hasUnMatchedLays&&(this.hasUnMatchedLays=!0),d.hasSPBacks&&(this.hasSPBacks=!0),d.hasSPLays&&(this.hasSPLays=!0),d.hasOpenBets&&(this.hasOpenBets=!0),d.hasUnMatchedBets&&(this.hasUnMatchedBets=!0),d.hasSPBets&&(this.hasSPBets=!0),d.hasSPOddsLimit&&(this.hasSPOddsLimit=!0),a===betEngineConfigurations.bets.placeAction.placeOpen){if(d.hasUnMatchedBacks||d.hasUnMatchedLays)for(e=0,f=d.runner.unMatchedBets.length;f>e;e++)if(d.runner.unMatchedBets[e].isPlaceable=d.runner.unMatchedBets[e].isValid(a),!d.runner.unMatchedBets[e].isPlaceable)return this.isPlaceable=!1,this.validationErrorsForUnMatchedBets=d.runner.unMatchedBets[e].hasBetValidationErrors(this.validationErrors),this.isPlaceable;for(g=0,h=d.runner.spBets.length;h>g;g++)if(!this.market.state.bspReconciled&&d.runner.spBets[g].orderType===betEngineConfigurations.bets.orderTypes.limitOnClose&&(d.runner.spBets[g].type===betEngineConfigurations.bets.types.lay&&d.runner.spBets[g].price<d.runner.spBets[g].originalPrice||!n.isPrice(d.runner.spBets[g].price)))return d.runner.spBets[g].isValid(a),this.isPlaceable=!1,this.validationErrorsForUnMatchedBets=d.runner.spBets[g].hasBetValidationErrors(this.validationErrors),this.isPlaceable}this.market.bettingBehaviour!==betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS?(m+=d.matchedProfitIfLose,l+=d.whatIfProfitIfLose):(this.runnerLines||(this.runnerLines=this.asianHandicap.exposureCalculator.buildRunnerLines(this.market.runners)),i=this.asianHandicap.exposureCalculator.findLineKey(d.runner,this.asianHandicap.exposureCalculator.getRunnerOfTheSameLine(this.market,d.runner)),i&&this.runnerLines.hasOwnProperty(i)&&(this.runnerLines[i].potentialLoss+=d.whatIfProfitIfLose,this.runnerLines[i].actualLoss+=d.matchedProfitIfLose)),this.layBook+=d.layBook,this.backBook+=d.backBook,d.potentialBackBet&&d.potentialLayBet&&b===k-1&&this.updateMarketErrors(),(this.market.bettingType===betEngineConfigurations.market.bettingTypes.singleAsian||shouldCalculateAHDLPnlTable(this.market))&&(this.addBetsToAHExposureTable(c),shouldCalculateAHDLPnlTable(this.market)&&(d.potentialBackBet&&(d.potentialAHBackWhatIf=this.asianHandicap.exposureCalculator.getPnlArrayAndLabels(d.potentialBackBet)),d.potentialLayBet&&(d.potentialAHLayWhatIf=this.asianHandicap.exposureCalculator.getPnlArrayAndLabels(d.potentialLayBet))))}return this.isPlaceable=this.isPlaceable&&this.filledBets>0&&0===this.hasErrorsThatInvalidatePlacement&&(this.hasPotentialBackBets||this.hasPotentialLayBets||this.hasPotentialSPBackBets||this.hasPotentialSPLayBets),this.calculateExposure(j,this.market.state.numberOfWinners,this.market.state.complete),this.isAsianHandicapBettingType&&(this.market.bettingType===betEngineConfigurations.market.bettingTypes.singleAsian?this.asianHandicap.pnlTable=this.asianHandicap.exposureCalculator.getPnlTableWithCommissionAndSettledProfit():shouldCalculateAHDLPnlTable(this.market)&&(this.asianHandicap.pnlSum=this.asianHandicap.exposureCalculator.calculatePnLSum(),this.asianHandicap.potentialPnlSum=this.asianHandicap.exposureCalculator.calculatePotentialPnLSum(),this.asianHandicap.worstCaseSum=this.asianHandicap.exposureCalculator.calculateWorstCasePnLSum())),this.market.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS?this.calculateProfitsAndLosesForSpreadsAndTotals(j,this.runnerLines):this.calculateProfitsAndLoses(j,l,m),null},MarketPosition.prototype.updateMarketErrors=function(a){var b,c,d={},e=[],f=a===betEngineConfigurations.market.origin.openBets?this.validationErrorsForUnMatchedBets:this.validationErrors;for(b=0,c=f.length;c>b;b++)betEngineHelper.valueExists(f[b].type,d)||(d[b]=f[b].type,e.push(f[b]));a===betEngineConfigurations.market.origin.openBets?this.marketOpenErrors=e:this.marketPotentialErrors=e},MarketPosition.prototype.updateOpenBetsErrors=function(){var a,b,c,d,e,f,g,h=this.market.runners.length,i=[];for(this.validationErrorsForUnMatchedBets.length=0,a=0;h>a;a++)for(b=this.market.runners[a].runnerPosition,c=0,d=b.runner.unMatchedBets.length;d>c;c++)if(b.runner.unMatchedBets[c].betValidationErrors.length){for(g=b.runner.unMatchedBets[c].betValidationErrors,e=0,f=g.length;f>e;e++)g[e].type!==betEngineConfigurations.bets.validationErrorCodes.minMaxOdds&&i.push(g[e]);this.validationErrorsForUnMatchedBets=this.validationErrorsForUnMatchedBets.concat(i)}for(a=0;h>a;a++)for(b=this.market.runners[a].runnerPosition,c=0,d=b.runner.spBets.length;d>c;c++)b.runner.spBets[c].betValidationErrors.length&&(this.validationErrorsForUnMatchedBets=this.validationErrorsForUnMatchedBets.concat(b.runner.spBets[c].betValidationErrors))},MarketPosition.prototype.updateBetsInvalidPriceStatus=function(a){var b,c,d,e,f=this.market.runners.length;for(b=0;f>b;b++)for(c=this.market.runners[b].runnerPosition,d=0,e=c.runner.unMatchedBets.length;e>d;d++)c.runner.unMatchedBets[d].hasPriceError=!1},MarketPosition.prototype.updateCashoutQuote=function(a,b){"use strict";var c=betEngineConfigurations.miscellaneous.currencySymbol;(a.status!==betEngineConfigurations.cashout.unavailable||a.status!==this.cashout.status)&&(["status","currentLiability","profit","value","maxPartialPercentage","minPartialPercentage"].forEach(function(b){this.cashout[b]=a[b]},this),this.cashout.profitRaw=this.cashout.profit||0,this.cashout.origProfit=this.cashout.profit||0,this.cashout.origValue=this.cashout.value||0,this.cashout.currentLiabilityRaw=this.cashout.currentLiability||0,this.cashout.currentLiability=this.cashout.currentLiabilityRaw<0?0:this.cashout.currentLiabilityRaw,this.cashout.currentLiability=betEngineHelper.formatProfit(this.cashout.currentLiability,c),this.setRunnerCashoutPnL(a.profitPerSelection||{},b))},MarketPosition.prototype.setRunnerCashoutPnL=function(a,b){"use strict";var c,d,e,f=[],g=betEngineConfigurations.miscellaneous.currencySymbol;this.cashout.hasOwnProperty("profitPerSelection")||(this.cashout.profitPerSelection={}),b="undefined"==typeof b?1:.01*b,this.market.runners.forEach(function(c){var d=c.selectionId,e=c.setCashoutProfit(a[d],b,this.market);f.push(e),this.cashout.profitPerSelection[d]=e},this),this.cashout.valueRaw=this.cashout.origValue*b,e=this.cashout.valueRaw,c=Math.min.apply(null,f),isNaN(c)&&(c=betEngineHelper.applyCommissionAndSettledProfit(this.cashout.valueRaw-this.cashout.currentLiabilityRaw,this.market.rates)),this.cashout.profitRaw=c,this.cashout.profit=betEngineHelper.formatProfit(c,g),c=betEngineHelper.roundProfit(c),c=parseFloat(c),this.cashout.profitRaw>0&&(e=this.cashout.origValue-this.cashout.origProfit+c,this.cashout.currentLiabilityRaw<0&&(d=betEngineHelper.applyCommissionAndSettledProfit(-this.cashout.currentLiabilityRaw,this.market.rates),d=betEngineHelper.roundProfit(d),d=parseFloat(d),e=e+-this.cashout.currentLiabilityRaw-d)),this.cashout.value=betEngineHelper.formatProfit(e,g)},MarketPosition.prototype.toggleCashout=function(a){this.cashout.visible=a},MarketPosition.prototype.calculateExposure=function(a,b,c){var d,e,f;if(this.exposure=0,b>0){if(a.sort(this.runnerLiabilityComparator),this._sumExposureForWinnerMarkets(a,b),!c)for(f=this.exposure,e=b-1;e>=0;e--)d=a[e],f=f-d.profitIfWin+d.profitIfLose,f<this.exposure&&(this.exposure=f)}else this._sumExposureForNonWinnerMarkets(a);this.exposure=this.exposure<0?-this.exposure:this.exposure},MarketPosition.prototype.calculateProfitsAndLoses=function(a,b,c){var d,e,f=a.length;for(d=0;f>d;d++)e=a[d].runnerPosition,e.netProfitIfWin=b-e.whatIfProfitIfLose+e.whatIfProfitIfWin,e.netProfitIsPositive=e.netProfitIfWin>=0,e.netMatchedProfitIfWin=c-e.matchedProfitIfLose+e.matchedProfitIfWin,e.netMatchedProfitIsPositive=e.netMatchedProfitIfWin>=0,betEngineConfigurations.profitsAndLoses.applyCustomLayout&&a[d].setupPnl(this.market)},MarketPosition.prototype.calculateProfitsAndLosesForSpreadsAndTotals=function(a,b){var c,d,e=a.length,f={potentialLoss:0,actualLoss:0},g=null;for(c=0;e>c;c++)d=a[c].runnerPosition,g=this.asianHandicap.exposureCalculator.buildLineKey(d.runner,this.asianHandicap.exposureCalculator.getRunnerOfTheSameLine(this.market,d.runner)),g&&this.runnerLines.hasOwnProperty(g)&&(f.potentialLoss=this.runnerLines[g].potentialLoss,f.actualLoss=this.runnerLines[g].actualLoss),d.netProfitIfWin=f.potentialLoss-d.whatIfProfitIfLose+d.whatIfProfitIfWin,d.netProfitIsPositive=d.netProfitIfWin>=0,d.netMatchedProfitIfWin=f.actualLoss-d.matchedProfitIfLose+d.matchedProfitIfWin,d.netMatchedProfitIsPositive=d.netMatchedProfitIfWin>=0,betEngineConfigurations.profitsAndLoses.applyCustomLayout&&a[c].setupPnl(this.market)},MarketPosition.prototype.addBetsToAHExposureTable=function(a){var b,c=a.matchedBets.length,d=a.unMatchedBets.length,e=a.runnerPosition.potentialBackBet,f=a.runnerPosition.potentialLayBet;for(this.market.bettingType===betEngineConfigurations.market.bettingTypes.doubleAsian&&(e&&this.asianHandicap.exposureCalculator.addPotentialAHBet(e),f&&this.asianHandicap.exposureCalculator.addPotentialAHBet(f)),b=0;c>b;b++)this.asianHandicap.exposureCalculator.addOpenAHBet(a.matchedBets[b]);for(b=0;d>b;b++)this.asianHandicap.exposureCalculator.addOpenAHBet(a.unMatchedBets[b])},MarketPosition.prototype.runnerLiabilityComparator=function(a,b){return a.runnerPosition.netProfit<b.runnerPosition.netProfit?-1:1},MarketPosition.prototype.cancelAll=function(a){this.resetMarketPosition(a),this.market.runners.forEach(function(b){b.runnerPosition.cancelAll(a)})},MarketPosition.prototype.nudgeAll=function(a,b){var c,d,e=this.market.runners.length,f=this.market.priceLadder;if(this.hasPotentialBackBets||this.hasPotentialLayBets)for(c=0;e>c;c++)d=this.market.runners[c].runnerPosition,a===betEngineConfigurations.bets.types.back&&null!==d.potentialBackBet&&d.potentialBackBet.hasPrice()&&(d.potentialBackBet.price=f.nudge(d.potentialBackBet.price,b)),a===betEngineConfigurations.bets.types.lay&&null!==d.potentialLayBet&&d.potentialLayBet.hasPrice()&&(d.potentialLayBet.price=f.nudge(d.potentialLayBet.price,b))},MarketPosition.prototype.dutch=function(a){var b,c,d=this.market.runners.length,e=0,f=0,g=!1;if(this.hasPotentialBackBets){for(this.marketPotentialErrors.length=0,b=0;d>b;b++)c=this.market.runners[b].runnerPosition,null!==c.potentialBackBet&&c.potentialBackBet.hasPrice()&&(e+=1/c.potentialBackBet.price);for(b=0;d>b;b++)c=this.market.runners[b].runnerPosition,null!==c.potentialBackBet&&c.potentialBackBet.hasPrice()&&(f=a/c.potentialBackBet.price/e,f=betEngineHelper.roundProfit(f),f>=betEngineConfigurations.bets.sizeLimits.min?c.potentialBackBet.size=f:(c.potentialBackBet.size=null,g=!0));g&&this.dutchingErrors.push({type:betEngineConfigurations.bets.validationErrorCodes.stakeBelowMin,param1:betEngineConfigurations.miscellaneous.currencySymbol,param2:betEngineConfigurations.miscellaneous.minimumStake})}},MarketPosition.prototype.reverseDutch=function(a){var b,c,d=this.market.runners.length,e=0,f=!1,g=0;if(this.hasPotentialLayBets){if(!this.market.state.singleWinner){for(b=0;d>b;b++)c=this.market.runners[b].runnerPosition,null!==c.potentialLayBet&&c.potentialLayBet.hasPrice()&&g++;a/=this.market.state.numberOfWinners>0?Math.min(this.market.state.numberOfWinners,g):g}for(b=0;d>b;b++)c=this.market.runners[b].runnerPosition,null!==c.potentialLayBet&&c.potentialLayBet.hasPrice()&&(e=a/(c.potentialLayBet.price-1),e=betEngineHelper.roundLiability(e),e>=betEngineConfigurations.bets.sizeLimits.min?c.potentialLayBet.size=e:(c.potentialLayBet.size=null,f=!0));f&&this.dutchingErrors.push({type:betEngineConfigurations.bets.validationErrorCodes.stakeBelowMin,param1:betEngineConfigurations.miscellaneous.currencySymbol,param2:betEngineConfigurations.miscellaneous.minimumStake})}},MarketPosition.prototype.equalisePayouts=function(a){var b,c,d=this.market.runners.length,e=0,f=!1;if(this.hasPotentialLayBets){for(b=0;d>b;b++)c=this.market.runners[b].runnerPosition,null!==c.potentialLayBet&&c.potentialLayBet.hasPrice()&&(e=a/c.potentialLayBet.price,e=betEngineHelper.roundProfit(e),e>=betEngineConfigurations.bets.sizeLimits.min?c.potentialLayBet.size=e:(c.potentialLayBet.size=null,f=!0));f&&this.dutchingErrors.push({type:betEngineConfigurations.bets.validationErrorCodes.stakeBelowMin,param1:betEngineConfigurations.miscellaneous.currencySymbol,param2:betEngineConfigurations.miscellaneous.minimumStake})}},MarketPosition.prototype.clearDutchingErrors=function(){this.dutchingErrors.length=0},MarketPosition.prototype._sumExposureForEachWayMarkets=function(a){var b,c,d=a.length;for(b=0;d>b;b++)c=a[b].runnerPosition,this.exposure+=Math.max(c.profitIfWin,c.profitIfLose)},MarketPosition.prototype._sumExposureForWinnerMarkets=function(a,b){var c,d,e=a.length;for(c=0;e>c;c++)d=a[c].runnerPosition,this.exposure+=b>c?d.profitIfWin:d.profitIfLose},MarketPosition.prototype._sumExposureForNonWinnerMarkets=function(a){var b,c,d=a.length;for(b=0;d>b;b++)c=a[b].runnerPosition,this.exposure+=Math.min(c.profitIfWin,c.profitIfLose)};var ModelBet=function(){this.selectionId="",this.id="",this.matchId=null,this.runner={},this.market={},this.type="",this.categoryType=betEngineConfigurations.bets.categoryTypes.exchange,this.price=null,this.fractionalOdds="",this.originalPrice=0,this.truePrice=0,this.size=null,this.originalSize=0,this.profit=0,this.liability=null,this.bspLiability=null,this.payout=null,this.persistenceType=betEngineConfigurations.bets.persistenceTypes.lapse,this.originalPersistenceType=betEngineConfigurations.bets.persistenceTypes.lapse,this.ToDeleteOnUpdate=!1,this.placedStatus="",this.placedDate=null,this.placedDateTimestamp=null,this.orderType=betEngineConfigurations.bets.orderTypes.limit,this.orderId=null,this.minPrice=betEngineConfigurations.bets.priceLimits.min,this.maxPrice=betEngineConfigurations.bets.priceLimits.max,this.minStake=betEngineConfigurations.bets.sizeLimits.min,this.bspLayMinStake=betEngineConfigurations.bets.sizeLimits.bsplaymin,this.maxStake=betEngineConfigurations.bets.sizeLimits.max,this.oddsLimit=null,this.handicap=null,this.version=0,this.isPartiallyMatched=!1,this.openUnmatchedDisabledPrice=!1,this.openUnmatchedDisabledSize=!1,this.openUnmatchedDisabledAtInPlay=!1,this.hasOpenUnmatchedChanges=!1,this.profitIfWin=null,this.profitIfLose=null,this.whatIfProfitIfWin=null,this.whatIfProfitIfLose=null,this.hasStakeError=!1,this.hasPriceError=!1,this.hasCrossedPriceError=!1,this.betValidationErrors=[],this.isVisible=!0,this.openUnmatchedTabOrder=-1,this.isPlaceable=!1,this.isPotentialBet=!0,this.isAsianHandicapBettingType=!1,this.isEachWay=!1,this.isAsianHandicap=!1,this.eachWay={},this.asianHandicap=[],this.isAsianHandicapSL=!1,this.isAsianHandicapDL=!1,this.isAsianHandicapMarketType=!1};ModelBet.prototype.addBetInfo=function(a,b,c,d,e){this.price=a>0?a:null,this.type=b,this.originalSize=this.size,this.originalPrice=this.price,this.originalPersistenceType=this.persistenceType,void 0!==e&&null!==e&&(this.size=e),c&&(this.selectionId=c.selectionId,this.runner.id=c.selectionId?c.selectionId:c.id,this.runner.name=c.name,this.runner.sortPriority=c.state.sortPriority,this.handicap=c.handicap),d&&this._setMarketInfo(d)},ModelBet.prototype.addOpenBetInfo=function(a,b,c,d){if(this.selectionId=a.selectionId,this.handicap=a.handicap,this.type="B"===a.betType?betEngineConfigurations.bets.types.back:betEngineConfigurations.bets.types.lay,this.size=a.size,this.price=a.price,this.liability=(this.price-1)*this.size,this.profit=(this.price-1)*this.size,this.persistenceType=a.betPersistenceType,b===betEngineConfigurations.bets.placedStatus.sp)switch(this.bspLiability=a.bspLiability,this.type){case betEngineConfigurations.bets.types.back:this.price=a.price>this.minPrice?a.price:0,this.size=a.bspLiability,this.liability=0,this.orderType=a.price>this.minPrice?betEngineConfigurations.bets.orderTypes.limitOnClose:betEngineConfigurations.bets.orderTypes.marketOnClose;break;case betEngineConfigurations.bets.types.lay:this.price=a.price<this.maxPrice?a.price:0,this.size=a.size?a.size:a.bspLiability,this.liability=a.bspLiability,this.orderType=a.price<this.maxPrice?betEngineConfigurations.bets.orderTypes.limitOnClose:betEngineConfigurations.bets.orderTypes.marketOnClose}this.originalSize=this.size,this.originalPrice=this.price,this.originalPersistenceType=this.persistenceType,this.placedDate=a.dateDisplay,this.placedDateTimestamp=a.dateMilliseconds,this.categoryType=a.betCategoryType,this.placedStatus=a.matched||this.categoryType!==betEngineConfigurations.bets.categoryTypes.multiples?a.matched&&this.categoryType===betEngineConfigurations.bets.categoryTypes.exchange?betEngineConfigurations.bets.placedStatus.matched:betEngineConfigurations.bets.placedStatus.unmatched:betEngineConfigurations.bets.placedStatus.sp,this.id=a.betID?a.betID.toString():null,this.matchId=a.matchId?a.matchId.toString():null,c&&(this.runner.id=c.selectionId?c.selectionId:c.id,this.runner.name=c.name,this.runner.sortPriority=c.state.sortPriority,this.runner.handicap=this.handicap),d&&this._setMarketInfo(d),this.isPotentialBet=!1},ModelBet.prototype._setMarketInfo=function(a){this.market.id=a.id,this.isAsianHandicapBettingType=a.isAsianHandicapBettingType,this.bettingBehaviour=a.bettingBehaviour,this.marketType=a.description.marketType,this.priceLadder=a.priceLadder,this.priceLadderType=a.priceLadderType,this.isEachWay=this.marketType===betEngineConfigurations.market.marketTypes.eachWay,this.isAsianHandicapDL=this.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE,this.isAsianHandicapSL=a.bettingType===betEngineConfigurations.market.bettingTypes.singleAsian,this.isAsianHandicapMarketType=a.isAsianHandicapMarketType,this.isEachWay&&(this.eachWay.divisor=a.description.eachWayDivisor,this.eachWay.whatIfWin=null,this.eachWay.whatIfPlaced=null,this.eachWay.whatIfUnplaced=null,this.eachWay.whatIfWinRaw=null,this.eachWay.whatIfPlacedRaw=null,this.eachWay.whatIfUnplacedRaw=null,this.eachWay.profitIfWin=null,this.eachWay.profitIfPlaced=null,this.eachWay.profitIfUnplaced=null,this.eachWay.profitIfWinRaw=null,this.eachWay.profitIfPlacedRaw=null,this.eachWay.profitIfUnplacedRaw=null),this.isAsianHandicapDL&&(this.asianHandicapExposureCalculator=new AHExposureCalculator(a)),this.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS&&(this.asianHandicapExposureCalculator=new STExposureCalculator(a))},ModelBet.prototype.recalculatePotentialBetValues=function(){var a,b=parseFloat(this.size),c=parseFloat(this.price),d=b,e=(c-1)*b,f=b/(c-1),g=c*b,h=0,i=!0;if(i=this.orderType===betEngineConfigurations.bets.orderTypes.limit?!(!b||!c):this.type===betEngineConfigurations.bets.types.back?!!b:!!d,i&&(this.payout=g),this.isValid()&&i)if(this.orderType===betEngineConfigurations.bets.orderTypes.limit){switch(this.type){case betEngineConfigurations.bets.types.back:this.whatIfProfitIfWin=e,this.whatIfProfitIfLose=-b,this.profitIfWin=0,this.profitIfLose=this.whatIfProfitIfLose;break;case betEngineConfigurations.bets.types.lay:this.whatIfProfitIfWin=-e,this.whatIfProfitIfLose=b,this.profitIfWin=this.whatIfProfitIfWin,this.profitIfLose=0,this.liability=-this.whatIfProfitIfWin}this.isEachWay&&(h=this._eachWayProfit(c,b),a=this.type===betEngineConfigurations.bets.types.back?1:-1,this.eachWay.whatIfWinRaw=a*(e+h),this.eachWay.whatIfPlacedRaw=parseFloat(a*(h-b)),this.eachWay.whatIfUnplacedRaw=a*(2*-b),this.eachWay.whatIfWin=betEngineHelper.formatPnl(this.eachWay.whatIfWinRaw),this.eachWay.whatIfPlaced=betEngineHelper.formatPnl(this.eachWay.whatIfPlacedRaw),this.eachWay.whatIfUnplaced=betEngineHelper.formatPnl(this.eachWay.whatIfUnplacedRaw),this.type===betEngineConfigurations.bets.types.back?(this.profit=this.eachWay.whatIfWinRaw,this.liability=-this.eachWay.whatIfUnplacedRaw,this.payout=c*b*2,this.whatIfProfitIfWin=this.profit):(this.profit=this.eachWay.whatIfUnplacedRaw,this.liability=-this.eachWay.whatIfWinRaw,this.payout=this.liability+2*b,this.whatIfProfitIfWin=this.liability)),this.isAsianHandicapDL&&(this.asianHandicap=this.asianHandicapExposureCalculator.getBetPnlArray(this)),this.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS&&(this.asianHandicap=this.asianHandicapExposureCalculator.getBetPnlArray(this))}else switch(this.type){case betEngineConfigurations.bets.types.back:this.profitIfLose=-b,this.profitIfWin=0,this.profit=e;break;case betEngineConfigurations.bets.types.lay:this.profitIfWin=-d,this.profitIfLose=0,this.profit=f}else this.profitIfWin=null,this.profitIfLose=null,this.liability=null,this.whatIfProfitIfWin=null,this.whatIfProfitIfLose=null,this.eachWay.whatIfWin=null,this.eachWay.whatIfPlaced=null,this.eachWay.whatIfUnplaced=null,this.eachWay.whatIfWinRaw=null,this.eachWay.whatIfPlacedRaw=null,this.eachWay.whatIfUnplacedRaw=null,this.asianHandicap.forEach(function(a){a.whatif.exposure=null,a.whatif.exposureRaw=null})},ModelBet.prototype.recalculatePlacedBetValues=function(a,b){var c,d=parseFloat(this.size),e=parseFloat(this.price),f=parseFloat(this.liability),g=parseFloat(this.bspLiability),h=(e-1)*d,i=d/(e-1),j=e*d,k=0,l=!0;if(this.payout=j,b=b?b:betEngineConfigurations.bets.placeAction.none,(a&&this.placedStatus===betEngineConfigurations.bets.placedStatus.unmatched||this.placedStatus===betEngineConfigurations.bets.placedStatus.sp)&&(l=this.placedStatus!==betEngineConfigurations.bets.placedStatus.sp?this.isValid()&&!isNaN(d)&&!isNaN(e):b!==betEngineConfigurations.bets.placeAction.none?this.isValid(b)&&(!isNaN(d)||!isNaN(f)):this.isValid()&&(!isNaN(d)||!isNaN(f))),this.isPlaceable=l,l){if(this.profit=this.orderType===betEngineConfigurations.bets.orderTypes.limitOnClose&&this.type===betEngineConfigurations.bets.types.lay?i:h,this.bspLiability=g,this.liability=this.orderType===betEngineConfigurations.bets.orderTypes.limit&&this.type===betEngineConfigurations.bets.types.lay?h:f,this.whatIfProfitIfWin=this.profit,this.type===betEngineConfigurations.bets.types.lay&&(this.whatIfProfitIfWin=this.orderType===betEngineConfigurations.bets.orderTypes.limit?this.liability:this.bspLiability),this.isAsianHandicapSL)switch(this.type){case betEngineConfigurations.bets.types.back:this.whatIfProfitIfWin=h,this.whatIfProfitIfLose=-d,this.profitIfWin=this.whatIfProfitIfWin,this.profitIfLose=this.whatIfProfitIfLose;break;case betEngineConfigurations.bets.types.lay:this.whatIfProfitIfWin=-h,this.whatIfProfitIfLose=d,this.profitIfWin=this.whatIfProfitIfWin,this.profitIfLose=this.whatIfProfitIfLose,this.liability=-this.whatIfProfitIfWin}this.isAsianHandicapDL&&(this.asianHandicap=this.asianHandicapExposureCalculator.getBetPnlArray(this)),this.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS&&(this.asianHandicap=this.asianHandicapExposureCalculator.getBetPnlArray(this)),this.isEachWay&&(k=this._eachWayProfit(e,d),c=this.type===betEngineConfigurations.bets.types.back?1:-1,this.eachWay.profitIfWinRaw=c*(h+k),this.eachWay.profitIfPlacedRaw=parseFloat(c*(k-d)),this.eachWay.profitIfUnplacedRaw=c*(2*-d),this.eachWay.profitIfWin=betEngineHelper.formatPnl(this.eachWay.profitIfWinRaw),this.eachWay.profitIfPlaced=betEngineHelper.formatPnl(this.eachWay.profitIfPlacedRaw),this.eachWay.profitIfUnplaced=betEngineHelper.formatPnl(this.eachWay.profitIfUnplacedRaw),this.type===betEngineConfigurations.bets.types.back?(this.profit=this.eachWay.profitIfWinRaw,this.liability=-this.eachWay.profitIfUnplacedRaw,this.payout=e*d*2,this.whatIfProfitIfWin=this.profit):(this.profit=this.eachWay.profitIfUnplacedRaw,this.liability=-this.eachWay.profitIfWinRaw,this.payout=this.liability+2*d,this.whatIfProfitIfWin=this.liability))}else this.profit=null,this.profitIfLose=null,this.liability=null,this.payout=null,this.whatIfProfitIfWin=null,this.whatIfProfitIfLose=null,this.eachWay.profitIfWin=null,this.eachWay.profitIfPlaced=null,this.eachWay.profitIfUnplaced=null,this.eachWay.profitIfWinRaw=null,this.eachWay.profitIfPlacedRaw=null,
this.eachWay.profitIfUnplacedRaw=null,this.asianHandicap.forEach(function(a){a.whatif.exposure=null,a.whatif.exposureRaw=null})},ModelBet.prototype.nudge=function(a,b){var c,d=this.price,e=this.priceLadder;return d?b&&(c=e.nudge(b,a)):c=a?e.minPrice:e.maxPrice,c},ModelBet.prototype.validateSizeOnLadder=function(){var a,b,c,d,e,f=!0;return this.size&&(betEngineHelper.isArray(this.size)?(a=this.size[0],d=this.size[1]):a=this.size),d&&(Number(d)||(d=0),b=SizeLadder.getMinSize(this.orderType,this.type),b>d?(c=[b],e=this.orderType===betEngineConfigurations.bets.orderTypes.limit||this.type===betEngineConfigurations.bets.types.back?betEngineConfigurations.bets.validationErrorCodes.minStake:betEngineConfigurations.bets.validationErrorCodes.minBSPLayLiability):SizeLadder.isSize(d,this.orderType,this.type)||(c=SizeLadder.getLadderInfo(d,this.orderType,this.type),e=betEngineConfigurations.bets.validationErrorCodes.minMaxStake),e&&this.addBetValidationError(e,c),this.hasStakeError=!0,this.size=a),f},ModelBet.prototype.validateSizeSimple=function(){var a=this.size,b=!0;return this.orderType!==betEngineConfigurations.bets.orderTypes.limit&&this.type===betEngineConfigurations.bets.types.lay&&(!a||a<this.bspLayMinStake)&&(!this.originalSize||this.originalSize>=this.bspLayMinStake)?(this.addBetValidationError(betEngineConfigurations.bets.validationErrorCodes.minStakeBSPLay,[this.bspLayMinStake]),this.hasStakeError=!0,b=!1):a<this.minStake&&(!this.originalSize||this.originalSize>=this.minStake)&&(this.addBetValidationError(betEngineConfigurations.bets.validationErrorCodes.minStake,[this.minStake]),this.hasStakeError=!0,b=!1),b},ModelBet.prototype.isValid=function(a){"use strict";var b,c,d=this.priceLadder;return a=a||betEngineConfigurations.bets.placeAction.none,this.betValidationErrors.length=0,a!==betEngineConfigurations.bets.placeAction.none&&(!this.isPotentialBet&&this.orderType===betEngineConfigurations.bets.orderTypes.limitOnClose&&this.type===betEngineConfigurations.bets.types.lay&&this.price<this.originalPrice?(this.price=this.originalPrice,this.hasOpenUnmatchedChanges=!0):this.price&&!d.isPrice(this.price)&&(c=Number(this.price),isNaN(c)||c%1===0||c.toFixed(2),this.price=[this.nudge(!0,c),this.price])),b=this.orderType===betEngineConfigurations.bets.orderTypes.marketOnClose?this.isStakeValid(a)&&this.isPayoutValid():this.isPriceValid(a)&&this.isStakeValid(a)&&this.isPayoutValid(),!this.isPotentialBet&&this.orderType===betEngineConfigurations.bets.orderTypes.limitOnClose&&this.type===betEngineConfigurations.bets.types.lay&&this.price<this.originalPrice&&(b=!1),this.isPlaceable=b&&this.filledBet(),b},ModelBet.prototype.isPriceValid=function(a){"use strict";var b,c,d,e,f,g=this.priceLadder;return this.price&&(betEngineHelper.isArray(this.price)?(f=this.price[0],b=this.price[1]):f=this.price),e=!!f,this.hasPriceError=!1,this.price&&this.orderType===betEngineConfigurations.bets.orderTypes.marketOnClose&&(this.orderType=betEngineConfigurations.bets.orderTypes.limitOnClose),b&&this.orderType!==betEngineConfigurations.bets.orderTypes.marketOnClose&&(this.originalPrice&&this.orderType===betEngineConfigurations.bets.orderTypes.limitOnClose&&(this.type===betEngineConfigurations.bets.types.back&&b>this.originalPrice||this.type===betEngineConfigurations.bets.types.lay&&b<this.originalPrice)&&this.placedStatus===betEngineConfigurations.bets.placedStatus.unmatched?(c=this.type===betEngineConfigurations.bets.types.back?betEngineConfigurations.bets.validationErrorCodes.spOddsTooLow:betEngineConfigurations.bets.validationErrorCodes.spOddsTooHigh,this.price=f,this.addBetValidationError(c),e=!0):(Number(b)||(b=1),b<g.minPrice?c=betEngineConfigurations.bets.validationErrorCodes.minOdds:b>g.minPrice&&b<g.maxPrice?(d=this.betValidationErrorPriceLadderIntervals(b),c=betEngineConfigurations.bets.validationErrorCodes.minMaxOdds):b>g.maxPrice&&(c=betEngineConfigurations.bets.validationErrorCodes.maxOdds),c&&(c!==betEngineConfigurations.bets.validationErrorCodes.minMaxOdds?this.addBetValidationError(c):this.addBetValidationError(c,d)),this.hasPriceError=!0,this.price=f,e=a===betEngineConfigurations.bets.placeAction.none)),this.hasCrossedPriceError=!1,e},ModelBet.prototype.isStakeValid=function(){"use strict";var a;return this.size?(this.hasStakeError=!1,a=betEngineConfigurations.bets.useSizeLadder?this.validateSizeOnLadder():this.validateSizeSimple(),a=a&&this._hasStakeMinimumUpdate()&&this._isStakeMultiple()):(this.hasStakeError=!1,!1)},ModelBet.prototype._eachWayProfit=function(a,b){return(a-1)/this.eachWay.divisor*b},ModelBet.prototype._hasStakeMinimumUpdate=function(){var a,b,c=!0;return this.placedStatus===betEngineConfigurations.bets.placedStatus.unmatched&&this.size!==this.originalSize&&Math.abs(this.size-this.originalSize)<betEngineConfigurations.bets.validationPolicy.minimumUpdate&&(a=betEngineConfigurations.bets.validationErrorCodes.minUpdate,b=[betEngineConfigurations.bets.validationPolicy.minimumUpdate],this.addBetValidationError(a,b),this.hasStakeError=!0,c=!1),c},ModelBet.prototype._isStakeMultiple=function(){var a,b,c=!0;return betEngineConfigurations.bets.validationPolicy.backMultiple&&this.type===betEngineConfigurations.bets.types.back&&!SizeLadder.isSizeMultipleOfDefinedValue(this.size,betEngineConfigurations.bets.validationPolicy.backMultiple)&&(a=betEngineConfigurations.bets.validationErrorCodes.stakeHasToBeMultiple,b=[betEngineConfigurations.bets.validationPolicy.backMultiple],this.addBetValidationError(a,b),this.hasStakeError=!0,c=!1),c},ModelBet.prototype.isPayoutValid=function(){"use strict";var a=betEngineConfigurations.bets.validationPolicy.payoutLimit;return!(a&&(!this.payout||this.payout>a))||(this.addBetValidationError(betEngineConfigurations.bets.validationErrorCodes.payoutLimit),!1)},ModelBet.prototype.betValidationErrorPriceLadderIntervals=function(a){switch(this.priceLadderType){case"CLASSIC":return a>1.01&&2>a?["1.01","2","0.01"]:a>2&&3>a?["2","3","0.02"]:a>3&&4>a?["3","4","0.05"]:a>4&&6>a?["4","6","0.1"]:a>6&&10>a?["6","10","0.2"]:a>10&&20>a?["10","20","0.5"]:a>20&&30>a?["20","30","1"]:a>30&&50>a?["30","50","2"]:a>50&&100>a?["50","100","5"]:a>100&&1e3>a?["100","1000","10"]:[];case"FINEST":return["1.01","1000","0.01"];default:return[]}},ModelBet.prototype.addBetValidationError=function(a,b){var c={type:a,bets:{BACK:"potentialBackBet",LAY:"potentialLayBet"}};b&&b.forEach(function(a,b){c["param"+(b+1)]=a}),this.betValidationErrors.push(c)},ModelBet.prototype.filledBet=function(){var a,b,c=this.size;return this.orderType===betEngineConfigurations.bets.orderTypes.marketOnClose?b=!!c:(this.price&&(a=betEngineHelper.isArray(this.price)?this.price[0]:this.price),b=!(!c||!a)),b},ModelBet.prototype.hasBetValidationErrors=function(a){if(this.betValidationErrors.length>0){var b=this.betValidationErrors.length,c=0;for(c;b>c;c++)a.push(this.betValidationErrors[c])}return a},ModelBet.prototype.hasPrice=function(){return null!==this.price&&!isNaN(this.price)&&this.price>0},ModelBet.prototype.hasSize=function(){return null!==this.size&&!isNaN(this.size)&&this.size>0},ModelBet.prototype.removeBet=function(a){a.removePotentialBet(this)},ModelBet.prototype.createBetBody=function(a){var b,c=this,d=c.fractionalOdds,e=d?d.split("/"):null,f=null,g=null,h=parseFloat(c.size),i=parseFloat(c.price),j=0;return 0!==c.price&&e&&1===e.length&&(f=e[0].toString(),g=e[1].toString()),c.orderType!==betEngineConfigurations.bets.orderTypes.limit&&c.type===betEngineConfigurations.bets.types.lay&&isNaN(h)&&(h=parseFloat(c.bspLiability)),c.orderType===betEngineConfigurations.bets.orderTypes.limitOnClose&&(j=i,i=0),b={betId:c.id,marketId:a.id,selectionId:parseInt(c.selectionId,10),size:h,price:i,asianHandicap:c.handicap,categoryType:c.categoryType,version:c.version,oddsLimit:j,marketName:a.name,marketType:a.type,eventId:a.event.id,orderType:c.orderType,fractionalOdds:{numerator:f,denominator:g},runnerId:c.selectionId,matchId:c.matchId,eachWay:0,runnerOrder:c.runner.sortPriority,side:c.type.toUpperCase(),inplay:a.state.inplay,sizeBefore:null!==c.originalSize?c.originalSize:c.size,priceBefore:c.originalPrice,persistenceType:c.persistenceType,bspLiability:c.orderType!==betEngineConfigurations.bets.orderTypes.limit?h:0}};var ModelMarket=function(a){var b,c,d,e=a.runners.length,f=0,g=0,h=a.description&&a.description.bettingType?a.description.bettingType:null;for(this.event=a.eventInfo,this.hasBetsToPlace=!1,this._setBasicInfo(a),this.asianHandicapValueLine=null,(this.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE||this.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS)&&(this.homeRunner={id:a.runners[0].selectionId,name:a.runners[0].description.runnerName},this.awayRunner={id:a.runners[1].selectionId,name:a.runners[1].description.runnerName},this.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE?(this.valueLineCalc=new AHValueLineCalculator(a),this.asianHandicapValueLine=this.valueLineCalc.getCurrentValueLine(),this._setAsianHandicapsLimits(a.runners,this.homeRunner.id)):this._setAsianHandicapsLimitsForSpreadsAndTotals(a.runners,this.homeRunner.id)),this.marketPosition=new MarketPosition(this),this.newRunnerOnTheMarket=!1,this.backBookPercentage=0,this.layBookPercentage=0,this.runners=[],b=0;e>b;b++)d=a.runners[b],c=new ModelRunner(d,a.eventInfo.eventTypeId,h,a.description.marketType),c.addRunnerPrices(d),c.runnerPosition=new RunnerPosition(this.marketPosition,c),c.runnerPosition.recalculateRunnerPosition(this.marketPosition.validationErrors),c.runnerPosition.updateVisibleStatus(),c.state.status===betEngineConfigurations.market.runnerStatus.active&&(f+=c.backBestPercentage,g+=c.layBestPercentage),this.runners.push(c);this._updatePercentageBook(f,g)};ModelMarket.prototype._setBasicInfoForEachWayMarket=function(a){if(a.hasOwnProperty("eachWayDivisor")){this.description.eachWayDivisor=parseInt(a.eachWayDivisor,10);var b=this.description.eachWayDivisor;betEngineConfigurations.market.eachWayDivisorToCharCodeMapper.hasOwnProperty(b)?this.description.eachWayDivisorSymbol=String.fromCharCode(betEngineConfigurations.market.eachWayDivisorToCharCodeMapper[b]):this.description.eachWayDivisorSymbol="1"}},ModelMarket.prototype._setBasicInfo=function(a){this.id=a.marketId,a.description&&!this.description&&(this.description={},this.name=a.description.marketName,this.date=a.description.marketTime,this.bettingType=a.description.bettingType,this.isAsianHandicapMarketType=a.description.marketType===betEngineConfigurations.market.marketTypes.asianHandicap,this.isAsianHandicapBettingType=this.bettingType===betEngineConfigurations.market.bettingTypes.singleAsian||this.bettingType===betEngineConfigurations.market.bettingTypes.doubleAsian,this.isEachWay=a.description.marketType===betEngineConfigurations.market.marketTypes.eachWay,this.description.bspMarket=a.description.bspMarket,this.description.marketName=a.description.marketName,this.description.marketTime=a.description.marketTime,this.description.marketType=a.description.marketType,this.description.persistenceEnabled=a.description.persistenceEnabled,this.description.raceNumber=a.description.raceNumber,this.description.regulator=a.description.regulator,this.description.suspendTime=a.description.suspendTime,this.description.turnInPlayEnabled=a.description.turnInPlayEnabled,this.description.marketType===betEngineConfigurations.market.marketTypes.eachWay&&this._setBasicInfoForEachWayMarket(a.description),this.bettingBehaviour=betEngineHelper.getBettingBehaviour(this.description.marketType,this.bettingType),this.priceLadderType=betEngineHelper.getPriceLadderType(a.description),this.priceLadder=betEngineHelper.getPriceLadder(this.priceLadderType)),this.description||(this.description={},this.bettingBehaviour=betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.ODDS_GENERIC),this.state={},a.state&&(this.state.betDelay=a.state.betDelay,this.state.bspReconciled=a.state.bspReconciled,this.state.complete=a.state.complete,this.state.inplay=a.state.inplay,this.state.numberOfWinners=a.state.numberOfWinners,this.state.numberOfRunners=a.state.numberOfRunners,this.state.numberOfActiveRunners=a.state.numberOfActiveRunners,this.state.totalMatched=a.state.totalMatched,this.state.totalAvailable=a.state.totalAvailable,this.state.crossMatching=a.state.crossMatching,this.state.runnersVoidable=a.state.runnersVoidable,this.state.status=a.state.status,this.state.singleWinner=1===this.state.numberOfWinners),a.rates&&!this.rates&&(this.rates={},this.rates.settledProfit=0,this.rates.discountAllowed=a.rates.discountAllowed||!1,this.rates.marketBaseRate=a.rates.marketBaseRate||0),a.hasOwnProperty("licence")&&(this.licence={},this.licence.rules=a.licence.rules||"",this.licence.rulesHasDate=a.licence.rulesHasDate||!1,this.licence.wallet=a.licence.wallet||"",this.licence.clarifications=a.licence.clarifications||"")},ModelMarket.prototype.updateMarketInfo=function(a){var b,c,d,e,f=this.runners,g=f.length,h=a.runners.length,i=0,j=0;for(h>f.length&&(this.newRunnerOnTheMarket=!0),a.eventInfo&&!this.event&&(this.event=a.eventInfo),this._setBasicInfo(a),this.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE&&(this.valueLineCalc.update(a),this.asianHandicapValueLine=this.valueLineCalc.getCurrentValueLine()),d=0;g>d;d++)for(e=f[d],b=0;h>b;b++)if(c=a.runners[b],c.selectionId===e.selectionId&&c.handicap===e.handicap){e.updateRunnerInfo(c,a.eventInfo.eventTypeId,this.bettingType),e.updateRunnerPrices(c.exchange),e.runnerPosition.updateVisibleStatus(),e.state.status===betEngineConfigurations.market.runnerStatus.active&&(i+=e.backBestPercentage,j+=e.layBestPercentage);break}this._updatePercentageBook(i,j)},ModelMarket.prototype._updatePercentageBook=function(a,b){this.backBookPercentage!==100*a&&(this.backBookPercentage=Math.round(1e3*a)/10),this.layBookPercentage!==100*b&&(this.layBookPercentage=Math.round(1e3*b)/10)},ModelMarket.prototype._setAsianHandicapsLimits=function(a,b){var c=a.reduce(function(a,c){return b===c.selectionId&&a.push(c.handicap),a},[]);this.asianHandicapUpperLimit=-Math.min.apply(Math,c)+1,this.asianHandicapLowerLimit=-Math.max.apply(Math,c)-1},ModelMarket.prototype._setAsianHandicapsLimitsForSpreadsAndTotals=function(a,b){var c=a.reduce(function(a,b){return a.push(b.handicap),a},[]);this.asianHandicapUpperLimit=Math.floor(Math.max.apply(Math,c))+1,this.asianHandicapLowerLimit=Math.ceil(Math.min.apply(Math,c))-1};var ModelRunner=function(a,b,c,d){this.selectionId=a.selectionId,this.handicap=a.handicap||0,this.state={},a.state&&(this.state.status=a.state.status,this.state.sortPriority=a.state.sortPriority-1,this.state.adjustmentFactor=0,this.state.adjustmentFactor=a.state.adjustmentFactor,(a.state.status===betEngineConfigurations.market.runnerStatus.removed||a.state.status===betEngineConfigurations.market.runnerStatus.removedVacant)&&(this.state.removalDate=a.state.removalDate)),this.metadata={},a.description&&(this.name=this.shortName=a.description.runnerName,c===betEngineConfigurations.market.bettingTypes.doubleAsian&&(this.name=a.description.runnerName+" "+betEngineHelper.asianHandicapConversion(a.handicap,d)),a.description.metadata&&parseInt(b,10)===parseInt(betEngineConfigurations.market.eventTypes.horseRacing,10)&&this._setHorseRacingMetadata(a.description.metadata)),this.prices={back:{values:[],isSelected:!1},lay:{values:[],isSelected:!1},sp:{near:0,far:0,actualStartingPrice:null},liquidityVal:betEngineConfigurations.miscellaneous.rollupLimit},this.pnl={},this.matchedBets=[],this.unMatchedBets=[],this.spBets=[]};ModelRunner.prototype.updateRunnerInfo=function(a,b,c){this.selectionId=a.selectionId,this.handicap=a.handicap,a.description&&(a.description.metadata&&b===betEngineConfigurations.market.eventTypes.horseRacing&&this._setHorseRacingMetadata(a.description.metadata),this.name&&""!==this.name||(this.name=this.shortName=a.description.runnerName,c===betEngineConfigurations.market.bettingTypes.doubleAsian&&(this.name=a.description.runnerName+" "+betEngineHelper.asianHandicapConversion(a.handicap)))),this.state.status=a.state.status,this.state.sortPriority=a.state.sortPriority-1,this.state.adjustmentFactor=a.state.adjustmentFactor,(a.state.status===betEngineConfigurations.market.runnerStatus.removed||a.state.status===betEngineConfigurations.market.runnerStatus.removedVacant)&&(this.state.removalDate=a.state.removalDate),a.sp&&this._updateSpPrices(a.sp)},ModelRunner.prototype.addRunnerPrices=function(a){var b,c,d,e=[],f=[],g=a.exchange,h=a.sp||null;if(this.prices.back={values:[],isSelected:!1},this.prices.lay={values:[],isSelected:!1},g&&(g.availableToBack||g.availableToLay))for(d=0;d<betEngineConfigurations.market.marketDepthSize;d++)g.availableToBack&&g.availableToBack[d]?(b=g.availableToBack[d],b.fractionalOdd=this._getFractionalOdds(b.price),e.push(b)):e.push({price:0}),g.availableToLay&&g.availableToLay[d]?(c=g.availableToLay[d],c.fractionalOdd=this._getFractionalOdds(c.price),f.push(c)):f.push({price:0});else for(d=0;d<betEngineConfigurations.market.marketDepthSize;d++)e.push({price:0}),f.push({price:0});this.prices.back.values=e,this.prices.lay.values=f,h&&this._updateSpPrices(h),this._calculateBookPercentage()},ModelRunner.prototype.updateRunnerPrices=function(a){var b,c,d,e,f;if(a&&(a.availableToBack||a.availableToLay))for(f=0;f<betEngineConfigurations.market.marketDepthSize;f++)b=this.prices.back.values[f],d=this.prices.lay.values[f],a.availableToBack&&a.availableToBack[f]?(c=a.availableToBack[f],b.hasChanged=!1,(betEngineHelper.truncateDecimals(c.size)!==betEngineHelper.truncateDecimals(b.size)||c.price!==b.price)&&(b.size=c.size,b.price=c.price,b.fractionalOdd=this._getFractionalOdds(b.price),b.hasChanged=!0)):(b.size=0,b.price=0,b.fractionalOdd=""),a.availableToLay&&a.availableToLay[f]?(e=a.availableToLay[f],d.hasChanged=!1,(betEngineHelper.truncateDecimals(e.size)!==betEngineHelper.truncateDecimals(d.size)||e.price!==d.price)&&(d.size=e.size,d.price=e.price,d.fractionalOdd=this._getFractionalOdds(d.price),d.hasChanged=!0)):(d.size=0,d.price=0,d.fractionalOdd="");else for(f=0;f<betEngineConfigurations.market.marketDepthSize;f++)b=this.prices.back.values[f],d=this.prices.lay.values[f],b.size=0,b.price=0,b.fractionalOdd="",d.size=0,d.price=0,d.fractionalOdd="";this._calculateBookPercentage()},ModelRunner.prototype._calculateBookPercentage=function(){var a=this.prices.back.values[0],b=this.prices.lay.values[0];this.backBestPercentage=a&&a.price>0?1/a.price:1,this.layBestPercentage=b&&b.price>0?1/b.price:0},ModelRunner.prototype._updateSpPrices=function(a){a.nearPrice&&(this.prices.sp.near=a.nearPrice),a.farPrice&&(this.prices.sp.far=a.farPrice),a.actualStartingPrice&&(this.prices.sp.actualStartingPrice=a.actualStartingPrice)},ModelRunner.prototype.hasSettledProfitToShow=function(a){return betEngineConfigurations.miscellaneous.includeSettledBets&&a.rates&&0!==a.rates.settledProfit},ModelRunner.prototype.hasPnlForMultiplesWinners=function(a){return this.runnerPosition.hasMatchedPosition||betEngineConfigurations.miscellaneous.displayFutureProfitAndLoss&&a.filledBets>0&&(null!==this.runnerPosition.potentialBackBet&&this.runnerPosition.potentialBackBet.isPlaceable||null!==this.runnerPosition.potentialLayBet&&this.runnerPosition.potentialLayBet.isPlaceable)},ModelRunner.prototype.hasPnlForSingleWinners=function(a){return a.hasMatchedPosition||betEngineConfigurations.miscellaneous.displayFutureProfitAndLoss&&a.filledBets>0&&a.hasValidPotentialBets&&(a.hasPotentialBackBets||a.hasPotentialLayBets)},ModelRunner.prototype.setupPnl=function(a){var b=1===a.state.numberOfWinners,c=a.marketPosition,d=this.pnl.hasCashout,e=this.pnl.cashout,f=null,g=!1,h=!1;this.state.status===betEngineConfigurations.market.runnerStatus.active&&betEngineConfigurations.miscellaneous.displayProfitAndLoss?(this.pnl={actual:{},potential:{},hasCashout:d,cashout:e,hasPnl:!1},a.bettingBehaviour===betEngineConfigurations.bettingBehaviour.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS?(this.pnl.hasPnl=this.hasSettledProfitToShow(a)||this.hasPnlForSingleWinners(c),f=c.asianHandicap.exposureCalculator.getRunnerOfTheSameLine(a,this),g=this.runnerPosition.hasValidPotentialBets,h=this.runnerPosition.hasMatchedPosition,!h&&f&&f.runnerPosition.hasMatchedPosition&&(h=!0),h&&(c.hasMatchedPosition||this.hasSettledProfitToShow(a))&&this._setupActualPnlForSingleWinner(a),!g&&f&&f.runnerPosition.hasValidPotentialBets&&(g=!0),g&&c.hasValidPotentialBets&&betEngineConfigurations.miscellaneous.displayFutureProfitAndLoss&&c.filledBets>0&&(c.hasPotentialBackBets||c.hasPotentialLayBets)&&this._setupPotentialPnlForSingleWinner(a)):b?(this.pnl.hasPnl=this.hasSettledProfitToShow(a)||this.hasPnlForSingleWinners(c),(c.hasMatchedPosition||this.hasSettledProfitToShow(a))&&this._setupActualPnlForSingleWinner(a),c.hasValidPotentialBets&&betEngineConfigurations.miscellaneous.displayFutureProfitAndLoss&&c.filledBets>0&&(c.hasPotentialBackBets||c.hasPotentialLayBets)&&this._setupPotentialPnlForSingleWinner(a)):(this.pnl.hasPnl=this.hasSettledProfitToShow(a)||this.hasPnlForMultiplesWinners(c),(this.hasSettledProfitToShow(a)||this.runnerPosition.hasMatchedPosition&&(this.runnerPosition.hasMatchedBacks||this.runnerPosition.hasMatchedLays||this.runnerPosition.hasReconciledSPBets))&&(a.marketPosition.isEWMarket?this._setupActualPnlForEWMarkets(a):this._setupActualPnlForMultipleWinners(a)),c.hasValidPotentialBets&&betEngineConfigurations.miscellaneous.displayFutureProfitAndLoss&&c.hasValidPotentialBets&&c.filledBets>0&&(null!==this.runnerPosition.potentialBackBet&&this.runnerPosition.potentialBackBet.isPlaceable||null!==this.runnerPosition.potentialLayBet&&this.runnerPosition.potentialLayBet.isPlaceable)&&(c.isEWMarket?this._setupPotentialPnlForEWMarkets(a):this._setupPotentialPnlForMultipleWinners(a)))):this.pnl={hasPnl:!1,hasCashout:!1}},ModelRunner.prototype._setupPotentialPnlForSingleWinner=function(a){var b=betEngineConfigurations.profitsAndLoses.symbols,c=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.netProfitIfWin,a.rates);this.pnl.potential.visible=null!==this.runnerPosition.netProfitIfWin&&(a.marketPosition.hasPotentialBackBets||a.marketPosition.hasPotentialLayBets),this.pnl.potential.isProfitPositive=c>=0,this.pnl.potential.isProfitPositive?(this.pnl.potential.profitRaw=c,this.pnl.potential.profit=b.whatIfPrefix+" "+betEngineHelper.formatPnl(c),this.pnl.potential.lose=""):(this.pnl.potential.profitRaw=c,this.pnl.potential.lose=b.whatIfPrefix+" "+betEngineHelper.formatPnl(c),this.pnl.potential.profit="")},ModelRunner.prototype._setupPotentialPnlForMultipleWinners=function(a){var b=betEngineConfigurations.profitsAndLoses.symbols,c=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.whatIfProfitIfWin,a.rates),d=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.whatIfProfitIfLose,a.rates),e=null!==this.runnerPosition.potentialBackBet&&this.runnerPosition.potentialBackBet.isPlaceable||null!==this.runnerPosition.potentialLayBet&&this.runnerPosition.potentialLayBet.isPlaceable;this.pnl.potential.visible=e&&null!==this.runnerPosition.whatIfProfitIfWin&&null!==this.runnerPosition.whatIfProfitIfLose,this.pnl.potential.isProfitPositive=c>=0,this.pnl.potential.isLosePositive=d>=0,this.pnl.potential.profitRaw=c,this.pnl.potential.profit=b.whatIfPrefix+" "+betEngineHelper.formatPnl(c)+b.separator,this.pnl.potential.loseRaw=d,this.pnl.potential.lose=betEngineHelper.formatPnl(d)},ModelRunner.prototype._setupPotentialPnlForEWMarkets=function(a){var b=betEngineConfigurations.profitsAndLoses.symbols,c=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.eachWay.profitIfWin+this.runnerPosition.eachWay.whatIfWin,a.rates),d=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.eachWay.profitIfPlaced+this.runnerPosition.eachWay.whatIfPlaced,a.rates),e=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.eachWay.profitIfUnplaced+this.runnerPosition.eachWay.whatIfUnplaced,a.rates),f=null!==this.runnerPosition.potentialBackBet&&this.runnerPosition.potentialBackBet.isPlaceable||null!==this.runnerPosition.potentialLayBet&&this.runnerPosition.potentialLayBet.isPlaceable;this.pnl.potential.visible=f&&null!==this.runnerPosition.eachWay.whatIfWin&&null!==this.runnerPosition.eachWay.whatIfPlaced&&null!==this.runnerPosition.eachWay.whatIfUnplaced,this.pnl.potential.whatIfWinRaw=c,this.pnl.potential.whatIfPlacedRaw=d,this.pnl.potential.whatIfUnplacedRaw=e,this.pnl.potential.whatIfWin=b.whatIfPrefix+" "+betEngineHelper.formatPnl(c),this.pnl.potential.whatIfPlaced=betEngineHelper.formatPnl(d),this.pnl.potential.whatIfUnplaced=betEngineHelper.formatPnl(e)},ModelRunner.prototype._setupActualPnlForSingleWinner=function(a){var b=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.netMatchedProfitIfWin,a.rates);this.pnl.actual.visible=!0,this.pnl.actual.isProfitPositive=b>=0,this.pnl.actual.profitRaw=b,this.pnl.actual.profit=betEngineHelper.formatPnl(b)},ModelRunner.prototype._setupActualPnlForMultipleWinners=function(a){var b=betEngineConfigurations.profitsAndLoses.symbols,c=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.matchedProfitIfWin,a.rates),d=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.matchedProfitIfLose,a.rates),e=this.runnerPosition.hasMatchedPosition;this.pnl.actual.visible=e&&null!==this.runnerPosition.matchedProfitIfWin&&null!==this.runnerPosition.matchedProfitIfLose,this.pnl.actual.isProfitPositive=c>=0,this.pnl.actual.isLosePositive=d>=0,this.pnl.actual.profitRaw=c,this.pnl.actual.profit=betEngineHelper.formatPnl(c)+b.separator,this.pnl.actual.loseRaw=d,this.pnl.actual.lose=betEngineHelper.formatPnl(d)},ModelRunner.prototype._setupActualPnlForEWMarkets=function(a){var b=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.eachWay.profitIfWin,a.rates),c=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.eachWay.profitIfPlaced,a.rates),d=betEngineHelper.applyCommissionAndSettledProfit(this.runnerPosition.eachWay.profitIfUnplaced,a.rates),e=this.runnerPosition.hasMatchedPosition;this.pnl.actual.visible=e&&null!==this.runnerPosition.eachWay.profitIfWin&&null!==this.runnerPosition.eachWay.profitIfPlaced&&null!==this.runnerPosition.eachWay.profitIfUnplaced,this.pnl.actual.profitIfWinRaw=b,this.pnl.actual.profitIfPlacedRaw=c,this.pnl.actual.profitIfUnplacedRaw=d,this.pnl.actual.profitIfWin=betEngineHelper.formatPnl(b),this.pnl.actual.profitIfPlaced=betEngineHelper.formatPnl(c),this.pnl.actual.profitIfUnplaced=betEngineHelper.formatPnl(d)},ModelRunner.prototype.setCashoutProfit=function(a,b,c){"use strict";var d,e,f=betEngineConfigurations.miscellaneous.currencySymbol,g=betEngineConfigurations.profitsAndLoses.symbols.cashoutWhatIfPrefix;return this.pnl.hasCashout=!0,this.pnl.cashout=this.pnl.cashout||{},void 0!==a&&(d=a,this.pnl.actual&&1!==b&&(e=this.pnl.actual.profitRaw,d=(d-e)*b+e),d=betEngineHelper.applyCommissionAndSettledProfit(d,c.rates),this.pnl.cashout.profitRaw=d,this.pnl.cashout.profit=g+" "+betEngineHelper.formatProfit(d,f),this.pnl.cashout.isProfitPositive=d>=0),d||a},ModelRunner.prototype._convertPoundsToPoundsAndStones=function(a){var b=betEngineHelper.memoize(function(a){var b,c,d;return b=(a*betEngineConfigurations.market.horseRacing.unitConversions.poundToStone).toPrecision(8),c=Math.floor(b),d=Math.floor((b-c)*betEngineConfigurations.market.horseRacing.unitConversions.stoneToPound),c+"-"+d});return b(a,"ModelRunner._convertPoundsToPoundsAndStones")},ModelRunner.prototype._getFractionalOdds=function(a){var b=betEngineHelper.memoize(function(a){function b(a){return"1/1"===a?betEngineConfigurations.miscellaneous.labelEvens:a}var c,d,e,f,g,h,i,j="";return a/a===1&&a>=1.01&&1e3>=a&&(c=betEngineConfigurations.bets.oddsConversions.lookupTable.length,betEngineConfigurations.bets.oddsConversions.lookupTable.forEach(function(k,l){if(d=k[0],e=k[1],f=k[2],d===a)j=b([e,"/",f].join(""));else if(a>d&&l+1!==c&&betEngineConfigurations.bets.oddsConversions.lookupTable[l+1][0]>a){if(g=betEngineConfigurations.bets.oddsConversions.lookupTable[l+1],h=g[1],i=g[2],e/f!==h/i)return j=[betEngineConfigurations.miscellaneous.labelBetween+" ",b([e,"/",f].join(""))," & ",b([h,"/",i].join(""))].join("");j=b([e,"/",f].join(""))}return j},this)),j});return b(a,"ModelRunner._getFractionalOdds")},ModelRunner.prototype._setHorseRacingMetadata=function(a){this.metadata.jockeyName=a.JOCKEY_NAME,this.metadata.coloursFilename=a.COLOURS_FILENAME,this.metadata.coloursDescription=a.COLOURS_DESCRIPTION,this.metadata.stallDraw=a.STALL_DRAW,this.metadata.clothNumber=a.CLOTH_NUMBER,this.metadata.clothNumberAlpha=a.CLOTH_NUMBER_ALPHA,this.metadata.trainerName=a.TRAINER_NAME,this.metadata.weightValue=a.WEIGHT_VALUE,this.metadata.weightPoundsAndStones=this.metadata.weightValue&&"pounds"===a.WEIGHT_UNITS?this._convertPoundsToPoundsAndStones(this.metadata.weightValue):null,this.metadata.ageAndWeight=a.AGE&&this.metadata.weightPoundsAndStones?a.AGE+" / "+this.metadata.weightPoundsAndStones:null,this.metadata.form=a.FORM,this.metadata.daysSinceLastRun=a.DAYS_SINCE_LAST_RUN,this.metadata.jockeyClaim=a.JOCKEY_CLAIM,this.metadata.wearing=a.WEARING,this.metadata.silkUrl=this.metadata.coloursFilename?betEngineConfigurations.market.horseRacing.silkColoursUrl+this.metadata.coloursFilename:null};var RunnerPosition=function(a,b){this.marketPosition=a,this.runner=b,this.runner.runnerPosition={},this.profitIfWin=0,this.profitIfLose=0,this.whatIfProfitIfWin=0,this.whatIfProfitIfLose=0,this.potentialBackBet=null,this.potentialLayBet=null,this.potentialSPBackBet=null,this.potentialSPLayBet=null,this.hasValidPotentialBets=!1,this.backBook=0,this.layBook=0,this.hasOpenBets=!1,this.hasMatchedBets=!1,this.hasMatchedLays=!1,this.hasMatchedBacks=!1,this.hasUnMatchedBets=!1,this.hasUnMatchedLays=!1,this.hasUnMatchedBacks=!1,this.hasSPBets=!1,this.hasSPLays=!1,this.hasSPBacks=!1,this.hasSPOddsLimit=!1,this.hasMatchedPosition=!1,this.matchedProfitIfWin=0,this.matchedProfitIfLose=0,this.isVisibleOnMarket=!1,this.eachWay={whatIfWin:0,whatIfPlaced:0,whatIfUnplaced:0,profitIfWin:0,profitIfPlaced:0,profitIfUnplaced:0}};RunnerPosition.prototype._resetRunnerPosition=function(a){a?(this.potentialBackBet&&!this.potentialBackBet.isVisible&&this.potentialBackBet.isPlaceable&&(this.potentialBackBet=null),this.potentialLayBet&&!this.potentialLayBet.isVisible&&this.potentialLayBet.isPlaceable&&(this.potentialLayBet=null),this.potentialSPBackBet&&!this.potentialSPBackBet.isVisible&&this.potentialSPBackBet.isPlaceable&&(this.potentialSPBackBet=null),this.potentialSPLayBet&&!this.potentialSPLayBet.isVisible&&this.potentialSPLayBet.isPlaceable&&(this.potentialSPLayBet=null),this.potentialBackBet||this.potentialLayBet||this.potentialSPBackBet||this.potentialSPLayBet||(this.hasValidPotentialBets=!1)):(this.potentialBackBet=null,this.potentialLayBet=null,this.potentialSPBackBet=null,this.potentialSPLayBet=null,this.hasValidPotentialBets=!1),this.profitIfWin=0,this.profitIfLose=0,this.whatIfProfitIfWin=0,this.whatIfProfitIfLose=0,this.backBook=0,this.layBook=0,this.hasOpenBets=!1,this.hasMatchedBets=!1,this.hasMatchedLays=!1,this.hasMatchedBacks=!1,this.hasUnMatchedBets=!1,this.hasUnMatchedLays=!1,this.hasUnMatchedBacks=!1,this.hasSPBets=!1,this.hasReconciledSPBets=!1,this.hasSPLays=!1,this.hasSPBacks=!1,this.hasSPOddsLimit=!1,this.hasMatchedPosition=!1,this.matchedProfitIfWin=0,this.matchedProfitIfLose=0,this.eachWay={whatIfWin:0,whatIfPlaced:0,whatIfUnplaced:0,profitIfWin:0,profitIfPlaced:0,profitIfUnplaced:0},this.potentialAHBackWhatIf&&delete this.potentialAHBackWhatIf,this.potentialAHLayWhatIf&&delete this.potentialAHLayWhatIf},RunnerPosition.prototype.recalculateRunnerPosition=function(a){var b,c,d,e,f;if(this.profitIfWin=0,this.profitIfLose=0,this.whatIfProfitIfWin=0,this.whatIfProfitIfLose=0,
this.backBook=0,this.layBook=0,this.hasValidPotentialBets=!1,this.hasOpenBets=!1,this.hasMatchedBets=!1,this.hasMatchedLays=!1,this.hasMatchedBacks=!1,this.hasUnMatchedBets=!1,this.hasUnMatchedLays=!1,this.hasUnMatchedBacks=!1,this.hasSPBets=!1,this.hasReconciledSPBets=!1,this.hasSPLays=!1,this.hasSPBacks=!1,this.hasMatchedPosition=!1,this.matchedProfitIfWin=0,this.matchedProfitIfLose=0,this.eachWay.whatIfWin=0,this.eachWay.whatIfPlaced=0,this.eachWay.whatIfUnplaced=0,this.eachWay.profitIfWin=0,this.eachWay.profitIfPlaced=0,this.eachWay.profitIfUnplaced=0,this.potentialBackBet&&this.potentialBackBet.isVisible&&this.potentialBackBet.recalculatePotentialBetValues(),this.potentialLayBet&&this.potentialLayBet.isVisible&&this.potentialLayBet.recalculatePotentialBetValues(),this.potentialSPBackBet&&this.potentialSPBackBet.isVisible&&this.potentialSPBackBet.recalculatePotentialBetValues(),this.potentialSPLayBet&&this.potentialSPLayBet.isVisible&&this.potentialSPLayBet.recalculatePotentialBetValues(),this.runner.matchedBets&&this.runner.matchedBets.length>0){for(c=this.runner.matchedBets.length,b=0;c>b;b++)d=this.runner.matchedBets[b],e=d.type===betEngineConfigurations.bets.types.back?1:-1,f=d.type===betEngineConfigurations.bets.types.back?-1:1,d.isEachWay?(this.eachWay.profitIfWin+=d.eachWay.profitIfWinRaw,this.eachWay.profitIfPlaced+=d.eachWay.profitIfPlacedRaw,this.eachWay.profitIfUnplaced+=d.eachWay.profitIfUnplacedRaw,this.matchedProfitIfWin+=e*d.eachWay.profitIfWinRaw,this.matchedProfitIfLose+=f*d.eachWay.profitIfUnplacedRaw):(this.matchedProfitIfWin+=e*(d.price-1)*d.size,this.matchedProfitIfLose+=f*d.size),d.type===betEngineConfigurations.bets.types.back?this.hasMatchedBacks=!0:this.hasMatchedLays=!0;this.hasOpenBets=!0,this.hasMatchedPosition=!0}if(this.runner.unMatchedBets&&this.runner.unMatchedBets.length>0){for(c=this.runner.unMatchedBets.length,b=0;c>b;b++)d=this.runner.unMatchedBets[b],d.type===betEngineConfigurations.bets.types.back?this.hasUnMatchedBacks=!0:this.hasUnMatchedLays=!0;this.hasOpenBets=!0,this.hasUnMatchedBets=!0}if(this.runner.spBets&&this.runner.spBets.length>0){for(c=this.runner.spBets.length,b=0;c>b;b++)d=this.runner.spBets[b],d.type===betEngineConfigurations.bets.types.back?this.hasSPBacks=!0:this.hasSPLays=!0,this.marketPosition.market.state.bspReconciled&&(d.recalculatePotentialBetValues(),this.runner.prices.sp&&this.runner.prices.sp.actualStartingPrice&&(d.price=this.runner.prices.sp.actualStartingPrice),d.type===betEngineConfigurations.bets.types.back?(this.matchedProfitIfWin+=(d.price-1)*d.size,this.matchedProfitIfLose+=-d.size):(this.matchedProfitIfWin+=-(d.size/(d.price-1)*(d.price-1)),this.matchedProfitIfLose+=d.size/(d.price-1))),d.orderType===betEngineConfigurations.bets.orderTypes.limitOnClose&&(this.hasSPOddsLimit=!0);this.marketPosition.market.state.bspReconciled&&(this.marketPosition.hasMatchedPosition=!0,this.hasMatchedPosition=!0,this.hasReconciledSPBets=!0),this.hasOpenBets=!0,this.hasSPBets=!0}this.whatIfProfitIfWin+=this.matchedProfitIfWin,this.whatIfProfitIfLose+=this.matchedProfitIfLose,this.potentialBackBet&&this.potentialBackBet.isPlaceable&&this.potentialBackBet.isVisible&&(this.potentialBackBet.isEachWay?(this.profitIfWin+=this.potentialBackBet.eachWay.whatIfWinRaw,this.profitIfLose+=this.potentialBackBet.eachWay.whatIfUnplacedRaw,this.whatIfProfitIfWin+=this.potentialBackBet.eachWay.whatIfWinRaw,this.whatIfProfitIfLose+=this.potentialBackBet.eachWay.whatIfUnplacedRaw,this.eachWay.whatIfWin+=this.potentialBackBet.eachWay.whatIfWinRaw,this.eachWay.whatIfPlaced+=this.potentialBackBet.eachWay.whatIfPlacedRaw,this.eachWay.whatIfUnplaced+=this.potentialBackBet.eachWay.whatIfUnplacedRaw):(this.profitIfWin+=this.potentialBackBet.profitIfWin,this.profitIfLose+=this.potentialBackBet.profitIfLose,this.whatIfProfitIfWin+=this.potentialBackBet.whatIfProfitIfWin,this.whatIfProfitIfLose+=this.potentialBackBet.whatIfProfitIfLose),this.backBook+=1/this.potentialBackBet.price,this.hasValidPotentialBets=!0),this.potentialLayBet&&this.potentialLayBet.isPlaceable&&this.potentialLayBet.isVisible&&(this.potentialLayBet.isEachWay?(this.profitIfWin+=this.potentialLayBet.eachWay.whatIfUnplacedRaw,this.profitIfLose+=this.potentialLayBet.eachWay.whatIfWinRaw,this.whatIfProfitIfWin+=this.potentialLayBet.eachWay.whatIfUnplacedRaw,this.whatIfProfitIfLose+=this.potentialLayBet.eachWay.whatIfWinRaw,this.eachWay.whatIfWin+=this.potentialLayBet.eachWay.whatIfWinRaw,this.eachWay.whatIfPlaced+=this.potentialLayBet.eachWay.whatIfPlacedRaw,this.eachWay.whatIfUnplaced+=this.potentialLayBet.eachWay.whatIfUnplacedRaw):(this.profitIfWin+=this.potentialLayBet.profitIfWin,this.profitIfLose+=this.potentialLayBet.profitIfLose,this.whatIfProfitIfWin+=this.potentialLayBet.whatIfProfitIfWin,this.whatIfProfitIfLose+=this.potentialLayBet.whatIfProfitIfLose),this.layBook+=1/this.potentialLayBet.price,this.hasValidPotentialBets=!0),this.potentialSPBackBet&&this.potentialSPBackBet.isVisible&&(this.profitIfWin+=this.potentialSPBackBet.profitIfWin,this.profitIfLose+=this.potentialSPBackBet.profitIfLose),this.potentialSPLayBet&&this.potentialSPLayBet.isVisible&&(this.profitIfWin+=this.potentialSPLayBet.profitIfWin,this.profitIfLose+=this.potentialSPLayBet.profitIfLose),this.netProfit=this.profitIfWin-this.profitIfLose,this.potentialBackBet&&this.potentialLayBet&&(parseFloat(this.potentialBackBet.price)<=parseFloat(this.potentialLayBet.price)&&this.potentialBackBet.size&&this.potentialLayBet.size&&this.potentialLayBet.isVisible&&this.potentialBackBet.isVisible&&(a.push({type:betEngineConfigurations.bets.validationErrorCodes.pricesCrossed}),this.potentialBackBet.hasCrossedPriceError=!0,this.potentialLayBet.hasCrossedPriceError=!0,this.potentialBackBet.hasPriceError=!0,this.potentialLayBet.hasPriceError=!0,this.potentialBackBet.hasErrorsThatInvalidatesMarketPlacement=!0,this.potentialLayBet.hasErrorsThatInvalidatesMarketPlacement=!0),a.length||!this.potentialBackBet.hasPriceError&&!this.potentialLayBet.hasPriceError||(this.potentialBackBet.hasPriceError=!1,this.potentialLayBet.hasPriceError=!1))},RunnerPosition.prototype.removePotentialBet=function(a){this.potentialBackBet===a?this.potentialBackBet=null:this.potentialLayBet===a?this.potentialLayBet=null:this.potentialSPBackBet===a?this.potentialSPBackBet=null:this.potentialSPLayBet===a&&(this.potentialSPLayBet=null)},RunnerPosition.prototype.cancelAll=function(a){this._resetRunnerPosition(a)},RunnerPosition.prototype.addPotentialBet=function(a,b,c,d){var e=new ModelBet;switch(e.addBetInfo(a,b,this.runner,c,d),b){case betEngineConfigurations.bets.types.back:this.potentialBackBet=e;break;case betEngineConfigurations.bets.types.lay:this.potentialLayBet=e}},RunnerPosition.prototype.addPotentialSPBet=function(a,b,c,d){var e=new ModelBet;switch(e.addBetInfo(a,b,this.runner,c,d),e.orderType=a?betEngineConfigurations.bets.orderTypes.limitOnClose:betEngineConfigurations.bets.orderTypes.marketOnClose,b){case betEngineConfigurations.bets.types.back:this.potentialSPBackBet=e;break;case betEngineConfigurations.bets.types.lay:this.potentialSPLayBet=e}},RunnerPosition.prototype.updateVisibleStatus=function(){this.marketPosition.market.state.status===betEngineConfigurations.market.marketStatus.open||this.marketPosition.market.state.status===betEngineConfigurations.market.marketStatus.suspended?this.isVisibleOnMarket=this.runner.state.status===betEngineConfigurations.market.runnerStatus.removed||this.runner.state.status===betEngineConfigurations.market.runnerStatus.removedVacant||this.runner.state.status===betEngineConfigurations.market.runnerStatus.active:this.marketPosition.market.state.status===betEngineConfigurations.market.marketStatus.closed&&(this.isVisibleOnMarket=this.runner.state.status===betEngineConfigurations.market.runnerStatus.loser||this.runner.state.status===betEngineConfigurations.market.runnerStatus.removed||this.runner.state.status===betEngineConfigurations.market.runnerStatus.removedVacant||this.runner.state.status===betEngineConfigurations.market.runnerStatus.winner||this.runner.state.status===betEngineConfigurations.market.runnerStatus.active)},angular.module("LayoutManager",[]).service("ParserService",["LayoutBuilder","$compile","$rootScope","LayoutManagerException",function(a,b,c,d){"use strict";function e(){-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(document.documentElement.className+=" ie")}function f(a,b){a.className="",b&&b.length>0&&(a.className=b.join(" "))}function g(a){var b,c=a.length;for(b=0;c>b;b++)if(k.name===a[b].name)return b;return-1}function h(){return document.createElement("div")}function i(e,i,j){var k,m=g(i);if(-1===m)throw new d(l.errorTypes.invalidLayoutFile).log();var n=i[m],o=j&&j[m]||{},p=a.decomposeLayout(n.rows,o.rows);return"INSERT"===p.node.action?(k=h(),e.empty(),k.appendChild(p.generateHtml()),e.append(k),b(e)(c)):(k=e.children()[0],p.updateHtml(angular.element(k))),f(k,n.classes),e}function j(b,c,f,g){if(!c)throw new d(l.errorTypes.noConfigFile).log();if(!g)throw new d(l.errorTypes.noConfigFile).log();return k=g,a.setAppConfig(k),e(),i(b,c.pages,f&&f.pages)[0]}var k,l={nodeTypes:{rows:"ROWS",columns:"COLUMNS"},errorTypes:{noContainer:"No container",noModule:"No Module",noConfigFile:"No Configuration File",invalidLayoutFile:"Invalid Layout File"},scrollableClass:"scrollable-panes-height-taker",scrollablePanesWrapperClass:"scrollable-panes-wrapper",maxGridColumns:"24",columnClassPrefix:"bf-col-"};return{buildHtml:j}}]),angular.module("LayoutManager").factory("Column",["Node","LayoutManagerUtils",function(a,b){"use strict";function c(a){var b=[];return angular.forEach(a,function(a,c){c===g?b.push(f+a.toString()+e):b.push(f+c.toString()+"-"+a.toString()+e)}),b}function d(d){a.call(this,d),this.getNodeClass=function(){var a=d.dimensions?c(d.dimensions):[];return d.classes&&d.classes.length>0&&(a=a.concat(d.classes)),a.join(" ")},this.createNodeHtml=function(){var a=document.createElement(h);return d.params&&b.addAttributesToElement(a,d.params),a}}var e="-24",f="bf-col-",g="default",h="div";return d.prototype=Object.create(a.prototype),d}]),angular.module("LayoutManager").factory("LayoutBuilder",["Root","Row","ScrollableRow","Column","Module","Node","LayoutManagerUtils",function(a,b,c,d,e,f,g){"use strict";function h(a){var b,c;return!a.criteria||!Object.keys(a.criteria).some(function(d){return s.criteria[d]?(b=g.convertArrayContentToUpperCase(a.criteria[d]),c=g.convertArrayContentToUpperCase(s.criteria[d]),b.some(function(a){return c.some(function(b){return a===b})})):void 0})}function i(a){s=a}function j(a,b,c){var d,e=[];for(a=a||[],d=0;d<b.length;d++)e.push(c(a[d],b[d]));for(d=0;d<a.length;d++)e.push(u);return e}function k(a,b,c){return a&&Object.keys(a).length?c(a,b)?t.keep:t.replace:t.insert}function l(a,b){return angular.equals(a.name,b.name)&&angular.equals(a.params,b.params)}function m(a,b){return angular.equals(a.classes,b.classes)&&angular.equals(a.dimensions,b.dimensions)&&!!a.module==!!b.module&&!!a.rows==!!b.rows}function n(a,b){return angular.equals(a.classes,b.classes)&&a.scrollableWrapper===b.scrollableWrapper}function o(a,b){return a=a||{},new e({name:b.name,params:b.params,action:k(a,b,l)})}function p(a,b){a=a||{};var c;return b.module&&h(b.module)?c=[o(a.module,b.module)]:b.rows&&(c=j(a.rows,b.rows,r)),new d({childs:c,classes:b.classes,dimensions:b.dimensions,action:k(a,b,m),params:b.params})}function q(b,c){return new a({childs:j(c,b,r),action:c&&Object.keys(c).length?t.keep:t.insert})}var r,s={},t={keep:"KEEP",insert:"INSERT",replace:"REPLACE","delete":"DELETE"},u=new f({action:t["delete"]});return r=function(a,d){a=a||{};var e={childs:j(a.columns,d.columns,p),classes:d.classes,action:k(a,d,n),params:d.params};return d.scrollableWrapper?new c(e):new b(e)},{decomposeLayout:q,setAppConfig:i}}]),angular.module("LayoutManager").factory("Module",["LayoutManagerUtils",function(a){"use strict";function b(b){this.node=b,this.createNodeHtml=function(){if(!b.name.length)throw new Error("No Module");var d=document.createElement(c+b.name);return b.params&&a.addAttributesToElement(d,b.params),d},this.generateHtml=function(){return this.createNodeHtml()},this.updateHtml=function(){}}var c="bf-";return b}]),angular.module("LayoutManager").factory("Node",["$compile","$rootScope",function(a,b){"use strict";function c(c){this.node=c,this.getNodeClass=function(){return""},this.createNodeHtml=function(){return document.createElement(d)},this.generateHtml=function(){var a=this.createNodeHtml();return a.className=this.getNodeClass(),c.childs&&angular.forEach(c.childs,function(b){a.appendChild(b.generateHtml())}),a},this.updateHtml=function(d){var e,f,g,h=0,i=0,j=d.children();if(c.childs)for(h;h<c.childs.length;h++,i++)switch(e=c.childs[h],f=angular.element(j[i]),e.node.action){case"INSERT":g=e.generateHtml(),d.append(g),i++,a(g)(b);break;case"KEEP":e.updateHtml(f);break;case"REPLACE":g=e.generateHtml(),f.replaceWith(g),a(g)(b);break;case"DELETE":f.remove(),i--}return d}}var d="div";return c}]),angular.module("LayoutManager").factory("Root",["Node",function(a){"use strict";function b(b){a.call(this,b),this.createNodeHtml=function(){return document.createDocumentFragment()}}return b.prototype=Object.create(a.prototype),b}]),angular.module("LayoutManager").factory("Row",["Node","LayoutManagerUtils",function(a,b){"use strict";function c(c){a.call(this,c),this.getNodeClass=function(){return c.classes?c.classes.join(" "):""},this.createNodeHtml=function(){var a=document.createElement(d);return c.params&&b.addAttributesToElement(a,c.params),a}}var d="div";return c.prototype=Object.create(a.prototype),c}]),angular.module("LayoutManager").factory("ScrollableRow",["Node",function(a){"use strict";function b(b){a.call(this,b);var f=this.updateHtml;this.updateHtml=function(a){f(angular.element(a.children()[0]))},this.getNodeClass=function(){var a="";return b.classes&&b.classes.length&&(a=b.classes.join(" ")),a.length&&(a+=" "),a+=e},this.generateHtml=function(){var a,e=document.createElement(c);return e.className=this.getNodeClass(),b.childs&&angular.forEach(b.childs,function(a){e.appendChild(a.generateHtml())}),a=document.createElement(c),a.className=d,a.appendChild(e),a}}var c="div",d="scrollable-panes-height-taker",e="scrollable-panes-wrapper";return b.prototype=Object.create(a.prototype),b}]),angular.module("LayoutManager").factory("LayoutManagerException",function(){"use strict";function a(a){this.value="Layout Manager Exception: ",this.message=a,this.log=function(){return this.value+this.message}}return a}),angular.module("LayoutManager").factory("LayoutManagerUtils",["LayoutManagerException",function(a){"use strict";function b(a,b){return Object.keys(b).forEach(function(c){a.setAttribute(c,b[c])}),a}function c(b){if("string"==typeof b)return[b.toUpperCase()];if(!Array.isArray(b))throw new a(d.wrongArgumentType.arrayOrString).log();return b.map(function(b){try{return b.toUpperCase()}catch(c){throw new a(d.wrongArgumentType.stringInsideArray).log()}})}var d={wrongArgumentType:{arrayOrString:"Expecting an array or a string as argument",stringInsideArray:"Expecting a string inside the array"}};return{addAttributesToElement:b,convertArrayContentToUpperCase:c}}]),angular.module("LayoutManager").config(["$provide",function(a){"use strict";function b(a){return[].slice.call(a.querySelectorAll("*"))}function c(a){return i.test(a.tagName)}function d(a){return a.toLowerCase()}function e(a,b){return a.map(d).indexOf(d(b.tagName))===-1}function f(a){a.remove()}function g(a,b){return a[0].createElement(b)}function h(a,d,h,i){var j,k=a.buildHtml;return a.setSandboxStrategy=function(a){j=a},a.buildHtml=function(l){var m,n,o,p;if(!angular.isFunction(j))throw new Error("Sandbox strategy is mandatory {Function}");if(m=j(),!angular.isObject(m))throw new Error("Sandbox strategy must return an {Object}");if(null!==m.modules&&!angular.isArray(m.modules))throw new Error("sandboxData.modules must be a list of modules {Array} or {null}");if("boolean"!=typeof m.preserveLayout)throw new Error("sandboxData.preserveLayout must be a {Boolean}");return null===m.modules?k.apply(a,arguments):m.preserveLayout?(n=k.apply(a,arguments),o=b(n).filter(c).filter(e.bind(null,m.modules)),o.forEach(f),n):(p=m.modules.map(g.bind(null,i)),l.append(p),h(l)(d),l)},a}var i=new RegExp("^bf-.+$","i");a.decorator("ParserService",["$delegate","$rootScope","$compile","$document",h])}]),!function(){"use strict";angular.module("BettingServiceMod",["ExchangeTransactionalClientMod","betfair.extensions"]).config(["BettingService.CONFIG","ExchangeTransactionalClientProvider",function(a,b){b.setEndpoint(a.services.etx.client.jsonRpc)}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("CancelAllResultModel",["CancelExecutionReportModel","BettingService.CONFIG",function(a,b){function c(){e=this,e.status={code:b.responseStatus.success},e.cancelExecutionReport={}}function d(c){return angular.forEach(c,function(c){var d=c.result,f=d.marketId,g=new a;e.cancelExecutionReport[f]=g.mapFromEtxExecutionReport(d),e.cancelExecutionReport[f].status!==b.responseStatus.success&&(e.status.code=b.responseStatus.failure)}),e}var e;return c.prototype.mapFromEtxResult=function(a){return d(a)},c}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("InstructionsHelper",["BF.LiveBetReportingClient","PlaceInstructionModel","ReplaceInstructionModel","CancelInstructionModel","UpdateInstructionModel","BettingService.CONFIG","$q",function(a,b,c,d,e,f,g){function h(a,b,c){return c[a]||(c[a]=[]),c[a].push(b),c}function i(a){var c={};return angular.forEach(a.potentialBets,function(a,d){angular.forEach(a,function(a){h(d,(new b).mapFromPotentialBet(a),c)},d)}),c}function j(a,b,c){var e,f,g,i,j;return angular.forEach(a,function(a){i=a.betId,f=b.editable[i],f&&(e=new d,e.betId=i,j=f.marketId,c.success.cancelInstructions=h(j,e,c.success.cancelInstructions)),g=b.fullyMatched[i],g&&(e=new d,e.betId=i,c.partialOrFullyMatched.cancelInstructions=h(g.marketId,e,c.partialOrFullyMatched.cancelInstructions))}),c}function k(a,g,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return angular.forEach(a,function(a){if(j=a.betId,k=a.marketId,l=g.editable[j]){if(p=a.sizeBefore,q=l.sizeRemaining,r=l.price,s=l.persistenceType||null,t=l.orderType&&l.orderType!==f.bets.orderTypes.limit,u=0,v=!1,w=!1,x=!1,t&&(p=l.bspLiability),!t&&a.price!==r||t&&a.oddsLimit!==r?(u++,v=!0):a.size!==p&&(u++,w=!0),s&&a.persistenceType&&a.persistenceType!==s&&(u++,x=!0),u>1)throw new Error("OperationForbidden");w?(y=Math.round(100*Math.abs(a.size-p))/100,a.size>p?(a.size=y,n=(new b).mapFromPotentialBet(a),o=q!==p?i.partialOrFullyMatched.placeInstructions:i.success.placeInstructions,o=h(k,n,o)):(n=new d,n.betId=j,n.sizeReduction=y,o=q!==p?i.partialOrFullyMatched.cancelInstructions:i.success.cancelInstructions,o=h(k,n,o))):v?(n=(new c).mapFromModelBet(a),o=i.success.replaceInstructions,o=h(k,n,o)):x&&(a.newPersistenceType=a.persistenceType,n=(new e).mapFromBetToUpdate(a),o=i.success.updateInstructions,o=h(k,n,o))}m=g.fullyMatched[j],m&&(n=new d,n.betId=j,o=i.partialOrFullyMatched.cancelInstructions,o=h(k,n,o))}),i}function l(a){var b=[],c=f.exchange.betPrefix;return angular.forEach(a.betsToCancel,function(a){b.push(c+a.betId)}),angular.forEach(a.betsToUpdate,function(a){b.push(c+a.betId)}),b}function m(a){return a.orderType===f.bets.orderTypes.limitOnClose&&a.bspLiability>0}function n(a){return a.orderType!==f.bets.orderTypes.limit}function o(b,c){var d;return a.searchOrders(c).then(function(a){return angular.forEach(a.liveOrders,function(a){d=a.betId.replace(a.betId.match(f.exchange.betPrefixRegex),""),a.status===f.services.lbr.betStatus.executable?b.editable[d]=a:a.status===f.services.lbr.betStatus.executionComplete&&m(a)?b.editable[d]=a:a.status!==f.services.lbr.betStatus.executionComplete||n(a)||(b.fullyMatched[d]=a),c.fromRecord++}),a.moreAvailable&&(b=o(b,c)),b})}function p(a){var b={editable:{},fullyMatched:{}},c={betIds:l(a),fromRecord:0};return b=o(b,c)}function q(a){var b;return a.potentialBets?g.when({success:{placeInstructions:i(a)}}):a.betsToCancel||a.betsToUpdate?p(a).then(function(c){return b={success:{placeInstructions:{},replaceInstructions:{},cancelInstructions:{},updateInstructions:{}},partialOrFullyMatched:{placeInstructions:{},cancelInstructions:{}}},a.betsToCancel&&(b=j(a.betsToCancel,c,b)),a.betsToUpdate&&(b=k(a.betsToUpdate,c,b)),b}):void 0}return{generateInstructions:q}}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("EtxJsonRpcModel",["PlaceBetsRequestModel","ReplaceBetsRequestModel","CancelBetsRequestModel","UpdateBetsRequestModel","BettingService.CONFIG",function(a,b,c,d,e){function f(){this.requests=[]}function g(f,g,h){var i,j,k,l,m=e.services.etx.limits[h+"Limit"],n=[];return angular.forEach(f,function(f,o){for(j=Math.ceil(f.length/m),i=0;j>i;i++)switch(k=i*m,l=Math.min((i+1)*m,f.length),h){case e.services.etx.instructionTypes.place:n.push((new a).mapFromPlaceInstructions(o,f.slice(k,l),g,i));break;case e.services.etx.instructionTypes.replace:n.push((new b).mapFromReplaceInstructions(o,f.slice(k,l),g,i));break;case e.services.etx.instructionTypes.cancel:n.push((new c).mapFromCancelInstructions(o,f.slice(k,l),g,i));break;case e.services.etx.instructionTypes.update:n.push((new d).mapFromUpdateInstructions(o,f.slice(k,l),g,i))}},this),n}function h(a,b){var d=[],e=0;return angular.forEach(a,function(a){d.push((new c).mapFromCancelInstructions(a,null,b,e))},this),d}return f.prototype.generateRequest=function(a,b){return this.requests=this.requests.concat(g(a.placeInstructions,b,e.services.etx.instructionTypes.place)),this.requests=this.requests.concat(g(a.replaceInstructions,b,e.services.etx.instructionTypes.replace)),this.requests=this.requests.concat(g(a.cancelInstructions,b,e.services.etx.instructionTypes.cancel)),this.requests=this.requests.concat(g(a.updateInstructions,b,e.services.etx.instructionTypes.update)),this},f.prototype.generateCancelAllRequest=function(a,b){return h(a,b)},f}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("EditBetsResultModel",["PlaceExecutionReportModel","ReplaceExecutionReportModel","UpdateExecutionReportModel","CancelExecutionReportModel","BettingService.CONFIG",function(a,b,c,d,e){function f(){this.status={code:e.responseStatus.success},this.executions={placeExecutionReport:{},updateExecutionReport:{},cancelExecutionReport:{},replaceExecutionReport:{}}}function g(a,b,c,d,e){var f=a[b].params[0],g=a[b].params[1];c[f]=d.mapFromEtxErrorReport(f,e,g)}function h(a,b,c){return c=c.mapFromEtxExecutionReport(b),a[b.marketId]?a[b.marketId].instructionReports=a[b.marketId].instructionReports.concat(c.instructionReports):a[b.marketId]=c,a}function i(a,b,c){var d=[];return angular.forEach(a,function(a){d.push({instruction:a,status:e.responseStatus.failure,errorCode:c})}),{marketId:b,status:e.responseStatus.failure,errorCode:c,instructionReports:d}}function j(f,g,j,k,l){angular.forEach(f,function(f,m){switch(l){case e.services.etx.instructionTypes.place:g=new a;break;case e.services.etx.instructionTypes.replace:g=new b;break;case e.services.etx.instructionTypes.cancel:g=new d;break;case e.services.etx.instructionTypes.update:g=new c}k=i(f,m,e.bets.errorCodes.betTakenOrLapsed),j=h(j,k,g)})}function k(f,i,k,l){var m,n,o,p=e.services.etx.requestTypeSuffix,q={place:{},update:{},cancel:{},replace:{}};return angular.forEach(f,function(e,f){n=e.result,-1!==e.id.indexOf(p.place)&&(o=new a,m=q.place),-1!==e.id.indexOf(p.update)&&(o=new c,m=q.update),-1!==e.id.indexOf(p.cancel)&&(o=new d,m=q.cancel),-1!==e.id.indexOf(p.replace)&&(o=new b,m=q.replace),e.error?g(i,f,m,o,e):m=h(m,n,o)}),k&&k.placeInstructions&&(m=q.place,j(k.placeInstructions,o,m,n,e.services.etx.instructionTypes.place)),k&&k.cancelInstructions&&(m=q.cancel,j(k.cancelInstructions,o,m,n,e.services.etx.instructionTypes.cancel)),l.status.code=e.responseStatus.success,q}return f.prototype.mapFromEtxEditResult=function(a,b,c){var d=k(a,b,c,this);return this.executions.placeExecutionReport=d.place,this.executions.updateExecutionReport=d.update,this.executions.cancelExecutionReport=d.cancel,this.executions.replaceExecutionReport=d.replace,this},f}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("FetchBetsResultModel",["PlacedBetMarketPositionModel","BettingService.CONFIG",function(a,b){function c(){this.exchangeQueryStatus={code:""},this.exchangeBets={}}return c.prototype.mapLbrResponse=function(c){var d,e;return this.exchangeQueryStatus.code=b.responseStatus.success,angular.forEach(c,function(c){d=new a,e=c.marketId.replace(c.marketId.match(b.exchange.marketPrefixRegex),""),this.exchangeBets[e]=d.mapFromLbrMarketPositionView(c)},this),this},c}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("PlaceBetsResultModel",["PlaceExecutionReportModel","BettingService.CONFIG",function(a,b){function c(){this.exchangeQueryStatus={code:b.responseStatus.success},this.exchangePlaceReport={}}function d(a,b,c,d,e,f){a++;var g=b[c].params[0],h=b[c].params[1];return d[g]=e.mapFromEtxErrorReport(g,f,h),a}function e(a,b,c){return c=c.mapFromEtxExecutionReport(b),a[b.marketId]?a[b.marketId].instructionReports=a[b.marketId].instructionReports.concat(c.instructionReports):a[b.marketId]=c,a}function f(c,f,g){var h,i={},j=0;return angular.forEach(c,function(b,c){var g=b.result;h=new a,b.error?j=d(j,f,c,i,h,b):i=e(i,g,h)},g),j>0&&(g.exchangeQueryStatus.code=j<c.length?b.responseStatus.successWithErrors:b.responseStatus.failure),i}return c.prototype.mapFromEtxPlaceResult=function(a,b){return this.exchangePlaceReport=f(a,b,this),this},c}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("CancelExecutionReportModel",["CancelInstructionReportModel","BettingService.CONFIG",function(a,b){function c(){this.marketId="",this.instructionReports=[],this.status=""}function d(b){var c=[];return angular.forEach(b,function(b){var d=new a;d.mapFromEtxInstructionReport(b),c.push(d)},this),c}function e(b){var c=[];return angular.forEach(b,function(b){var d=new a;d.mapFromEtxErrorInstructionReport(b),c.push(d)},this),c}return c.prototype.mapFromEtxErrorReport=function(a,c,d){return this.marketId=a,this.instructionReports=e(d),this.status=b.responseStatus.failure,this.errorCode=c.error.data[c.error.data.exceptionname].errorCode,this},c.prototype.mapFromEtxExecutionReport=function(a){return this.marketId=a.marketId,this.status=a.status,this.instructionReports=d(a.instructionReports),a.errorCode&&(this.errorCode=a.errorCode),this},c}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("CancelInstructionReportModel",["CancelInstructionModel","BettingService.CONFIG",function(a,b){function c(){this.instruction={},this.status=""}return c.prototype.mapFromEtxInstructionReport=function(b){return this.instruction=(new a).mapFromEtxInstructionModel(b.instruction),b.sizeCancelled&&(this.sizeCancelled=b.sizeCancelled),this.status=b.status,b.errorCode&&(this.errorCode=b.errorCode),this},c.prototype.mapFromEtxErrorInstructionReport=function(c){return this.instruction=(new a).mapFromEtxInstructionModel(c),this.status=b.responseStatus.failure,this.errorCode=b.bets.errorCodes.errorInOrder,this},c}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("CancelInstructionModel",function(){function a(){this.betId=""}return a.prototype.mapFromEtxInstructionModel=function(a){return this.betId=a.betId,a.sizeReduction&&(this.sizeReduction=a.sizeReduction),this},a})}(),function(){"use strict";angular.module("BettingServiceMod").factory("CancelBetsRequestModel",["BettingService.CONFIG",function(a){function b(){this.method="",this.params=[],this.id=""}function c(b,c,d,e){var f=[],g=[];e=e||0;var h=d+"-"+b+a.services.etx.requestTypeSuffix.cancel+"-"+e;return c&&angular.forEach(c,function(a){g.push(a)},this),f[0]=b,f[1]=g,f[2]=h,f}return b.prototype.mapFromCancelInstructions=function(b,d,e,f){return this.method=a.services.etx.methods.cancel,this.params=c(b,d,e,f),this.id=this.id||b+a.services.etx.requestTypeSuffix.cancel,this},b}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("PlaceExecutionReportModel",["PlaceInstructionReportModel","BettingService.CONFIG",function(a,b){function c(){this.marketId="",this.instructionReports=[],this.status=""}function d(b){var c=[];return angular.forEach(b,function(b){var d=new a;d.mapFromEtxInstructionReport(b),c.push(d)},this),c}function e(b){var c=[];return angular.forEach(b,function(b){var d=new a;d.mapFromEtxErrorInstructionReport(b),c.push(d)},this),c}return c.prototype.mapFromEtxErrorReport=function(a,c,d){return this.marketId=a,this.instructionReports=e(d),this.status=b.responseStatus.failure,this.errorCode=c.error.data[c.error.data.exceptionname].errorCode,this},c.prototype.mapFromEtxExecutionReport=function(a){return this.marketId=a.marketId,this.status=a.status,this.instructionReports=d(a.instructionReports),a.errorCode&&(this.errorCode=a.errorCode),this},c}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("PlaceInstructionReportModel",["PlaceInstructionModel","BettingService.CONFIG",function(a,b){function c(){this.status=""}return c.prototype.mapFromEtxInstructionReport=function(c){return c.instruction&&(this.instruction=(new a).mapFromEtxInstructionModel(c.instruction),c.status===b.responseStatus.success&&c.instruction.orderType===b.bets.orderTypes.limit&&(this.averagePriceMatched=c.averagePriceMatched,this.sizeMatched=c.sizeMatched)),c.betId&&(this.betId=c.betId),c.placedDate&&(this.dateMilliseconds=new Date(c.placedDate).getTime()),this.status=c.status,c.errorCode&&(this.errorCode=c.errorCode),this},c.prototype.mapFromEtxErrorInstructionReport=function(c){return this.instruction=(new a).mapFromEtxInstructionModel(c),this.status=b.responseStatus.failure,this.errorCode=b.bets.errorCodes.errorInOrder,this},c}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("PlaceInstructionModel",["BettingService.CONFIG",function(a){function b(){this.selectionId=""}return b.prototype.mapFromEtxInstructionModel=function(a){return this.selectionId=a.selectionId,a.handicap&&(this.handicap=a.handicap),a.limitOrder&&(this.limitOrder=a.limitOrder),a.limitOnCloseOrder&&(this.limitOnCloseOrder=a.limitOnCloseOrder),a.marketOnCloseOrder&&(this.marketOnCloseOrder=a.marketOnCloseOrder),this.orderType=a.orderType,this.side=a.side,this},b.prototype.mapFromPotentialBet=function(b){switch(this.selectionId=b.selectionId,this.handicap=b.asianHandicap,b.orderType){case a.bets.orderTypes.limit:this.limitOrder={size:b.size,price:b.price,persistenceType:b.persistenceType||a.services.lbr.persistenceType.lapse};break;case a.bets.orderTypes.limitOnClose:this.limitOnCloseOrder={liability:b.size,price:b.oddsLimit};break;case a.bets.orderTypes.marketOnClose:this.marketOnCloseOrder={liability:b.size}}return this.orderType=b.orderType,this.side=b.side,this},b}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("PlaceBetsRequestModel",["BettingService.CONFIG",function(a){function b(){this.method="",this.params=[],this.id=""}function c(b,c,d,e){var f=[],g=[];e=e||0;var h=d+"-"+b+a.services.etx.requestTypeSuffix.place+"-"+e;return angular.forEach(c,function(a){g.push(a)},this),f[0]=b,f[1]=g,f[2]=h,f}return b.prototype.mapFromPlaceInstructions=function(b,d,e,f){return this.method=a.services.etx.methods.place,this.params=c(b,d,e,f),this.id=this.id||b+a.services.etx.requestTypeSuffix.place,this},b}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("ReplaceExecutionReportModel",["ReplaceInstructionReportModel","CancelInstructionReportModel","BettingService.CONFIG",function(a,b,c){function d(){this.marketId="",this.instructionReports=[],this.status=""}function e(b,c){var d=[];return angular.forEach(b,function(b){d.push((new a).mapFromEtxInstructionReport(b))},c),d}function f(a){var c=[];return angular.forEach(a,function(a){
var d=new b;d.mapFromEtxErrorInstructionReport(a),c.push(d)},this),c}return d.prototype.mapFromEtxErrorReport=function(a,b,d){return this.marketId=a,this.instructionReports=f(d),this.status=c.responseStatus.failure,this.errorCode=b.error.data[b.error.data.exceptionname].errorCode,this},d.prototype.mapFromEtxExecutionReport=function(a){return this.marketId=a.marketId,this.status=a.status,this.instructionReports=e(a.instructionReports,this),a.errorCode&&(this.errorCode=a.errorCode),this},d}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("ReplaceInstructionReportModel",["CancelInstructionReportModel","PlaceInstructionReportModel",function(a,b){function c(){this.cancelInstructionReport="",this.placeInstructionReport="",this.status=""}return c.prototype.mapFromEtxInstructionReport=function(c){return this.cancelInstructionReport=(new a).mapFromEtxInstructionReport(c.cancelInstructionReport),this.placeInstructionReport=(new b).mapFromEtxInstructionReport(c.placeInstructionReport),this.status=c.status,c.errorCode&&(this.errorCode=c.errorCode),this},c}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("ReplaceInstructionModel",[function(){function a(){this.betId="",this.newPrice=""}return a.prototype.mapFromModelBet=function(a){return this.betId=a.betId,a.oddsLimit&&a.oddsLimit>0?this.newPrice=a.oddsLimit:this.newPrice=a.price,this},a}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("ReplaceBetsRequestModel",["BettingService.CONFIG",function(a){function b(){this.method="",this.params=[],this.id=""}function c(b,c,d,e){var f=[],g=[];e=e||0;var h=d+"-"+b+a.services.etx.requestTypeSuffix.replace+"-"+e;return angular.forEach(c,function(a){g.push(a)},this),f[0]=b,f[1]=g,f[2]=h,f}return b.prototype.mapFromReplaceInstructions=function(b,d,e,f){return this.method=a.services.etx.methods.replace,this.params=c(b,d,e,f),this.id=this.id||b+a.services.etx.requestTypeSuffix.replace,this},b}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("UpdateExecutionReportModel",["UpdateInstructionReportModel","BettingService.CONFIG",function(a,b){function c(){this.marketId="",this.instructionReports=[],this.status=""}function d(b){var c=[];return angular.forEach(b,function(b){var d=new a;d.mapFromEtxInstructionReport(b),c.push(d)},this),c}function e(b){var c=[];return angular.forEach(b,function(b){var d=new a;d.mapFromEtxErrorInstructionReport(b),c.push(d)},this),c}return c.prototype.mapFromEtxErrorReport=function(a,c,d){return this.marketId=a,this.instructionReports=e(d),this.status=b.responseStatus.failure,this.errorCode=c.error.data[c.error.data.exceptionname].errorCode,this},c.prototype.mapFromEtxExecutionReport=function(a){return this.marketId=a.marketId,this.status=a.status,this.instructionReports=d(a.instructionReports),a.errorCode&&(this.errorCode=a.errorCode),this},c}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("UpdateInstructionReportModel",["UpdateInstructionModel","BettingService.CONFIG",function(a,b){function c(){this.instruction={},this.status=""}return c.prototype.mapFromEtxInstructionReport=function(b){return this.instruction=(new a).mapFromEtxInstructionModel(b.instruction),this.status=b.status,b.errorCode&&(this.errorCode=b.errorCode),this},c.prototype.mapFromEtxErrorInstructionReport=function(c){return this.instruction=(new a).mapFromEtxInstructionModel(c),this.status=b.responseStatus.failure,this.errorCode=b.bets.errorCodes.errorInOrder,this},c}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("UpdateInstructionModel",function(){function a(){this.betId="",this.newPersistenceType=""}return a.prototype.mapFromEtxInstructionModel=function(a){return this.betId=a.betId,this.newPersistenceType=a.newPersistenceType,this},a.prototype.mapFromBetToUpdate=function(a){return this.betId=a.betId,this.newPersistenceType=a.newPersistenceType,this},a})}(),function(){"use strict";angular.module("BettingServiceMod").factory("UpdateBetsRequestModel",["BettingService.CONFIG",function(a){function b(){this.method="",this.params=[],this.id=""}function c(b,c,d,e){var f=[],g=[];e=e||0;var h=d+"-"+b+a.services.etx.requestTypeSuffix.update+"-"+e;return angular.forEach(c,function(a){g.push(a)},this),f[0]=b,f[1]=g,f[2]=h,f}return b.prototype.mapFromUpdateInstructions=function(b,d,e,f){return this.method=a.services.etx.methods.update,this.params=c(b,d,e,f),this.id=this.id||b+a.services.etx.requestTypeSuffix.update,this},b}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("LbrBetModel",["BettingService.CONFIG",function(a){function b(){this.marketId="",this.matched=!1,this.selectionId=0,this.price=0,this.size=0,this.betType="",this.betCategoryType="",this.betID=0,this.dateMilliseconds=0}return b.prototype.mapFromLiveOrderSummary=function(b){this.marketId=b.marketId.replace(b.marketId.match(a.exchange.marketPrefixRegex),""),this.matched=!1,this.selectionId=b.selectionId,this.price=b.price,this.size=b.sizeRemaining>0?b.sizeRemaining:b.size,this.dateMilliseconds=new Date(b.placedDate).getTime(),this.betType=b.side===a.services.lbr.side.back?a.services.lbr.betType.back:a.services.lbr.betType.lay,this.betID=parseInt(b.betId.replace(b.betId.match(a.exchange.betPrefixRegex),""),10),this.betCategoryType=a.services.lbr.categoryType.exchange,this.handicap=b.handicap,this.bspLiability=b.bspLiability,b.persistenceType&&(this.betPersistenceType=b.persistenceType),b.bspLiability>0&&(this.betCategoryType=b.orderType===a.bets.orderTypes.marketOnClose?a.services.lbr.categoryType.marketOnClose:a.services.lbr.categoryType.limitOnClose,this.size=this.bspLiability)},b.prototype.mapFromLbrMatch=function(b,c,d){this.marketId=b.replace(b.match(a.exchange.marketPrefixRegex),""),this.matched=!0,this.selectionId=c.selectionId,this.price=d.price,this.size=d.size,this.handicap=c.hasOwnProperty("handicap")?c.handicap:0,this.betType=d.side===a.services.lbr.side.back?a.services.lbr.betType.back:a.services.lbr.betType.lay,this.betCategoryType=d.isBSP?a.services.lbr.categoryType.marketOnClose:a.services.lbr.categoryType.exchange,d.isBSP&&(d.side===a.services.lbr.side.back?this.bspLiability=d.size:(this.bspLiability=d.size*(d.price-1),this.sizeMatched=this.size,this.size=this.bspLiability)),d.hasOwnProperty("matchId")&&(this.matchId=parseInt(d.matchId,10)),d.hasOwnProperty("betId")&&(this.betID=parseInt(d.betId.replace(d.betId.match(a.exchange.betPrefixRegex),""),10)),d.hasOwnProperty("matchDate")&&(this.dateMilliseconds=new Date(d.matchDate).getTime())},b}])}(),function(){"use strict";angular.module("BettingServiceMod").factory("LbrBetsModel",function(){function a(){this.betList=[]}return a.prototype.addLbrBet=function(a){this.betList.push(a)},a})}(),function(){"use strict";angular.module("BettingServiceMod").factory("PlacedBetMarketPositionModel",["LbrBetsModel","LbrBetModel","BettingService.CONFIG",function(a,b,c){function d(){this.unmatchedBets={},this.matchedBets={},this.bspBets={}}function e(a){var b=c.bets.rollupType,d=c.bets.fetchParameters.openBetsLimit,e=a.projectionStats;return e[b.match]>d&&e[b.price]>d?b.averagePrice:e[b.match]>d&&e[b.price]<=d?b.price:b.match}return d.prototype.mapFromLbrMarketPositionView=function(d){var f,g,h,i;return g=new a,h=new a,i=new a,g.isConsolidated=d.matchProjection!==c.bets.rollupType.match,g.settledProfit=d.settledProfit||0,g.rollUp=d.matchProjection,g.minRollUp=e(d),angular.forEach(d.selections,function(a){angular.forEach(a.orders,function(a){a.sizeRemaining>0?(f=new b,f.mapFromLiveOrderSummary(a),h.addLbrBet(f)):a.bspLiability>0&&0===a.averagePriceMatched&&(f=new b,f.mapFromLiveOrderSummary(a),i.addLbrBet(f))},this),angular.forEach(a.matches,function(c){f=new b,f.mapFromLbrMatch(d.marketId,a,c),c.isBSP?i.addLbrBet(f):g.addLbrBet(f)},this)},this),this.matchedBets=g,this.unmatchedBets=h,this.bspBets=i,this},d}])}(),function(){"use strict";angular.module("BettingServiceMod").constant("BettingService.CONFIG",{exchange:{marketPrefixRegex:"\\d+\\.",betPrefix:"1:",betPrefixRegex:"\\d+\\:"},responseStatus:{success:"SUCCESS",successWithErrors:"SUCCESS_WITH_ERRORS",failure:"FAILURE",error:"ERROR"},services:{lbr:{client:{host:"",port:"",path:"/api/sports/exchange/reporting/live/v1.0",timeout:2e3},categoryType:{exchange:"E",marketOnClose:"M",limitOnClose:"L"},side:{back:"BACK",lay:"LAY"},betType:{back:"B",lay:"L"},persistenceType:{lapse:"LAPSE",persist:"PERSIST",marketOnClose:"MARKET_ON_CLOSE"},betStatus:{executable:"EXECUTABLE",executionComplete:"EXECUTION_COMPLETE"},errorCodes:{queryDataValidation:"QUERY_DATA_VALIDATION"}},etx:{client:{jsonRpc:{host:"",port:"",path:"/api/etx-json-rpc",legacy:!0}},methods:{place:"ExchangeTransactional/v1.0/place",update:"ExchangeTransactional/v1.0/update",replace:"ExchangeTransactional/v1.0/replace",cancel:"ExchangeTransactional/v1.0/cancel"},limits:{placeLimit:300,replaceLimit:60,updateLimit:60,cancelLimit:60},instructionTypes:{place:"place",replace:"replace",cancel:"cancel",update:"update"},requestTypeSuffix:{place:"-plc",replace:"-rpl",update:"-upd",cancel:"-cnl"}}},bets:{types:{back:"back",lay:"lay",sp:"sp"},orderTypes:{limit:"LIMIT",limitOnClose:"LIMIT_ON_CLOSE",marketOnClose:"MARKET_ON_CLOSE"},persistenceTypes:{lapse:"LAPSE",keep:"PERSIST",takeSP:"MARKET_ON_CLOSE"},rollupType:{match:"MATCH",averagePrice:"AVG_PRICE",price:"PRICE"},reportStatus:{update:"UPDATE",cancel:"CANCEL",replace:"REPLACE_UNMATCHED",replaceMatched:"REPLACE_MATCHED",place:"PLACE",stakeReduced:"STAKE_REDUCED",placingPartiallyMatched:"PLACING_PARTIALLY_MATCHED",partiallyMatched:"PARTIALLY_MATCHED"},fetchParameters:{openBetsLimit:200,betsOrderType:"RUNNER"},errorCodes:{"default":"DEFAULT",errorInOrder:"ERROR_IN_ORDER",betActionError:"BET_ACTION_ERROR",insufficientFunds:"INSUFFICIENT_FUNDS",marketSuspended:"MARKET_SUSPENDED",invalidPersistenceType:"INVALID_PERSISTENCE_TYPE",betTakenOrLapsed:"BET_TAKEN_OR_LAPSED",invalidRunner:"INVALID_RUNNER",lossLimitExceeded:"LOSS_LIMIT_EXCEEDED",cancelledNotPlaced:"CANCELLED_NOT_PLACED",marketNotOpenForBetting:"MARKET_NOT_OPEN_FOR_BETTING",rejectedByRegulator:"REJECTED_BY_REGULATOR",permissionDenied:"PERMISSION_DENIED",invalidAccountState:"INVALID_ACCOUNT_STATE",timeout:"TIMEOUT"}}})}(),function(){"use strict";angular.module("BettingServiceMod").provider("BettingService",["BettingService.CONFIG",function(a){this.setOpenBetsLimit=function(b){a.bets.fetchParameters.openBetsLimit=b},this.$get=["$q","BF.LiveBetReportingClient","ExchangeTransactionalClient","EtxJsonRpcModel","InstructionsHelper","PlaceBetsResultModel","FetchBetsResultModel","EditBetsResultModel","CancelAllResultModel","BettingService.CONFIG",function(a,b,c,d,e,f,g,h,i,j){function k(a){var b={MATCH:0,PRICE:0,AVG_PRICE:0};return angular.forEach(a,function(a){Object.keys(a.projectionStats).forEach(function(c){b[c]+=a.projectionStats[c]})},this),b}function l(c,d){var e,f,h=a.defer(),i=new g,l=j.bets.rollupType,m=d||{matchProjection:l.match};return b.getMarketPositionViews(c,m).then(function(a){e=k(a),f=j.bets.fetchParameters.openBetsLimit,m.matchProjection!==l.averagePrice&&e[l.match]>f&&e[l.price]>f?(m.matchProjection=l.averagePrice,b.getMarketPositionViews(c,m).then(function(a){h.resolve(i.mapLbrResponse(a))},function(){i.exchangeQueryStatus.code=j.responseStatus.failure,h.reject(i)})):m.matchProjection===l.match&&e[l.match]>f&&e[l.price]<=f?(m.matchProjection=l.price,b.getMarketPositionViews(c,m).then(function(a){h.resolve(i.mapLbrResponse(a))},function(){i.exchangeQueryStatus.code=j.responseStatus.failure,h.reject(i)})):h.resolve(i.mapLbrResponse(a))},function(){i.exchangeQueryStatus.code=j.responseStatus.failure,h.reject(i)}),h.promise}function m(a){var b=new f,g=[];return angular.forEach(a.potentialBets,function(a){g=g.concat(a)}),e.generateInstructions(a).then(function(b){return(new d).generateRequest(b.success,a.deDupToken)}).then(function(a){return c.jsonRpc(a.requests).then(function(c){return b.mapFromEtxPlaceResult(c,a.requests)})["catch"](function(){return b.exchangeQueryStatus.code=j.responseStatus.failure,b})})}function n(a){var b,f,g=new h,i=new d;return e.generateInstructions(a).then(function(d){return b={},b.etxRequest=i.generateRequest(d.success,a.deDupToken),b.etxRequest.requests&&!b.etxRequest.requests.length?(g=g.mapFromEtxEditResult([],b.etxRequest.requests,d.partialOrFullyMatched),g.status.code=j.responseStatus.success,g):c.jsonRpc(b.etxRequest.requests).then(function(a){return g.mapFromEtxEditResult(a,b.etxRequest.requests,d.partialOrFullyMatched)})["catch"](function(){return g.status.code=j.responseStatus.failure,g})})["catch"](function(a){return a&&a.detail&&a.detail.exceptionname?(f=a.detail.exceptionname,g.status.message=a.detail[f].errorCode,g.status.code=j.services.lbr.errorCodes.queryDataValidation):g.status.code=j.responseStatus.failure,g})}function o(a,b){var e=new i,f=new d,g=f.generateCancelAllRequest(a,b);return c.jsonRpc(g).then(function(a){return e.mapFromEtxResult(a,g)},function(){return e.status.code=j.responseStatus.failure,e})}return{fetchBets:l,placeBets:m,editBets:n,cancelAll:o}}]}])}(),function(){"use strict";angular.module("ExchangeTransactionalClientMod",["betfair.extensions"]).provider("ExchangeTransactionalClient",function(){var a=0,b={};this.setHttpTimeout=function(b){a=b},this.setEndpoint=function(a){b.endpoint=a},this.$get=["BF.Rescript",function(c){function d(d){var e,f=[];try{e=angular.copy(b.endpoint)}catch(g){throw new Error("Check ETX client configuration")}e.timeout=a,angular.forEach(d,function(a){f.push(angular.extend(a,{jsonrpc:"2.0"}))},this);var h={method:"POST",data:f};return c.makeRequest(e,h)}return{jsonRpc:d}}]})}(),!function r(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,r,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){"use strict";function d(a){var b={};return a.forEach(function(a){var c=b[a.marketId]=b[a.marketId]||{},d=c[a.selectionId]=c[a.selectionId]||{};a.orderType===i.BET.ORDER_TYPES.LIMIT?0===a.sizeRemaining?(d.matched=d.matched||[],d.matched.push({id:a.betId,price:a.price,size:a.size,side:a.side,orderType:a.orderType,selectionId:a.selectionId,handicap:a.handicap})):a.size===a.sizeRemaining?(d.unmatched=d.unmatched||[],d.unmatched.push({id:a.betId,price:a.price,size:a.size,side:a.side,orderType:a.orderType,selectionId:a.selectionId,handicap:a.handicap})):(d.matched=d.matched||[],d.unmatched=d.unmatched||[],d.matched.push({id:a.betId,price:a.price,size:a.sizeMatched,side:a.side,orderType:a.orderType,selectionId:a.selectionId,handicap:a.handicap}),d.unmatched.push({id:a.betId,price:a.price,size:a.sizeRemaining,side:a.side,orderType:a.orderType,selectionId:a.selectionId,handicap:a.handicap})):a.orderType!==i.BET.ORDER_TYPES.MARKET_ON_CLOSE&&a.orderType!==i.BET.ORDER_TYPES.LIMIT_ON_CLOSE||(d.sp=d.sp||[],d.sp.push({id:a.betId,price:0!==a.averagePriceMatched?a.averagePriceMatched:void 0,priceLimit:0!==a.price?a.price:void 0,size:0!==a.sizeMatched?a.sizeMatched:void 0,spLiability:a.bspLiability,side:a.side,orderType:a.orderType,selectionId:a.selectionId,handicap:a.handicap}))}),b}function e(a){switch((0,l.getBetType)(a)){case i.BET.TYPE.RECONCILED_SP:case i.BET.TYPE.MATCHED:case i.BET.TYPE.UNMATCHED:case i.BET.TYPE.POTENTIAL:f(a);break;case i.BET.TYPE.POTENTIAL_SP:g(a,a.getPriceLimit());break;case i.BET.TYPE.SP:if(a.getOrderType()!==i.BET.ORDER_TYPES.LIMIT_ON_CLOSE)throw new Error(a.getOrderType()+" SP bet cannot be updated.\n                Only SP LIMIT_ON_CLOSE can be updated");g(a,a.getCurrentPriceLimit())}}function f(a){var b=(0,j.isFunction)(a.getCurrentPrice)?a.getCurrentPrice():a.getPrice(),c=(0,j.isFunction)(a.getCurrentSize)?a.getCurrentSize():a.getSize(),d=a.getSide(),e=void 0,f=void 0,g=void 0;b&&c&&(e=(0,k.calculateProfit)(d,b,c),f=(0,k.calculateLiability)(d,b,c),g=(0,k.calculatePayout)(b,c)),a.setProfit(e),a.setLiability(f),a.setPayout(g)}function g(a,b){var c=void 0;b&&a.getSPLiability()&&(c=(0,k.calculateSPMinProfit)(a.getSide(),b,a.getSPLiability())),a.setMinProfit(c)}function h(a){return!!(a.back&&a.lay&&a.lay.price>=a.back.price)}Object.defineProperty(c,"__esModule",{value:!0}),c.areRunnerPotentialBetsCrossMatching=c.updateBet=c.mapLBROrdersToOpenBets=void 0;var i=a("../../config"),j=a("./../../utils/validations"),k=a("./../../business-logic/pnl"),l=a("./../../models/bet");c.mapLBROrdersToOpenBets=d,c.updateBet=e,c.areRunnerPotentialBetsCrossMatching=h},{"../../config":28,"./../../business-logic/pnl":24,"./../../models/bet":44,"./../../utils/validations":71}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){(0,l.assertIsObject)(a,"discountOptions");var b={};return(0,h.isDefined)(a.marketBaseRate)?((0,l.assertIsNotNegative)(a.marketBaseRate,"discountOptions.marketBaseRate"),b.marketBaseRate=a.marketBaseRate):b.marketBaseRate=0,(0,h.isDefined)(a.discount)?((0,l.assertIsNotNegative)(a.discount,"discountOptions.discount"),b.discount=a.discount):b.discount=0,(0,h.isDefined)(a.settledProfit)?((0,l.assertIsNumber)(a.settledProfit,"discountOptions.settledProfit"),b.settledProfit=a.settledProfit):b.settledProfit=0,b}function f(a,b,c){(0,l.assertIsInstanceOf)(a,"market",j["default"]),(0,l.assertIsNotNegative)(b,"userDiscount");var d={marketBaseRate:0,userDiscount:0,settledProfit:0},e=c||{};return e.applyCommission&&(d.marketBaseRate=a.getBaseRate(),d.userDiscount=a.hasDiscountAllowed()?b:0),e.applySettledProfit&&(d.settledProfit=a.getSettledProfit()),d}function g(a,b,c){return function(d){return(0,k.applyDiscounts)(d,a,b,c)}}Object.defineProperty(c,"__esModule",{value:!0}),c.discountWith=c.getDiscountValues=c.getValidDiscountOptions=void 0;var h=a("../../utils/validations"),i=a("./../../models/market/market"),j=d(i),k=a("./../../business-logic/pnl"),l=a("../../utils/assertions");c.getValidDiscountOptions=e,c.getDiscountValues=f,c.discountWith=g},{"../../utils/assertions":66,"../../utils/validations":71,"./../../business-logic/pnl":24,"./../../models/market/market":58}],3:[function(a,b,c){"use strict";function d(a){return(0,u.filter)(a,function(a){return(a.hasPriceChanged()||a.hasSizeChanged())&&a.hasCurrentPriceAndSizeDefined()})}function e(a){var b={};return a.back&&a.back.hasPriceAndSizeDefined()&&(b.back=a.back),a.lay&&a.lay.hasPriceAndSizeDefined()&&(b.lay=a.lay),b}function f(a){return(0,w.isDefined)(a.getSPLiability())&&(a.getOrderType()===v.BET.ORDER_TYPES.MARKET_ON_CLOSE||(0,w.isDefined)(a.getPriceLimit()))}function g(a){var b={};return a.back&&f(a.back)&&(b.back=a.back),a.lay&&f(a.lay)&&(b.lay=a.lay),b}function h(a){return{price:a.getPrice(),size:a.getSize()}}function i(a){return{spLiability:a.getSPLiability()}}function j(a){return{liability:a.getLiability()}}function k(a){var b=(0,t.map)(a.getRunners(),function(a){return a.getPotentialBetsBySide()}),c=(0,t.map)(b,e);return(0,t.map)(c,function(a){return{back:a.back?h(a.back):void 0,lay:a.lay?h(a.lay):void 0}})}function l(a){var b=a.getRunners(),c=(0,t.map)(b,function(a){return a.getPotentialBetsBySide()}),d=(0,t.map)(b,function(a){return a.getPotentialSPBetsBySide()});return(0,t.map)(b,function(a){var b=a.getId(),e={back:[],lay:[]},f=c[b].back,g=c[b].lay;f&&f.hasPriceAndSizeDefined()&&e.back.push(j(f)),g&&g.hasPriceAndSizeDefined()&&e.lay.push(j(g));var h=d[b].back,k=d[b].lay;return h&&h.getSPLiability()&&e.back.push(i(h)),k&&k.getSPLiability()&&e.lay.push(i(k)),e})}function m(a){return(0,t.map)(a.getRunners(),function(a){return{back:a.getMatchedBackBets().concat(a.getReconciledSPBackBets()).map(h),lay:a.getMatchedLayBets().concat(a.getReconciledSPLayBets()).map(h)}})}function n(a,b){return!((0,w.isDefined)(b.size)&&b.size!==(0,w.isDefined)(a.getSize())||(0,w.isDefined)(b.price)&&b.price!==(0,w.isDefined)(a.getPrice()))}function o(a,b,c){b=b||{};var d=(0,t.map)(a.getRunners(),function(a){return a.getPotentialBetsBySide()}),e={};return(0,t.forOwn)(d,function(a,d){var f=void 0,g=void 0;!a.back||b.side&&b.side!==v.BET.SIDE.BACK||!n(a.back,b)||(f=h(a.back)),!a.lay||b.side&&b.side!==v.BET.SIDE.LAY||!n(a.lay,b)||(g=h(a.lay)),(c||f||g)&&(e[d]={back:f||void 0,lay:g||void 0})}),e}function p(a){var b=[];return(0,t.forOwn)(a.getRunners(),function(a){b.push(a.getHandicap())}),a.getBettingBehaviour()===v.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE?(0,B.buildHandicapLimits)((0,u.unique)(b)):a.getBettingBehaviour()===v.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS?(0,C.buildHandicapLimits)((0,u.unique)(b)):(0,A.buildHandicapLimits)((0,u.unique)(b))}function q(a){return(0,t.reduce)(a,function(a,b){var c=b.getMatchedBets().map(function(a){var c=b.getPosition().getOpenBetCalculations(a.getId());return c.getExposureByOutcome()});return a.concat(c)},[])}function r(a){return(0,t.reduce)(a,function(a,b){var c=b.getUnmatchedBets().map(function(a){var c=b.getPosition().getOpenBetCalculations(a.getId());return c.getExposureByOutcome()});return a.concat(c)},[])}function s(a,b){var c,d=a.getPosition(),e=a.getBettingBehaviour();if(D.indexOf(e)===-1)throw new Error("betting behaviour not supported: "+e);if(b.bookPercentage&&(b.bookPercentage.back||b.bookPercentage.lay)){c=k(a);var f=(0,z.calculateBookPercentage)(c);b.bookPercentage.back&&a.getPosition().setBackBookPercentage(f.back),b.bookPercentage.lay&&a.getPosition().setLayBookPercentage(f.lay)}switch(e){case v.BETTING_BEHAVIOUR.ODDS_GENERIC:if(b.potentialExposure){c=l(a);var g=(0,x.calculateRunnersExposure)(c),h=(0,x.calculateMarketExposure)(g,a.getNumberOfWinners(),a.isComplete());d.setPotentialExposure(h)}break;case v.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE:case v.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE:case v.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS:if(b.pnlTable){var i=p(a),j=q(a.getRunners()),m=r(a.getRunners()),n=(0,y.calculatePnlTable)(j,i),o=(0,y.calculateWorstCasePnlTable)(j,m,i);d.setPnlTable(n),d.setWorstCasePnlTable(o)}}}Object.defineProperty(c,"__esModule",{value:!0}),c.getMarketHandicapLimits=c.recalculateMarketPosition=c.extractPriceAndSize=c.filterRunnerUnmatchedBetsWithPriceAndSize=c.filterRunnerPotentialSPPlaceableBets=c.filterRunnerPotentialBetsWithPriceAndSize=c.extractMatchedAndSPReconciledBets=c.extractPotentialBetsWithPriceAndSize=c.extractPotentialBets=void 0;var t=a("mout/object"),u=a("mout/array"),v=a("./../../config"),w=a("./../../utils/validations"),x=a("./../../business-logic/exposure"),y=a("./../../business-logic/asian-handicap/pnl-table.js"),z=a("./../../business-logic/book-percentage"),A=a("./../../business-logic/asian-handicap-single-line/bet-exposure"),B=a("./../../business-logic/asian-handicap-double-line/bet-exposure"),C=a("./../../business-logic/spreads-and-totals/bet-exposure"),D=[v.BETTING_BEHAVIOUR.ODDS_GENERIC,v.BETTING_BEHAVIOUR.ODDS_EACH_WAY,v.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE,v.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE,v.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS];c.extractPotentialBets=o,c.extractPotentialBetsWithPriceAndSize=k,c.extractMatchedAndSPReconciledBets=m,c.filterRunnerPotentialBetsWithPriceAndSize=e,c.filterRunnerPotentialSPPlaceableBets=g,c.filterRunnerUnmatchedBetsWithPriceAndSize=d,c.extractPriceAndSize=h,c.recalculateMarketPosition=s,c.getMarketHandicapLimits=p},{"./../../business-logic/asian-handicap-double-line/bet-exposure":15,"./../../business-logic/asian-handicap-single-line/bet-exposure":16,"./../../business-logic/asian-handicap/pnl-table.js":17,"./../../business-logic/book-percentage":18,"./../../business-logic/exposure":22,"./../../business-logic/spreads-and-totals/bet-exposure":25,"./../../config":28,"./../../utils/validations":71,"mout/array":78,"mout/object":168}],4:[function(a,b,c){"use strict";function d(a,b){b.runnerPosition&&(0,f.recalculateRunnersPositions)(a,b.runnerPosition),b.marketPosition&&(0,e.recalculateMarketPosition)(a,b.marketPosition)}Object.defineProperty(c,"__esModule",{value:!0}),c.recalculatePositions=void 0;var e=a("./market"),f=a("./runner");c.recalculatePositions=d},{"./market":3,"./runner":5}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=void 0,d=void 0;b.getOrderType()===z.BET.ORDER_TYPES.LIMIT||b instanceof y.ReconciledSPBet?(c=b.getProfit(),d=b.getLiability()):(c=b.getMinProfit(),d=b.getSPLiability()),(0,A.isDefined)(d)&&(d=-d),b.isBack()?(a.setWin(c),a.setLose(d)):(a.setWin(d),a.setLose(c))}function f(a,b,c){var d=void 0;b.hasPriceAndSizeDefined()&&(d=(0,E.calculateBetTotalExposure)(b.getPrice(),b.getSize(),b.getSide(),(0,y.getBetType)(b),c.runnerHandicap,c.handicapLimits)),a.setExposureByOutcome(d)}function g(a,b,c){var d=c.eachWayDivisor,e=(0,D.calculateEachWayWhatIfWin)(b.getSide(),b.getPrice(),b.getSize(),d),f=(0,D.calculateEachWayWhatIfPlaced)(b.getSide(),b.getPrice(),b.getSize(),d),g=(0,D.calculateEachWayWhatIfUnplaced)(b.getSide(),b.getSize());a.setWin(e),a.setPlaced(f),a.setLose(g)}function h(a,b,c){var d=void 0;b.hasPriceAndSizeDefined()&&(d=(0,F.calculateBetTotalExposure)(b.getPrice(),b.getSize(),b.getSide(),(0,y.getBetType)(b),c.runnerSide,c.runnerHandicap,c.handicapLimits)),a.setExposureByOutcome(d)}function i(a,b,c){var d=void 0;e(a,b),b.hasPriceAndSizeDefined()&&(d=(0,G.calculateBetTotalExposure)(b.getPrice(),b.getSize(),b.getSide(),(0,y.getBetType)(b),c.runnerSide,c.runnerHandicap,c.handicapLimits,c.marketType)),a.setExposureByOutcome(d)}function j(a,b,c,d){switch(c){case z.BETTING_BEHAVIOUR.ODDS_GENERIC:e(a,b);break;case z.BETTING_BEHAVIOUR.ODDS_EACH_WAY:g(a,b,d);break;case z.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE:f(a,b,d);break;case z.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE:h(a,b,d);break;case z.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS:i(a,b,d);break;default:throw new Error("Unsupported betting behaviour: "+c)}}function k(a,b){switch(a.getBettingBehaviour()){case z.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE:return{runnerHandicap:b.getHandicap()};case z.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE:return{runnerSide:b.isHome()?z.RUNNER.SIDE.HOME:z.RUNNER.SIDE.AWAY,runnerHandicap:b.getHandicap()};case z.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS:return{runnerSide:b.isHome()?z.RUNNER.SIDE.HOME:z.RUNNER.SIDE.AWAY,runnerHandicap:b.getHandicap()}}return{}}function l(a){switch(a.getBettingBehaviour()){case z.BETTING_BEHAVIOUR.ODDS_EACH_WAY:return{eachWayDivisor:a.getEachWayDivisor()};case z.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE:return{handicapLimits:(0,B.getMarketHandicapLimits)(a)};case z.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE:return{handicapLimits:(0,B.getMarketHandicapLimits)(a)};case z.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS:return{handicapLimits:(0,B.getMarketHandicapLimits)(a),marketType:a.getType()}}return{}}function m(a){return!!a.betCalculations&&(a.betCalculations.potential||a.betCalculations.potentialSp)}function n(a){return!!a.betCalculations&&(a.betCalculations.matched||a.betCalculations.unmatched||a.betCalculations.sp||a.betCalculations.reconciledSp)}function o(a,b,c){return function(d){var e=(0,y.getBetType)(d)===z.BET.TYPE.POTENTIAL?z.BET.CATEGORY_TYPES.EXCHANGE:z.BET.CATEGORY_TYPES.SP,f=a.getPotentialBetCalculations(d.getSide(),e);j(f,d,b,c)}}function p(a,b,c){return function(d){var e=a.getOpenBetCalculations(d.getId());return j(e,d,b,c),e}}function q(a){return(0,v.map)(a,function(a){var b=a.getPosition(),c=a.getMatchedBets().concat(a.getReconciledSPBets());return c.map(function(a){var c=b.getOpenBetCalculations(a.getId());return(0,x["default"])(c)})})}function r(a){return(0,v.map)(a,function(a){var b=a.getPosition();return a.getPotentialBets().filter(function(a){return(0,A.isDefined)(a)}).map(function(a){var c=b.getPotentialBetCalculations(a.getSide(),z.BET.CATEGORY_TYPES.EXCHANGE);return(0,x["default"])(c)})})}function s(a,b){var c=a.getRunners(),d=a.getBettingBehaviour();if(m(b)&&!function(){var e=l(a);(0,v.forOwn)(c,function(c){var f=[];b.betCalculations.potential&&(f=c.getPotentialBets()),b.betCalculations.potentialSp&&(0,u["default"])(f,(0,v.values)(c.getPotentialSPBets()).filter(function(a){return(0,A.isDefined)(a)}));var g=k(a,c),h=(0,v.mixIn)(e,g),i=o(c.getPosition(),d,h);f.forEach(i)})}(),n(b)&&!function(){var e=l(a);(0,v.forOwn)(c,function(c){var f=[];b.betCalculations.matched&&(f=c.getMatchedBets()),b.betCalculations.unmatched&&(0,u["default"])(f,c.getUnmatchedBets()),b.betCalculations.sp&&(0,u["default"])(f,c.getSPBets()),b.betCalculations.reconciledSp&&(0,u["default"])(f,c.getReconciledSPBets());var g=k(a,c),h=(0,v.mixIn)(e,g),i=p(c.getPosition(),d,h);f.forEach(i)})}(),d!==z.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE&&d!==z.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE&&(b.potentialPnl||b.actualPnl||b.whatIf)){var e=d===z.BETTING_BEHAVIOUR.ODDS_EACH_WAY,f=r(c,d),g=(0,C.calculateRunnersPnl)(f,a.getNumberOfWinners(),e,d,a.getType()),h=q(c,d),i=(0,C.calculateRunnersPnl)(h,a.getNumberOfWinners(),e,d,a.getType()),j=(0,C.calculateRunnersWhatIf)(i,g,e);(0,v.forOwn)(c,function(a,b){var c=a.getPosition();c.setPotentialPnl(g[b]),c.setActualPnl(i[b]),c.setWhatIf(j[b])})}}Object.defineProperty(c,"__esModule",{value:!0}),c.recalculateRunnersPositions=void 0;var t=a("mout/array/append"),u=d(t),v=a("mout/object"),w=a("./../../models/bet-calculations/bet-calculations-literal-builder"),x=d(w),y=a("./../../models/bet"),z=a("./../../config"),A=a("./../../utils/validations"),B=a("./../helpers/market"),C=a("./../../business-logic/pnl"),D=a("./../../business-logic/each-way/pnl"),E=a("./../../business-logic/asian-handicap-single-line/bet-exposure"),F=a("./../../business-logic/asian-handicap-double-line/bet-exposure"),G=a("./../../business-logic/spreads-and-totals/bet-exposure");c.recalculateRunnersPositions=s},{"./../../business-logic/asian-handicap-double-line/bet-exposure":15,"./../../business-logic/asian-handicap-single-line/bet-exposure":16,"./../../business-logic/each-way/pnl":21,"./../../business-logic/pnl":24,"./../../business-logic/spreads-and-totals/bet-exposure":25,"./../../config":28,"./../../models/bet":44,"./../../models/bet-calculations/bet-calculations-literal-builder":39,"./../../utils/validations":71,"./../helpers/market":3,"mout/array/append":79,"mout/object":168}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}Object.defineProperty(c,"__esModule",{value:!0}),c.CONST=c.calc=c.factory=void 0;var f=a("./stateless"),g=e(f),h=a("./stateful"),i=d(h),j=a("./../models/ladders/size.js"),k=d(j),l=a("./../models/ladders/price.js"),m=d(l),n={createBetEngine:function(a){return new i["default"](a)},createPriceLadder:function(a,b,c){return new m["default"](a,b,c)},createSizeLadder:function(a,b,c){return new k["default"](a,b,c)}},o=g.calc,p=g.CONST;c.factory=n,c.calc=o,c.CONST=p},{"./../models/ladders/price.js":52,"./../models/ladders/size.js":53,"./stateful":9,"./stateless":14}],7:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){return void 0===a||a===b?b:"BOTH"}function g(a,b){var c=!1,d={};return b.forEach(function(b){var e=a.getRunner(b.selectionId,b.handicap),f=e.findOpenBet(n.BET.TYPE.MATCHED,b.side,b.id);f?f.getSize()===b.size&&f.getPrice()===b.price||(c=!0,f.setPrice(b.price),f.setSize(b.size),v.updateBet(f)):(c=!0,f=(0,s.createPlacedBet)((0,m.pick)(b,"id","price","size","side"),n.BET.TYPE.MATCHED),e.addBet(f)),d[b.id]=!0}),(0,m.forOwn)(a.getRunners(),function(a){a.getMatchedBets().forEach(function(b){d[b.getId()]||(a.removeBet(b),c=!0)})}),c}function h(a,b){var c,d={};return b.forEach(function(b){var e=a.getRunner(b.selectionId,b.handicap),g=e.findOpenBet(n.BET.TYPE.UNMATCHED,b.side,b.id);
g?g.getSize()===b.size&&g.getPrice()===b.price||(c=c||{},c.side=f(c.side,b.side),c.price=c.price||g.getPrice()!==b.price,c.size=c.size||g.getSize()!==b.size,g.setPrice(b.price),g.setSize(b.size),v.updateBet(g)):(c=c||{},c.validBets=!0,c.price=!0,c.size=!0,c.side=f(c.side,b.side),g=(0,s.createPlacedBet)((0,m.pick)(b,"id","price","size","side"),n.BET.TYPE.UNMATCHED),e.addBet(g)),d[b.id]=!0}),(0,m.forOwn)(a.getRunners(),function(a){a.getUnmatchedBets().forEach(function(b){d[b.getId()]||(a.removeBet(b),c=c||{},c.side=f(c.side,b.getSide()),c.validBets=!0,c.price=!0,c.size=!0)})}),c}function i(a,b){var c,d={},e={};return b.forEach(function(b){var f=a.getRunner(b.selectionId,b.handicap),g=void 0;(0,A.isDefined)(b.price)?(g=f.findOpenBet(n.BET.TYPE.SP,b.side,b.id),g&&(f.removeBet(g),c=c||{},c.reconciled=!0),g=f.findOpenBet(n.BET.TYPE.RECONCILED_SP,b.side,b.id),g||(g=(0,s.createSPBet)(b),f.addBet(g),c=c||{},c.reconciled=!0),e[b.id]=!0):(g=f.findOpenBet(n.BET.TYPE.SP,b.side,b.id),g?b.orderType===n.BET.ORDER_TYPES.LIMIT_ON_CLOSE&&g.getPriceLimit()!==b.priceLimit&&(g.setPriceLimit(b.priceLimit),v.updateBet(g),c=c||{},c.price=!0):(g=(0,s.createSPBet)(b),f.addBet(g),c=c||{},c.price=(0,A.isDefined)(b.priceLimit),c.size=!0),d[b.id]=!0)}),(0,m.forOwn)(a.getRunners(),function(a){a.getSPBets().forEach(function(b){d[b.getId()]||(a.removeBet(b),c=c||{},c.price=!0,c.size=!0)}),a.getReconciledSPBets().forEach(function(b){e[b.getId()]||(a.removeBet(b),c=c||{},c.price=!0,c.size=!0)})}),c}function j(a,b,c){if(a===n.BET.SIDE.BACK&&c>b)throw new p["default"](n.ERROR_CODES.INVALID_PRICE,{reason:n.LADDER.VALIDATIONS_REASONS.BELOW_SP_BACK_BET_INITIAL_PRICE,data:{initialPrice:b,newPrice:c}});if(a===n.BET.SIDE.LAY&&c<b)throw new p["default"](n.ERROR_CODES.INVALID_PRICE,{reason:n.LADDER.VALIDATIONS_REASONS.ABOVE_SP_LAY_BET_INITIAL_PRICE,data:{initialPrice:b,newPrice:c}})}function k(a){function b(b,c,d,e){(0,z.assertIsPositive)(e,"price","price must be a valid price");var f=a.getPriceLadderByCriteria(b,c,d).isValid(e);if(!f.isValid)throw new p["default"](n.ERROR_CODES.INVALID_PRICE,f.data)}function c(b,c,d){(0,z.assertIsPositive)(d,"size");var e=a.getSizeLadderByCriteria(b,c).isValid(d);if(!e.isValid)throw new p["default"](n.ERROR_CODES.INVALID_SIZE,e.data)}function d(a,d,e){(0,z.assertIsObject)(a,"betAttributes"),(0,z.assertIsValidSelectionId)(a.selectionId,"betAttributes.selectionId"),(0,z.assertIsHandicapValue)(a.handicap,"betAttributes.handicap"),(0,z.assertIsValidBetSide)(a.side,"betAttributes.side"),a.price&&b(e,a.side,d,a.price),a.size&&c(a.side,d,a.size)}function e(a,d){(0,z.assertIsObject)(a,"betAttributes"),(0,z.assertIsValidSelectionId)(a.selectionId,"betAttributes.selectionId"),(0,z.assertIsHandicapValue)(a.handicap,"betAttributes.handicap"),(0,z.assertIsValidBetSide)(a.side,"betAttributes.side"),a.priceLimit&&b(d,a.side,n.BET.CATEGORY_TYPES.SP,a.priceLimit),a.spLiability&&c(a.side,n.BET.CATEGORY_TYPES.SP,a.spLiability)}function f(a){return a.getPotentialBets().map(function(b){return(0,B.buildBetLiteral)(a.getSelectionId(),a.getHandicap(),b,a.getPosition().getPotentialBetCalculations(b.getSide(),n.BET.CATEGORY_TYPES.EXCHANGE))})}function k(a){return a.getPotentialSPBets().map(function(b){return(0,B.buildBetLiteral)(a.getSelectionId(),a.getHandicap(),b,a.getPosition().getPotentialBetCalculations(b.getSide(),n.BET.CATEGORY_TYPES.SP))})}function o(b){(0,A.isDefined)(b)&&(0,z.assertArrayElementsAreOfType)(b,"marketIds","string");var c=a.getMarkets(b);return(0,m.map)(c,function(a){var b=(0,m.map)(a.getRunners(),f);return(0,l.flatten)((0,m.values)(b))})}function q(b){(0,A.isDefined)(b)&&(0,z.assertArrayElementsAreOfType)(b,"marketIds","string");var c=a.getMarkets(b);return(0,m.map)(c,function(a){var b=(0,m.map)(a.getRunners(),function(a){var b=[],c=a.getPotentialSPBackBet(),d=a.getPotentialSPLayBet();return c&&b.push((0,B.buildBetLiteral)(a.getSelectionId(),a.getHandicap(),c,a.getPosition().getPotentialBetCalculations(n.BET.SIDE.BACK,n.BET.CATEGORY_TYPES.SP))),d&&b.push((0,B.buildBetLiteral)(a.getSelectionId(),a.getHandicap(),d,a.getPosition().getPotentialBetCalculations(n.BET.SIDE.LAY,n.BET.CATEGORY_TYPES.SP))),b});return(0,l.flatten)((0,m.values)(b))})}function u(b){(0,A.isDefined)(b)&&(0,z.assertArrayElementsAreOfType)(b,"marketIds","string");var c=a.getMarkets(b);return(0,m.map)(c,function(a){var b=(0,m.map)(a.getRunners(),function(a){return a.getMatchedBets().map(function(b){return(0,B.buildBetLiteral)(a.getSelectionId(),a.getHandicap(),b,a.getPosition().getOpenBetCalculations(b.getId()))})});return(0,l.flatten)((0,m.values)(b))})}function D(b){(0,A.isDefined)(b)&&(0,z.assertArrayElementsAreOfType)(b,"marketIds","string");var c=a.getMarkets(b);return(0,m.map)(c,function(a){var b=(0,m.map)(a.getRunners(),function(a){var b=B.buildBetLiteral.bind(B.buildBetLiteral,a.getSelectionId(),a.getHandicap()),c=a.getReconciledSPBets().map(function(c){return b(c,a.getPosition().getOpenBetCalculations(c.getId()))}),d=a.getSPBets().map(function(c){return b(c,a.getPosition().getOpenBetCalculations(c.getId()))});return c.concat(d)});return(0,l.flatten)((0,m.values)(b))})}function E(b){return(0,A.isDefined)(b)&&(0,z.assertArrayElementsAreOfType)(b,"marketIds","string"),(0,m.map)(a.getMarkets(b),function(a){var b=(0,m.map)(a.getRunners(),function(a){return a.getUnmatchedBets().map(function(b){return(0,B.buildBetLiteral)(a.getSelectionId(),a.getHandicap(),b,a.getPosition().getOpenBetCalculations(b.getId()))})});return(0,l.flatten)((0,m.values)(b))})}function F(b){(0,A.isDefined)(b)&&(0,z.assertArrayElementsAreOfType)(b,"marketIds","string");var c=a.getMarkets(b);return(0,m.map)(c,function(a){var b=(0,m.map)(a.getRunners(),f),c=(0,m.map)(a.getRunners(),k);return(0,l.flatten)((0,l.append)((0,m.values)(b),(0,m.values)(c)))})}function G(b,c){(0,z.assertIsNotEmptyString)(b,"marketId");var e=a.getMarket(b);d(c,n.BET.CATEGORY_TYPES.EXCHANGE,e.getPriceLadderType());var f=(0,s.createPotentialBet)(c),g=e.getRunner(c.selectionId,c.handicap);if(g.addBet(f),f.hasPriceAndSizeDefined()){var h=(0,y.checkWhatMustBeRecalculated)({potential:{validBets:!0,price:!0,size:!0,side:f.getSide()}});(0,w.recalculatePositions)(e,h)}}function H(b,c,d,e){(0,z.assertIsNotEmptyString)(b,"marketId"),(0,z.assertIsValidSelectionId)(c,"selectionId"),(0,z.assertIsHandicapValue)(d,"handicap"),(0,z.assertIsValidBetSide)(e,"side");var f=a.getMarket(b),g=f.getRunner(c,d),h=e===n.BET.SIDE.BACK?g.getPotentialBackBet():g.getPotentialLayBet();if(h){g.removeBet(h);var i=(0,y.checkWhatMustBeRecalculated)({potential:{validBets:!0,side:e}});(0,w.recalculatePositions)(f,i)}}function I(b,c){(0,z.assertIsNotEmptyString)(b,"marketId");var d=a.getMarket(b);e(c,d.getPriceLadderType());var f=(0,s.createPotentialSPBet)(c),g=d.getRunner(c.selectionId,c.handicap);if(g.addBet(f),f.hasPriceLimitAndSPLiabilityDefined()){var h=(0,y.checkWhatMustBeRecalculated)({potentialSp:!0});(0,w.recalculatePositions)(d,h)}}function J(b,c,d,e){(0,z.assertIsNotEmptyString)(b,"marketId"),(0,z.assertIsValidSelectionId)(c,"selectionId"),(0,z.assertIsHandicapValue)(d,"handicap"),(0,z.assertIsValidBetSide)(e,"side");var f=a.getMarket(b),g=f.getRunner(c,d),h=e===n.BET.SIDE.BACK?g.getPotentialSPBackBet():g.getPotentialSPLayBet();if(h){g.removeBet(h);var i=(0,y.checkWhatMustBeRecalculated)({potentialSp:!0});(0,w.recalculatePositions)(f,i)}}function K(b,c,d,e,f){(0,z.assertIsNotEmptyString)(b,"marketId"),(0,z.assertIsValidSelectionId)(c,"selectionId"),(0,z.assertIsHandicapValue)(d,"handicap"),(0,z.assertIsNotEmptyString)(e,"betId"),(0,A.isDefined)(f)&&(0,z.assertIsPositive)(f,"price","price must be a valid price");var g=a.getMarket(b),h=g.getRunner(c,d),i=h.findOpenBet(n.BET.TYPE.SP,n.BET.SIDE.BACK,e)||h.findOpenBet(n.BET.TYPE.SP,n.BET.SIDE.LAY,e);if(!i)throw new p["default"](n.ERROR_CODES.BET_DOES_NOT_EXIST,{marketId:b,selectionId:c,handicap:d,betId:e});if(i.getOrderType()!==n.BET.ORDER_TYPES.LIMIT_ON_CLOSE)throw new p["default"](n.ERROR_CODES.BET_ORDER_TYPE_IS_NOT_LIMIT_ON_CLOSE,{orderType:i.getOrderType()});if(f!==i.getCurrentPriceLimit()){if((0,A.isDefined)(f)){j(i.getSide(),i.getPriceLimit(),f);var k=a.getPriceLadderByCriteria(g.getPriceLadderType(),i.getSide(),n.BET.CATEGORY_TYPES.SP),l=k.isValid(f);if(!l.isValid)throw new p["default"](n.ERROR_CODES.INVALID_PRICE,l.data)}i.setNewPriceLimit(f),v.updateBet(i)}}function L(d,e,f,g,h){if((0,z.assertIsNotEmptyString)(d,"marketId"),(0,z.assertIsValidSelectionId)(e,"selectionId"),(0,z.assertIsHandicapValue)(f,"handicap"),(0,z.assertIsValidBetSide)(g,"side"),(0,z.assertIsObject)(h,"betUpdate"),!h.hasOwnProperty("price")&&!h.hasOwnProperty("size"))throw new Error("betUpdate must have at least 'price' or 'size' properties");var i=a.getMarket(d),j=i.getRunner(e,f),k=g===n.BET.SIDE.BACK?j.getPotentialBackBet():j.getPotentialLayBet(),l={potential:{side:g}};if(!k)throw new p["default"](n.ERROR_CODES.RUNNER_DOES_NOT_HAVE_POTENTIAL_BET,{marketId:d,selectionId:e,handicap:f,side:g});(0,A.isDefined)(h.price)&&b(i.getPriceLadderType(),g,n.BET.CATEGORY_TYPES.EXCHANGE,h.price),(0,A.isDefined)(h.size)&&c(g,n.BET.CATEGORY_TYPES.EXCHANGE,h.size);var m=k.getPrice(),o=k.getSize(),q=k.hasPriceAndSizeDefined();h.hasOwnProperty("price")&&(m=h.price,k.getPrice()!==m&&(l.potential.price=!0,k.setPrice(m))),h.hasOwnProperty("size")&&(o=h.size,k.getSize()!==o&&(l.potential.size=!0,k.setSize(o))),(l.potential.price||l.potential.size)&&(l.potential.validBets=q!==k.hasPriceAndSizeDefined(),v.updateBet(k),(0,w.recalculatePositions)(i,(0,y.checkWhatMustBeRecalculated)(l)))}function M(d,e,f,g,h){if((0,z.assertIsNotEmptyString)(d,"marketId is mandatory and must be a not empty string"),(0,z.assertIsValidSelectionId)(e,"selectionId is mandatory and must be a Number"),(0,z.assertIsHandicapValue)(f,"handicap is mandatory and must be a multiple of quarters (0.25)"),(0,z.assertIsValidBetSide)(g,"side is mandatory and must be a BACK or LAY string"),(0,z.assertIsObject)(h,"betUpdate"),!h.hasOwnProperty("priceLimit")&&!h.hasOwnProperty("spLiability"))throw new Error("betUpdate must have at least 'priceLimit' or 'spLiability' properties");var i=a.getMarket(d),j=i.getRunner(e,f),k=g===n.BET.SIDE.BACK?j.getPotentialSPBackBet():j.getPotentialSPLayBet();if(!k)throw new p["default"](n.ERROR_CODES.RUNNER_DOES_NOT_HAVE_POTENTIAL_SP_BET,{marketId:d,selectionId:e,handicap:f,side:g});(0,A.isDefined)(h.priceLimit)&&b(i.getPriceLadderType(),g,n.BET.CATEGORY_TYPES.SP,h.priceLimit),(0,A.isDefined)(h.spLiability)&&c(g,n.BET.CATEGORY_TYPES.SP,h.spLiability);var l=k.getPriceLimit(),m=k.getSPLiability(),o={potentialSp:!1};h.hasOwnProperty("priceLimit")&&(l=h.priceLimit,k.getPriceLimit()!==l&&(o.potentialSp=!0,k.setPriceLimit(l))),h.hasOwnProperty("spLiability")&&(m=h.spLiability,k.getSPLiability()!==m&&(o.potentialSp=!0,k.setSPLiability(m))),o.potentialSp&&(v.updateBet(k),(0,w.recalculatePositions)(i,(0,y.checkWhatMustBeRecalculated)(o)))}function N(b,c,d,e,f){var g=a.getMarket(b),h=g.getRunner(c,d),i=e===n.BET.SIDE.BACK?h.getPotentialBackBet():h.getPotentialLayBet();if(!i)throw new p["default"](n.ERROR_CODES.RUNNER_DOES_NOT_HAVE_POTENTIAL_BET,{marketId:b,selectionId:c,handicap:d,side:e});var j=a.getPriceLadderByCriteria(g.getPriceLadderType(),e,n.BET.CATEGORY_TYPES.EXCHANGE),k=f===C.UP?j.nudgeUp:j.nudgeDown,l=i.getPrice(),m=i.hasPriceAndSizeDefined(),o=k(l),q=o!==l;if(q&&(i.setPrice(o),v.updateBet(i)),(0,A.isDefined)(i.getSize())&&q){var r=(0,y.checkWhatMustBeRecalculated)({potential:{validBets:!m,price:!0,side:e}});(0,w.recalculatePositions)(g,r)}return o}function O(b,c,d,e,f){var g=a.getMarket(b),h=g.getRunner(c,d),i=e===n.BET.SIDE.BACK?h.getPotentialSPBackBet():h.getPotentialSPLayBet();if(!i)throw new p["default"](n.ERROR_CODES.RUNNER_DOES_NOT_HAVE_POTENTIAL_SP_BET,{marketId:b,selectionId:c,handicap:d,side:e});var j=a.getPriceLadderByCriteria(g.getPriceLadderType(),e,n.BET.CATEGORY_TYPES.SP),k=f===C.UP?j.nudgeUp:j.nudgeDown,l=i.getPriceLimit(),m=k(l),o=m!==l;if(o&&(i.setPriceLimit(m),v.updateBet(i)),(0,A.isDefined)(i.getSPLiability())&&o){var q=(0,y.checkWhatMustBeRecalculated)({potentialsp:!0});(0,w.recalculatePositions)(g,q)}return m}function P(b,c,d,e,f){var g=U(b,c,d,e);if(!g)throw new Error("UnmatchedBet with id "+e+" not found");var h=a.getMarket(b),i=g.getSide(),j=a.getPriceLadderByCriteria(h.getPriceLadderType(),i,n.BET.CATEGORY_TYPES.EXCHANGE),k=f===C.UP?j.nudgeUp:j.nudgeDown,l=g.getCurrentPrice(),m=k(l);if(m!==l&&(g.setNewPrice(m),v.updateBet(g)),(0,A.isDefined)(g.getCurrentSize())&&m!==l){var o={unmatched:{newPrice:!0,side:i}};(0,w.recalculatePositions)(h,(0,y.checkWhatMustBeRecalculated)(o))}return m}function Q(a,b,c,d){return(0,z.assertIsNotEmptyString)(a,"marketId is mandatory and must be a not empty string"),(0,z.assertIsValidSelectionId)(b,"selectionId is mandatory and must be a Number"),(0,z.assertIsHandicapValue)(c,"handicap is mandatory and must be a multiple of quarters (0.25)"),(0,z.assertIsValidBetSide)(d,"side must be a valid bet side"),N(a,b,c,d,C.DOWN)}function R(a,b,c,d){return(0,z.assertIsNotEmptyString)(a,"marketId is mandatory and must be a not empty string"),(0,z.assertIsValidSelectionId)(b,"selectionId is mandatory and must be a Number"),(0,z.assertIsHandicapValue)(c,"handicap is mandatory and must be a multiple of quarters (0.25)"),(0,z.assertIsValidBetSide)(d,"side is mandatory and must be a BACK or LAY string"),N(a,b,c,d,C.UP)}function S(a,b,c,d){return(0,z.assertIsNotEmptyString)(a,"marketId is mandatory and must be a not empty string"),(0,z.assertIsValidSelectionId)(b,"selectionId is mandatory and must be a Number"),(0,z.assertIsHandicapValue)(c,"handicap is mandatory and must be a multiple of quarters (0.25)"),(0,z.assertIsValidBetSide)(d,"side is mandatory and must be a BACK or LAY string"),O(a,b,c,d,C.UP)}function T(a,b,c,d){return(0,z.assertIsNotEmptyString)(a,"marketId is mandatory and must be a not empty string"),(0,z.assertIsValidSelectionId)(b,"selectionId is mandatory and must be a Number"),(0,z.assertIsHandicapValue)(c,"handicap is mandatory and must be a multiple of quarters (0.25)"),(0,z.assertIsValidBetSide)(d,"side is mandatory and must be a BACK or LAY string"),O(a,b,c,d,C.DOWN)}function U(b,c,d,e){var f=a.getMarket(b),g=f.getRunner(c,d),h=g.getUnmatchedBackBets().concat(g.getUnmatchedLayBets());return(0,l.find)(h,function(a){return a.getId()===e})}function V(a,b,c,d){return(0,z.assertIsNotEmptyString)(a,"marketId is mandatory and must be a not empty string"),(0,z.assertIsValidSelectionId)(b,"selectionId is mandatory and must be a Number"),(0,z.assertIsHandicapValue)(c,"handicap is mandatory and must be a multiple of quarters (0.25)"),(0,z.assertIsNotEmptyString)(d,"betId is mandatory and must be a not empty string"),P(a,b,c,d,C.DOWN)}function W(a,b,c,d){return(0,z.assertIsNotEmptyString)(a,"marketId is mandatory and must be a not empty string"),(0,z.assertIsValidSelectionId)(b,"selectionId is mandatory and must be a Number"),(0,z.assertIsHandicapValue)(c,"handicap is mandatory and must be a multiple of quarters (0.25)"),(0,z.assertIsNotEmptyString)(d,"betId is mandatory and must be a not empty string"),P(a,b,c,d,C.UP)}function X(b,c,d,e,f){var g=a.getMarket(b),h=g.getRunner(c,d),i=h.findOpenBet(n.BET.TYPE.SP,n.BET.SIDE.BACK,e)||h.findOpenBet(n.BET.TYPE.SP,n.BET.SIDE.LAY,e);if(!i)throw new p["default"](n.ERROR_CODES.BET_DOES_NOT_EXIST,{marketId:b,selectionId:c,handicap:d,betId:e});if(i.getOrderType()!==n.BET.ORDER_TYPES.LIMIT_ON_CLOSE)throw new p["default"](n.ERROR_CODES.BET_ORDER_TYPE_IS_NOT_LIMIT_ON_CLOSE,{orderType:i.getOrderType()});var k=a.getPriceLadderByCriteria(g.getPriceLadderType(),i.getSide(),n.BET.CATEGORY_TYPES.SP),l=f===C.UP?k.nudgeUp:k.nudgeDown,m=l(i.getCurrentPriceLimit());return j(i.getSide(),i.getPriceLimit(),m),i.setPriceLimit(m),v.updateBet(i),m}function Y(a,b,c,d){return(0,z.assertIsNotEmptyString)(a,"marketId is mandatory and must be a not empty string"),(0,z.assertIsValidSelectionId)(b,"selectionId is mandatory and must be a Number"),(0,z.assertIsHandicapValue)(c,"handicap is mandatory and must be a multiple of quarters (0.25)"),(0,z.assertIsNotEmptyString)(d,"betId is mandatory and must be a not empty string"),X(a,b,c,d,C.DOWN)}function Z(a,b,c,d){return(0,z.assertIsNotEmptyString)(a,"marketId is mandatory and must be a not empty string"),(0,z.assertIsValidSelectionId)(b,"selectionId is mandatory and must be a Number"),(0,z.assertIsHandicapValue)(c,"handicap is mandatory and must be a multiple of quarters (0.25)"),(0,z.assertIsNotEmptyString)(d,"betId is mandatory and must be a not empty string"),X(a,b,c,d,C.UP)}function $(b,c){(0,z.assertIsNotEmptyString)(b,"marketId should be a non empty string"),(0,z.assertIsPositive)(c,"size");var d=a.getMarket(b),e=a.getSizeLadderByCriteria(n.BET.SIDE.BACK,n.BET.CATEGORY_TYPES.EXCHANGE),f=e.isValid(c);if(!f.isValid)throw new p["default"](n.ERROR_CODES.INVALID_SIZE,f.data);var g=d.getRunners(),h=(0,t.extractPotentialBets)(d,{side:n.BET.SIDE.BACK,price:!0}),i=(0,m.map)(h,function(a){return a.back.price}),j=(0,x.dutch)(i,c),k=[];return(0,m.forOwn)(j,function(a,b){var c=g[b];k.push({selectionId:c.getId(),handicap:c.getHandicap(),size:a})}),k}function _(b,c){(0,z.assertIsNotEmptyString)(b,"marketId should be a non empty string"),(0,z.assertIsPositive)(c,"liability");var d=a.getMarket(b),e=a.getSizeLadderByCriteria(n.BET.SIDE.LAY,n.BET.CATEGORY_TYPES.EXCHANGE),f=e.isValid(c);if(!f.isValid)throw new p["default"](n.ERROR_CODES.INVALID_SIZE,f.data);var g=d.getRunners(),h=(0,t.extractPotentialBets)(d,{side:n.BET.SIDE.LAY,price:!0}),i=(0,m.map)(h,function(a){return a.lay.price}),j=(0,x.reverseDutch)(i,c,d.getNumberOfWinners()),k=[];return(0,m.forOwn)(j,function(a,b){var c=g[b];k.push({selectionId:c.getId(),handicap:c.getHandicap(),size:a})}),k}function aa(b,c){(0,z.assertIsNotEmptyString)(b,"marketId must be a non empty string"),(0,z.assertIsPositive)(c,"payout must be a positive number");var d=a.getMarket(b),e=a.getSizeLadderByCriteria(n.BET.SIDE.LAY,n.BET.CATEGORY_TYPES.EXCHANGE),f=e.isValid(c);if(!f.isValid)throw new p["default"](n.ERROR_CODES.INVALID_SIZE,f.data);var g=d.getRunners(),h=(0,t.extractPotentialBets)(d,{side:n.BET.SIDE.LAY,price:!0}),i=(0,m.map)(h,function(a){return a.lay.price}),j=(0,x.equalisePayouts)(i,c),k=[];return(0,m.forOwn)(j,function(a,b){var c=g[b];k.push({selectionId:c.getId(),handicap:c.getHandicap(),size:a})}),k}function ba(b){(0,A.isDefined)(b)&&(0,z.assertArrayElementsAreOfType)(b,"marketIds","string");var c=a.getMarkets(b),d={};return d.markets=(0,m.map)(c,function(a){var b=(0,t.extractPotentialBetsWithPriceAndSize)(a),c=(0,m.keys)((0,m.filter)(b,v.areRunnerPotentialBetsCrossMatching)),d={crossMatching:!1};return c.length>0&&!function(){var b=a.getRunners();d.runnerIds=c.map(function(a){return{selectionId:b[a].getSelectionId(),handicap:b[a].getHandicap()}}),d.crossMatching=!0}(),d}),d.crossMatching=(0,m.some)(d.markets,function(a){return a.crossMatching}),d}function ca(b){(0,A.isDefined)(b)&&(0,z.assertArrayElementsAreOfType)(b,"marketIds","string");var c=a.getMarkets(b),d={};return(0,m.forOwn)(c,function(a,b){d[b]=[],(0,m.forOwn)(a.getRunners(),function(a){var c=B.buildBetLiteral.bind(B.buildBetLiteral,a.getSelectionId(),a.getHandicap()),e=(0,t.filterRunnerPotentialBetsWithPriceAndSize)(a.getPotentialBetsBySide()),f={};if(e.back&&e.lay&&(f.back=(0,t.extractPriceAndSize)(e.back),f.lay=(0,t.extractPriceAndSize)(e.lay)),!v.areRunnerPotentialBetsCrossMatching(f)){var g=(0,m.values)(e).map(function(b){return c(b,a.getPosition().getPotentialBetCalculations(b.getSide(),n.BET.CATEGORY_TYPES.EXCHANGE))});(0,l.append)(d[b],g)}var h=(0,m.values)((0,t.filterRunnerPotentialSPPlaceableBets)(a.getPotentialSPBetsBySide())).map(function(b){return c(b,a.getPosition().getPotentialBetCalculations(b.getSide(),n.BET.CATEGORY_TYPES.SP))});(0,l.append)(d[b],h)})}),d}function da(b){(0,A.isDefined)(b)&&(0,z.assertArrayElementsAreOfType)(b,"marketIds","string");var c=a.getMarkets(b),d={};return(0,m.forOwn)(c,function(a,b){d[b]=[],(0,m.forOwn)(a.getRunners(),function(a){var c=(0,t.filterRunnerUnmatchedBetsWithPriceAndSize)(a.getUnmatchedBets()).map(function(b){return(0,B.buildBetLiteral)(a.getSelectionId(),a.getHandicap(),b,a.getPosition().getOpenBetCalculations(b.getId()))}),e=a.getSPBets().filter(function(a){return(0,A.isDefined)(a.getNewPriceLimit())}).map(function(b){return(0,B.buildBetLiteral)(a.getSelectionId(),a.getHandicap(),b,a.getPosition().getOpenBetCalculations(b.getId()))});(0,l.append)(d[b],c),(0,l.append)(d[b],e)})}),d}function ea(b,c,d){(0,z.assertIsNotEmptyString)(b,"marketId"),(0,z.assertIsObject)(c,"openBets"),(0,z.assertIsNumber)(d,"settledProfit"),(0,A.isDefined)(c.matched)&&(0,z.assertIsArray)(c.matched,"openBets.matched"),(0,A.isDefined)(c.unmatched)&&(0,z.assertIsArray)(c.unmatched,"openBets.unmatched"),(0,A.isDefined)(c.sp)&&(0,z.assertIsArray)(c.sp,"openBets.sp");var e={},f=a.getMarket(b);f.update({settledProfit:d});var j=g(f,c.matched||[]),k=h(f,c.unmatched||[]),l=i(f,c.sp||[]);j&&(e.matched=!0),k&&(e.unmatched=k),l&&(e.sp=l);var m=(0,y.checkWhatMustBeRecalculated)(e);(0,w.recalculatePositions)(f,m)}function fa(d,e,f,g,h){if((0,z.assertIsNotEmptyString)(d,"marketId is mandatory and must be a non empty string"),(0,z.assertIsValidSelectionId)(e,"selectionId is mandatory"),(0,z.assertIsHandicapValue)(f,"handicap is mandatory and must be a number multiple of quarters (0.25)"),(0,z.assertIsNotEmptyString)(g,"betId is mandatory and must be a non empty string"),(0,z.assertIsObject)(h,"betUpdate"),!h.hasOwnProperty("price")&&!h.hasOwnProperty("size"))throw new Error("betUpdate must have at least 'price' or 'size' properties");var i=a.getMarket(d),j=i.getRunner(e,f),k=j.findOpenBet(n.BET.TYPE.UNMATCHED,n.BET.SIDE.BACK,g)||j.findOpenBet(n.BET.TYPE.UNMATCHED,n.BET.SIDE.LAY,g);if(!k)throw new p["default"](n.ERROR_CODES.BET_DOES_NOT_EXIST,{marketId:d,selectionId:e,handicap:f,betId:g});var l=k.getSide(),m={unmatched:{newPrice:!1,newSize:!1,side:l}};h.hasOwnProperty("price")&&((0,A.isDefined)(h.price)&&b(i.getPriceLadderType(),l,n.BET.CATEGORY_TYPES.EXCHANGE,h.price),k.getCurrentPrice()!==h.price&&(k.setNewPrice(h.price),m.unmatched.newPrice=!0)),h.hasOwnProperty("size")&&((0,A.isDefined)(h.size)&&c(l,n.BET.CATEGORY_TYPES.EXCHANGE,h.size),k.getCurrentSize()!==h.size&&(k.setNewSize(h.size),m.unmatched.newSize=!0)),(m.unmatched.newPrice||m.unmatched.newSize)&&(v.updateBet(k),(0,w.recalculatePositions)(i,(0,y.checkWhatMustBeRecalculated)(m)))}(0,z.assertIsInstanceOf)(a,"stateManager",r["default"]),this.addPotentialBet=G,this.addPotentialSPBet=I,this.calculateDutching=$,this.calculateEqualisePayouts=aa,this.calculateReverseDutching=_,this.checkCrossMatching=ba,this.getAllPlaceableEditedOpenBets=da,this.getAllPlaceablePotentialBets=ca,this.getAllPotentialBets=F,this.getMatchedBets=u,this.getSPBets=D,this.getPotentialBets=o,this.getPotentialSPBets=q,this.getUnmatchedBets=E,this.nudgeDownPotentialBet=Q,this.nudgeDownPotentialSPBet=T,this.nudgeDownSPBet=Y,this.nudgeDownUnmatchedBet=V,this.nudgeUpPotentialBet=R,this.nudgeUpPotentialSPBet=S,this.nudgeUpSPBet=Z,this.nudgeUpUnmatchedBet=W,this.removePotentialBet=H,this.removePotentialSPBet=J,this.setMarketOpenBets=ea,this.updateLimitOnCloseSPBet=K,this.updatePotentialBet=L,this.updatePotentialSPBet=M,this.updateUnmatchedBet=fa}Object.defineProperty(c,"__esModule",{value:!0});var l=a("mout/array"),m=a("mout/object"),n=a("./../../config"),o=a("./../../errors/bet-engine-error"),p=e(o),q=a("./../../state-manager"),r=e(q),s=a("./../../factory/bet"),t=a("./../helpers/market"),u=a("./../helpers/bet"),v=d(u),w=a("./../helpers/positions"),x=a("./../../business-logic/dutching"),y=a("./../../business-logic/helper.js"),z=a("./../../utils/assertions"),A=a("./../../utils/validations"),B=a("./../../models/bet"),C={UP:"UP",DOWN:"DOWN"};c["default"]=k},{"./../../business-logic/dutching":20,"./../../business-logic/helper.js":23,"./../../config":28,"./../../errors/bet-engine-error":32,"./../../factory/bet":34,"./../../models/bet":44,"./../../state-manager":63,"./../../utils/assertions":66,"./../../utils/validations":71,"./../helpers/bet":1,"./../helpers/market":3,"./../helpers/positions":4,"mout/array":78,"mout/object":168}],8:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a){function b(a,b){return(0,p.mapOwn)(a,function(a,c){var d=a.getPosition().getActualPnl();if(!(0,l.isDefined)(d.win))throw new n["default"](o.ERROR_CODES.RUNNER_DOES_NOT_HAVE_POSITION,{selectionId:a.getSelectionId(),handicap:a.getHandicap(),pnl:d});return{matchedProfit:d.win,cashoutWhatIf:b.runnersCashoutProfit[c]}})}function c(a){(0,k.assertIsNumber)(a.liability,"quote.liability"),(0,k.assertIsNumber)(a.minPercentage,"quote.minPercentage"),(0,k.assertIsNumber)(a.maxPercentage,"quote.maxPercentage"),(0,k.assertIsNumber)(a.profit,"quote.profit"),(0,k.assertIsObject)(a.runnersCashoutProfit,"quote.runnersCashoutProfit"),(0,l.isDefined)(a.selectionId)&&(0,k.assertIsValidSelectionId)(a.selectionId,"quote.selectionId"),(0,l.isDefined)(a.handicap)&&(0,k.assertIsHandicapValue)(a.handicap,"quote.handicap"),(0,p.forEach)(a.runnersCashoutProfit,function(a){(0,k.assertIsNumber)(a,"runnerCashoutProfit")})}function d(a,b,c){var d=-a.liability,e=c(d),f=j.calculateProfit(d,a.profit,a.minPercentage,a.maxPercentage,b),g=j.calculateLiability(a.liability),h=c(f),i=j.calculatePayout(e,h);return{liability:g,profit:h,value:i}}function e(a,b){var c=a.getType(),d=Object.keys(a.getRunners()),e=b.selectionId,f=b.handicap,g=e+":"+f,h=Number((0,q.extractSelectionId)(d[1])),i=(0,q.getLineRunnerIdFromPair)(g,e,h,c),j=Number((0,q.extractHandicap)(i));return(0,p.mapOwn)(b.runnersCashoutProfit,function(b,c){return c=Number(c),c===e?a.getRunner(e,f):c===h?a.getRunner(h,j):void 0})}function f(a,b){return(0,p.mapOwn)(b.runnersCashoutProfit,function(b,c){return a.getRunner(Number(c))})}function g(a,c,d,g){var h=void 0,i=a.getBettingBehaviour();switch(i){case o.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS:h=e(a,c);break;default:h=f(a,c)}var k=b(h,c),l=j.calculateRunnersWhatIf(k,c.minPercentage,c.maxPercentage,d);return(0,p.mapOwn)(l,g)}function i(b,e,f,h){(0,k.assertIsNotEmptyString)(b,"marketId"),(0,k.assertIsNumber)(f,"percentage"),(0,l.isDefined)(h)&&(0,k.assertIsObject)(h,"discountOptions"),c(e);var i=a.getMarket(b),j=(0,r.getDiscountValues)(i,a.getUserDiscount(),h),m=(0,r.discountWith)(j.marketBaseRate,j.userDiscount,j.settledProfit),n=d(e,f,m);return n.profitPerRunner=g(i,e,f,m),n}(0,k.assertIsInstanceOf)(a,"stateManager",h["default"]),this.calcCashoutWhatif=i}Object.defineProperty(c,"__esModule",{value:!0});var g=a("./../../state-manager"),h=e(g),i=a("./../../business-logic/cashout"),j=d(i),k=a("./../../utils/assertions"),l=a("./../../utils/validations"),m=a("./../../errors/bet-engine-error"),n=e(m),o=a("./../../config/index"),p=a("./../../utils/utils"),q=a("./../../utils/runner"),r=a("./../helpers");c["default"]=f},{"./../../business-logic/cashout":19,"./../../config/index":28,"./../../errors/bet-engine-error":32,"./../../state-manager":63,"./../../utils/assertions":66,"./../../utils/runner":69,"./../../utils/utils":70,"./../../utils/validations":71,"./../helpers":2}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=new q["default"](a),c=new m["default"](b),d=new i["default"](b),e=new g["default"](b),f=new k["default"](b),h=new o["default"](b);this.setUserDiscount=b.setUserDiscount,this.addMarket=c.add,this.hasMarket=c.has,this.removeMarket=c.remove,this.updateMarket=c.update,this.addPotentialBet=e.addPotentialBet,this.addPotentialSPBet=e.addPotentialSPBet,this.calculateDutching=e.calculateDutching,this.calculateReverseDutching=e.calculateReverseDutching,this.calculateEqualisePayouts=e.calculateEqualisePayouts,this.checkCrossMatching=e.checkCrossMatching,this.getAllPlaceableEditedOpenBets=e.getAllPlaceableEditedOpenBets,this.getAllPlaceablePotentialBets=e.getAllPlaceablePotentialBets,this.getAllPotentialBets=e.getAllPotentialBets,this.getMatchedBets=e.getMatchedBets,this.getPotentialBets=e.getPotentialBets,this.getPotentialSPBets=e.getPotentialSPBets,this.getSPBets=e.getSPBets,this.getUnmatchedBets=e.getUnmatchedBets,this.nudgeDownPotentialBet=e.nudgeDownPotentialBet,this.nudgeDownPotentialSPBet=e.nudgeDownPotentialSPBet,this.nudgeDownSPBet=e.nudgeDownSPBet,this.nudgeDownUnmatchedBet=e.nudgeDownUnmatchedBet,this.nudgeUpPotentialBet=e.nudgeUpPotentialBet,this.nudgeUpPotentialSPBet=e.nudgeUpPotentialSPBet,this.nudgeUpSPBet=e.nudgeUpSPBet,this.nudgeUpUnmatchedBet=e.nudgeUpUnmatchedBet,this.removePotentialBet=e.removePotentialBet,this.removePotentialSPBet=e.removePotentialSPBet,this.setMarketOpenBets=e.setMarketOpenBets,this.updateLimitOnCloseSPBet=e.updateLimitOnCloseSPBet,this.updatePotentialBet=e.updatePotentialBet,this.updatePotentialSPBet=e.updatePotentialSPBet,this.updateUnmatchedBet=e.updateUnmatchedBet,this.calcCashoutWhatif=d.calcCashoutWhatif,this.getMarketPosition=h.getMarketPosition,this.getRunnersPosition=h.getRunnersPosition,this.validatePrice=f.validatePrice,this.validateSize=f.validateSize}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./bet"),g=d(f),h=a("./cashout"),i=d(h),j=a("./ladder"),k=d(j),l=a("./market"),m=d(l),n=a("./position"),o=d(n),p=a("./../../state-manager"),q=d(p);c["default"]=e},{"./../../state-manager":63,"./bet":7,"./cashout":8,"./ladder":10,"./market":11,"./position":12}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(b,c,d){(0,f.assertIsValidBetSide)(b,"side"),(0,f.assertIsValidBetCategoryType)(c,"betCategoryType");var e=a.getSizeLadderByCriteria(b,c);return e.isValid(d)}function c(b,c,d,e){(0,f.assertIsValidLadderType)(b,"ladderType"),(0,f.assertIsValidBetSide)(c,"side"),(0,f.assertIsValidBetCategoryType)(d,"betCategoryType");var g=a.getPriceLadderByCriteria(b,c,d);return g.isValid(e)}(0,f.assertIsInstanceOf)(a,"stateManager",h["default"]),this.validateSize=b,this.validatePrice=c}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./../../utils/assertions"),g=a("./../../state-manager"),h=d(g);c["default"]=e},{"./../../state-manager":63,"./../../utils/assertions":66}],11:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a){function b(a,b){var c=(0,j.find)(a.getRunners(),function(a){return a.getSelectionId()===b});return!!(0,h.isDefined)(c)&&c.isHome()}function c(b){return(0,g.assertIsNotEmptyString)(b,"marketId"),a.hasMarket(b)}function d(b,d,e){if((0,g.assertIsObject)(b,"market"),(0,g.assertIsArray)(d,"activeRunners"),(0,g.assertIsNotEmptyString)(b.id,"market.id"),c(b.id))throw new m["default"](k.ERROR_CODES.MARKET_ALREADY_EXISTS,{marketId:b.id});var f=(0,i.getBettingBehaviour)(b.type,b.bettingType);f===k.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE&&(0,g.assertIsValidSelectionId)(e,"homeSelectionId");var h=o.createMarket(b,d,e);a.addMarket(h)}function e(b){return(0,g.assertIsNotEmptyString)(b,"marketId"),a.removeMarket(b)}function f(a,c){var d={add:!1,remove:!1};return c.forEach(function(c){if(!a.hasRunner(c.selectionId,c.handicap)){var e=void 0;e=a.getBettingBehaviour()===k.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE?(0,j.merge)(c,{isHome:b(a,c.selectionId)}):c;var f=o.createRunner(a.getType(),a.getBettingType(),e);d.add=!0,a.addRunner(f)}}),(0,i.forEach)(a.getRunners(),function(b){var e=(0,j.some)(c,function(a){return a.selectionId===b.getSelectionId()&&a.handicap===b.getHandicap()});e||(a.removeRunner(b.getSelectionId(),b.getHandicap()),d.remove=!0)}),d}function l(b,c,d){if((0,g.assertIsNotEmptyString)(b,"marketId"),(0,g.assertIsObject)(c,"marketUpdate"),(0,h.isDefined)(d)){if((0,g.assertIsArray)(d,"activeRunners"),
d.length<k.MARKET.MINIMUM_NUMBER_OF_RUNNERS)throw new m["default"](k.ERROR_CODES.MARKET_MUST_HAVE_AT_LEAST_TWO_RUNNERS,{marketId:b,activeRunners:d});d.forEach(function(a){(0,g.assertIsObject)(a,"runner"),(0,g.assertIsValidSelectionId)(a.selectionId,"runner.selectionId"),(0,g.assertIsHandicapValue)(a.handicap,"runner.handicap")})}var e=a.getMarket(b),j=e.update((0,i.pick)(c,t)),l=(0,h.isDefined)(d)?f(e,d):{add:!1,remove:!1},n={market:{numberOfWinners:(0,h.isDefined)(j.numberOfWinners),complete:(0,h.isDefined)(j.complete),eachWayDivisor:(0,h.isDefined)(j.eachWayDivisor)},runner:{added:l.add,removed:l.remove}},o=(0,r.checkWhatMustBeRecalculatedIfMarketChanges)(n);return(0,s.recalculatePositions)(e,o),o}(0,g.assertIsInstanceOf)(a,"stateManager",q["default"]),this.has=c,this.add=d,this.remove=e,this.update=l}Object.defineProperty(c,"__esModule",{value:!0});var g=a("./../../utils/assertions"),h=a("./../../utils/validations"),i=a("./../../utils/utils"),j=a("mout/object"),k=a("./../../config/index"),l=a("./../../errors/bet-engine-error"),m=e(l),n=a("./../../factory"),o=d(n),p=a("./../../state-manager"),q=e(p),r=a("./../../business-logic/helper"),s=a("./../helpers/positions"),t=["type","bettingType","numberOfWinners","bspReconciled","complete","baseRate","discountAllowed","eachWayDivisor"];c["default"]=f},{"./../../business-logic/helper":23,"./../../config/index":28,"./../../errors/bet-engine-error":32,"./../../factory":35,"./../../state-manager":63,"./../../utils/assertions":66,"./../../utils/utils":70,"./../../utils/validations":71,"./../helpers/positions":4,"mout/object":168}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a,b){(0,f.assertIsObject)(a,"pnlTable"),(0,f.assertIsObject)(b,"discountValues");var c=(0,l.discountWith)(b.marketBaseRate,b.userDiscount,b.settledProfit);return(0,g.mapOwn)(a,c)}function c(a,b){var c=0;return 0!==a?b||c:b}function d(a,b){var d={win:c(a,b.win),lose:c(a,b.lose)};return b.hasOwnProperty("placed")&&(d.placed=c(a,b.placed)),d}function e(a,b){(0,f.assertIsObject)(a,"runnerPnl"),(0,f.assertIsObject)(b,"discountValues");var c=(0,l.discountWith)(b.marketBaseRate,b.userDiscount,b.settledProfit),e=d(b.settledProfit,a),g={win:(0,i.isDefined)(e.win)?c(e.win):e.win,lose:(0,i.isDefined)(e.lose)?c(e.lose):e.lose};return e.hasOwnProperty("placed")&&(g.placed=(0,i.isDefined)(e.placed)?c(e.placed):e.placed),g}function j(c,d){(0,f.assertIsNotEmptyString)(c,"marketId"),(0,i.isDefined)(d)&&(0,f.assertIsObject)(d,"discountOptions");var e=a.getMarket(c),g=e.getPosition(),j=e.getBettingBehaviour();switch(j){case h.BETTING_BEHAVIOUR.ODDS_GENERIC:return{potentialExposure:g.getPotentialExposure(),bookPercentage:{back:g.getBackBookPercentage(),lay:g.getLayBookPercentage()}};case h.BETTING_BEHAVIOUR.ODDS_EACH_WAY:return{bookPercentage:{back:g.getBackBookPercentage(),lay:g.getLayBookPercentage()}};case h.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE:case h.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE:case h.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS:var k=(0,l.getDiscountValues)(e,a.getUserDiscount(),d),m=b(g.getPnlTable(),k),n=b(g.getWorstCasePnlTable(),k);return{pnlTable:m,worstCasePnlTable:n,bookPercentage:{back:g.getBackBookPercentage(),lay:g.getLayBookPercentage()}};default:throw new Error("unsupported betting behaviour")}}function n(b,c){(0,f.assertIsNotEmptyString)(b,"marketId"),(0,i.isDefined)(c)&&(0,f.assertIsObject)(c,"discountOptions");var d=a.getMarket(b),g=(0,l.getDiscountValues)(d,a.getUserDiscount(),c),h=(0,m.merge)(g,{settledProfit:0}),j=[];return(0,m.forOwn)(d.getRunners(),function(a){var b=a.getPosition();j.push({selectionId:a.getSelectionId(),handicap:a.getHandicap(),potentialPnl:e(b.getPotentialPnl(),h),pnl:e(b.getActualPnl(),g),whatIf:e(b.getWhatIf(),g)})}),j}(0,f.assertIsInstanceOf)(a,"stateManager",k["default"]),this.getMarketPosition=j,this.getRunnersPosition=n}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./../../utils/assertions"),g=a("./../../utils/utils"),h=a("./../../config/index"),i=a("./../../utils/validations"),j=a("./../../state-manager"),k=d(j),l=a("./../helpers"),m=a("mout/object");c["default"]=e},{"./../../config/index":28,"./../../state-manager":63,"./../../utils/assertions":66,"./../../utils/utils":70,"./../../utils/validations":71,"./../helpers":2,"mout/object":168}],13:[function(a,b,c){"use strict";function d(a,b,c,d){(0,m.assertIsValidBetSide)(a,"side"),(0,m.assertIsPositive)(b,"size"),(0,m.assertIsPositive)(c,"price");var e;return(0,h.isDefined)(d)&&(d=(0,j.getValidDiscountOptions)(d)),e=(0,k.calculateLiability)(a,c,b),d&&(e=(0,k.applyDiscounts)(e,d.marketBaseRate,d.discount,d.settledProfit)),e}function e(a,b,c){(0,m.assertIsPositive)(a,"size"),(0,m.assertIsPositive)(b,"price"),(0,h.isDefined)(c)&&(c=(0,j.getValidDiscountOptions)(c));var d=(0,k.calculatePayout)(b,a);return c&&(d=(0,k.applyDiscounts)(d,c.marketBaseRate,c.discount,c.settledProfit)),d}function f(a,b,c,d){(0,m.assertIsValidBetSide)(a,"side"),(0,m.assertIsPositive)(b,"size"),(0,m.assertIsPositive)(c,"price"),(0,h.isDefined)(d)&&(d=(0,j.getValidDiscountOptions)(d));var e=(0,k.calculateProfit)(a,c,b);return d&&(e=(0,k.applyDiscounts)(e,d.marketBaseRate,d.discount,d.settledProfit)),e}function g(a){(0,m.assertIsObject)(a,"runnersPrices");var b=0,c=0;return(0,i.forEach)(a,function(a){(0,h.isDefined)(a.back)&&(0,m.assertIsPositive)(a.back,"runner.back"),(0,h.isDefined)(a.lay)&&(0,m.assertIsPositive)(a.lay,"runner.lay"),b+=(0,l.getRunnerBackPercentageBook)(a.back),c+=(0,l.getRunnerLayPercentageBook)(a.lay)}),{back:b,lay:c}}Object.defineProperty(c,"__esModule",{value:!0}),c.totalBookPercentage=c.profit=c.payout=c.liability=void 0;var h=a("./../../utils/validations"),i=a("./../../utils/utils"),j=a("./../helpers"),k=a("./../../business-logic/pnl"),l=a("./../../business-logic/helper"),m=a("./../../utils/assertions");c.liability=d,c.payout=e,c.profit=f,c.totalBookPercentage=g},{"./../../business-logic/helper":23,"./../../business-logic/pnl":24,"./../../utils/assertions":66,"./../../utils/utils":70,"./../../utils/validations":71,"./../helpers":2}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}Object.defineProperty(c,"__esModule",{value:!0}),c.CONST=c.calc=void 0;var f=a("./../../config"),g=e(f),h=a("./calculations"),i=e(h),j=a("mout/lang/clone"),k=d(j),l=(0,k["default"])({BET:{CATEGORY_TYPE:g.BET.CATEGORY_TYPES,EXPOSURE_DESIGNATOR:g.BET.EXPOSURE_DESIGNATOR,ORDER_TYPE:g.BET.ORDER_TYPES,SIDE:g.BET.SIDE},ERROR_CODES:g.ERROR_CODES,LADDER:{VALIDATIONS_REASONS:g.LADDER.VALIDATIONS_REASONS},MARKET:{BETTING_TYPE:g.MARKET.BETTING_TYPES,HANDICAP_REFUND_VALUES:g.MARKET.HANDICAP_REFUND_VALUES,MINIMUM_NUMBER_OF_RUNNERS:g.MARKET.MINIMUM_NUMBER_OF_RUNNERS,TYPE:g.MARKET.MARKET_TYPES}});c.calc=i,c.CONST=l},{"./../../config":28,"./calculations":13,"mout/lang/clone":133}],15:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f=(0,i.getExposureByDesignator)(a,b,d);return f=(0,i.getTransformedExposureAccordingToBetSide)(f,c),f=(0,i.getTransformedExposureAccordingToBetType)(f,e)}function e(a){var b={WHOLE:j.BET.EXPOSURE_DESIGNATOR.STAKE_REFUND,HALF:j.BET.EXPOSURE_DESIGNATOR.LOSS,LOWERQUARTER:a<0?j.BET.EXPOSURE_DESIGNATOR.HALF_LOSS:j.BET.EXPOSURE_DESIGNATOR.HALF_WIN,UPPERQUARTER:a>0?j.BET.EXPOSURE_DESIGNATOR.HALF_LOSS:j.BET.EXPOSURE_DESIGNATOR.HALF_WIN};return b[(0,i.getAsianHandicapType)(Math.abs(a%1))]}function f(a,b,c){var d,f=(0,i.getOutcomeSign)(b)*a,g=Math.round(c);return d=f<g?j.BET.EXPOSURE_DESIGNATOR.WIN:f>g?j.BET.EXPOSURE_DESIGNATOR.LOSS:e(c)}function g(a,b,c,e,g,i,j){(0,h.assertIsPositive)(a,"price"),(0,h.assertIsPositive)(b,"size"),(0,h.assertIsValidBetSide)(c,"side"),(0,h.assertIsNotEmptyString)(e,"betType"),(0,h.assertIsValidRunnerSide)(g,"side"),(0,h.assertIsHandicapValue)(i,"handicap"),(0,h.assertIsObject)(j,"handicapLimits"),(0,h.assertIsNumber)(j.upper,"handicapLimits.upper"),(0,h.assertIsNumber)(j.lower,"handicapLimits.lower");var k,l,m={};for(l=j.lower;l<=j.upper;l++)k=f(l,g,i),m[l]=d(a,b,c,k,e);return m}Object.defineProperty(c,"__esModule",{value:!0}),c.buildHandicapLimits=c.calculateBetTotalExposure=void 0;var h=a("./../../utils/assertions"),i=a("./../helper"),j=a("../../config");c.calculateBetTotalExposure=g,c.buildHandicapLimits=i.buildHandicapLimits},{"../../config":28,"./../../utils/assertions":66,"./../helper":23}],16:[function(a,b,c){"use strict";function d(a,b,c,d){return c>=d?(0,l.calculateProfit)(m.BET.SIDE.BACK,a,b):-(0,l.calculateLiability)(m.BET.SIDE.BACK,a,b)}function e(a,b,c,d){return c>=d?-(0,l.calculateLiability)(m.BET.SIDE.LAY,a,b):(0,l.calculateProfit)(m.BET.SIDE.LAY,a,b)}function f(a,b,c,f,g){var h={BACK:d,LAY:e};return h[c](a,b,f,g)}function g(a,b){return b===m.BET.STATUS.UNMATCHED&&a>0?0:a}function h(a,b,c,d,e,h){var i=f(a,b,c,d,e);return i=g(i,h)}function i(a,b,c,d,e,f){(0,k.assertIsPositive)(a,"price"),(0,k.assertIsPositive)(b,"size"),(0,k.assertIsValidBetSide)(c,"side"),(0,k.assertIsNotEmptyString)(d,"betStatus"),(0,k.assertIsHandicapValue)(e,"handicap"),(0,k.assertIsObject)(f,"handicapLimits"),(0,k.assertIsNumber)(f.upper,"handicapLimits.upper"),(0,k.assertIsNumber)(f.lower,"handicapLimits.lower");var g={},i=0;for(i=f.lower;i<=f.upper;i++)g[i]=h(a,b,c,e,i,d);return g}function j(a){return(0,k.assertArrayElementsAreOfType)(a,"handicaps","number"),{upper:0,lower:Math.ceil(Math.min.apply(Math,a)-1)}}Object.defineProperty(c,"__esModule",{value:!0}),c.buildHandicapLimits=c.calculateBetTotalExposure=void 0;var k=a("./../../utils/assertions"),l=a("./../pnl"),m=a("../../config");c.calculateBetTotalExposure=i,c.buildHandicapLimits=j},{"../../config":28,"./../../utils/assertions":66,"./../pnl":24}],17:[function(a,b,c){"use strict";function d(a,b,c){return c=c||Boolean.bind(Boolean,!0),a.reduce(function(a,d){var e=d[b];return(0,h.isDefined)(e)&&c(e)?(0,i.sum)(a,d[b]):a},0)}function e(a,b){(0,g.assertArrayElementsAreOfType)(a,"exposureOfMatchedBets","object"),(0,g.assertIsObject)(b,"handicapLimits"),(0,g.assertIsNumber)(b.upper,"handicapLimits.upper"),(0,g.assertIsNumber)(b.lower,"handicapLimits.lower");for(var c={},e=b.lower;e<=b.upper;e++)c[e]=d(a,e);return c}function f(a,b,c){(0,g.assertArrayElementsAreOfType)(a,"exposureOfMatchedBets","object"),(0,g.assertArrayElementsAreOfType)(b,"exposureOfUnmatchedBets","object"),(0,g.assertIsObject)(c,"handicapLimits"),(0,g.assertIsNumber)(c.upper,"handicapLimits.upper"),(0,g.assertIsNumber)(c.lower,"handicapLimits.lower");for(var e={},f=c.lower;f<=c.upper;f++){var h=d(a,f),j=d(b,f,function(a){return a<0});e[f]=(0,i.sum)(h,j)}return e}Object.defineProperty(c,"__esModule",{value:!0}),c.calculateWorstCasePnlTable=c.calculatePnlTable=void 0;var g=a("./../../utils/assertions"),h=a("./../../utils/validations"),i=a("./../../utils/calculator");c.calculatePnlTable=e,c.calculateWorstCasePnlTable=f},{"./../../utils/assertions":66,"./../../utils/calculator":67,"./../../utils/validations":71}],18:[function(a,b,c){"use strict";function d(a){return(0,i.isNumber)(a.price)}function e(a,b){return(0,k.sum)(a,(0,k.div)(1,b.price))}function f(a){(0,j.assertIsObject)(a,"potentialBetsByRunner");var b={back:void 0,lay:void 0},c=(0,h.filter)((0,h.map)((0,g.values)(a),function(a){return a.back}),i.isObject),f=(0,h.filter)((0,h.map)((0,g.values)(a),function(a){return a.lay}),i.isObject),k=(0,h.filter)(c,d),l=(0,h.filter)(f,d);return k.length>0&&(b.back=(0,h.reduce)(k,e,0)),l.length>0&&(b.lay=(0,h.reduce)(l,e,0)),b}Object.defineProperty(c,"__esModule",{value:!0}),c.calculateBookPercentage=void 0;var g=a("mout/object"),h=a("mout/array"),i=a("mout/lang"),j=a("./../utils/assertions"),k=a("./../utils/calculator");c.calculateBookPercentage=f},{"./../utils/assertions":66,"./../utils/calculator":67,"mout/array":78,"mout/lang":131,"mout/object":168}],19:[function(a,b,c){"use strict";function d(a,b,c){(0,k.assertIsNotNegative)(a,"quoteMinPartialPercentage"),(0,k.assertIsNotNegative)(b,"quoteMaxPartialPercentage"),(0,k.assertIsNotNegative)(c,"cashoutPercentage");var d=(0,l.getPercentageConvertedIntoRatio)(c),e=(0,j.sub)(b,a);return Math.round((0,j.sum)((0,j.mult)(e,d),a))}function e(a,b,c){return(0,j.sum)((0,j.mult)((0,j.sub)(b,a),c),a)}function f(a){return(0,k.assertIsNumber)(a,"quoteLiability"),a>0?a:0}function g(a,b,c,f,g){(0,k.assertIsNumber)(a,"minMatchedProfit"),(0,k.assertIsNumber)(b,"quoteProfit");var h=d(c,f,g),i=(0,l.getPercentageConvertedIntoRatio)(h);return e(a,b,i)}function h(a,b){return(0,k.assertIsNumber)(a,"minMatchedProfit"),(0,k.assertIsNumber)(b,"cashoutProfit"),(0,j.sub)(b,a)}function i(a,b,c,f){(0,k.assertIsObject)(a,"runners");var g=d(b,c,f),h=(0,l.getPercentageConvertedIntoRatio)(g);return(0,l.mapOwn)(a,function(a){return(0,k.assertIsNumber)(a.matchedProfit,"runner.matchedProfit must be a number"),(0,k.assertIsNumber)(a.cashoutWhatIf,"runner.cashoutWhatIf must be a number"),e(a.matchedProfit,a.cashoutWhatIf,h)})}Object.defineProperty(c,"__esModule",{value:!0}),c.calculateRunnersWhatIf=c.calculatePayout=c.calculateProfit=c.calculateLiability=c.calculateNormalizedPercentage=void 0;var j=a("./../utils/calculator"),k=a("./../utils/assertions"),l=a("./../utils/utils");c.calculateNormalizedPercentage=d,c.calculateLiability=f,c.calculateProfit=g,c.calculatePayout=h,c.calculateRunnersWhatIf=i},{"./../utils/assertions":66,"./../utils/calculator":67,"./../utils/utils":70}],20:[function(a,b,c){"use strict";function d(a,b){return(0,i.assertIsObject)(a,"runners"),(0,i.assertIsNumber)(b,"payout"),(0,h.mapOwn)(a,function(a){return(0,g.div)(b,a)})}function e(a,b,c){return(0,i.assertIsObject)(a,"runners"),(0,i.assertIsNumber)(b,"liability"),(0,i.assertIsNotNegative)(c,"numberOfWinners"),c>0&&(b=(0,g.div)(b,Math.min(c,Object.keys(a).length))),(0,h.mapOwn)(a,function(a){return(0,g.div)(b,(0,g.sub)(a,1))})}function f(a,b){(0,i.assertIsObject)(a,"runners"),(0,i.assertIsPositive)(b,"size");var c=0;return(0,h.forEach)(a,function(a){c=(0,g.sum)(c,(0,g.div)(1,a))}),(0,h.mapOwn)(a,function(a){return(0,g.div)((0,g.div)(b,a),c)})}Object.defineProperty(c,"__esModule",{value:!0}),c.reverseDutch=c.dutch=c.equalisePayouts=void 0;var g=a("./../utils/calculator"),h=a("./../utils/utils"),i=a("./../utils/assertions");c.equalisePayouts=d,c.dutch=f,c.reverseDutch=e},{"./../utils/assertions":66,"./../utils/calculator":67,"./../utils/utils":70}],21:[function(a,b,c){"use strict";function d(a,b,c){return(0,j.mult)((0,j.div)((0,j.sub)(a,1),c),b)}function e(a,b,c,e){(0,h.assertIsValidBetSide)(a,"side"),(0,h.assertIsPositive)(b,"price"),(0,h.assertIsPositive)(c,"size"),(0,h.assertIsPositive)(e,"divisor");var f=d(b,c,e);return(0,j.mult)((0,i.getBetSign)(a),(0,j.sum)((0,j.mult)((0,j.sub)(b,1),c),f))}function f(a,b,c,e){(0,h.assertIsValidBetSide)(a,"side"),(0,h.assertIsPositive)(b,"price"),(0,h.assertIsPositive)(c,"size"),(0,h.assertIsPositive)(e,"divisor");var f=d(b,c,e);return parseFloat((0,j.mult)((0,i.getBetSign)(a),(0,j.sub)(f,c)))}function g(a,b){return(0,h.assertIsValidBetSide)(a,"side"),(0,h.assertIsPositive)(b,"size"),(0,i.getBetSign)(a)*(0,j.mult)(-b,2)}Object.defineProperty(c,"__esModule",{value:!0}),c.calculateEachWayWhatIfUnplaced=c.calculateEachWayWhatIfPlaced=c.calculateEachWayWhatIfWin=void 0;var h=a("./../../utils/assertions"),i=a("./../helper"),j=a("./../../utils/calculator");c.calculateEachWayWhatIfWin=e,c.calculateEachWayWhatIfPlaced=f,c.calculateEachWayWhatIfUnplaced=g},{"./../../utils/assertions":66,"./../../utils/calculator":67,"./../helper":23}],22:[function(a,b,c){"use strict";function d(a,b){return(0,o.sub)(a.payout,b.payout)}function e(a,b){return(0,o.sum)(a,b.payout)}function f(a,b){return(0,o.sum)(a,b.lose)}function g(a,b){return a.slice(0,b).reduce(e,0)}function h(a,b){return b||(b=a.length),a.slice(0,b).filter(function(a){return a.payout<0}).reduce(e,0)}function i(a,b,c){var e,i,j=a.reduce(f,0);return i=a.slice().sort(d),e=c&&b>0?g(i,b):h(i,b),-(0,o.sum)(e,j)}function j(a){return a.reduce(function(a,b){return b.hasOwnProperty("spLiability")?(0,o.sub)(a,b.spLiability):(0,o.sub)(a,b.liability)},0)}function k(a){return(0,n.assertIsObject)(a,"runnersPotentialBets"),(0,m.mapOwn)(a,function(a){var b=0,c=0;return a.lay.length&&(c=j(a.lay)),a.back.length&&(b=j(a.back)),{win:c,lose:b,payout:(0,o.sub)(c,b)}})}function l(a,b,c){(0,n.assertIsObject)(a,"runnersExposure"),(0,n.assertIsNotNegative)(b,"numberOfWinners"),(0,n.assertIsBoolean)(c,"isComplete");var d=[];return(0,m.forEach)(a,function(a){return d.push(a)}),i(d,b,c)}Object.defineProperty(c,"__esModule",{value:!0}),c.calculateMarketExposure=c.calculateRunnersExposure=void 0;var m=a("./../utils/utils"),n=a("./../utils/assertions"),o=a("./../utils/calculator");c.calculateRunnersExposure=k,c.calculateMarketExposure=l},{"./../utils/assertions":66,"./../utils/calculator":67,"./../utils/utils":70}],23:[function(a,b,c){"use strict";function d(a){return(0,w.isDefined)(a)?((0,u.assertIsPositive)(a,"bestBackPrice"),1/a):1}function e(a){return(0,w.isDefined)(a)?((0,u.assertIsPositive)(a,"bestLayPrice"),1/a):0}function f(a){return(0,u.assertIsValidBetSide)(a,"side"),y[a]}function g(a){return(0,u.assertIsValidRunnerSide)(a,"homeOrAway"),z[a]}function h(a){return(0,u.assertIsNumber)(a,"handicapRemainder"),t.MARKET.HANDICAP_REFUND_VALUES[a]}function i(a,b){return(0,v.calculateProfit)("BACK",b,a)}function j(){return 0}function k(a){return-a}function l(a,b){return(0,x.div)(i(a,b),2)}function m(a){return(0,x.div)(k(a),2)}function n(a,b,c){var d={W:i,L:k,HW:l,HL:m,SR:j};return d[c](b,a)}function o(a,b){return 0!==a?(0,x.mult)(f(b),a):0}function p(a,b){return b===t.BET.STATUS.UNMATCHED&&a>0?0:a}function q(a){return(0,u.assertArrayElementsAreOfType)(a,"handicaps","number"),{upper:Math.floor((0,x.sum)(Math.max.apply(Math,a),1)),lower:Math.ceil((0,x.sub)(Math.min.apply(Math,a),1))}}function r(a){var b={runnerPosition:{betCalculations:{potential:!1,potentialSp:!1,matched:!1,unmatched:!1,sp:!1,reconciledSp:!1},actualPnl:!1,potentialPnl:!1,whatIf:!1},marketPosition:{bookPercentage:{back:!1,lay:!1},openExposure:!1,potentialExposure:!1,totalExposure:!1,pnlTable:!1}};if(a.potential&&(a.potential.price===!0||a.potential.size===!0||a.potential.validBets===!0))switch(b.runnerPosition.betCalculations.potential=!0,b.runnerPosition.potentialPnl=!0,a.potential.size&&(b.marketPosition.potentialExposure=!0),a.potential.side){case"BACK":a.potential.price!==!0&&a.potential.validBets!==!0||(b.marketPosition.bookPercentage.back=!0);break;case"LAY":a.potential.price!==!0&&a.potential.validBets!==!0||(b.marketPosition.bookPercentage.lay=!0,b.marketPosition.potentialExposure=!0);break;case"BOTH":a.potential.price!==!0&&a.potential.validBets!==!0||(b.marketPosition.bookPercentage.back=!0,b.marketPosition.bookPercentage.lay=!0,b.marketPosition.potentialExposure=!0)}if(a.potentialSp===!0&&(b.runnerPosition.betCalculations.potentialSp=!0,b.marketPosition.potentialExposure=!0),a.matched===!0&&(b.runnerPosition.betCalculations.matched=!0,b.runnerPosition.actualPnl=!0,b.runnerPosition.whatIf=!0,b.marketPosition.openExposure=!0,b.marketPosition.totalExposure=!0,b.marketPosition.pnlTable=!0),a.unmatched&&(a.unmatched.price===!0||a.unmatched.size===!0||a.unmatched.validBets===!0))if(b.runnerPosition.betCalculations.unmatched=!0,b.marketPosition.pnlTable=!0,a.unmatched.validBets===!0)b.marketPosition.openExposure=!0;else switch(a.unmatched.side){case"BACK":a.unmatched.size&&(b.marketPosition.openExposure=!0);break;case"LAY":b.marketPosition.openExposure=!0;break;case"BOTH":b.marketPosition.openExposure=!0}return a.sp&&(a.sp.price!==!0&&a.sp.size!==!0||(b.runnerPosition.betCalculations.sp=!0,a.sp.size===!0&&(b.marketPosition.openExposure=!0)),a.sp.reconciled===!0&&(b.runnerPosition.actualPnl=!0,b.marketPosition.openExposure=!0,b.runnerPosition.betCalculations.reconciledSp=!0)),b.runnerPosition.whatIf=b.runnerPosition.actualPnl||b.runnerPosition.potentialPnl,b.marketPosition.totalExposure=b.marketPosition.openExposure||b.marketPosition.potentialExposure,b}function s(a){var b={runnerPosition:{betCalculations:{potential:!1,matched:!1,unmatched:!1},actualPnl:!1,potentialPnl:!1,whatIf:!1},marketPosition:{openExposure:!1,potentialExposure:!1,totalExposure:!1,pnlTable:!1}};return a.market&&((a.market.numberOfWinners||a.market.complete)&&(b.marketPosition.potentialExposure=!0),a.market.eachWayDivisor&&(b.runnerPosition.actualPnl=!0,b.runnerPosition.betCalculations.potential=!0,b.runnerPosition.betCalculations.matched=!0,b.runnerPosition.betCalculations.unmatched=!0)),a.runner&&(a.runner.added||a.runner.removed)&&(b.runnerPosition.actualPnl=!0,b.runnerPosition.potentialPnl=!0,b.marketPosition.potentialExposure=!0,b.marketPosition.openExposure=!0,b.marketPosition.pnlTable=!0),b.runnerPosition.whatIf=b.runnerPosition.actualPnl||b.runnerPosition.potentialPnl,b.marketPosition.totalExposure=b.marketPosition.openExposure||b.marketPosition.potentialExposure,b}Object.defineProperty(c,"__esModule",{value:!0}),c.checkWhatMustBeRecalculatedIfMarketChanges=c.checkWhatMustBeRecalculated=c.buildHandicapLimits=c.getTransformedExposureAccordingToBetType=c.getTransformedExposureAccordingToBetSide=c.getExposureByDesignator=c.getAsianHandicapType=c.getOutcomeSign=c.getBetSign=c.getRunnerBackPercentageBook=c.getRunnerLayPercentageBook=void 0;var t=a("./../config"),u=a("./../utils/assertions"),v=a("./pnl"),w=a("./../utils/validations"),x=a("./../utils/calculator"),y={BACK:1,LAY:-1},z={HOME:-1,AWAY:1};c.getRunnerLayPercentageBook=e,c.getRunnerBackPercentageBook=d,c.getBetSign=f,c.getOutcomeSign=g,c.getAsianHandicapType=h,c.getExposureByDesignator=n,c.getTransformedExposureAccordingToBetSide=o,c.getTransformedExposureAccordingToBetType=p,c.buildHandicapLimits=q,c.checkWhatMustBeRecalculated=r,c.checkWhatMustBeRecalculatedIfMarketChanges=s},{"./../config":28,"./../utils/assertions":66,"./../utils/calculator":67,"./../utils/validations":71,"./pnl":24}],24:[function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(a){return(0,D.assertIsNumber)(a.profitIfWin,"runnerPnl.profitIfWin"),(0,D.assertIsNumber)(a.profitIfLose,"runnerPnl.profitIfLose"),(0,A.sub)(a.profitIfWin,a.profitIfLose)}function f(a,b){return(0,A.sub)(e(a),e(b))}function g(a,b){return(0,D.assertIsObject)(a,"pnl"),(0,D.assertIsNumber)(a.lose,"pnl.lose"),(0,D.assertIsNumber)(a.win,"pnl.win"),(0,D.assertIsNumber)(b,"marketLoss"),(0,A.sum)((0,A.sub)(b,a.lose),a.win)}function h(a,b,c){return(0,D.assertIsValidBetSide)(a,"side"),(0,D.assertIsPositive)(b,"price"),(0,D.assertIsPositive)(c,"size"),(0,B.isBack)(a)?(0,A.mult)((0,A.sub)(b,1),c):c}function i(a,b){return(0,D.assertIsPositive)(a,"price"),(0,D.assertIsPositive)(b,"size"),(0,A.mult)(a,b)}function j(a,b,c){return(0,D.assertIsValidBetSide)(a,"side"),(0,D.assertIsPositive)(b,"price"),(0,D.assertIsPositive)(c,"size"),(0,B.isBack)(a)?c:(0,A.mult)((0,A.sub)(b,1),c)}function k(a,b,c){return(0,D.assertIsValidBetSide)(a,"side"),(0,D.assertIsPositive)(b,"priceLimit"),(0,D.assertIsPositive)(c,"spLiability"),a===y.BET.SIDE.LAY?(0,A.div)(c,(0,A.sub)(b,1)):h(a,b,c)}function l(a,b,c){return(0,D.assertIsObject)(a,"runners"),(0,D.assertIsNumber)(b,"marketPotentialLoss"),(0,D.assertIsNumber)(c,"marketMatchedLoss"),(0,z.mapOwn)(a,function(a){return(0,D.assertIsObject)(a.whatif,"runner.whatif"),(0,D.assertIsObject)(a.matchedProfit,"runner.matchedProfit"),{whatIfWin:g(a.whatif,b),matchedProfitIfWin:g(a.matchedProfit,c)}})}function m(a){(0,D.assertIsObject)(a,"runners");var b=0;return(0,z.forEach)(a,function(a){(0,D.assertIsNumber)(a.profitIfLose,"runner.profitIfLose must be a number"),b=(0,A.sum)(b,a.profitIfLose)}),b}function n(a,b,c,d){(0,D.assertIsNumber)(a,"value"),(0,D.assertIsNumber)(b,"discount"),(0,D.assertIsBoolean)(c,"discountAllowed"),(0,D.assertIsNumber)(d,"marketBaseRate");var e;return a>0&&(e=c?(0,z.getPercentageConvertedIntoRatio)(b):0,a=(0,A.mult)(a,(0,A.sub)(1,(0,A.div)((0,A.mult)(d,(0,A.sub)(1,e)),100)))),a}function o(a,b){return(0,D.assertIsNumber)(a,"value"),(0,D.assertIsNumber)(b,"settledProfit"),(0,A.sum)(a,b)}function p(a,b,c,d){var e;return a=(0,A.sum)(a,d),a>0&&0!==b&&(b=b>0?(0,A.div)(b,100):0,c=c>0?(0,A.div)(c,100):0,e=(0,A.mult)(b,(0,A.sub)(1,c)),a=(0,A.mult)(a,(0,A.sub)(1,e))),a}function q(a){return(0,x.reduce)(a,function(a,b){return(0,B.isDefined)(b.lose)&&(a=(0,A.sum)(a,b.lose)),a},0)}function r(a,b,c){var e,f=c[a],g=c[b],h=(0,x.some)([f,g],function(a){return(0,B.isDefined)(a.win)&&(0,B.isDefined)(a.lose)});return h?(e={},d(e,a,{win:(0,z.sumIfDefined)(f.win,g.lose),lose:(0,z.sumIfDefined)(f.lose,g.win)}),d(e,b,{win:(0,z.sumIfDefined)(g.win,f.lose),lose:(0,z.sumIfDefined)(g.lose,f.win)}),e):{}}function s(a,b){if(0===a.length)return b?{win:void 0,lose:void 0,placed:void 0}:{win:void 0,lose:void 0};var c={win:0,lose:0};return b&&(c.placed=0),a.reduce(function(a,c){return a.win=(0,A.sum)(a.win,c.win),a.lose=(0,A.sum)(a.lose,c.lose),b&&(a.placed=(0,A.sum)(a.placed,c.placed)),a},c)}function t(a,b,c,d,e){(0,D.assertIsNotNegative)(b,"marketNumberOfWinners");var f=(0,z.mapOwn)(a,function(a){var b=a.filter(function(a){return(0,B.isDefined)(a.win)&&(0,B.isDefined)(a.lose)});return s(b,c)});switch(d){case y.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS:return v(f,e);default:return u(f,b)}return f}function u(a,b){if(1===b){var c=(0,x.some)(a,function(a){return(0,B.isDefined)(a.win)&&(0,B.isDefined)(a.lose)});c&&!function(){var b=q(a);(0,x.forOwn)(a,function(a){var c=a.win||0,d=a.lose||0;a.win=(0,A.sub)((0,A.sum)(c,b),d)})}(),(0,x.forOwn)(a,function(a){a.lose=void 0})}return a}function v(a,b){var c=Object.keys(a),d=Number((0,C.extractSelectionId)(c[0])),e=Number((0,C.extractSelectionId)(c[1]));return(0,x.forOwn)(c,function(c){if(Number((0,C.extractSelectionId)(c))!==e){var f=(0,C.getLineRunnerIdFromPair)(c,d,e,b),g=r(c,f,a);(0,x.mixIn)(a,g)}}),a}function w(a,b,c){var d={};return(0,z.forEach)(a,function(a,e){var f=b[e],g={win:void 0,lose:void 0};(0,B.isDefined)(f.win)&&(g.win=(0,B.isDefined)(a.win)?(0,A.sum)(a.win,f.win):f.win),(0,B.isDefined)(f.lose)&&(g.lose=(0,B.isDefined)(a.lose)?(0,A.sum)(a.lose,f.lose):f.lose),c&&(g.placed=void 0,(0,B.isDefined)(f.placed)&&(g.placed=(0,B.isDefined)(a.placed)?(0,A.sum)(a.placed,f.placed):f.placed)),d[e]=g}),d}Object.defineProperty(c,"__esModule",{value:!0}),c.calculateRunnersWhatIf=c.calculateRunnersPnl=c.applyDiscounts=c.runnerLiabilityComparator=c.getValueSettledProfit=c.getValueWithCommission=c.getMarketLoss=c.getPnLWithMarketLossForSingleWinnerMarkets=c.getProfitWithMarketLoss=c.calculateSPMinProfit=c.calculateLiability=c.calculateProfit=c.calculatePayout=void 0;var x=a("mout/object"),y=a("./../config"),z=a("./../utils/utils"),A=a("./../utils/calculator"),B=a("./../utils/validations"),C=a("./../utils/runner"),D=a("./../utils/assertions");c.calculatePayout=i,c.calculateProfit=h,c.calculateLiability=j,c.calculateSPMinProfit=k,c.getProfitWithMarketLoss=g,c.getPnLWithMarketLossForSingleWinnerMarkets=l,c.getMarketLoss=m,c.getValueWithCommission=n,c.getValueSettledProfit=o,c.runnerLiabilityComparator=f,c.applyDiscounts=p,c.calculateRunnersPnl=t,c.calculateRunnersWhatIf=w},{"./../config":28,"./../utils/assertions":66,"./../utils/calculator":67,"./../utils/runner":69,"./../utils/utils":70,"./../utils/validations":71,"mout/object":168}],25:[function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(a,b,c,d,e){var f=(0,k.getExposureByDesignator)(a,b,d);return f=(0,k.getTransformedExposureAccordingToBetSide)(f,c),f=(0,k.getTransformedExposureAccordingToBetType)(f,e)}function f(a){var b={WHOLE:l.BET.EXPOSURE_DESIGNATOR.STAKE_REFUND,HALF:l.BET.EXPOSURE_DESIGNATOR.LOSS,LOWERQUARTER:l.BET.EXPOSURE_DESIGNATOR.HALF_WIN,UPPERQUARTER:l.BET.EXPOSURE_DESIGNATOR.HALF_LOSS};return b[(0,k.getAsianHandicapType)(Math.abs(a%1))]}function g(a){var b,c=(b={},d(b,l.BET.EXPOSURE_DESIGNATOR.LOSS,l.BET.EXPOSURE_DESIGNATOR.WIN),d(b,l.BET.EXPOSURE_DESIGNATOR.WIN,l.BET.EXPOSURE_DESIGNATOR.LOSS),d(b,l.BET.EXPOSURE_DESIGNATOR.HALF_WIN,l.BET.EXPOSURE_DESIGNATOR.HALF_LOSS),d(b,l.BET.EXPOSURE_DESIGNATOR.HALF_LOSS,l.BET.EXPOSURE_DESIGNATOR.HALF_WIN),b);return c[a]||a}function h(a,b,c,d){var e,h=a,i=Math.round(c);return d===l.MARKET.MARKET_TYPES.HANDICAP&&(h=(0,k.getOutcomeSign)(b)*a),e=h<i?l.BET.EXPOSURE_DESIGNATOR.WIN:h>i?l.BET.EXPOSURE_DESIGNATOR.LOSS:f(c,b),d!==l.MARKET.MARKET_TYPES.HANDICAP&&"AWAY"===b&&h!==c&&(e=g(e)),e}function i(a,b,c,d,f,g,i,k){(0,j.assertIsPositive)(a,"price"),(0,j.assertIsPositive)(b,"size"),(0,j.assertIsValidBetSide)(c,"side"),(0,j.assertIsNotEmptyString)(d,"betType"),(0,j.assertIsValidRunnerSide)(f,"side"),(0,j.assertIsHandicapValue)(g,"handicap"),(0,j.assertIsObject)(i,"handicapLimits"),(0,j.assertIsNumber)(i.upper,"handicapLimits.upper"),(0,j.assertIsNumber)(i.lower,"handicapLimits.lower"),(0,j.assertIsNotEmptyString)(k,"marketType");var l,m,n={};for(m=i.lower;m<=i.upper;m++)l=h(m,f,g,k),n[m]=e(a,b,c,l,d);return n}Object.defineProperty(c,"__esModule",{value:!0}),c.buildHandicapLimits=c.calculateBetTotalExposure=void 0;var j=a("./../../utils/assertions"),k=a("./../helper"),l=a("../../config");c.calculateBetTotalExposure=i,c.buildHandicapLimits=k.buildHandicapLimits},{"../../config":28,"./../../utils/assertions":66,"./../helper":23}],26:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BACK:"BACK",LAY:"LAY"},e={MATCHED:"MATCHED",UNMATCHED:"UNMATCHED"},f={POTENTIAL:"PotentialBet",POTENTIAL_SP:"PotentialSPBet",MATCHED:"MatchedBet",UNMATCHED:"UnmatchedBet",SP:"SPBet",RECONCILED_SP:"ReconciledSPBet"},g={EXCHANGE:"EXCHANGE",SP:"SP"},h={WIN:"W",LOSS:"L",STAKE_REFUND:"SR",HALF_WIN:"HW",HALF_LOSS:"HL"},i={LIMIT:"LIMIT",LIMIT_ON_CLOSE:"LIMIT_ON_CLOSE",MARKET_ON_CLOSE:"MARKET_ON_CLOSE"},j={LIMIT_ON_CLOSE:"LIMIT_ON_CLOSE",MARKET_ON_CLOSE:"MARKET_ON_CLOSE"};c.SIDE=d,c.STATUS=e,c.TYPE=f,c.CATEGORY_TYPES=g,c.EXPOSURE_DESIGNATOR=h,c.ORDER_TYPES=i,c.SP_ORDER_TYPES=j},{}],27:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=["BET_ALREADY_EXISTS_IN_RUNNER","BET_DOES_NOT_EXIST","BET_ORDER_TYPE_IS_NOT_LIMIT_ON_CLOSE","GENERIC_ERROR","INVALID_PRICE","INVALID_SIZE","MARKET_ALREADY_EXISTS","MARKET_CANNOT_HAVE_RUNNERS_WITH_REPEATED_IDS","MARKET_DOES_NOT_EXIST","MARKET_MUST_HAVE_AT_LEAST_TWO_RUNNERS","RUNNER_DOES_NOT_EXIST","RUNNER_DOES_NOT_HAVE_POTENTIAL_BET","RUNNER_DOES_NOT_HAVE_POTENTIAL_SP_BET","RUNNER_DOES_NOT_HAVE_POSITION","RUNNER_MUST_ONLY_HAVE_ONE_POTENTIAL_BET_OF_EACH_SIDE","RUNNER_MUST_ONLY_HAVE_ONE_POTENTIAL_BET_SP_OF_EACH_SIDE"],e={};d.forEach(function(a){e[a]=a}),c.ERROR_CODES=e},{}],28:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}Object.defineProperty(c,"__esModule",{value:!0}),c.RUNNER=c.MARKET=c.LADDER=c.ERROR_CODES=c.BETTING_BEHAVIOUR=c.BET=void 0;var e=a("./bet"),f=d(e),g=a("./runner"),h=d(g),i=a("./market"),j=d(i),k=a("./errors"),l=a("./ladders"),m=d(l),n={ODDS_GENERIC:"ODDS_GENERIC",ODDS_EACH_WAY:"ODDS_EACH_WAY",ASIAN_HANDICAP_SINGLE_LINE:"ASIAN_HANDICAP_SINGLE_LINE",ASIAN_HANDICAP_DOUBLE_LINE:"ASIAN_HANDICAP_DOUBLE_LINE",SPREADS_AND_TOTALS:"SPREADS_AND_TOTALS"};c.BET=f,c.BETTING_BEHAVIOUR=n,c.ERROR_CODES=k.ERROR_CODES,c.LADDER=m,c.MARKET=j,c.RUNNER=h},{"./bet":26,"./errors":27,"./ladders":29,"./market":30,"./runner":31}],29:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ABOVE_MAX_PRICE:"ABOVE_MAX_PRICE",ABOVE_MAX_SIZE:"ABOVE_MAX_SIZE",ABOVE_SP_LAY_BET_INITIAL_PRICE:"ABOVE_SP_LAY_BET_INITIAL_PRICE",BELOW_MIN_PRICE:"BELOW_MIN_PRICE",BELOW_MIN_SIZE:"BELOW_MIN_SIZE",BELOW_SP_BACK_BET_INITIAL_PRICE:"BELOW_SP_BACK_BET_INITIAL_PRICE",INVALID_STEP:"INVALID_STEP"},e={CLASSIC:"CLASSIC",FINEST:"FINEST",
LINE:"LINE"};c.VALIDATIONS_REASONS=d,c.LADDER_TYPES=e},{}],30:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ODDS:"ODDS",ASIAN_HANDICAP_SINGLE_LINE:"ASIAN_HANDICAP_SINGLE_LINE",ASIAN_HANDICAP_DOUBLE_LINE:"ASIAN_HANDICAP_DOUBLE_LINE"},e={ASIAN_HANDICAP:"ASIAN_HANDICAP",HANDICAP:"HANDICAP",ALT_TOTAL_GOALS:"ALT_TOTAL_GOALS",COMBINED_TOTAL:"COMBINED_TOTAL",EACH_WAY:"EACH_WAY"},f={0:"WHOLE",.25:"LOWERQUARTER",.5:"HALF",.75:"UPPERQUARTER"},g=2;c.BETTING_TYPES=d,c.MARKET_TYPES=e,c.HANDICAP_REFUND_VALUES=f,c.MINIMUM_NUMBER_OF_RUNNERS=g},{}],31:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HOME:"HOME",AWAY:"AWAY"};c.SIDE=d},{}],32:[function(a,b,c){"use strict";function d(a,b){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,d);var c=void 0,f=void 0;this.name=d.name,e.ERROR_CODES.hasOwnProperty(a)?(f=a,c=b):(f=e.ERROR_CODES.GENERIC_ERROR,c=a),this.message=f,this.extendedInfo=c,c&&(this.message+=" ("+JSON.stringify(this.extendedInfo)+")")}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d;var e=a("./../config");d.prototype=Object.create(Error.prototype)},{"./../config":28}],33:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){switch((0,m.assertIsValidBettingBehaviour)(a,"bettingBehaviour"),a){case f.BETTING_BEHAVIOUR.ODDS_GENERIC:case f.BETTING_BEHAVIOUR.ODDS_EACH_WAY:return new h["default"];case f.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE:case f.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE:return new j["default"];case f.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS:return new l["default"];default:throw new Error("Unsupported betting behaviour "+a)}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./../config"),g=a("./../models/bet-calculations/bet-calculations.js"),h=d(g),i=a("./../models/bet-calculations/ah-bet-calculations.js"),j=d(i),k=a("./../models/bet-calculations/spreads-and-totals-bet-calculations.js"),l=d(k),m=a("./../utils/assertions");c["default"]=e},{"./../config":28,"./../models/bet-calculations/ah-bet-calculations.js":38,"./../models/bet-calculations/bet-calculations.js":40,"./../models/bet-calculations/spreads-and-totals-bet-calculations.js":41,"./../utils/assertions":66}],34:[function(a,b,c){"use strict";function d(a){return j.BET.SIDE.BACK===a}function e(a){var b,c,d,e=a.price,f=a.size,g=a.side;return(0,m.isDefined)(e)&&(0,m.isDefined)(f)&&(b=(0,l.calculateProfit)(g,e,f),c=(0,l.calculateLiability)(g,e,f),d=(0,l.calculatePayout)(e,f)),{profit:b,liability:c,payout:d}}function f(a){(0,n.assertIsObject)(a,"betAttributes"),(0,n.assertIsValidBetSide)(a.side,"betAttributes.side");var b=e(a);return new k.PotentialBet(d(a.side),a.price,a.size,b.profit,b.liability,b.payout)}function g(a){(0,n.assertIsObject)(a,"betAttributes"),(0,n.assertIsValidBetSide)(a.side,"betAttributes.side");var b=void 0;return(0,m.isDefined)(a.priceLimit)&&(0,n.assertIsPositive)(a.priceLimit,"betAttributes.priceLimit"),(0,m.isDefined)(a.spLiability)&&(0,n.assertIsPositive)(a.spLiability,"betAttributes.spLiability"),(0,m.isDefined)(a.priceLimit)&&(0,m.isDefined)(a.spLiability)&&(b=(0,l.calculateSPMinProfit)(a.side,a.priceLimit,a.spLiability)),new k.PotentialSPBet(d(a.side),a.priceLimit,a.spLiability,b)}function h(a,b){(0,n.assertIsObject)(a,"betAttributes"),(0,n.assertIsValidBetSide)(a.side,"betAttributes.side"),(0,n.assertIsNotEmptyString)(b,"betType");var c=e(a);switch(b){case j.BET.TYPE.UNMATCHED:return new k.UnmatchedBet(d(a.side),a.price,a.size,c.profit,c.liability,c.payout,a.id);case j.BET.TYPE.MATCHED:return new k.MatchedBet(d(a.side),a.price,a.size,c.profit,c.liability,c.payout,a.id);default:throw new Error("unsupported bet type: '"+b+"'")}}function i(a){if((0,n.assertIsObject)(a,"betAttributes"),(0,n.assertIsValidBetSide)(a.side,"betAttributes.side"),(0,m.isDefined)(a.size)&&(0,m.isDefined)(a.price)){var b=e(a);return new k.ReconciledSPBet(d(a.side),a.orderType,a.id,a.price,a.size,b.profit,b.liability,b.payout)}if((0,n.assertIsPositive)(a.spLiability,"betAttributes.spLiability"),a.orderType===j.BET.ORDER_TYPES.LIMIT_ON_CLOSE&&!(0,m.isDefined)(a.priceLimit))throw new Error("LIMIT_ON_CLOSE bets must have priceLimit defined");var c=void 0;return(0,m.isDefined)(a.priceLimit)&&((0,n.assertIsPositive)(a.priceLimit,"betAttributes.priceLimit"),c=(0,l.calculateSPMinProfit)(a.side,a.priceLimit,a.spLiability)),new k.SPBet(d(a.side),a.orderType,a.id,a.spLiability,a.priceLimit,c)}Object.defineProperty(c,"__esModule",{value:!0}),c.createSPBet=c.createPlacedBet=c.createPotentialSPBet=c.createPotentialBet=void 0;var j=a("./../config"),k=a("./../models/bet"),l=a("./../business-logic/pnl"),m=a("./../utils/validations"),n=a("./../utils/assertions");c.createPotentialBet=f,c.createPotentialSPBet=g,c.createPlacedBet=h,c.createSPBet=i},{"./../business-logic/pnl":24,"./../config":28,"./../models/bet":44,"./../utils/assertions":66,"./../utils/validations":71}],35:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c.createSPBet=c.createRunner=c.createPlacedBet=c.createPotentialSPBet=c.createPotentialBet=c.createMarket=c.createInitialBetCalculations=void 0;var e=a("./bet"),f=a("./bet-calculations"),g=d(f),h=a("./runner"),i=d(h),j=a("./market"),k=d(j);c.createInitialBetCalculations=g["default"],c.createMarket=k["default"],c.createPotentialBet=e.createPotentialBet,c.createPotentialSPBet=e.createPotentialSPBet,c.createPlacedBet=e.createPlacedBet,c.createRunner=i["default"],c.createSPBet=e.createSPBet},{"./bet":34,"./bet-calculations":33,"./market":36,"./runner":37}],36:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=new l["default"](a.id,a.type,a.bettingType,a.priceLadderType,a.numberOfWinners,a.bspReconciled,a.complete,a.baseRate,a.discountAllowed,a.settledProfit,b),d=(0,u.getMarketHandicapLimits)(c),e=(0,v.calculatePnlTable)([],d),f=(0,v.calculatePnlTable)([],d);return c.setPosition(new n["default"](e,f)),c}function f(a,b){var c=new l["default"](a.id,a.type,a.bettingType,a.priceLadderType,a.numberOfWinners,a.bspReconciled,a.complete,a.baseRate,a.discountAllowed,a.settledProfit,b);return c.setPosition(new r["default"]),c}function g(a,b){var c=new j["default"](a.id,a.type,a.bettingType,a.priceLadderType,a.numberOfWinners,a.bspReconciled,a.complete,a.baseRate,a.discountAllowed,a.settledProfit,b,a.eachWayDivisor);return c.setPosition(new p["default"]),c}function h(a,b,c){(0,w.assertIsObject)(a,"market"),(0,w.assertIsArray)(b,"runners");var d=(0,x.getBettingBehaviour)(a.type,a.bettingType);d!==y.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE&&d!==y.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS||(0,w.assertIsValidSelectionId)(c,"homeSelectionId");var h=b.map(function(b){(0,w.assertIsObject)(b,"runner");var e={selectionId:b.selectionId,handicap:b.handicap};return d!==y.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE&&d!==y.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS||(e.isHome=c===b.selectionId),(0,t["default"])(a.type,a.bettingType,e)});switch(d){case y.BETTING_BEHAVIOUR.ODDS_GENERIC:return f(a,h);case y.BETTING_BEHAVIOUR.ODDS_EACH_WAY:return g(a,h);case y.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE:case y.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE:case y.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS:return e(a,h);default:throw new Error("unsupported betting behaviour: "+d)}}Object.defineProperty(c,"__esModule",{value:!0});var i=a("./../models/market/eachway-market"),j=d(i),k=a("./../models/market/market"),l=d(k),m=a("./../models/market-position/ah-market-position"),n=d(m),o=a("./../models/market-position/eachway-market-position"),p=d(o),q=a("./../models/market-position/market-position"),r=d(q),s=a("./runner"),t=d(s),u=a("./../api/helpers/market"),v=a("./../business-logic/asian-handicap/pnl-table.js"),w=a("./../utils/assertions"),x=a("./../utils/utils"),y=a("./../config");c["default"]=h},{"./../api/helpers/market":3,"./../business-logic/asian-handicap/pnl-table.js":17,"./../config":28,"./../models/market-position/ah-market-position":54,"./../models/market-position/eachway-market-position":55,"./../models/market-position/market-position":56,"./../models/market/eachway-market":57,"./../models/market/market":58,"./../utils/assertions":66,"./../utils/utils":70,"./runner":37}],37:[function(a,b,c){"use strict";function d(a,b,c){var d,h=(0,e.getBettingBehaviour)(a,b);return d=h===f.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE||h===f.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS?new g.AsianHandicapRunner(c.selectionId,c.handicap,c.isHome,h):new g.Runner(c.selectionId,c.handicap,h),d.setPosition(new g.RunnerPosition(h)),d}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./../utils/utils"),f=a("./../config"),g=a("./../models/runner");c["default"]=d},{"./../config":28,"./../models/runner":60,"./../utils/utils":70}],38:[function(a,b,c){"use strict";function d(a){(0,e.isDefined)(a)&&(0,f.assertIsObject)(a,"exposureByOutcome"),this.getExposureByOutcome=function(){return a},this.setExposureByOutcome=function(b){(0,e.isDefined)(b)&&(0,f.assertIsObject)(b,"newExposureByOutcome"),a=b}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./../../utils/validations"),f=a("./../../utils/assertions");c["default"]=d},{"./../../utils/assertions":66,"./../../utils/validations":71}],39:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b={win:a.getWin(),lose:a.getLose()};return a.getPlaced()&&(b.placed=a.getPlaced()),b}function f(a){return{table:a.getExposureByOutcome()?(0,p["default"])(a.getExposureByOutcome()):void 0}}function g(a){var b=e(a),c=f(a);return(0,r["default"])(b,c)}function h(a){if(a instanceof l["default"])return f(a);if(a instanceof j["default"])return e(a);if(a instanceof n["default"])return g(a);throw new Error("Bet calculations instance type is not supported")}Object.defineProperty(c,"__esModule",{value:!0});var i=a("./bet-calculations"),j=d(i),k=a("./ah-bet-calculations"),l=d(k),m=a("./spreads-and-totals-bet-calculations"),n=d(m),o=a("mout/lang/clone"),p=d(o),q=a("mout/object/mixIn"),r=d(q);c["default"]=h},{"./ah-bet-calculations":38,"./bet-calculations":40,"./spreads-and-totals-bet-calculations":41,"mout/lang/clone":133,"mout/object/mixIn":192}],40:[function(a,b,c){"use strict";function d(a,b,c){(0,e.isDefined)(a)&&(0,f.assertIsNumber)(a,"win"),(0,e.isDefined)(b)&&(0,f.assertIsNumber)(b,"lose"),(0,e.isDefined)(c)&&(0,f.assertIsNumber)(c,"placed"),this.getWin=function(){return a},this.getLose=function(){return b},this.getPlaced=function(){return c},this.setWin=function(b){(0,e.isDefined)(a)&&(0,f.assertIsNumber)(a,"win"),a=b},this.setLose=function(a){(0,e.isDefined)(b)&&(0,f.assertIsNumber)(b,"lose"),b=a},this.setPlaced=function(a){(0,e.isDefined)(c)&&(0,f.assertIsNumber)(c,"placed"),c=a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./../../utils/validations"),f=a("./../../utils/assertions");c["default"]=d},{"./../../utils/assertions":66,"./../../utils/validations":71}],41:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c,d){g["default"].call(this,a,b,c),i["default"].call(this,d)}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./bet-calculations.js"),g=d(f),h=a("./ah-bet-calculations.js"),i=d(h);c["default"]=e},{"./ah-bet-calculations.js":38,"./bet-calculations.js":40}],42:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){return{selectionId:a,handicap:b,side:c.getSide(),size:c.getSize(),price:c.getPrice(),profit:c.getProfit(),liability:c.getLiability(),payout:c.getPayout(),orderType:c.getOrderType()}}function f(a,b,c){var d={selectionId:a,handicap:b,side:c.getSide(),spLiability:c.getSPLiability(),orderType:c.getOrderType()};return c.getOrderType()===n.BET.ORDER_TYPES.LIMIT_ON_CLOSE&&(d.priceLimit=c.getPriceLimit(),d.minProfit=c.getMinProfit()),d}function g(a,b,c){var d={selectionId:a,handicap:b,id:c.getId(),side:c.getSide(),price:c.getPrice(),size:c.getSize(),orderType:c.getOrderType(),profit:c.getProfit(),liability:c.getLiability(),payout:c.getPayout()};return c.hasPriceChanged()&&(d.newPrice=c.getNewPrice()),c.hasSizeChanged()&&(d.newSize=c.getNewSize()),d}function h(a,b,c){return{selectionId:a,handicap:b,id:c.getId(),side:c.getSide(),price:c.getPrice(),size:c.getSize(),profit:c.getProfit(),liability:c.getLiability(),payout:c.getPayout(),orderType:c.getOrderType()}}function i(a,b,c){var d={selectionId:a,handicap:b,id:c.getId(),side:c.getSide(),spLiability:c.getSPLiability(),orderType:c.getOrderType()};return c.getOrderType()===n.BET.ORDER_TYPES.LIMIT_ON_CLOSE&&(d.priceLimit=c.getPriceLimit(),d.minProfit=c.getMinProfit(),c.getNewPriceLimit()&&(d.newPriceLimit=c.getNewPriceLimit())),d}function j(a,b,c){return{selectionId:a,handicap:b,id:c.getId(),side:c.getSide(),price:c.getPrice(),size:c.getSize(),profit:c.getProfit(),liability:c.getLiability(),payout:c.getPayout(),orderType:c.getOrderType()}}function k(a,b,c,d){var e=q[(0,m.getBetType)(c)];if(!e)throw new Error("Unsupported bet type "+c);var f=e(a,b,c,d);return(0,l.isDefined)(d)&&(f.pnl=(0,p["default"])(d)),f}Object.defineProperty(c,"__esModule",{value:!0});var l=a("./../../utils/validations"),m=a("./index"),n=a("./../../config"),o=a("./../bet-calculations/bet-calculations-literal-builder"),p=d(o),q={};q[n.BET.TYPE.POTENTIAL]=e,q[n.BET.TYPE.POTENTIAL_SP]=f,q[n.BET.TYPE.MATCHED]=h,q[n.BET.TYPE.UNMATCHED]=g,q[n.BET.TYPE.SP]=i,q[n.BET.TYPE.RECONCILED_SP]=j,c["default"]=k},{"./../../config":28,"./../../utils/validations":71,"./../bet-calculations/bet-calculations-literal-builder":39,"./index":44}],43:[function(a,b,c){"use strict";function d(a,b,c,d,h,i){(0,g.assertIsBoolean)(a,"isBack"),this.getPrice=function(){return b},this.getSize=function(){return c},this.isBack=function(){return a},this.isLay=function(){return!a},this.hasPriceAndSizeDefined=function(){return!!b&&!!c},this.getProfit=function(){return d},this.getLiability=function(){return h},this.getPayout=function(){return i},this.getSide=function(){return a?e.SIDE.BACK:e.SIDE.LAY},this.setPrice=function(a){(0,f.isDefined)(a)?((0,g.assertIsPositive)(a,"newPrice"),b=a):b=void 0},this.setSize=function(a){(0,f.isDefined)(a)?((0,g.assertIsPositive)(a,"newSize"),c=a):c=void 0},this.setProfit=function(a){(0,f.isDefined)(a)?((0,g.assertIsNumber)(a,"newProfit"),d=a):d=void 0},this.setLiability=function(a){(0,f.isDefined)(a)?((0,g.assertIsNumber)(a,"newLiability"),h=a):h=void 0},this.setPayout=function(a){(0,f.isDefined)(a)?((0,g.assertIsNumber)(a,"newPayout"),i=a):i=void 0},this.setPrice(b),this.setSize(c),this.setProfit(d),this.setLiability(h),this.setPayout(i)}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../config/bet"),f=a("./../../utils/validations"),g=a("./../../utils/assertions");c["default"]=d},{"../../config/bet":26,"./../../utils/assertions":66,"./../../utils/validations":71}],44:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a instanceof q["default"])return t.BET.TYPE.POTENTIAL_SP;if(a instanceof o["default"])return t.BET.TYPE.POTENTIAL;if(a instanceof k["default"])return t.BET.TYPE.RECONCILED_SP;if(a instanceof i["default"])return t.BET.TYPE.MATCHED;if(a instanceof g["default"])return t.BET.TYPE.UNMATCHED;if(a instanceof m["default"])return t.BET.TYPE.SP;throw new Error("Unsupported bet type "+a)}Object.defineProperty(c,"__esModule",{value:!0}),c.buildBetLiteral=c.ReconciledSPBet=c.MatchedBet=c.SPBet=c.UnmatchedBet=c.PotentialSPBet=c.PotentialBet=c.getBetType=void 0;var f=a("./unmatched-bet"),g=d(f),h=a("./matched-bet"),i=d(h),j=a("./reconciled-sp-bet"),k=d(j),l=a("./sp-bet"),m=d(l),n=a("./potential-bet"),o=d(n),p=a("./potential-sp-bet"),q=d(p),r=a("./bet-literal-builder"),s=d(r),t=a("../../config/index");c.getBetType=e,c.PotentialBet=o["default"],c.PotentialSPBet=q["default"],c.UnmatchedBet=g["default"],c.SPBet=m["default"],c.MatchedBet=i["default"],c.ReconciledSPBet=k["default"],c.buildBetLiteral=s["default"]},{"../../config/index":28,"./bet-literal-builder":42,"./matched-bet":45,"./potential-bet":47,"./potential-sp-bet":48,"./reconciled-sp-bet":49,"./sp-bet":50,"./unmatched-bet":51}],45:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c,d,e,g,i){h["default"].call(this,a,b,c,d,e,g,i),this.getOrderType=function(){return f.ORDER_TYPES.LIMIT}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../config/bet"),g=a("./placed-bet"),h=d(g);e.prototype=Object.create(h["default"].prototype),c["default"]=e},{"../../config/bet":26,"./placed-bet":46}],46:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c,d,e,f,j){(0,i.assertIsNotNegative)(c,"size"),(0,i.assertIsNotEmptyString)(j,"id"),(0,h.isDefined)(b)&&((0,i.assertIsPositive)(b,"price"),(0,i.assertIsNumber)(d,"profit"),(0,i.assertIsNumber)(e,"liability"),(0,i.assertIsNumber)(f,"payout")),g["default"].call(this,a,b,c,d,e,f),this.getId=function(){return j}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./bet"),g=d(f),h=a("./../../utils/validations"),i=a("./../../utils/assertions");e.prototype=Object.create(g["default"].prototype),c["default"]=e},{"./../../utils/assertions":66,"./../../utils/validations":71,"./bet":43}],47:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c,d,e,f){g["default"].call(this,a,b,c,d,e,f),this.getPrice=function(){return b},this.getSize=function(){return c},this.getProfit=function(){return d},this.getLiability=function(){return e},this.getPayout=function(){return f},this.setPrice=function(a){(0,h.isDefined)(a)?((0,i.assertIsPositive)(a,"newPrice"),b=a):b=void 0},this.setSize=function(a){(0,h.isDefined)(a)?((0,i.assertIsPositive)(a,"newSize"),c=a):c=void 0},this.setProfit=function(a){(0,h.isDefined)(a)?((0,i.assertIsNumber)(a,"newProfit"),d=a):d=void 0},this.setLiability=function(a){(0,h.isDefined)(a)?((0,i.assertIsNumber)(a,"newLiability"),e=a):e=void 0},this.setPayout=function(a){(0,h.isDefined)(a)?((0,i.assertIsNumber)(a,"newPayout"),f=a):f=void 0},this.getOrderType=function(){return j.ORDER_TYPES.LIMIT},this.hasPriceAndSizeDefined=function(){return(0,h.isDefined)(b)&&(0,h.isDefined)(c)},this.setPrice(b),this.setSize(c),this.setProfit(d),this.setLiability(e),this.setPayout(f)}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=e;var f=a("./bet"),g=d(f),h=a("./../../utils/validations"),i=a("./../../utils/assertions"),j=a("../../config/bet");e.prototype=Object.create(g["default"].prototype)},{"../../config/bet":26,"./../../utils/assertions":66,"./../../utils/validations":71,"./bet":43}],48:[function(a,b,c){"use strict";function d(a,b,c,d){var h=this;(0,g.assertIsBoolean)(a,"isBack"),this.hasPriceLimit=function(){return(0,f.isDefined)(h.getPriceLimit())},this.getPriceLimit=function(){return b},this.getSPLiability=function(){return c},this.isBack=function(){return a},this.isLay=function(){return!a},this.hasPriceLimitAndSPLiabilityDefined=function(){return!!b&&!!c},this.getMinProfit=function(){return d},this.getSide=function(){return a?e.SIDE.BACK:e.SIDE.LAY},this.getOrderType=function(){return(0,f.isDefined)(this.getPriceLimit())?e.ORDER_TYPES.LIMIT_ON_CLOSE:e.ORDER_TYPES.MARKET_ON_CLOSE},this.setPriceLimit=function(a){(0,f.isDefined)(a)?((0,g.assertIsPositive)(a,"newPriceLimit"),b=a):b=void 0},this.setSPLiability=function(a){(0,f.isDefined)(a)?((0,g.assertIsPositive)(a,"newSPLiability"),c=a):c=void 0},this.setMinProfit=function(a){(0,f.isDefined)(a)?((0,g.assertIsNumber)(a,"newMinProfit"),d=a):d=void 0},this.setPriceLimit(b),this.setSPLiability(c),this.setMinProfit(d)}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../config/bet"),f=a("./../../utils/validations"),g=a("./../../utils/assertions");c["default"]=d},{"../../config/bet":26,"./../../utils/assertions":66,"./../../utils/validations":71}],49:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c,d,e,f,i,j){(0,h.assertIsValidSPOrderType)(b,"orderType"),g["default"].call(this,a,d,e,f,i,j,c),this.getOrderType=function(){return b}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./matched-bet"),g=d(f),h=a("./../../utils/assertions");e.prototype=Object.create(g["default"].prototype),c["default"]=e},{"./../../utils/assertions":66,"./matched-bet":45}],50:[function(a,b,c){"use strict";function d(a,b,c,d,h,i){(0,e.assertIsBoolean)(a,"isBack"),(0,e.assertIsValidSPOrderType)(b,"orderType"),(0,e.assertIsNotEmptyString)(c,"id"),(0,e.assertIsPositive)(d,"spLiability"),(0,g.isDefined)(h)&&((0,e.assertIsPositive)(h,"priceLimit"),(0,e.assertIsPositive)(i,"minProfit"));var j=!1,k=void 0;this.isBack=function(){return a},this.isLay=function(){return!a},this.getSide=function(){return a?f.BET.SIDE.BACK:f.BET.SIDE.LAY},this.getOrderType=function(){return b},this.getId=function(){return c},this.getSPLiability=function(){return d},this.getMinProfit=function(){return i},this.getPriceLimit=function(){return h},this.getNewPriceLimit=function(){return k},this.getCurrentPriceLimit=function(){return j?k:h},this.hasPriceLimitChanged=function(){return j},this.setPriceLimit=function(a){(0,g.isDefined)(a)&&(0,e.assertIsPositive)(a,"priceLimitToUpdate"),h=a},this.setNewPriceLimit=function(a){(0,g.isDefined)(a)&&(0,e.assertIsPositive)(a,"newPriceLimitToUpdate"),a!==h?(k=a,j=!0):(k=void 0,j=!1)},this.setMinProfit=function(a){(0,g.isDefined)(a)?((0,e.assertIsPositive)(a,"minProfitToUpdate"),i=a):i=void 0}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./../../utils/assertions"),f=a("./../../config"),g=a("./../../utils/validations");c["default"]=d},{"./../../config":28,"./../../utils/assertions":66,"./../../utils/validations":71}],51:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c,d,e,f,k){var l=this;g["default"].call(this,a,b,c,d,e,f,k);var m,n,o=!1,p=!1;this.getOrderType=function(){return h.ORDER_TYPES.LIMIT},this.getNewPrice=function(){return m},this.getNewSize=function(){return n},this.hasPriceChanged=function(){return o},this.hasSizeChanged=function(){return p},this.setNewPrice=function(a){(0,i.isDefined)(a)&&(0,j.assertIsPositive)(a,"newPriceToUpdate"),a!==b?(m=a,o=!0):(m=void 0,o=!1)},this.setNewSize=function(a){(0,i.isDefined)(a)&&(0,j.assertIsPositive)(a,"newSizeToUpdate"),a!==c?(n=a,p=!0):(n=void 0,p=!1)},this.getCurrentPrice=function(){return o?m:b},this.getCurrentSize=function(){return p?n:c},this.hasCurrentPriceAndSizeDefined=function(){return(0,i.isDefined)(l.getCurrentPrice())&&(0,i.isDefined)(l.getCurrentSize())}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./placed-bet"),g=d(f),h=a("../../config/bet"),i=a("./../../utils/validations"),j=a("./../../utils/assertions");e.prototype=Object.create(g["default"].prototype),c["default"]=e},{"../../config/bet":26,"./../../utils/assertions":66,"./../../utils/validations":71,"./placed-bet":46}],52:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){return a.minimum-b.minimum}function f(a,b){return a>=b}function g(a,b){return a>b}function h(a,b,c){function d(){return a}function h(){return b}function k(a){var d=void 0,e=void 0,g=(0,i.findLastIndex)(c,function(b){return f(a,b.minimum)});if(g>=0&&(d=c[g],d!==(0,i.last)(c)&&(e=c[g+1])),d||e)return{minimum:d.minimum,maximum:e?e.minimum:b}}function n(a,b){var d=void 0;return c.some(function(c){return!b(a,c.minimum)||void(d=c.increment)}),d}function o(a){return n(a,f)}function p(a){return n(a,g)}function q(c){(0,j.assertIsNotNegative)(c,"price");var d=void 0,e=void 0;return c<a?a:c>=b?b:(d=o(c),e=l.getRemainder(c,d),l.getNudgeUpFinalValue(c,e,d))}function r(c){(0,j.assertIsNotNegative)(c,"price");var d=void 0,e=void 0;return c<=a?a:c>b?b:(d=p(c),e=l.getRemainder(c,d),l.getNudgeDownFinalValue(c,e,d))}function s(c){(0,j.assertIsPositive)(c,"price");var e=void 0,g=void 0;return c<a?l.buildValidationResponse(!1,{reason:m.LADDER.VALIDATIONS_REASONS.BELOW_MIN_PRICE,minimum:d()}):c>b?l.buildValidationResponse(!1,{reason:m.LADDER.VALIDATIONS_REASONS.ABOVE_MAX_PRICE,maximum:h()}):(g=n(c,f),e=0===l.getRemainder(c,g),e?l.buildValidationResponse(!0,null):l.buildValidationResponse(!1,{reason:m.LADDER.VALIDATIONS_REASONS.INVALID_STEP,previousStep:r(c),nextStep:q(c),increment:g,interval:k(c)}))}(0,j.assertIsPositive)(a,"minPrice"),(0,j.assertIsPositive)(b,"maxPrice"),(0,j.assertIsArray)(c,"steps"),function(){c.forEach(function(a){(0,j.assertIsObject)(a,"step"),(0,j.assertIsPositive)(a.minimum,"step.minimum"),(0,j.assertIsPositive)(a.increment,"step.increment")}),c.sort(e)}(),this.getMinimum=d,this.getMaximum=h,this.isValid=s,this.nudgeUp=q,this.nudgeDown=r}Object.defineProperty(c,"__esModule",{value:!0});var i=a("mout/array"),j=a("./../../utils/assertions"),k=a("./../../utils/ladder.js"),l=d(k),m=a("./../../config/index.js");c["default"]=h},{"./../../config/index.js":28,"./../../utils/assertions":66,"./../../utils/ladder.js":68,"mout/array":78}],53:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b,c){function d(){return a}function e(){return b}function g(g){if((0,f.assertIsNotNegative)(g,"size"),g<a)return h.buildValidationResponse(!1,{reason:i.LADDER.VALIDATIONS_REASONS.BELOW_MIN_SIZE,minimum:d()});if(g>b)return h.buildValidationResponse(!1,{reason:i.LADDER.VALIDATIONS_REASONS.ABOVE_MAX_SIZE,maximum:e()});var l=k(g),m=j(g),n=(m-l)/c;return g===l||g===m||Math.round(n)>=2?h.buildValidationResponse(!0,null):h.buildValidationResponse(!1,{reason:i.LADDER.VALIDATIONS_REASONS.INVALID_STEP,previousStep:l,nextStep:m,increment:c})}function j(d){(0,f.assertIsNotNegative)(d,"size");var e,g,i;return d>=b?b:d<a?a:(d=h.fixNumberWithTwoDecimalPlaces(100*d),i=100*c,e=h.getRemainder(d,i),g=h.getNudgeUpFinalValue(d,e,i),h.fixNumberWithTwoDecimalPlaces(g/100))}function k(d){(0,f.assertIsNotNegative)(d,"size");var e,g,i;return d<=a?a:d>b?b:(d=h.fixNumberWithTwoDecimalPlaces(100*d),i=100*c,e=h.getRemainder(d,i),g=h.getNudgeDownFinalValue(d,e,i),h.fixNumberWithTwoDecimalPlaces(g/100))}(0,f.assertIsNotNegative)(a,"minSize"),(0,f.assertIsNotNegative)(b,"maxSize"),(0,f.assertIsPositive)(c,"increment"),this.getMinimum=d,this.getMaximum=e,this.isValid=g,this.nudgeUp=j,this.nudgeDown=k}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./../../utils/assertions"),g=a("./../../utils/ladder.js"),h=d(g),i=a("./../../config/index.js");c["default"]=e},{"./../../config/index.js":28,"./../../utils/assertions":66,"./../../utils/ladder.js":68}],54:[function(a,b,c){"use strict";function d(a,b){(0,e.assertIsObject)(a,"pnlTable"),(0,e.assertIsObject)(b,"worstCasePnlTable");var c,d;this.getBackBookPercentage=function(){return c},this.getLayBookPercentage=function(){return d},this.setBackBookPercentage=function(a){(0,f.isDefined)(a)&&(0,e.assertIsValidBookPercentage)(a,"newBackBookPercentage"),c=a},this.setLayBookPercentage=function(a){(0,f.isDefined)(a)&&(0,e.assertIsValidBookPercentage)(a,"newLayBookPercentage"),d=a},this.getPnlTable=function(){return a},this.getWorstCasePnlTable=function(){return b},this.setPnlTable=function(b){(0,e.assertIsObject)(b,"newPnlTable"),a=b},this.setWorstCasePnlTable=function(a){(0,e.assertIsObject)(a,"newWorstCasePnlTable"),b=a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../utils/assertions"),f=a("../../utils/validations");c["default"]=d},{"../../utils/assertions":66,"../../utils/validations":71}],55:[function(a,b,c){"use strict";function d(){var a,b;this.getBackBookPercentage=function(){return a},this.getLayBookPercentage=function(){return b},this.setBackBookPercentage=function(b){(0,f.isDefined)(b)&&(0,e.assertIsValidBookPercentage)(b,"newBackBookPercentage"),a=b},this.setLayBookPercentage=function(a){(0,f.isDefined)(a)&&(0,e.assertIsValidBookPercentage)(a,"newLayBookPercentage"),b=a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../utils/assertions"),f=a("../../utils/validations");c["default"]=d},{"../../utils/assertions":66,"../../utils/validations":71}],56:[function(a,b,c){"use strict";function d(){var a,b,c=0;this.getPotentialExposure=function(){return c},this.getBackBookPercentage=function(){return a},this.getLayBookPercentage=function(){return b},this.setPotentialExposure=function(a){(0,e.assertIsNumber)(a,"newPotentialExposure"),c=a},this.setBackBookPercentage=function(b){(0,f.isDefined)(b)&&(0,e.assertIsValidBookPercentage)(b,"newBackBookPercentage"),a=b},this.setLayBookPercentage=function(a){(0,f.isDefined)(a)&&(0,e.assertIsValidBookPercentage)(a,"newLayBookPercentage"),b=a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../utils/assertions"),f=a("../../utils/validations");c["default"]=d},{"../../utils/assertions":66,"../../utils/validations":71}],57:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c,d,e,g,j,k,l,m,n,o){i.call(this,a,b,c,d,e,g,j,k,l,m,n),(0,f.assertIsNumber)(o,"eachWayDivisor");var p;this.getPosition=function(){return p},this.setPosition=function(a){(0,f.assertIsInstanceOf)(a,"newMarketPosition",h["default"]),p=a},this.getEachWayDivisor=function(){return o},this.setEachWayDivisor=function(a){(0,f.assertIsNumber)(a,"newEachWayDivisor"),o=a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./../../utils/assertions"),g=a("../market-position/eachway-market-position"),h=d(g),i=a("./market")["default"];e.prototype=Object.create(i.prototype),c["default"]=e},{"../market-position/eachway-market-position":55,"./../../utils/assertions":66,"./market":58}],58:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){a.hasOwnProperty("type")&&(0,u.assertIsNotEmptyString)(a.type,"update.type"),a.hasOwnProperty("bettingType")&&(0,u.assertIsValidBettingType)(a.bettingType,"update.bettingType"),a.hasOwnProperty("numberOfWinners")&&(0,u.assertIsNotNegative)(a.numberOfWinners,"update.numberOfWinners"),a.hasOwnProperty("bspReconciled")&&(0,u.assertIsBoolean)(a.bspReconciled,"update.bspReconciled"),a.hasOwnProperty("complete")&&(0,u.assertIsBoolean)(a.complete,"update.complete"),a.hasOwnProperty("baseRate")&&(0,u.assertIsNotNegative)(a.baseRate,"update.baseRate"),a.hasOwnProperty("discountAllowed")&&(0,u.assertIsBoolean)(a.discountAllowed,"update.discountAllowed"),a.hasOwnProperty("settledProfit")&&(0,u.assertIsNumber)(a.settledProfit,"update.settledProfit")}function f(a,b,c){return c===h.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE||c===h.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS?l["default"].buildId(a,b):n["default"].buildId(a)}function g(a,b,c,d,g,i,k,l,m,o,q){if((0,u.assertIsNotEmptyString)(a,"id"),(0,t.isDefined)(b)&&(0,u.assertIsNotEmptyString)(b,"type"),(0,u.assertIsValidBettingType)(c,"bettingType"),(0,u.assertIsValidLadderType)(d,"priceLadderType"),(0,u.assertIsNotNegative)(g,"numberOfWinners"),(0,u.assertIsBoolean)(i,"bspReconciled"),(0,u.assertIsBoolean)(k,"complete"),(0,u.assertIsNotNegative)(l,"baseRate"),(0,u.assertIsBoolean)(m,"discountAllowed"),(0,u.assertIsNumber)(o,"settledProfit"),(0,u.assertIsArray)(q,"runners"),q.length<h.MARKET.MINIMUM_NUMBER_OF_RUNNERS)throw new j["default"](h.ERROR_CODES.MARKET_MUST_HAVE_AT_LEAST_TWO_RUNNERS,{marketId:a,runners:q});var v,w={},x=0;this.getId=function(){return a},this.getType=function(){return b},this.getBettingType=function(){return c},this.getPriceLadderType=function(){return d},this.getNumberOfWinners=function(){return g},this.getBaseRate=function(){return l},this.hasDiscountAllowed=function(){return m},this.getSettledProfit=function(){return o},this.isBspReconciled=function(){return i},this.isComplete=function(){return k},this.getRunners=function(){var a={};
return(0,s.forEach)(w,function(b,c){b&&(a[c]=b)}),a},this.hasRunner=function(a,b){var c=f(a,b,this.getBettingBehaviour());return(0,t.isDefined)(w[c])},this.addRunner=function(a){if((0,u.assertIsInstanceOf)(a,"runner",n["default"]),(0,t.isDefined)(w[a.getId()]))throw new j["default"](h.ERROR_CODES.MARKET_CANNOT_HAVE_RUNNERS_WITH_REPEATED_IDS,{selectionId:a.getSelectionId(),handicap:a.getHandicap()});w[a.getId()]=a,x++},this.getRunner=function(a,b){var c=f(a,b,this.getBettingBehaviour());if(!this.hasRunner(a,b))throw new j["default"](h.ERROR_CODES.RUNNER_DOES_NOT_EXIST,{selectionId:a,handicap:b});return w[c]},this.removeRunner=function(a,b){var c;if(this.hasRunner(a,b)){if(x===h.MARKET.MINIMUM_NUMBER_OF_RUNNERS)throw new j["default"](h.ERROR_CODES.MARKET_MUST_HAVE_AT_LEAST_TWO_RUNNERS,{selectionId:a,handicap:b});c=f(a,b,this.getBettingBehaviour()),w[c]=void 0,x--}},this.getPosition=function(){return v},this.getBettingBehaviour=s.getBettingBehaviour.bind(null,b,c),this.setNumberOfWinners=function(a){(0,u.assertIsNotNegative)(a),g=a},this.setBspReconciled=function(a){(0,u.assertIsBoolean)(a,"newBspReconciledState"),i=a},this.setComplete=function(a){(0,u.assertIsBoolean)(a,"newCompleteState"),k=a},this.setPosition=function(a){this.getBettingBehaviour()===h.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE||this.getBettingBehaviour()===h.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE||this.getBettingBehaviour()===h.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS?(0,u.assertIsInstanceOf)(a,"newPosition",p["default"]):(0,u.assertIsInstanceOf)(a,"newPosition",r["default"]),v=a},this.update=function(a){e(a);var d={type:b,bettingType:c,numberOfWinners:g,bspReconciled:i,complete:k,baseRate:l,discountAllowed:m,settledProfit:o};return a.hasOwnProperty("type")&&(b=a.type),a.hasOwnProperty("bettingType")&&(c=a.bettingType),a.hasOwnProperty("numberOfWinners")&&(g=a.numberOfWinners),a.hasOwnProperty("bspReconciled")&&(i=a.bspReconciled),a.hasOwnProperty("complete")&&(k=a.complete),a.hasOwnProperty("baseRate")&&(l=a.baseRate),a.hasOwnProperty("discountAllowed")&&(m=a.discountAllowed),a.hasOwnProperty("settledProfit")&&(o=a.settledProfit),(0,s.diff)(d,a)},q.forEach(this.addRunner)}Object.defineProperty(c,"__esModule",{value:!0});var h=a("./../../config"),i=a("./../../errors/bet-engine-error"),j=d(i),k=a("../runner/ah-runner"),l=d(k),m=a("../runner/runner"),n=d(m),o=a("../market-position/ah-market-position"),p=d(o),q=a("../market-position/market-position"),r=d(q),s=a("./../../utils/utils"),t=a("../../utils/validations"),u=a("../../utils/assertions");c["default"]=g},{"../../utils/assertions":66,"../../utils/validations":71,"../market-position/ah-market-position":54,"../market-position/market-position":56,"../runner/ah-runner":59,"../runner/runner":62,"./../../config":28,"./../../errors/bet-engine-error":32,"./../../utils/utils":70}],59:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c,d){var g;(0,f.assertIsBoolean)(c,"isHome"),h["default"].call(this,a,b,d),g=e.buildId(a,b),this.getId=function(){return g},this.isHome=function(){return c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../../utils/assertions"),g=a("./runner"),h=d(g);e.prototype=Object.create(h["default"].prototype),e.buildId=function(a,b){return(0,f.assertIsHandicapValue)(b,"handicap"),h["default"].buildId(a)+":"+b},c["default"]=e},{"../../utils/assertions":66,"./runner":62}],60:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0}),c.RunnerPosition=c.AsianHandicapRunner=c.Runner=void 0;var e=a("./ah-runner"),f=d(e),g=a("./runner"),h=d(g),i=a("./runner-position"),j=d(i);c.Runner=h["default"],c.AsianHandicapRunner=f["default"],c.RunnerPosition=j["default"]},{"./ah-runner":59,"./runner":62,"./runner-position":61}],61:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){return r}function c(){return s}function d(){return t}function e(a,b){(0,n.assertIsValidBetSide)(a,"side"),(0,n.assertIsValidBetCategoryType)(b,"categoryType");var c=a.toLowerCase();switch(b){case g.BET.CATEGORY_TYPES.EXCHANGE:return u.potential[c];case g.BET.CATEGORY_TYPES.SP:return u.potentialSP[c]}throw new Error("categoryType not supported: "+b)}function h(a){return(0,n.assertIsNotEmptyString)(a,"id"),u.open[a]}function j(a){w(a,"newPotentialPnl",v),r=a}function l(a){w(a,"newActualPnl",v),s=a}function o(a){w(a,"newWhatIf",v),t=a}function p(a,b,c){(0,n.assertIsValidBetSide)(a,"side"),(0,n.assertIsValidBetCategoryType)(b,"categoryType"),(0,f.isDefined)(c)&&x(c,"betCalculations");var d=a.toLowerCase();switch(b){case g.BET.CATEGORY_TYPES.EXCHANGE:u.potential[d]=c;break;case g.BET.CATEGORY_TYPES.SP:u.potentialSP[d]=c;break;default:throw new Error("categoryType not supported: "+b)}}function q(a,b){(0,n.assertIsNotEmptyString)(a,"id"),(0,f.isDefined)(b)?(x(b),u.open[a]=b):delete u.open[a]}(0,n.assertIsValidBettingBehaviour)(a,"bettingBehaviour");var r={win:void 0,lose:void 0},s={win:void 0,lose:void 0},t={win:void 0,lose:void 0};a===g.BETTING_BEHAVIOUR.ODDS_EACH_WAY&&(r.placed=void 0,s.placed=void 0,t.placed=void 0);var u={potential:{back:void 0,lay:void 0},potentialSP:{back:void 0,lay:void 0},open:{}},v=a===g.BETTING_BEHAVIOUR.ODDS_EACH_WAY?"Each Way pnl must be a valid EW Pnl object, containing win, lose and placed":"Pnl must be a valid Pnl object, containing win and lose properties",w=a===g.BETTING_BEHAVIOUR.ODDS_EACH_WAY?n.assertIsValidEachWayPnl.bind(this):n.assertIsValidPnl.bind(this),x=function(b){a!==g.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE&&a!==g.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE||(0,n.assertIsInstanceOf)(b,"betCalculations",k["default"]),a===g.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS&&(0,n.assertIsInstanceOf)(b,"betCalculations",m["default"]),a!==g.BETTING_BEHAVIOUR.ODDS_GENERIC&&a!==g.BETTING_BEHAVIOUR.ODDS_EACH_WAY||(0,n.assertIsInstanceOf)(b,"betCalculations",i["default"])};this.getActualPnl=c,this.getPotentialPnl=b,this.getWhatIf=d,this.getPotentialBetCalculations=e,this.getOpenBetCalculations=h,this.setActualPnl=l,this.setPotentialPnl=j,this.setWhatIf=o,this.setPotentialBetCalculations=p,this.setOpenBetCalculations=q}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./../../utils/validations.js"),g=a("./../../config"),h=a("./../bet-calculations/bet-calculations"),i=d(h),j=a("./../bet-calculations/ah-bet-calculations"),k=d(j),l=a("./../bet-calculations/spreads-and-totals-bet-calculations"),m=d(l),n=a("./../../utils/assertions.js");c["default"]=e},{"./../../config":28,"./../../utils/assertions.js":66,"./../../utils/validations.js":71,"./../bet-calculations/ah-bet-calculations":38,"./../bet-calculations/bet-calculations":40,"./../bet-calculations/spreads-and-totals-bet-calculations":41}],62:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){var d=a.indexOf(b);if(!c&&d>-1){var e=(0,o.getBetType)(b),f=b.isBack()?"back":"lay";throw new r["default"](p.ERROR_CODES.BET_ALREADY_EXISTS_IN_RUNNER,{betType:e,side:f})}d===-1&&a.push(b)}function f(a,b){var c=a.indexOf(b);return c>-1&&a.splice(c,1),c>-1}function g(a,b){return b.isBack()?f(a.back,b):f(a.lay,b)}function h(a,b){a.back===b?a.back=void 0:a.lay===b&&(a.lay=void 0)}function i(a,b,c){function d(a){switch((0,n.assertIsNotEmptyString)(a,"betType"),a){case p.BET.TYPE.MATCHED:return l.matched;case p.BET.TYPE.UNMATCHED:return l.unmatched;case p.BET.TYPE.SP:return l.sp;case p.BET.TYPE.RECONCILED_SP:return l.spReconciled;case p.BET.TYPE.POTENTIAL:return l.potential;case p.BET.TYPE.POTENTIAL_SP:return l.potentialsp;default:throw new Error("unsupported bet type '"+a+"'")}}(0,n.assertIsValidSelectionId)(a,"selectionId"),(0,n.assertIsHandicapValue)(b,"handicap"),(0,n.assertIsValidBettingBehaviour)(c,"bettingBehaviour");var f,j=i.buildId(a),l={matched:{back:[],lay:[]},unmatched:{back:[],lay:[]},sp:{back:[],lay:[]},spReconciled:{back:[],lay:[]},potential:{back:void 0,lay:void 0},potentialsp:{back:void 0,lay:void 0}};this.getId=function(){return j},this.getHandicap=function(){return b},this.getSelectionId=function(){return a},this.getPosition=function(){return f},this.setPosition=function(a){(0,n.assertIsInstanceOf)(a,"newPosition",t["default"]),f=a},this.getPotentialBets=function(){var a=[];return l.potential.back&&a.push(l.potential.back),l.potential.lay&&a.push(l.potential.lay),a},this.getPotentialBetsBySide=function(){return l.potential},this.getPotentialBackBet=function(){return l.potential.back},this.getPotentialLayBet=function(){return l.potential.lay},this.getPotentialSPBets=function(){var a=[];return l.potentialsp.back&&a.push(l.potentialsp.back),l.potentialsp.lay&&a.push(l.potentialsp.lay),a},this.getPotentialSPBetsBySide=function(){return l.potentialsp},this.getPotentialSPBackBet=function(){return l.potentialsp.back},this.getPotentialSPLayBet=function(){return l.potentialsp.lay},this.getMatchedBets=function(){return l.matched.back.concat(l.matched.lay)},this.getMatchedBackBets=function(){return l.matched.back.slice(0)},this.getMatchedLayBets=function(){return l.matched.lay.slice(0)},this.getUnmatchedBets=function(){return l.unmatched.back.concat(l.unmatched.lay)},this.getUnmatchedBackBets=function(){return l.unmatched.back.slice(0)},this.getUnmatchedLayBets=function(){return l.unmatched.lay.slice(0)},this.getSPBets=function(){return l.sp.back.concat(l.sp.lay)},this.getReconciledSPBets=function(){return l.spReconciled.back.concat(l.spReconciled.lay)},this.getReconciledSPBackBets=function(){return l.spReconciled.back.slice(0)},this.getReconciledSPLayBets=function(){return l.spReconciled.lay.slice(0)},this.addBet=function(a){var b=(0,o.getBetType)(a),g=a.isBack()?"back":"lay",h=d(b);switch(b){case p.BET.TYPE.MATCHED:case p.BET.TYPE.UNMATCHED:case p.BET.TYPE.SP:case p.BET.TYPE.RECONCILED_SP:e(h[g],a),f.setOpenBetCalculations(a.getId(),(0,m["default"])(c));break;case p.BET.TYPE.POTENTIAL:if(h[g])throw new r["default"](p.ERROR_CODES.RUNNER_MUST_ONLY_HAVE_ONE_POTENTIAL_BET_OF_EACH_SIDE,{side:g,betType:b});h[g]=a,f.setPotentialBetCalculations(a.getSide(),p.BET.CATEGORY_TYPES.EXCHANGE,(0,m["default"])(c));break;case p.BET.TYPE.POTENTIAL_SP:if(h[g])throw new r["default"](p.ERROR_CODES.RUNNER_MUST_ONLY_HAVE_ONE_POTENTIAL_BET_SP_OF_EACH_SIDE,{side:g,betType:b});h[g]=a,f.setPotentialBetCalculations(a.getSide(),p.BET.CATEGORY_TYPES.SP,(0,m["default"])(c));break;default:throw new Error("unsupported bet type '"+b+"'")}},this.removeBet=function(a){var b=(0,o.getBetType)(a),c=d(b);switch(b){case p.BET.TYPE.MATCHED:case p.BET.TYPE.UNMATCHED:case p.BET.TYPE.SP:case p.BET.TYPE.RECONCILED_SP:return f.setOpenBetCalculations(a.getId(),void 0),g(c,a);case p.BET.TYPE.POTENTIAL:return f.setPotentialBetCalculations(a.getSide(),p.BET.CATEGORY_TYPES.EXCHANGE,void 0),h(c,a);case p.BET.TYPE.POTENTIAL_SP:return f.setPotentialBetCalculations(a.getSide(),p.BET.CATEGORY_TYPES.SP,void 0),h(c,a);default:throw new Error("unsupported bet type '"+b+"'")}},this.findOpenBet=function(a,b,c){(0,n.assertIsValidBetSide)(b,"side"),(0,n.assertIsNotEmptyString)(c,"id");var e=d(a),f=b===p.BET.SIDE.BACK?e.back:e.lay;return(0,k["default"])(f,function(a){return a.getId()===c})}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=i;var j=a("mout/array/find"),k=d(j),l=a("./../../factory/bet-calculations"),m=d(l),n=a("../../utils/assertions"),o=a("./../bet"),p=a("../../config/index"),q=a("./../../errors/bet-engine-error"),r=d(q),s=a("./runner-position"),t=d(s);i.buildId=function(a){return(0,n.assertIsValidSelectionId)(a,"selectionId"),a.toString()}},{"../../config/index":28,"../../utils/assertions":66,"./../../errors/bet-engine-error":32,"./../../factory/bet-calculations":33,"./../bet":44,"./runner-position":61,"mout/array/find":88}],63:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){(0,f.assertIsObject)(a,"config"),(0,f.assertIsNotNegative)(a.discount,"config.discount"),(0,f.assertIsObject)(a.ladders,"config.ladders");var b,c,d=a.discount,e=a.ladders;e=e||{},b=new j["default"](e.price,e.size),c=new h["default"],this.getUserDiscount=function(){return d},this.setUserDiscount=function(a){(0,f.assertIsNotNegative)(a),d=a},this.addMarket=c.addMarket,this.getMarket=c.getMarket,this.getMarkets=c.getMarkets,this.hasMarket=c.hasMarket,this.removeMarket=c.removeMarket,this.getPriceLadderByCriteria=b.getPriceLadderByCriteria,this.getSizeLadderByCriteria=b.getSizeLadderByCriteria}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=e;var f=a("./../utils/assertions"),g=a("./market-manager"),h=d(g),i=a("./ladder-manager"),j=d(i)},{"./../utils/assertions":66,"./ladder-manager":64,"./market-manager":65}],64:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(a,b,c,d){return a.ladderTypes.indexOf(b)!==-1&&a.betSides.indexOf(c)!==-1&&a.betCategoryTypes.indexOf(d)!==-1}function d(a,b,c){return a.betSides.indexOf(b)!==-1&&a.betCategoryTypes.indexOf(c)!==-1}function e(a,b){var c=a["default"];return a.byCriteria.some(function(a){var d=b(a.criteria);return d&&(c=a.ladder),d}),c}function f(a,b){return(0,k["default"])(a,function(a,c){return(0,g["default"])(a,b[c])})}function h(a){return Object.keys(a).map(function(b){return a[b]}).every(function(a){return a.length>0})}function j(a,b){var c=a.map(function(a){return a.criteria}),d=f.bind(f,b);return c.map(d).filter(h)}function m(a){return Object.keys(a).map(function(b){return b+"-"+a[b]}).join(", ")}function n(a){return a.map(m).join(" / ")}function o(a,b,c){var d=j(a.byCriteria,c);if(d.length>0){var e=n(d);throw new Error("Overlapping of ladders. Review their criterias. Intersections: "+e)}a.byCriteria.push({criteria:c,ladder:b})}function p(a,b){a["default"]=b}function q(a,b,c,d,e){(0,l.assertIsObject)(a,"laddersConfig"),d(a["default"]),b(a["default"]),a.hasOwnProperty("byCriteria")&&((0,l.assertIsArray)(a.byCriteria,"laddersConfig.byCriteria"),a.byCriteria.forEach(function(a){e(a.criteria,"ladderConfig.criteria"),d(a.ladder),c(a.ladder,a.criteria)}))}(0,l.assertIsObject)(a,"priceLaddersConfig"),(0,l.assertIsObject)(b,"sizeLaddersConfig"),(0,l.assertIsSizeLadder)(b["default"],"sizeLaddersConfig.default"),(0,l.assertIsPriceLadder)(a["default"],"priceLaddersConfig.default");var r={"default":void 0,byCriteria:[]},s={"default":void 0,byCriteria:[]};this.getSizeLadderByCriteria=function(a,b){(0,l.assertIsValidBetSide)(a,"betSide"),(0,l.assertIsValidBetCategoryType)(b,"betCategoryType");var c=(0,i["default"])(d,i["default"]._,a,b);return e(r,c)},this.getPriceLadderByCriteria=function(a,b,d){(0,l.assertIsValidLadderType)(a,"ladderType"),(0,l.assertIsValidBetSide)(b,"betSide"),(0,l.assertIsValidBetCategoryType)(d,"betCategoryType");var f=(0,i["default"])(c,i["default"]._,a,b,d);return e(s,f)},function(){q(a,(0,i["default"])(p,s),(0,i["default"])(o,s),l.assertIsPriceLadder,l.assertIsValidPriceLadderCriteria),q(b,(0,i["default"])(p,r),(0,i["default"])(o,r),l.assertIsSizeLadder,l.assertIsValidSizeLadderCriteria)}()}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=e;var f=a("mout/array/intersection"),g=d(f),h=a("mout/function/partial"),i=d(h),j=a("mout/object/map"),k=d(j),l=a("./../utils/assertions")},{"./../utils/assertions":66,"mout/array/intersection":97,"mout/function/partial":129,"mout/object/map":187}],65:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a={};this.hasMarket=function(b){return(0,f.assertIsNotEmptyString)(b,"marketId"),!!a[b]},this.addMarket=function(b){(0,f.assertIsInstanceOf)(b,"market",i["default"]);var c=b.getId();if(this.hasMarket(c))throw new l["default"](j.ERROR_CODES.MARKET_ALREADY_EXISTS,{marketId:c});a[c]=b},this.getMarket=function(b){if((0,f.assertIsNotEmptyString)(b,"marketId"),!this.hasMarket(b))throw new l["default"](j.ERROR_CODES.MARKET_DOES_NOT_EXIST,{marketId:b});return a[b]},this.getMarkets=function(b){return(0,g.isDefined)(b)?((0,f.assertArrayElementsAreOfType)(b,"marketIds","string"),(0,m.pick)(a,b)):(0,m.mixIn)({},a)},this.removeMarket=function(b){(0,f.assertIsNotEmptyString)(b,"marketId");var c=this.hasMarket(b);return c&&(a[b]=void 0),c}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=e;var f=a("./../utils/assertions"),g=a("./../utils/validations"),h=a("./../models/market/market"),i=d(h),j=a("./../config/index"),k=a("./../errors/bet-engine-error"),l=d(k),m=a("mout/object")},{"./../config/index":28,"./../errors/bet-engine-error":32,"./../models/market/market":58,"./../utils/assertions":66,"./../utils/validations":71,"mout/object":168}],66:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b,c){return a=(0,K.isFunction)(a)?"function "+a.name:(0,K.isArray)(a)?JSON.stringify(a):void 0===a?"undefined":null===a?"null":(0,K.isObject)(a)?JSON.stringify(a):a.toString(),b+" "+c+'. Current value is "'+a+'"'}function f(a,b,c,d){return(0,K.isNotEmptyString)(a)?a:e(b,c,d)}function g(a,b,c){L((0,K.isObject)(a),f(c,a,b,M.object))}function h(a,b,c){L((0,K.isBoolean)(a),f(c,a,b,M["boolean"]))}function i(a,b,c){L((0,K.isArray)(a),f(c,a,b,M.array))}function j(a,b,c){L((0,K.isFunction)(a),f(c,a,b,M["function"]))}function k(a,b,c){L((0,K.isNumber)(a),f(c,a,b,M.number))}function l(a,b,c){L((0,K.isPositive)(a),f(c,a,b,M.isPositive))}function m(a,b,c){L((0,K.isNotNegative)(a),f(c,a,b,M.notNegative))}function n(a,b,c){L((0,K.isNotEmptyString)(a),f(c,a,b,M.notEmptyString))}function o(a,b,c){L((0,K.isValidBetSide)(a),f(c,a,b,M.validBetSide))}function p(a,b,c){L((0,K.isValidRunnerSide)(a),f(c,a,b,M.validRunnerSide))}function q(a,b,c){L((0,K.isHandicapValue)(a),f(c,a,b,M.handicapValue))}function r(a,b,c,d){var e=f(d,a,b,M.arrayElementsOfType+c);L(c,"type must be defined"),L((0,K.areArrayElementsOfType)(a,c),e)}function s(a,b,c){L((0,K.isLadder)(a),f(c,a,b,M.validSizeLadder))}function t(a,b,c){L((0,K.isLadder)(a),f(c,a,b,M.validPriceLadder))}function u(a,b,c){L((0,K.isValidPriceLadderCriteria)(a),f(c,a,b,M.validPriceLadderCriteria))}function v(a,b,c){L((0,K.isValidSizeLadderCriteria)(a),f(c,a,b,M.validSizeLadderCriteria))}function w(a,b,c){L((0,K.isValidOrderType)(a),f(c,a,b,M.orderType))}function x(a,b,c){L(I.BET.SP_ORDER_TYPES[a],f(c,a,b,M.spOrderType))}function y(a,b,c){L((0,K.isValidPnl)(a),f(c,a,b,M.validPnl))}function z(a,b,c){L((0,K.isValidEachWayPnl)(a),f(c,a,b,M.validEachWayPnl))}function A(a,b,c){L((0,K.isValidBookPercentage)(a),f(c,a,b,M.validBookPercentage))}function B(a,b,c){L((0,K.isValidBettingType)(a),f(c,a,b,M.bettingType))}function C(a,b,c){L((0,K.isValidBettingBehaviour)(a),f(c,a,b,M.bettingBehaviour))}function D(a,b,c){L((0,K.isValidBetCategoryType)(a),f(c,a,b,M.betCategoryType))}function E(a,b,c,d){L(a instanceof c,f(d,a,b,M.instanceOf+c.name))}function F(a,b,c){L((0,K.isValidSelectionId)(a),f(c,a,b,M.selectionId))}function G(a,b,c){L((0,K.isValidLadderType)(a),f(c,a,b,M.ladderType))}Object.defineProperty(c,"__esModule",{value:!0}),c.assertIsValidLadderType=c.assertIsValidSelectionId=c.assertIsInstanceOf=c.assertIsValidBetCategoryType=c.assertIsValidBettingBehaviour=c.assertIsValidBettingType=c.assertIsValidBookPercentage=c.assertIsValidEachWayPnl=c.assertIsValidPnl=c.assertIsValidSPOrderType=c.assertIsValidOrderType=c.assertIsValidSizeLadderCriteria=c.assertIsValidPriceLadderCriteria=c.assertIsPriceLadder=c.assertIsSizeLadder=c.assertArrayElementsAreOfType=c.assertIsHandicapValue=c.assertIsValidRunnerSide=c.assertIsValidBetSide=c.assertIsNotEmptyString=c.assertIsNotNegative=c.assertIsPositive=c.assertIsNumber=c.assertIsFunction=c.assertIsArray=c.assertIsObject=c.assertIsBoolean=c.assert=void 0;var H=a("../config"),I=d(H),J=a("mout/object"),K=a("./validations"),L=a("assert"),M={"boolean":"must be a boolean",defined:"must be defined",object:"must be an object",array:"must be an array","function":"must be a function",number:"must be a number and not a NaN",isPositive:"must be a positive number",notNegative:"must be a not negative number",validSize:"must be a valid size",validPrice:"must be a valid price",notEmptyString:"must be a (not empty) string",validBetSide:"must be a valid bet side: BACK or LAY",validRunnerSide:"must be a valid runner side: HOME or AWAY",handicapValue:"must be a valid handicap value, a multiple of quarters (0.25)",arrayElementsOfType:"must have all its elements from the type: ",validSizeLadder:"must be an object that implements size ladder interface",validPriceLadder:"must be an object that implements price ladder interface",validPriceLadderCriteria:"must be an object with ladderTypes, betSides and betCategoryTypes sets",validSizeLadderCriteria:"must be an object with betSides and betCategoryTypes sets",validBettingType:"must be a valid betting type: ODDS, ASIAN_HANDICAP_SINGLE_LINE or ASIAN_HANDICAP_DOUBLE_LINE",validPnl:"must be an object that contains win and lose values",validEachWayPnl:"must be an object that contains win, lose and placed values",validWhatIf:"must be an object that contains win and lose values",validEachWayWhatIf:"must be an object that contains win, lose and placed values",validBookPercentage:"must be a positive number",orderType:"orderType must be one of "+(0,J.values)(I.BET.ORDER_TYPES).join(", "),bettingType:"betting type must be one of "+(0,J.values)(I.MARKET.BETTING_TYPES).join(", "),bettingBehaviour:"betting behaviour must be one of "+(0,J.values)(I.BETTING_BEHAVIOUR).join(", "),betCategoryType:"bet category type must be one of "+(0,J.values)(I.BET.CATEGORY_TYPES).join(", "),selectionId:"selectionId must be a positive number",spOrderType:"SP orderType must be one of: "+(0,J.values)(I.BET.SP_ORDER_TYPES).join(", "),instanceOf:"must be provided as an instance of: ",ladderType:"ladder type must be one of "+(0,J.values)(I.LADDER.LADDER_TYPES).join(", ")};c.assert=L,c.assertIsBoolean=h,c.assertIsObject=g,c.assertIsArray=i,c.assertIsFunction=j,c.assertIsNumber=k,c.assertIsPositive=l,c.assertIsNotNegative=m,c.assertIsNotEmptyString=n,c.assertIsValidBetSide=o,c.assertIsValidRunnerSide=p,c.assertIsHandicapValue=q,c.assertArrayElementsAreOfType=r,c.assertIsSizeLadder=s,c.assertIsPriceLadder=t,c.assertIsValidPriceLadderCriteria=u,c.assertIsValidSizeLadderCriteria=v,c.assertIsValidOrderType=w,c.assertIsValidSPOrderType=x,c.assertIsValidPnl=y,c.assertIsValidEachWayPnl=z,c.assertIsValidBookPercentage=A,c.assertIsValidBettingType=B,c.assertIsValidBettingBehaviour=C,c.assertIsValidBetCategoryType=D,c.assertIsInstanceOf=E,c.assertIsValidSelectionId=F,c.assertIsValidLadderType=G},{"../config":28,"./validations":71,assert:72,"mout/object":168}],67:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){return(0,j["default"])(a).add(b).toNumber()}function f(a,b){return(0,j["default"])(a).sub(b).toNumber()}function g(a,b){return(0,j["default"])(a).times(b).toNumber()}function h(a,b){return(0,j["default"])(a).div(b).toNumber()}Object.defineProperty(c,"__esModule",{value:!0}),c.div=c.mult=c.sub=c.sum=void 0;var i=a("decimal.js-light"),j=d(i);c.sum=e,c.sub=f,c.mult=g,c.div=h},{"decimal.js-light":77}],68:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){(0,j.assertIsBoolean)(a,"isValid");var c={isValid:a};return a||(c.data=b),c}function f(a,b){return(0,j.assertIsNumber)(a,"value"),(0,j.assertIsNumber)(b,"increment"),(0,l["default"])(a).modulo(b).toNumber()}function g(a,b,c){return(0,j.assertIsNumber)(a,"value"),(0,j.assertIsNumber)(b,"remainder"),(0,j.assertIsNumber)(c,"increment"),(0,l["default"])(a).sub(b).add(c).toNumber()}function h(a,b,c){return(0,j.assertIsNumber)(a,"value"),(0,j.assertIsNumber)(b,"remainder"),(0,j.assertIsNumber)(c,"increment"),b>0?(0,l["default"])(a).sub(b).toNumber():(0,l["default"])(a).sub(c).toNumber()}function i(a){return(0,j.assertIsNumber)(a,"number"),parseFloat(a.toFixed(2))}Object.defineProperty(c,"__esModule",{value:!0}),c.getRemainder=c.getNudgeUpFinalValue=c.getNudgeDownFinalValue=c.fixNumberWithTwoDecimalPlaces=c.buildValidationResponse=void 0;var j=a("./../utils/assertions"),k=a("decimal.js-light"),l=d(k);c.buildValidationResponse=e,c.fixNumberWithTwoDecimalPlaces=i,c.getNudgeDownFinalValue=h,c.getNudgeUpFinalValue=g,c.getRemainder=f},{"./../utils/assertions":66,"decimal.js-light":77}],69:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return a.split(":")[0]}function f(a){return a.split(":")[1]}function g(a,b,c,d){(0,m.assertIsNotEmptyString)(a,"runnerId"),(0,m.assertIsNumber)(b,"homeSelectionId"),(0,m.assertIsNumber)(c,"awaySelectionId"),(0,m.assertIsNotEmptyString)(d,"marketType");var e=a.split(":"),f=h(e,2),g=f[0],k=f[1],n=Number(g)===b?c:b,o=void 0;switch(d){case j.MARKET.MARKET_TYPES.HANDICAP:o=(0,i.mult)(Number(k),-1);break;case j.MARKET.MARKET_TYPES.ALT_TOTAL_GOALS:case j.MARKET.MARKET_TYPES.COMBINED_TOTAL:o=Number(k)}return l["default"].buildId(n,o)}Object.defineProperty(c,"__esModule",{value:!0}),c.getLineRunnerIdFromPair=c.extractHandicap=c.extractSelectionId=void 0;var h=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a("./calculator"),j=a("./../config"),k=a("./../models/runner/ah-runner"),l=d(k),m=a("./../utils/assertions");c.extractSelectionId=e,c.extractHandicap=f,c.getLineRunnerIdFromPair=g},{"./../config":28,"./../models/runner/ah-runner":59,"./../utils/assertions":66,"./calculator":67}],70:[function(a,b,c){"use strict";function d(a,b){(0,n.assertIsObject)(a,"object"),(0,n.assertIsFunction)(b,"callback");var c={};return Object.keys(a).forEach(function(d){c[d]=b(a[d],d)}),c}function e(a,b){(0,n.assertIsObject)(a,"object"),(0,n.assertIsFunction)(b,"callback"),Object.keys(a).forEach(function(c){b(a[c],c,a)})}function f(a){return(0,n.assertIsNotNegative)(a,"percentage"),.01*a}function g(a,b){(0,n.assertIsObject)(a,"object"),(0,n.assertIsArray)(b,"attributes");var c={};return b.forEach(function(b){(0,l.isDefined)(a[b])&&(c[b]=a[b])}),c}function h(a,b){return k.MARKET.MARKET_TYPES.EACH_WAY===a?k.BETTING_BEHAVIOUR.ODDS_EACH_WAY:k.MARKET.BETTING_TYPES.ASIAN_HANDICAP_DOUBLE_LINE===b&&k.MARKET.MARKET_TYPES.ASIAN_HANDICAP!==a?k.BETTING_BEHAVIOUR.SPREADS_AND_TOTALS:k.MARKET.BETTING_TYPES.ASIAN_HANDICAP_SINGLE_LINE===b?k.BETTING_BEHAVIOUR.ASIAN_HANDICAP_SINGLE_LINE:k.MARKET.BETTING_TYPES.ASIAN_HANDICAP_DOUBLE_LINE===b?k.BETTING_BEHAVIOUR.ASIAN_HANDICAP_DOUBLE_LINE:k.BETTING_BEHAVIOUR.ODDS_GENERIC}function i(a,b){var c={};return e(b,function(b,d){a.hasOwnProperty(d)&&a[d]===b||(c[d]=b)}),c}function j(a,b,c){return(0,l.isDefined)(a)||(0,l.isDefined)(b)?(0,m.sum)(a||0,b||0):c}Object.defineProperty(c,"__esModule",{value:!0}),c.sumIfDefined=c.diff=c.getBettingBehaviour=c.pick=c.getPercentageConvertedIntoRatio=c.forEach=c.mapOwn=void 0;var k=a("./../config"),l=a("./../utils/validations"),m=a("./../utils/calculator"),n=a("./../utils/assertions");c.mapOwn=d,c.forEach=e,c.getPercentageConvertedIntoRatio=f,c.pick=g,c.getBettingBehaviour=h,c.diff=i,c.sumIfDefined=j},{"./../config":28,"./../utils/assertions":66,"./../utils/calculator":67,"./../utils/validations":71}],71:[function(a,b,c){"use strict";function d(a){return H.BET.SIDE.BACK===a}function e(a){return H.BET.SIDE.LAY===a}function f(a){return void 0!==a&&null!==a}function g(a){return"boolean"==typeof a}function h(a){return!!a&&"object"===("undefined"==typeof a?"undefined":F(a))&&a.constructor!==Array}function i(a){return Array.isArray(a)}function j(a){return"function"==typeof a}function k(a){return!isNaN(a)&&"number"==typeof a}function l(a){return k(a)&&a>0}function m(a){return k(a)&&a>=0}function n(a){return""!==a&&"string"==typeof a}function o(a){return n(a)&&a===H.BET.SIDE.BACK||a===H.BET.SIDE.LAY}function p(a){return n(a)&&a===H.RUNNER.SIDE.HOME||a===H.RUNNER.SIDE.AWAY}function q(a){return!!k(a)&&(a=Math.abs(a)%1,0===a||.25===a||.5===a||.75===a)}function r(a,b){switch(b=b.toLowerCase()){case"object":return h(a);case"array":return i(a);case"function":return j(a);case"number":return k(a);case"string":return n(a);default:throw new Error("unsupported type")}}function s(a,b){return I(n(b)),!!i(a)&&a.every(function(a){return r(a,b)})}function t(a){return h(a)&&j(a.getMinimum)&&j(a.getMaximum)&&j(a.isValid)&&j(a.nudgeUp)&&j(a.nudgeDown)}function u(a){return h(a)&&i(a.ladderTypes)&&a.ladderTypes.length>0&&i(a.betSides)&&a.betSides.length>0&&i(a.betCategoryTypes)&&a.betCategoryTypes.length>0}function v(a){return h(a)&&i(a.betSides)&&a.betSides.length>0&&i(a.betCategoryTypes)&&a.betCategoryTypes.length>0}function w(a){return(0,G.values)(H.BET.ORDER_TYPES).indexOf(a)!==-1}function x(a){return!(!h(a)||!a.hasOwnProperty("win")||f(a.win)&&!k(a.win)||!a.hasOwnProperty("lose")||f(a.lose)&&!k(a.lose))}function y(a){return!!x(a)&&!(!a.hasOwnProperty("placed")||f(a.placed)&&!k(a.placed))}function z(a){return l(a)}function A(a){return(0,G.values)(H.MARKET.BETTING_TYPES).indexOf(a)!==-1}function B(a){return(0,G.values)(H.BETTING_BEHAVIOUR).indexOf(a)!==-1}function C(a){return(0,G.values)(H.BET.CATEGORY_TYPES).indexOf(a)!==-1}function D(a){return k(a)}function E(a){return(0,G.values)(H.LADDER.LADDER_TYPES).indexOf(a)!==-1}Object.defineProperty(c,"__esModule",{value:!0}),c.isValidLadderType=c.isValidSelectionId=c.isValidBetCategoryType=c.isValidBettingBehaviour=c.isValidBettingType=c.isValidBookPercentage=c.isValidEachWayPnl=c.isValidPnl=c.isValidSizeLadderCriteria=c.isValidPriceLadderCriteria=c.isLadder=c.areArrayElementsOfType=c.isHandicapValue=c.isValidOrderType=c.isValidRunnerSide=c.isValidBetSide=c.isNotEmptyString=c.isNotNegative=c.isPositive=c.isNumber=c.isFunction=c.isArray=c.isObject=c.isBoolean=c.isDefined=c.isLay=c.isBack=void 0;var F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},G=a("mout/object"),H=a("./../config"),I=a("assert");c.isBack=d,c.isLay=e,c.isDefined=f,c.isBoolean=g,c.isObject=h,c.isArray=i,c.isFunction=j,c.isNumber=k,c.isPositive=l,c.isNotNegative=m,c.isNotEmptyString=n,c.isValidBetSide=o,c.isValidRunnerSide=p,c.isValidOrderType=w,c.isHandicapValue=q,c.areArrayElementsOfType=s,c.isLadder=t,c.isValidPriceLadderCriteria=u,c.isValidSizeLadderCriteria=v,c.isValidPnl=x,c.isValidEachWayPnl=y,c.isValidBookPercentage=z,c.isValidBettingType=A,c.isValidBettingBehaviour=B,c.isValidBetCategoryType=C,c.isValidSelectionId=D,c.isValidLadderType=E},{"./../config":28,assert:72,"mout/object":168}],72:[function(a,b,c){function d(a,b){return n.isUndefined(b)?""+b:n.isNumber(b)&&!isFinite(b)?b.toString():n.isFunction(b)||n.isRegExp(b)?b.toString():b}function e(a,b){return n.isString(a)?a.length<b?a:a.slice(0,b):a}function f(a){return e(JSON.stringify(a.actual,d),128)+" "+a.operator+" "+e(JSON.stringify(a.expected,d),128)}function g(a,b,c,d,e){throw new q.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function h(a,b){a||g(a,!0,b,"==",q.ok)}function i(a,b){if(a===b)return!0;if(n.isBuffer(a)&&n.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return n.isDate(a)&&n.isDate(b)?a.getTime()===b.getTime():n.isRegExp(a)&&n.isRegExp(b)?a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase:n.isObject(a)||n.isObject(b)?k(a,b):a==b}function j(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function k(a,b){if(n.isNullOrUndefined(a)||n.isNullOrUndefined(b))return!1;
if(a.prototype!==b.prototype)return!1;if(n.isPrimitive(a)||n.isPrimitive(b))return a===b;var c=j(a),d=j(b);if(c&&!d||!c&&d)return!1;if(c)return a=o.call(a),b=o.call(b),i(a,b);var e,f,g=r(a),h=r(b);if(g.length!=h.length)return!1;for(g.sort(),h.sort(),f=g.length-1;f>=0;f--)if(g[f]!=h[f])return!1;for(f=g.length-1;f>=0;f--)if(e=g[f],!i(a[e],b[e]))return!1;return!0}function l(a,b){return!(!a||!b)&&("[object RegExp]"==Object.prototype.toString.call(b)?b.test(a):a instanceof b||b.call({},a)===!0)}function m(a,b,c,d){var e;n.isString(c)&&(d=c,c=null);try{b()}catch(f){e=f}if(d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&g(e,c,"Missing expected exception"+d),!a&&l(e,c)&&g(e,c,"Got unwanted exception"+d),a&&e&&c&&!l(e,c)||!a&&e)throw e}var n=a("util/"),o=Array.prototype.slice,p=Object.prototype.hasOwnProperty,q=b.exports=h;q.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var b=a.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var c=new Error;if(c.stack){var d=c.stack,e=b.name,h=d.indexOf("\n"+e);if(h>=0){var i=d.indexOf("\n",h+1);d=d.substring(i+1)}this.stack=d}}},n.inherits(q.AssertionError,Error),q.fail=g,q.ok=h,q.equal=function(a,b,c){a!=b&&g(a,b,c,"==",q.equal)},q.notEqual=function(a,b,c){a==b&&g(a,b,c,"!=",q.notEqual)},q.deepEqual=function(a,b,c){i(a,b)||g(a,b,c,"deepEqual",q.deepEqual)},q.notDeepEqual=function(a,b,c){i(a,b)&&g(a,b,c,"notDeepEqual",q.notDeepEqual)},q.strictEqual=function(a,b,c){a!==b&&g(a,b,c,"===",q.strictEqual)},q.notStrictEqual=function(a,b,c){a===b&&g(a,b,c,"!==",q.notStrictEqual)},q["throws"]=function(a,b,c){m.apply(this,[!0].concat(o.call(arguments)))},q.doesNotThrow=function(a,b){m.apply(this,[!1].concat(o.call(arguments)))},q.ifError=function(a){if(a)throw a};var r=Object.keys||function(a){var b=[];for(var c in a)p.call(a,c)&&b.push(c);return b}},{"util/":76}],73:[function(a,b,c){function d(){k&&h&&(k=!1,h.length?j=h.concat(j):l=-1,j.length&&e())}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],74:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],75:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],76:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(d<0)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return a<10?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];c<f;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":75,_process:73,inherits:74}],77:[function(a,b,c){!function(a){"use strict";function c(a,b){var c,d,e,f,g,h,i,j,k=a.constructor,l=k.precision;if(!a.s||!b.s)return b.s||(b=new k(a)),y?m(b,l):b;if(i=a.d,j=b.d,g=a.e,e=b.e,i=i.slice(),f=g-e){for(f<0?(d=i,f=-f,h=j.length):(d=j,e=g,h=i.length),g=Math.ceil(l/G),h=g>h?g+1:h+1,f>h&&(f=h,d.length=1),d.reverse();f--;)d.push(0);d.reverse()}for(h=i.length,f=j.length,h-f<0&&(f=h,d=j,j=i,i=d),c=0;f;)c=(i[--f]=i[f]+j[f]+c)/F|0,i[f]%=F;for(c&&(i.unshift(c),++e),h=i.length;0==i[--h];)i.pop();return b.d=i,b.e=e,y?m(b,l):b}function d(a,b,c){if(a!==~~a||a<b||a>c)throw Error(A+a)}function e(a){var b,c,d,e=a.length-1,f="",g=a[0];if(e>0){for(f+=g,b=1;b<e;b++)d=a[b]+"",c=G-d.length,c&&(f+=i(c)),f+=d;g=a[b],d=g+"",c=G-d.length,c&&(f+=i(c))}else if(0===g)return"0";for(;g%10===0;)g/=10;return f+g}function f(a,b){var c,d,f,h,i,j,k=0,l=0,n=a.constructor,o=n.precision;if(g(a)>16)throw Error(B+g(a));if(!a.s)return new n(u);for(null==b?(y=!1,j=o):j=b,i=new n(.03125);a.abs().gte(.1);)a=a.times(i),l+=5;for(d=Math.log(D(2,l))/Math.LN10*2+5|0,j+=d,c=f=h=new n(u),n.precision=j;;){if(f=m(f.times(a),j),c=c.times(++k),i=h.plus(L(f,c,j)),e(i.d).slice(0,j)===e(h.d).slice(0,j)){for(;l--;)h=m(h.times(h),j);return n.precision=o,null==b?(y=!0,m(h,o)):h}h=i}}function g(a){for(var b=1,c=a.d[0];c>=10;c/=10)b++;return b+a.e*G-1}function h(a,b,c){if(b>J)throw y=!0,c&&(a.precision=c),Error(z+"LN10 precision limit exceeded");return m(new a(w),b)}function i(a){for(var b="";a--;)b+="0";return b}function j(a,b){var c,d,f,i,k,l,n,o,p,q=1,r=10,s=a,t=s.d,v=s.constructor,w=v.precision;if(s.s<1)throw Error(z+(s.s?"NaN":"-Infinity"));if(s.eq(u))return new v(0);if(null==b?(y=!1,o=w):o=b,s.eq(10))return null==b&&(y=!0),h(v,o);if(o+=r,v.precision=o,c=e(t),d=c.charAt(0),i=g(s),!(Math.abs(i)<15e14))return n=h(v,o+2,w).times(i+""),s=j(new v(d+"."+c.slice(1)),o-r).plus(n),v.precision=w,null==b?(y=!0,m(s,w)):s;for(;d<7&&1!=d||1==d&&c.charAt(1)>3;)s=s.times(a),c=e(s.d),d=c.charAt(0),q++;for(i=g(s),d>1?(s=new v("0."+c),i++):s=new v(d+"."+c.slice(1)),l=k=s=L(s.minus(u),s.plus(u),o),p=m(s.times(s),o),f=3;;){if(k=m(k.times(p),o),n=l.plus(L(k,new v(f),o)),e(n.d).slice(0,o)===e(l.d).slice(0,o))return l=l.times(2),0!==i&&(l=l.plus(h(v,o+2,w).times(i+""))),l=L(l,new v(q),o),v.precision=w,null==b?(y=!0,m(l,w)):l;l=n,f+=2}}function k(a,b,c){for(var d,e=new a(b[0]),f=0;++f<b.length;)e[c](d=new a(b[f]))&&(e=d);return e}function l(a,b){var c,d,e;for((c=b.indexOf("."))>-1&&(b=b.replace(".","")),(d=b.search(/e/i))>0?(c<0&&(c=d),c+=+b.slice(d+1),b=b.substring(0,d)):c<0&&(c=b.length),d=0;48===b.charCodeAt(d);)++d;for(e=b.length;48===b.charCodeAt(e-1);)--e;if(b=b.slice(d,e)){if(e-=d,c=c-d-1,a.e=C(c/G),a.d=[],d=(c+1)%G,c<0&&(d+=G),d<e){for(d&&a.d.push(+b.slice(0,d)),e-=G;d<e;)a.d.push(+b.slice(d,d+=G));b=b.slice(d),d=G-b.length}else d-=e;for(;d--;)b+="0";if(a.d.push(+b),y&&(a.e>I||a.e<-I))throw Error(B+c)}else a.s=0,a.e=0,a.d=[0];return a}function m(a,b,c){var d,e,f,h,i,j,k,l,m=a.d;for(h=1,f=m[0];f>=10;f/=10)h++;if(d=b-h,d<0)d+=G,e=b,k=m[l=0];else{if(l=Math.ceil((d+1)/G),f=m.length,l>=f)return a;for(k=f=m[l],h=1;f>=10;f/=10)h++;d%=G,e=d-G+h}if(void 0!==c&&(f=D(10,h-e-1),i=k/f%10|0,j=b<0||void 0!==m[l+1]||k%f,j=c<4?(i||j)&&(0==c||c==(a.s<0?3:2)):i>5||5==i&&(4==c||j||6==c&&(d>0?e>0?k/D(10,h-e):0:m[l-1])%10&1||c==(a.s<0?8:7))),b<1||!m[0])return j?(f=g(a),m.length=1,b=b-f-1,m[0]=D(10,(G-b%G)%G),a.e=C(-b/G)||0):(m.length=1,m[0]=a.e=a.s=0),a;if(0==d?(m.length=l,f=1,l--):(m.length=l+1,f=D(10,G-d),m[l]=e>0?(k/D(10,h-e)%D(10,e)|0)*f:0),j)for(;;){if(0==l){(m[0]+=f)==F&&(m[0]=1,++a.e);break}if(m[l]+=f,m[l]!=F)break;m[l--]=0,f=1}for(d=m.length;0===m[--d];)m.pop();if(y&&(a.e>I||a.e<-I))throw Error(B+g(a));return a}function n(a,b){var c,d,e,f,g,h,i,j,k,l,n=a.constructor,o=n.precision;if(!a.s||!b.s)return b.s?b.s=-b.s:b=new n(a),y?m(b,o):b;if(i=a.d,l=b.d,d=b.e,j=a.e,i=i.slice(),g=j-d){for(k=g<0,k?(c=i,g=-g,h=l.length):(c=l,d=j,h=i.length),e=Math.max(Math.ceil(o/G),h)+2,g>e&&(g=e,c.length=1),c.reverse(),e=g;e--;)c.push(0);c.reverse()}else{for(e=i.length,h=l.length,k=e<h,k&&(h=e),e=0;e<h;e++)if(i[e]!=l[e]){k=i[e]<l[e];break}g=0}for(k&&(c=i,i=l,l=c,b.s=-b.s),h=i.length,e=l.length-h;e>0;--e)i[h++]=0;for(e=l.length;e>g;){if(i[--e]<l[e]){for(f=e;f&&0===i[--f];)i[f]=F-1;--i[f],i[e]+=F}i[e]-=l[e]}for(;0===i[--h];)i.pop();for(;0===i[0];i.shift())--d;return i[0]?(b.d=i,b.e=d,y?m(b,o):b):new n(0)}function o(a,b,c){var d,f=g(a),h=e(a.d),j=h.length;return b?(c&&(d=c-j)>0?h=h.charAt(0)+"."+h.slice(1)+i(d):j>1&&(h=h.charAt(0)+"."+h.slice(1)),h=h+(f<0?"e":"e+")+f):f<0?(h="0."+i(-f-1)+h,c&&(d=c-j)>0&&(h+=i(d))):f>=j?(h+=i(f+1-j),c&&(d=c-f-1)>0&&(h=h+"."+i(d))):((d=f+1)<j&&(h=h.slice(0,d)+"."+h.slice(d)),c&&(d=c-j)>0&&(f+1===j&&(h+="."),h+=i(d))),a.s<0?"-"+h:h}function p(a,b){if(a.length>b)return a.length=b,!0}function q(a){function b(a){var c=this;if(!(c instanceof b))return new b(a);if(c.constructor=b,a instanceof b)return c.s=a.s,c.e=a.e,void(c.d=(a=a.d)?a.slice():a);if("number"==typeof a){if(0*a!==0)throw Error(A+a);if(a>0)c.s=1;else{if(!(a<0))return c.s=0,c.e=0,void(c.d=[0]);a=-a,c.s=-1}return a===~~a&&a<1e7?(c.e=0,void(c.d=[a])):l(c,a.toString())}if("string"!=typeof a)throw Error(A+a);if(45===a.charCodeAt(0)?(a=a.slice(1),c.s=-1):c.s=1,!E.test(a))throw Error(A+a);l(c,a)}var c,d,e;if(b.prototype=K,b.ROUND_UP=0,b.ROUND_DOWN=1,b.ROUND_CEIL=2,b.ROUND_FLOOR=3,b.ROUND_HALF_UP=4,b.ROUND_HALF_DOWN=5,b.ROUND_HALF_EVEN=6,b.ROUND_HALF_CEIL=7,b.ROUND_HALF_FLOOR=8,b.clone=q,b.config=r,b.max=s,b.min=t,void 0===a&&(a={}),a)for(e=["precision","rounding","toExpNeg","toExpPos"],c=0;c<e.length;)a.hasOwnProperty(d=e[c++])||(a[d]=this[d]);return b.config(a),b}function r(a){if(!a||"object"!=typeof a)throw Error(z+"Object expected");var b,c,d,e=["precision",1,v,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(b=0;b<e.length;b+=3)if(void 0!==(d=a[c=e[b]])){if(!(C(d)===d&&d>=e[b+1]&&d<=e[b+2]))throw Error(A+c+": "+d);this[c]=d}return this}function s(){return k(this,arguments,"lt")}function t(){return k(this,arguments,"gt")}var u,v=1e9,w="2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286248633409525465082806756666287369098781689482907208325554680843799894826233198528393505308965377732628846163366222287698219886746543667474404243274365155048934314939391479619404400222105101714174800368808401264708068556774321622835522011480466371565912137345074785694768346361679210180644507064800027",x={precision:20,rounding:4,toExpNeg:-7,toExpPos:21},y=!0,z="[DecimalError] ",A=z+"Invalid argument: ",B=z+"Exponent out of range: ",C=Math.floor,D=Math.pow,E=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,F=1e7,G=7,H=9007199254740991,I=C(H/G),J=w.length-1,K={};K.absoluteValue=K.abs=function(){var a=new this.constructor(this);return a.s&&(a.s=1),a},K.ceil=function(){return m(new this.constructor(this),g(this)+1,2)},K.comparedTo=K.cmp=function(a){var b,c,d,e,f=this;if(a=new f.constructor(a),f.s!==a.s)return f.s||-a.s;if(f.e!==a.e)return f.e>a.e^f.s<0?1:-1;for(d=f.d.length,e=a.d.length,b=0,c=d<e?d:e;b<c;++b)if(f.d[b]!==a.d[b])return f.d[b]>a.d[b]^f.s<0?1:-1;return d===e?0:d>e^f.s<0?1:-1},K.decimalPlaces=K.dp=function(){var a=this,b=a.d.length-1,c=(b-a.e)*G;if(b=a.d[b])for(;b%10==0;b/=10)c--;return c<0?0:c},K.dividedBy=K.div=function(a){return L(this,new this.constructor(a))},K.dividedToIntegerBy=K.divToInt=function(a){var b=this,c=b.constructor;return m(L(b,new c(a),0,1),c.precision)},K.equals=K.eq=function(a){return!this.cmp(a)},K.floor=function(){return m(new this.constructor(this),g(this)+1,3)},K.greaterThan=K.gt=function(a){return this.cmp(a)>0},K.greaterThanOrEqualTo=K.gte=function(a){return this.cmp(a)>=0},K.isInteger=K.isInt=function(){return this.e>this.d.length-2},K.isNegative=K.isNeg=function(){return this.s<0},K.isPositive=K.isPos=function(){return this.s>0},K.isZero=function(){return 0===this.s},K.lessThan=K.lt=function(a){return this.cmp(a)<0},K.lessThanOrEqualTo=K.lte=function(a){return this.cmp(a)<1},K.logarithm=K.log=function(a){var b,c=this,d=c.constructor,e=d.precision,f=e+5;if(void 0===a)a=new d(10);else if(a=new d(a),a.s<1||a.eq(u))throw Error(z+"NaN");if(c.s<1)throw Error(z+(c.s?"NaN":"-Infinity"));return c.eq(u)?new d(0):(y=!1,b=L(j(c,f),j(a,f),f),y=!0,m(b,e))},K.minus=K.sub=function(a){var b=this;return a=new b.constructor(a),b.s==a.s?n(b,a):c(b,(a.s=-a.s,a))},K.modulo=K.mod=function(a){var b,c=this,d=c.constructor,e=d.precision;if(a=new d(a),!a.s)throw Error(z+"NaN");return c.s?(y=!1,b=L(c,a,0,1).times(a),y=!0,c.minus(b)):m(new d(c),e)},K.naturalExponential=K.exp=function(){return f(this)},K.naturalLogarithm=K.ln=function(){return j(this)},K.negated=K.neg=function(){var a=new this.constructor(this);return a.s=-a.s||0,a},K.plus=K.add=function(a){var b=this;return a=new b.constructor(a),b.s==a.s?c(b,a):n(b,(a.s=-a.s,a))},K.precision=K.sd=function(a){var b,c,d,e=this;if(void 0!==a&&a!==!!a&&1!==a&&0!==a)throw Error(A+a);if(b=g(e)+1,d=e.d.length-1,c=d*G+1,d=e.d[d]){for(;d%10==0;d/=10)c--;for(d=e.d[0];d>=10;d/=10)c++}return a&&b>c?b:c},K.round=function(){var a=this,b=a.constructor;return m(new b(a),g(a)+1,b.rounding)},K.squareRoot=K.sqrt=function(){var a,b,c,d,f,h,i,j=this,k=j.constructor;if(j.s<1){if(!j.s)return new k(0);throw Error(z+"NaN")}for(a=g(j),y=!1,f=Math.sqrt(+j),0==f||f==1/0?(b=e(j.d),(b.length+a)%2==0&&(b+="0"),f=Math.sqrt(b),a=C((a+1)/2)-(a<0||a%2),f==1/0?b="1e"+a:(b=f.toExponential(),b=b.slice(0,b.indexOf("e")+1)+a),d=new k(b)):d=new k(f.toString()),c=k.precision,f=i=c+3;;)if(h=d,d=h.plus(L(j,h,i+2)).times(.5),e(h.d).slice(0,i)===(b=e(d.d)).slice(0,i)){if(b=b.slice(i-3,i+1),f==i&&"4999"==b){if(m(h,c+1,0),h.times(h).eq(j)){d=h;break}}else if("9999"!=b)break;i+=4}return y=!0,m(d,c)},K.times=K.mul=function(a){var b,c,d,e,f,g,h,i,j,k=this,l=k.constructor,n=k.d,o=(a=new l(a)).d;if(!k.s||!a.s)return new l(0);for(a.s*=k.s,c=k.e+a.e,i=n.length,j=o.length,i<j&&(f=n,n=o,o=f,g=i,i=j,j=g),f=[],g=i+j,d=g;d--;)f.push(0);for(d=j;--d>=0;){for(b=0,e=i+d;e>d;)h=f[e]+o[d]*n[e-d-1]+b,f[e--]=h%F|0,b=h/F|0;f[e]=(f[e]+b)%F|0}for(;!f[--g];)f.pop();for(b?++c:f.shift(),d=f.length;!f[--d];)f.pop();return a.d=f,a.e=c,y?m(a,l.precision):a},K.toDecimalPlaces=K.toDP=function(a,b){var c=this,e=c.constructor;return c=new e(c),void 0===a?c:(d(a,0,v),void 0===b?b=e.rounding:d(b,0,8),m(c,a+g(c)+1,b))},K.toExponential=function(a,b){var c,e=this,f=e.constructor;return void 0===a?c=o(e,!0):(d(a,0,v),void 0===b?b=f.rounding:d(b,0,8),e=m(new f(e),a+1,b),c=o(e,!0,a+1)),c},K.toFixed=function(a,b){var c,e,f=this,h=f.constructor;return void 0===a?o(f):(d(a,0,v),void 0===b?b=h.rounding:d(b,0,8),e=m(new h(f),a+g(f)+1,b),c=o(e.abs(),!1,a+g(e)+1),f.isNeg()&&!f.isZero()?"-"+c:c)},K.toNumber=function(){return+this},K.toPower=K.pow=function(a){var b,c,d,e,g,h,i=this,k=i.constructor,l=12,n=+(a=new k(a));if(!a.s)return new k(u);if(i=new k(i),!i.s){if(a.s<1)throw Error(z+"Infinity");return i}if(i.eq(u))return i;if(d=k.precision,a.eq(u))return m(i,d);if(b=a.e,c=a.d.length-1,h=b>=c,g=i.s,h){if((c=n<0?-n:n)<=H){for(e=new k(u),b=Math.ceil(d/G+4),y=!1;c%2&&(e=e.times(i),p(e.d,b)),c=C(c/2),0!==c;)i=i.times(i),p(i.d,b);return y=!0,a.s<0?new k(u).div(e):m(e,d)}}else if(g<0)throw Error(z+"NaN");return g=g<0&&1&a.d[Math.max(b,c)]?-1:1,i.s=1,y=!1,e=a.times(j(i,d+l)),y=!0,e=f(e),e.s=g,e},K.toPrecision=function(a,b){var c,e,f=this,h=f.constructor;return void 0===a?(c=g(f),e=o(f,c<=h.toExpNeg||c>=h.toExpPos)):(d(a,1,v),void 0===b?b=h.rounding:d(b,0,8),f=m(new h(f),a,b),c=g(f),e=o(f,a<=c||c<=h.toExpNeg,a)),e},K.toSignificantDigits=K.toSD=function(a,b){var c=this,e=c.constructor;return void 0===a?(a=e.precision,b=e.rounding):(d(a,1,v),void 0===b?b=e.rounding:d(b,0,8)),m(new e(c),a,b)},K.toString=K.valueOf=K.toJSON=function(){var a=this,b=g(a),c=a.constructor;return o(a,b<=c.toExpNeg||b>=c.toExpPos)},K.truncated=K.trunc=function(){return m(new this.constructor(this),g(this)+1)};var L=function(){function a(a,b){var c,d=0,e=a.length;for(a=a.slice();e--;)c=a[e]*b+d,a[e]=c%F|0,d=c/F|0;return d&&a.unshift(d),a}function b(a,b,c,d){var e,f;if(c!=d)f=c>d?1:-1;else for(e=f=0;e<c;e++)if(a[e]!=b[e]){f=a[e]>b[e]?1:-1;break}return f}function c(a,b,c){for(var d=0;c--;)a[c]-=d,d=a[c]<b[c]?1:0,a[c]=d*F+a[c]-b[c];for(;!a[0]&&a.length>1;)a.shift()}return function(d,e,f,h){var i,j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,A,B,C=d.constructor,D=d.s==e.s?1:-1,E=d.d,H=e.d;if(!d.s)return new C(d);if(!e.s)throw Error(z+"Division by zero");for(j=d.e-e.e,A=H.length,x=E.length,p=new C(D),q=p.d=[],k=0;H[k]==(E[k]||0);)++k;if(H[k]>(E[k]||0)&&--j,u=null==f?f=C.precision:h?f+(g(d)-g(e))+1:f,u<0)return new C(0);if(u=u/G+2|0,k=0,1==A)for(l=0,H=H[0],u++;(k<x||l)&&u--;k++)v=l*F+(E[k]||0),q[k]=v/H|0,l=v%H|0;else{for(l=F/(H[0]+1)|0,l>1&&(H=a(H,l),E=a(E,l),A=H.length,x=E.length),w=A,r=E.slice(0,A),s=r.length;s<A;)r[s++]=0;B=H.slice(),B.unshift(0),y=H[0],H[1]>=F/2&&++y;do l=0,i=b(H,r,A,s),i<0?(t=r[0],A!=s&&(t=t*F+(r[1]||0)),l=t/y|0,l>1?(l>=F&&(l=F-1),n=a(H,l),o=n.length,s=r.length,i=b(n,r,o,s),1==i&&(l--,c(n,A<o?B:H,o))):(0==l&&(i=l=1),n=H.slice()),o=n.length,o<s&&n.unshift(0),c(r,n,s),i==-1&&(s=r.length,i=b(H,r,A,s),i<1&&(l++,c(r,A<s?B:H,s))),s=r.length):0===i&&(l++,r=[0]),q[k++]=l,i&&r[0]?r[s++]=E[w]||0:(r=[E[w]],s=1);while((w++<x||void 0!==r[0])&&u--)}return q[0]||q.shift(),p.e=j,m(p,h?f+g(p)+1:f)}}();x=q(x),u=new x(1),w=new x(w),"function"==typeof define&&define.amd?define(function(){return x}):"undefined"!=typeof b&&b.exports?b.exports=x:(a||(a="undefined"!=typeof self&&self&&self.self==self?self:Function("return this")()),a.Decimal=x)}(this)},{}],78:[function(a,b,c){b.exports={append:a("./array/append"),collect:a("./array/collect"),combine:a("./array/combine"),compact:a("./array/compact"),contains:a("./array/contains"),difference:a("./array/difference"),equals:a("./array/equals"),every:a("./array/every"),filter:a("./array/filter"),find:a("./array/find"),findIndex:a("./array/findIndex"),findLast:a("./array/findLast"),findLastIndex:a("./array/findLastIndex"),flatten:a("./array/flatten"),forEach:a("./array/forEach"),groupBy:a("./array/groupBy"),indexOf:a("./array/indexOf"),insert:a("./array/insert"),intersection:a("./array/intersection"),invoke:a("./array/invoke"),join:a("./array/join"),last:a("./array/last"),lastIndexOf:a("./array/lastIndexOf"),map:a("./array/map"),max:a("./array/max"),min:a("./array/min"),pick:a("./array/pick"),pluck:a("./array/pluck"),range:a("./array/range"),reduce:a("./array/reduce"),reduceRight:a("./array/reduceRight"),reject:a("./array/reject"),remove:a("./array/remove"),removeAll:a("./array/removeAll"),reverse:a("./array/reverse"),shuffle:a("./array/shuffle"),slice:a("./array/slice"),some:a("./array/some"),sort:a("./array/sort"),sortBy:a("./array/sortBy"),split:a("./array/split"),take:a("./array/take"),toLookup:a("./array/toLookup"),union:a("./array/union"),unique:a("./array/unique"),xor:a("./array/xor"),zip:a("./array/zip")}},{"./array/append":79,"./array/collect":80,"./array/combine":81,"./array/compact":82,"./array/contains":83,"./array/difference":84,"./array/equals":85,"./array/every":86,"./array/filter":87,"./array/find":88,"./array/findIndex":89,"./array/findLast":90,"./array/findLastIndex":91,"./array/flatten":92,"./array/forEach":93,"./array/groupBy":94,"./array/indexOf":95,"./array/insert":96,"./array/intersection":97,"./array/invoke":98,"./array/join":99,"./array/last":100,"./array/lastIndexOf":101,"./array/map":102,"./array/max":103,"./array/min":104,"./array/pick":105,"./array/pluck":106,"./array/range":107,"./array/reduce":108,"./array/reduceRight":109,"./array/reject":110,"./array/remove":111,"./array/removeAll":112,"./array/reverse":113,"./array/shuffle":114,"./array/slice":115,"./array/some":116,"./array/sort":117,"./array/sortBy":118,"./array/split":119,"./array/take":120,"./array/toLookup":121,"./array/union":122,"./array/unique":123,"./array/xor":124,"./array/zip":125}],79:[function(a,b,c){function d(a,b){if(null==b)return a;for(var c=a.length,d=-1,e=b.length;++d<e;)a[c+d]=b[d];return a}b.exports=d},{}],80:[function(a,b,c){function d(a,b,c){b=f(b,c);var d=[];if(null==a)return d;for(var g=-1,h=a.length;++g<h;){var i=b(a[g],g,a);null!=i&&e(d,i)}return d}var e=a("./append"),f=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128,"./append":79}],81:[function(a,b,c){function d(a,b){if(null==b)return a;for(var c=-1,d=b.length;++c<d;)e(a,b[c])===-1&&a.push(b[c]);return a}var e=a("./indexOf");b.exports=d},{"./indexOf":95}],82:[function(a,b,c){function d(a){return e(a,function(a){return null!=a})}var e=a("./filter");b.exports=d},{"./filter":87}],83:[function(a,b,c){function d(a,b){return e(a,b)!==-1}var e=a("./indexOf");b.exports=d},{"./indexOf":95}],84:[function(a,b,c){function d(a){var b=i(arguments,1),c=f(e(a),function(a){return!g(b,function(b){return h(b,a)})});return c}var e=a("./unique"),f=a("./filter"),g=a("./some"),h=a("./contains"),i=a("./slice");b.exports=d},{"./contains":83,"./filter":87,"./slice":115,"./some":116,"./unique":123}],85:[function(a,b,c){function d(a,b,c){return c=c||f,g(a)&&g(b)?a.length===b.length&&h(a,e(c),b):c(a,b)}function e(a){return function(b,c){return c in this&&a(b,this[c])}}var f=a("../lang/is"),g=a("../lang/isArray"),h=a("./every");b.exports=d},{"../lang/is":140,"../lang/isArray":142,"./every":86}],86:[function(a,b,c){function d(a,b,c){b=e(b,c);var d=!0;if(null==a)return d;for(var f=-1,g=a.length;++f<g;)if(!b(a[f],f,a)){d=!1;break}return d}var e=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128}],87:[function(a,b,c){function d(a,b,c){b=e(b,c);var d=[];if(null==a)return d;for(var f,g=-1,h=a.length;++g<h;)f=a[g],b(f,g,a)&&d.push(f);return d}var e=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128}],88:[function(a,b,c){function d(a,b,c){var d=e(a,b,c);return d>=0?a[d]:void 0}var e=a("./findIndex");b.exports=d},{"./findIndex":89}],89:[function(a,b,c){function d(a,b,c){if(b=e(b,c),null==a)return-1;for(var d=-1,f=a.length;++d<f;)if(b(a[d],d,a))return d;return-1}var e=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128}],90:[function(a,b,c){function d(a,b,c){var d=e(a,b,c);return d>=0?a[d]:void 0}var e=a("./findLastIndex");b.exports=d},{"./findLastIndex":91}],91:[function(a,b,c){function d(a,b,c){if(b=e(b,c),null==a)return-1;for(var d=a.length;--d>=0;)if(b(a[d],d,a))return d;return-1}var e=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128}],92:[function(a,b,c){function d(a,b,c){if(0===c)return g(b,a),b;for(var e,h=-1,i=a.length;++h<i;)e=a[h],f(e)?d(e,b,c-1):b.push(e);return b}function e(a,b){return null==a?[]:(b=null==b?-1:b,d(a,[],b))}var f=a("../lang/isArray"),g=a("./append");b.exports=e},{"../lang/isArray":142,"./append":79}],93:[function(a,b,c){function d(a,b,c){if(null!=a)for(var d=-1,e=a.length;++d<e&&b.call(c,a[d],d,a)!==!1;);}b.exports=d},{}],94:[function(a,b,c){function d(a,b,c){b=b?g(b,c):f;var d={};return e(a,function(a){var c=b(a);c in d||(d[c]=[]),d[c].push(a)}),d}var e=a("../array/forEach"),f=a("../function/identity"),g=a("../function/makeIterator_");b.exports=d},{"../array/forEach":93,"../function/identity":127,"../function/makeIterator_":128}],95:[function(a,b,c){function d(a,b,c){if(c=c||0,null==a)return-1;for(var d=a.length,e=c<0?d+c:c;e<d;){if(a[e]===b)return e;e++}return-1}b.exports=d},{}],96:[function(a,b,c){function d(a,b){var c=e(f(arguments,1),a);return c.length&&Array.prototype.push.apply(a,c),a.length}var e=a("./difference"),f=a("./slice");b.exports=d},{"./difference":84,"./slice":115}],97:[function(a,b,c){function d(a){var b=i(arguments,1),c=f(e(a),function(a){return g(b,function(b){return h(b,a)})});return c}var e=a("./unique"),f=a("./filter"),g=a("./every"),h=a("./contains"),i=a("./slice");b.exports=d},{"./contains":83,"./every":86,"./filter":87,"./slice":115,"./unique":123}],98:[function(a,b,c){function d(a,b,c){if(null==a)return a;for(var d,f=e(arguments,2),g=-1,h=a.length;++g<h;)d=a[g],d[b].apply(d,f);return a}var e=a("./slice");b.exports=d},{"./slice":115}],99:[function(a,b,c){function d(a){return null!=a&&""!==a}function e(a,b){return b=b||"",f(a,d).join(b)}var f=a("./filter");b.exports=e},{"./filter":87}],100:[function(a,b,c){function d(a){if(!(null==a||a.length<1))return a[a.length-1]}b.exports=d},{}],101:[function(a,b,c){function d(a,b,c){if(null==a)return-1;var d=a.length;for(c=null==c||c>=d?d-1:c,c=c<0?d+c:c;c>=0;){if(a[c]===b)return c;c--}return-1}b.exports=d},{}],102:[function(a,b,c){function d(a,b,c){b=e(b,c);var d=[];if(null==a)return d;for(var f=-1,g=a.length;++f<g;)d[f]=b(a[f],f,a);return d}var e=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128}],103:[function(a,b,c){function d(a,b,c){if(null!=a&&a.length){if(a.length&&!b)return Math.max.apply(Math,a);b=e(b,c);for(var d,f,g,h=-(1/0),i=-1,j=a.length;++i<j;)f=a[i],g=b(f,i,a),g>h&&(h=g,d=f);return d}return 1/0}var e=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128}],104:[function(a,b,c){function d(a,b,c){if(null!=a&&a.length){if(a.length&&!b)return Math.min.apply(Math,a);b=e(b,c);for(var d,f,g,h=1/0,i=-1,j=a.length;++i<j;)f=a[i],g=b(f,i,a),g<h&&(h=g,d=f);return d}return-(1/0)}var e=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128}],105:[function(a,b,c){function d(a,b){if(null!=b){var c=[];if(b>0&&a&&a.length)for(b=b>a.length?a.length:b;b--;)c.push(e(a));return c}return a&&a.length?e(a):void 0}function e(a){var b=f(0,a.length-1);return a.splice(b,1)[0]}var f=a("../random/randInt");b.exports=d},{"../random/randInt":206}],106:[function(a,b,c){function d(a,b){return e(a,b)}var e=a("./map");b.exports=d},{"./map":102}],107:[function(a,b,c){function d(a,b,c){null==b&&(b=a,a=0),c=c||1;for(var d=[],f=(e(b-a,c),a);f<=b;)d.push(f),f+=c;return d}var e=a("../math/countSteps");b.exports=d},{"../math/countSteps":164}],108:[function(a,b,c){function d(a,b,c){var d=arguments.length>2,e=c;if(null==a||!a.length){if(d)return c;throw new Error("reduce of empty array with no initial value")}for(var f=-1,g=a.length;++f<g;)d?e=b(e,a[f],f,a):(e=a[f],d=!0);return e}b.exports=d},{}],109:[function(a,b,c){function d(a,b,c){var d=arguments.length>2;if(null==a||!a.length){if(d)return c;throw new Error("reduce of empty array with no initial value");
}for(var e,f=a.length,g=c;--f>=0;)e=a[f],d?g=b(g,e,f,a):(g=e,d=!0);return g}b.exports=d},{}],110:[function(a,b,c){function d(a,b,c){b=e(b,c);var d=[];if(null==a)return d;for(var f,g=-1,h=a.length;++g<h;)f=a[g],b(f,g,a)||d.push(f);return d}var e=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128}],111:[function(a,b,c){function d(a,b){var c=e(a,b);c!==-1&&a.splice(c,1)}var e=a("./indexOf");b.exports=d},{"./indexOf":95}],112:[function(a,b,c){function d(a,b){for(var c=e(a,b);c!==-1;)a.splice(c,1),c=e(a,b,c)}var e=a("./indexOf");b.exports=d},{"./indexOf":95}],113:[function(a,b,c){function d(a){var b=a.slice();return b.reverse(),b}b.exports=d},{}],114:[function(a,b,c){function d(a){var b,c=[];if(null==a)return c;for(var d=-1,f=a.length;++d<f;)d?(b=e(0,d),c[d]=c[b],c[b]=a[d]):c[0]=a[0];return c}var e=a("../random/randInt");b.exports=d},{"../random/randInt":206}],115:[function(a,b,c){function d(a,b,c){var d=a.length;b=null==b?0:b<0?Math.max(d+b,0):Math.min(b,d),c=null==c?d:c<0?Math.max(d+c,0):Math.min(c,d);for(var e=[];b<c;)e.push(a[b++]);return e}b.exports=d},{}],116:[function(a,b,c){function d(a,b,c){b=e(b,c);var d=!1;if(null==a)return d;for(var f=-1,g=a.length;++f<g;)if(b(a[f],f,a)){d=!0;break}return d}var e=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128}],117:[function(a,b,c){function d(a,b){if(null==a)return[];if(a.length<2)return a;null==b&&(b=e);var c,g,h;return c=~~(a.length/2),g=d(a.slice(0,c),b),h=d(a.slice(c,a.length),b),f(g,h,b)}function e(a,b){return a<b?-1:a>b?1:0}function f(a,b,c){for(var d=[];a.length&&b.length;)c(a[0],b[0])<=0?d.push(a.shift()):d.push(b.shift());return a.length&&d.push.apply(d,a),b.length&&d.push.apply(d,b),d}b.exports=d},{}],118:[function(a,b,c){function d(a,b,c){return b=f(b,c),e(a,function(a,c){return a=b(a),c=b(c),a<c?-1:a>c?1:0})}var e=a("./sort"),f=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128,"./sort":117}],119:[function(a,b,c){function d(a,b){b=b||2;var c=[];if(null==a)return c;for(var d,e=Math.floor(a.length/b),f=a.length%b,g=0,h=a.length,i=0;g<h;)d=e,i<f&&d++,c.push(a.slice(g,g+d)),i++,g+=d;return c}b.exports=d},{}],120:[function(a,b,c){function d(a,b,c){var d=-1,e=[];if(c)for(;++d<a;)e[d]=b.call(c,d,a);else for(;++d<a;)e[d]=b(d,a);return e}b.exports=d},{}],121:[function(a,b,c){function d(a,b){var c={};if(null==a)return c;var d,f=-1,g=a.length;if(e(b))for(;++f<g;)d=a[f],c[b(d)]=d;else for(;++f<g;)d=a[f],c[d[b]]=d;return c}var e=a("../lang/isFunction");b.exports=d},{"../lang/isFunction":147}],122:[function(a,b,c){function d(a){for(var b=[],c=-1,d=arguments.length;++c<d;)f(b,arguments[c]);return e(b)}var e=a("./unique"),f=a("./append");b.exports=d},{"./append":79,"./unique":123}],123:[function(a,b,c){function d(a,b){return b=b||e,f(a,function(a,c,d){for(var e=d.length;++c<e;)if(b(a,d[c]))return!1;return!0})}function e(a,b){return a===b}var f=a("./filter");b.exports=d},{"./filter":87}],124:[function(a,b,c){function d(a,b){a=e(a),b=e(b);var c=f(a,function(a){return!g(b,a)}),d=f(b,function(b){return!g(a,b)});return c.concat(d)}var e=a("./unique"),f=a("./filter"),g=a("./contains");b.exports=d},{"./contains":83,"./filter":87,"./unique":123}],125:[function(a,b,c){function d(a){return null==a?0:a.length}function e(a){for(var b=a?f(g(arguments,d)):0,c=[],e=-1;++e<b;)c.push(g(arguments,function(a){return null==a?void 0:a[e]}));return c}var f=a("./max"),g=a("./map");b.exports=e},{"./map":102,"./max":103}],126:[function(a,b,c){function d(a,b,c){var d=e(arguments,2);return function(){return a.apply(b,d.concat(e(arguments)))}}var e=a("../array/slice");b.exports=d},{"../array/slice":115}],127:[function(a,b,c){function d(a){return a}b.exports=d},{}],128:[function(a,b,c){function d(a,b){if(null==a)return e;switch(typeof a){case"function":return"undefined"!=typeof b?function(c,d,e){return a.call(b,c,d,e)}:a;case"object":return function(b){return g(b,a)};case"string":case"number":return f(a)}}var e=a("./identity"),f=a("./prop"),g=a("../object/deepMatches");b.exports=d},{"../object/deepMatches":172,"./identity":127,"./prop":130}],129:[function(a,b,c){function d(a){var b=e(arguments,1);return function(){for(var c=b.concat(e(arguments)),f=c.length;f--;)c[f]===d._&&(c[f]=c.splice(-1)[0]);return a.apply(this,c)}}var e=a("../array/slice");d._={},b.exports=d},{"../array/slice":115}],130:[function(a,b,c){function d(a){return function(b){return b[a]}}b.exports=d},{}],131:[function(a,b,c){b.exports={GLOBAL:a("./lang/GLOBAL"),clone:a("./lang/clone"),createObject:a("./lang/createObject"),ctorApply:a("./lang/ctorApply"),deepClone:a("./lang/deepClone"),deepEquals:a("./lang/deepEquals"),defaults:a("./lang/defaults"),inheritPrototype:a("./lang/inheritPrototype"),is:a("./lang/is"),isArguments:a("./lang/isArguments"),isArray:a("./lang/isArray"),isBoolean:a("./lang/isBoolean"),isDate:a("./lang/isDate"),isEmpty:a("./lang/isEmpty"),isFinite:a("./lang/isFinite"),isFunction:a("./lang/isFunction"),isInteger:a("./lang/isInteger"),isKind:a("./lang/isKind"),isNaN:a("./lang/isNaN"),isNull:a("./lang/isNull"),isNumber:a("./lang/isNumber"),isObject:a("./lang/isObject"),isPlainObject:a("./lang/isPlainObject"),isPrimitive:a("./lang/isPrimitive"),isRegExp:a("./lang/isRegExp"),isString:a("./lang/isString"),isUndefined:a("./lang/isUndefined"),isnt:a("./lang/isnt"),kindOf:a("./lang/kindOf"),toArray:a("./lang/toArray"),toNumber:a("./lang/toNumber"),toString:a("./lang/toString")}},{"./lang/GLOBAL":132,"./lang/clone":133,"./lang/createObject":134,"./lang/ctorApply":135,"./lang/deepClone":136,"./lang/deepEquals":137,"./lang/defaults":138,"./lang/inheritPrototype":139,"./lang/is":140,"./lang/isArguments":141,"./lang/isArray":142,"./lang/isBoolean":143,"./lang/isDate":144,"./lang/isEmpty":145,"./lang/isFinite":146,"./lang/isFunction":147,"./lang/isInteger":148,"./lang/isKind":149,"./lang/isNaN":150,"./lang/isNull":151,"./lang/isNumber":152,"./lang/isObject":153,"./lang/isPlainObject":154,"./lang/isPrimitive":155,"./lang/isRegExp":156,"./lang/isString":157,"./lang/isUndefined":158,"./lang/isnt":159,"./lang/kindOf":160,"./lang/toArray":161,"./lang/toNumber":162,"./lang/toString":163}],132:[function(a,b,c){b.exports=Function("return this")()},{}],133:[function(a,b,c){function d(a){switch(i(a)){case"Object":return e(a);case"Array":return h(a);case"RegExp":return f(a);case"Date":return g(a);default:return a}}function e(a){return j(a)?k({},a):a}function f(a){var b="";return b+=a.multiline?"m":"",b+=a.global?"g":"",b+=a.ignoreCase?"i":"",new RegExp(a.source,b)}function g(a){return new Date((+a))}function h(a){return a.slice()}var i=a("./kindOf"),j=a("./isPlainObject"),k=a("../object/mixIn");b.exports=d},{"../object/mixIn":192,"./isPlainObject":154,"./kindOf":160}],134:[function(a,b,c){function d(a,b){function c(){}return c.prototype=a,e(new c,b)}var e=a("../object/mixIn");b.exports=d},{"../object/mixIn":192}],135:[function(a,b,c){function d(){}function e(a,b){d.prototype=a.prototype;var c=new d;return a.apply(c,b),c}b.exports=e},{}],136:[function(a,b,c){function d(a,b){switch(i(a)){case"Object":return e(a,b);case"Array":return f(a,b);default:return g(a)}}function e(a,b){if(j(a)){var c={};return h(a,function(a,c){this[c]=d(a,b)},c),c}return b?b(a):a}function f(a,b){for(var c=[],e=-1,f=a.length;++e<f;)c[e]=d(a[e],b);return c}var g=a("./clone"),h=a("../object/forOwn"),i=a("./kindOf"),j=a("./isPlainObject");b.exports=d},{"../object/forOwn":181,"./clone":133,"./isPlainObject":154,"./kindOf":160}],137:[function(a,b,c){function d(a,b,c){function j(a,b){return d(a,b,c)}c=c||e;var k=f(a)&&f(b),l=!k&&g(a)&&g(b);if(!k&&!l)return c(a,b);var m=k?h:i;return m(a,b,j)}var e=a("./is"),f=a("./isObject"),g=a("./isArray"),h=a("../object/equals"),i=a("../array/equals");b.exports=d},{"../array/equals":85,"../object/equals":174,"./is":140,"./isArray":142,"./isObject":153}],138:[function(a,b,c){function d(a){return g(f(arguments),e)}function e(a){return null!=a}var f=a("./toArray"),g=a("../array/find");b.exports=d},{"../array/find":88,"./toArray":161}],139:[function(a,b,c){function d(a,b){var c=e(b.prototype);return c.constructor=a,a.prototype=c,a.super_=b,c}var e=a("./createObject");b.exports=d},{"./createObject":134}],140:[function(a,b,c){function d(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}b.exports=d},{}],141:[function(a,b,c){var d=a("./isKind"),e=d(arguments,"Arguments")?function(a){return d(a,"Arguments")}:function(a){return!(!a||!Object.prototype.hasOwnProperty.call(a,"callee"))};b.exports=e},{"./isKind":149}],142:[function(a,b,c){var d=a("./isKind"),e=Array.isArray||function(a){return d(a,"Array")};b.exports=e},{"./isKind":149}],143:[function(a,b,c){function d(a){return e(a,"Boolean")}var e=a("./isKind");b.exports=d},{"./isKind":149}],144:[function(a,b,c){function d(a){return e(a,"Date")}var e=a("./isKind");b.exports=d},{"./isKind":149}],145:[function(a,b,c){function d(a){if(null==a)return!0;if("string"==typeof a||f(a))return!a.length;if("object"==typeof a){var b=!0;return e(a,function(){return b=!1,!1}),b}return!0}var e=a("../object/forOwn"),f=a("./isArray");b.exports=d},{"../object/forOwn":181,"./isArray":142}],146:[function(a,b,c){function d(a){var b=!1;return"string"==typeof a&&""!==a?b=f.isFinite(parseFloat(a)):e(a)&&(b=f.isFinite(a)),b}var e=a("./isNumber"),f=a("./GLOBAL");b.exports=d},{"./GLOBAL":132,"./isNumber":152}],147:[function(a,b,c){function d(a){return e(a,"Function")}var e=a("./isKind");b.exports=d},{"./isKind":149}],148:[function(a,b,c){function d(a){return e(a)&&a%1===0}var e=a("./isNumber");b.exports=d},{"./isNumber":152}],149:[function(a,b,c){function d(a,b){return e(a)===b}var e=a("./kindOf");b.exports=d},{"./kindOf":160}],150:[function(a,b,c){function d(a){return!e(a)||f(Number(a))}var e=a("./isNumber"),f=a("../number/isNaN");b.exports=d},{"../number/isNaN":167,"./isNumber":152}],151:[function(a,b,c){function d(a){return null===a}b.exports=d},{}],152:[function(a,b,c){function d(a){return e(a,"Number")}var e=a("./isKind");b.exports=d},{"./isKind":149}],153:[function(a,b,c){function d(a){return e(a,"Object")}var e=a("./isKind");b.exports=d},{"./isKind":149}],154:[function(a,b,c){function d(a){return!!a&&"object"==typeof a&&a.constructor===Object}b.exports=d},{}],155:[function(a,b,c){function d(a){switch(typeof a){case"string":case"number":case"boolean":return!0}return null==a}b.exports=d},{}],156:[function(a,b,c){function d(a){return e(a,"RegExp")}var e=a("./isKind");b.exports=d},{"./isKind":149}],157:[function(a,b,c){function d(a){return e(a,"String")}var e=a("./isKind");b.exports=d},{"./isKind":149}],158:[function(a,b,c){function d(a){return a===e}var e;b.exports=d},{}],159:[function(a,b,c){function d(a,b){return!e(a,b)}var e=a("./is");b.exports=d},{"./is":140}],160:[function(a,b,c){function d(a){return null===a?"Null":a===e?"Undefined":f.exec(g.call(a))[1]}var e,f=/^\[object (.*)\]$/,g=Object.prototype.toString;b.exports=d},{}],161:[function(a,b,c){function d(a){var b,c=[],d=e(a);if(null!=a)if(null==a.length||"String"===d||"Function"===d||"RegExp"===d||a===f)c[c.length]=a;else for(b=a.length;b--;)c[b]=a[b];return c}var e=a("./kindOf"),f=a("./GLOBAL");b.exports=d},{"./GLOBAL":132,"./kindOf":160}],162:[function(a,b,c){function d(a){return"number"==typeof a?a:a?"string"==typeof a?parseFloat(a):e(a)?NaN:Number(a):0}var e=a("./isArray");b.exports=d},{"./isArray":142}],163:[function(a,b,c){function d(a){return null==a?"":a.toString()}b.exports=d},{}],164:[function(a,b,c){function d(a,b,c){return a=Math.floor(a/b),c?a%c:a}b.exports=d},{}],165:[function(a,b,c){b.exports=2147483647},{}],166:[function(a,b,c){b.exports=-2147483648},{}],167:[function(a,b,c){function d(a){return"number"==typeof a&&a!=a}b.exports=d},{}],168:[function(a,b,c){b.exports={bindAll:a("./object/bindAll"),contains:a("./object/contains"),deepFillIn:a("./object/deepFillIn"),deepMatches:a("./object/deepMatches"),deepMixIn:a("./object/deepMixIn"),equals:a("./object/equals"),every:a("./object/every"),fillIn:a("./object/fillIn"),filter:a("./object/filter"),find:a("./object/find"),flatten:a("./object/flatten"),forIn:a("./object/forIn"),forOwn:a("./object/forOwn"),functions:a("./object/functions"),get:a("./object/get"),has:a("./object/has"),hasOwn:a("./object/hasOwn"),keys:a("./object/keys"),map:a("./object/map"),matches:a("./object/matches"),max:a("./object/max"),merge:a("./object/merge"),min:a("./object/min"),mixIn:a("./object/mixIn"),namespace:a("./object/namespace"),omit:a("./object/omit"),pick:a("./object/pick"),pluck:a("./object/pluck"),reduce:a("./object/reduce"),reject:a("./object/reject"),result:a("./object/result"),set:a("./object/set"),size:a("./object/size"),some:a("./object/some"),unset:a("./object/unset"),values:a("./object/values")}},{"./object/bindAll":169,"./object/contains":170,"./object/deepFillIn":171,"./object/deepMatches":172,"./object/deepMixIn":173,"./object/equals":174,"./object/every":175,"./object/fillIn":176,"./object/filter":177,"./object/find":178,"./object/flatten":179,"./object/forIn":180,"./object/forOwn":181,"./object/functions":182,"./object/get":183,"./object/has":184,"./object/hasOwn":185,"./object/keys":186,"./object/map":187,"./object/matches":188,"./object/max":189,"./object/merge":190,"./object/min":191,"./object/mixIn":192,"./object/namespace":193,"./object/omit":194,"./object/pick":195,"./object/pluck":196,"./object/reduce":197,"./object/reject":198,"./object/result":199,"./object/set":200,"./object/size":201,"./object/some":202,"./object/unset":203,"./object/values":204}],169:[function(a,b,c){function d(a,b){var c=arguments.length>1?h(arguments,1):e(a);g(c,function(b){a[b]=f(a[b],a)})}var e=a("./functions"),f=a("../function/bind"),g=a("../array/forEach"),h=a("../array/slice");b.exports=d},{"../array/forEach":93,"../array/slice":115,"../function/bind":126,"./functions":182}],170:[function(a,b,c){function d(a,b){return e(a,function(a){return a===b})}var e=a("./some");b.exports=d},{"./some":202}],171:[function(a,b,c){function d(a,b){for(var c,g=0,h=arguments.length;++g<h;)c=arguments[g],c&&e(c,function(b,c){var e=a[c];null==e?a[c]=b:f(e)&&f(b)&&d(e,b)});return a}var e=a("./forOwn"),f=a("../lang/isPlainObject");b.exports=d},{"../lang/isPlainObject":154,"./forOwn":181}],172:[function(a,b,c){function d(a,b){for(var c=-1,d=a.length;++c<d;)if(g(a[c],b))return!0;return!1}function e(a,b){for(var c=-1,e=b.length;++c<e;)if(!d(a,b[c]))return!1;return!0}function f(a,b){var c=!0;return h(b,function(b,d){if(!g(a[d],b))return c=!1}),c}function g(a,b){return a&&"object"==typeof a?i(a)&&i(b)?e(a,b):f(a,b):a===b}var h=a("./forOwn"),i=a("../lang/isArray");b.exports=g},{"../lang/isArray":142,"./forOwn":181}],173:[function(a,b,c){function d(a,b){for(var c,d=0,g=arguments.length;++d<g;)c=arguments[d],c&&f(c,e,a);return a}function e(a,b){var c=this[b];g(a)&&g(c)?d(c,a):this[b]=a}var f=a("./forOwn"),g=a("../lang/isPlainObject");b.exports=d},{"../lang/isPlainObject":154,"./forOwn":181}],174:[function(a,b,c){function d(a){return function(b,c){return g(this,c)&&a(b,this[c])}}function e(a,b){return g(this,b)}function f(a,b,c){return c=c||j,i(a)&&i(b)?h(a,d(c),b)&&h(b,e,a):c(a,b)}var g=a("./hasOwn"),h=a("./every"),i=a("../lang/isObject"),j=a("../lang/is");b.exports=f},{"../lang/is":140,"../lang/isObject":153,"./every":175,"./hasOwn":185}],175:[function(a,b,c){function d(a,b,c){b=f(b,c);var d=!0;return e(a,function(c,e){if(!b(c,e,a))return d=!1,!1}),d}var e=a("./forOwn"),f=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128,"./forOwn":181}],176:[function(a,b,c){function d(a,b){return e(f(arguments,1),function(b){g(b,function(b,c){null==a[c]&&(a[c]=b)})}),a}var e=a("../array/forEach"),f=a("../array/slice"),g=a("./forOwn");b.exports=d},{"../array/forEach":93,"../array/slice":115,"./forOwn":181}],177:[function(a,b,c){function d(a,b,c){b=f(b,c);var d={};return e(a,function(a,c,e){b(a,c,e)&&(d[c]=a)}),d}var e=a("./forOwn"),f=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128,"./forOwn":181}],178:[function(a,b,c){function d(a,b,c){b=f(b,c);var d;return e(a,function(a,c,e){if(b(a,c,e))return d=a,!0}),d}var e=a("./some"),f=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128,"./some":202}],179:[function(a,b,c){function d(a,b,c,e){return f(a,function(a,f){var h=c?c+"."+f:f;0!==e&&g(a)?d(a,b,h,e-1):b[h]=a}),b}function e(a,b){return null==a?{}:(b=null==b?-1:b,d(a,{},"",b))}var f=a("./forOwn"),g=a("../lang/isPlainObject");b.exports=e},{"../lang/isPlainObject":154,"./forOwn":181}],180:[function(a,b,c){function d(){h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],g=!0;for(var a in{toString:null})g=!1}function e(a,b,c){var e,j=0;null==g&&d();for(e in a)if(f(b,a,e,c)===!1)break;if(g)for(var k=a.constructor,l=!!k&&a===k.prototype;(e=h[j++])&&("constructor"===e&&(l||!i(a,e))||a[e]===Object.prototype[e]||f(b,a,e,c)!==!1););}function f(a,b,c,d){return a.call(d,b[c],c,b)}var g,h,i=a("./hasOwn");b.exports=e},{"./hasOwn":185}],181:[function(a,b,c){function d(a,b,c){f(a,function(d,f){if(e(a,f))return b.call(c,a[f],f,a)})}var e=a("./hasOwn"),f=a("./forIn");b.exports=d},{"./forIn":180,"./hasOwn":185}],182:[function(a,b,c){function d(a){var b=[];return e(a,function(a,c){"function"==typeof a&&b.push(c)}),b.sort()}var e=a("./forIn");b.exports=d},{"./forIn":180}],183:[function(a,b,c){function d(a,b){for(var c=b.split("."),d=c.pop();b=c.shift();)if(a=a[b],null==a)return;return a[d]}a("../lang/isPrimitive"),b.exports=d},{"../lang/isPrimitive":155}],184:[function(a,b,c){function d(a,b){return f(a,b)!==e}var e,f=a("./get");b.exports=d},{"./get":183}],185:[function(a,b,c){function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=d},{}],186:[function(a,b,c){var d=a("./forOwn"),e=Object.keys||function(a){var b=[];return d(a,function(a,c){b.push(c)}),b};b.exports=e},{"./forOwn":181}],187:[function(a,b,c){function d(a,b,c){b=f(b,c);var d={};return e(a,function(a,c,e){d[c]=b(a,c,e)}),d}var e=a("./forOwn"),f=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128,"./forOwn":181}],188:[function(a,b,c){function d(a,b){var c=!0;return e(b,function(b,d){if(a[d]!==b)return c=!1}),c}var e=a("./forOwn");b.exports=d},{"./forOwn":181}],189:[function(a,b,c){function d(a,b){return e(f(a),b)}var e=a("../array/max"),f=a("./values");b.exports=d},{"../array/max":103,"./values":204}],190:[function(a,b,c){function d(){var a,b,c,h,i=1;for(h=f(arguments[0]);c=arguments[i++];)for(a in c)e(c,a)&&(b=c[a],g(b)&&g(h[a])?h[a]=d(h[a],b):h[a]=f(b));return h}var e=a("./hasOwn"),f=a("../lang/deepClone"),g=a("../lang/isObject");b.exports=d},{"../lang/deepClone":136,"../lang/isObject":153,"./hasOwn":185}],191:[function(a,b,c){function d(a,b){return e(f(a),b)}var e=a("../array/min"),f=a("./values");b.exports=d},{"../array/min":104,"./values":204}],192:[function(a,b,c){function d(a,b){for(var c,d=0,g=arguments.length;++d<g;)c=arguments[d],null!=c&&f(c,e,a);return a}function e(a,b){this[b]=a}var f=a("./forOwn");b.exports=d},{"./forOwn":181}],193:[function(a,b,c){function d(a,b){return b?(e(b.split("."),function(b){a[b]||(a[b]={}),a=a[b]}),a):a}var e=a("../array/forEach");b.exports=d},{"../array/forEach":93}],194:[function(a,b,c){function d(a,b){var c="string"!=typeof arguments[1]?arguments[1]:e(arguments,1),d={};for(var g in a)a.hasOwnProperty(g)&&!f(c,g)&&(d[g]=a[g]);return d}var e=a("../array/slice"),f=a("../array/contains");b.exports=d},{"../array/contains":83,"../array/slice":115}],195:[function(a,b,c){function d(a,b){for(var c,d="string"!=typeof arguments[1]?arguments[1]:e(arguments,1),f={},g=0;c=d[g++];)f[c]=a[c];return f}var e=a("../array/slice");b.exports=d},{"../array/slice":115}],196:[function(a,b,c){function d(a,b){return e(a,f(b))}var e=a("./map"),f=a("../function/prop");b.exports=d},{"../function/prop":130,"./map":187}],197:[function(a,b,c){function d(a,b,c,d){var g=arguments.length>2;if(!f(a)&&!g)throw new Error("reduce of empty object with no initial value");return e(a,function(a,e,f){g?c=b.call(d,c,a,e,f):(c=a,g=!0)}),c}var e=a("./forOwn"),f=a("./size");b.exports=d},{"./forOwn":181,"./size":201}],198:[function(a,b,c){function d(a,b,c){return b=f(b,c),e(a,function(a,c,d){return!b(a,c,d)},c)}var e=a("./filter"),f=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128,"./filter":177}],199:[function(a,b,c){function d(a,b){var c=a[b];if(void 0!==c)return e(c)?c.call(a):c}var e=a("../lang/isFunction");b.exports=d},{"../lang/isFunction":147}],200:[function(a,b,c){function d(a,b,c){var d=/^(.+)\.(.+)$/.exec(b);d?e(a,d[1])[d[2]]=c:a[b]=c}var e=a("./namespace");b.exports=d},{"./namespace":193}],201:[function(a,b,c){function d(a){var b=0;return e(a,function(){b++}),b}var e=a("./forOwn");b.exports=d},{"./forOwn":181}],202:[function(a,b,c){function d(a,b,c){b=f(b,c);var d=!1;return e(a,function(c,e){if(b(c,e,a))return d=!0,!1}),d}var e=a("./forOwn"),f=a("../function/makeIterator_");b.exports=d},{"../function/makeIterator_":128,"./forOwn":181}],203:[function(a,b,c){function d(a,b){if(e(a,b)){for(var c=b.split("."),d=c.pop();b=c.shift();)a=a[b];return delete a[d]}return!0}var e=a("./has");b.exports=d},{"./has":184}],204:[function(a,b,c){function d(a){var b=[];return e(a,function(a,c){b.push(a)}),b}var e=a("./forOwn");b.exports=d},{"./forOwn":181}],205:[function(a,b,c){function d(a,b){return a=null==a?f:a,b=null==b?g:b,a+(b-a)*e()}var e=a("./random"),f=a("../number/MIN_INT"),g=a("../number/MAX_INT");b.exports=d},{"../number/MAX_INT":165,"../number/MIN_INT":166,"./random":207}],206:[function(a,b,c){function d(a,b){return a=null==a?e:~~a,b=null==b?f:~~b,Math.round(g(a-.5,b+.499999999999))}var e=a("../number/MIN_INT"),f=a("../number/MAX_INT"),g=a("./rand");b.exports=d},{"../number/MAX_INT":165,"../number/MIN_INT":166,"./rand":205}],207:[function(a,b,c){function d(){return d.get()}d.get=Math.random,b.exports=d},{}],208:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./v1"),a("./v2");var e=a("./layer.js"),f=d(e),g=angular.module("betfair.bet-engine-layer",[]);g.factory("BF.BetEngineLayer",f["default"])},{"./layer.js":209,"./v1":211,"./v2":220}],209:[function(a,b,c){"use strict";function d(a){function b(a,b){if(!angular.isFunction(a[b]))throw new Error("adapter must provide "+b+" method")}function c(a){if(!angular.isObject(a))throw new Error("adapter must be an object");var c=b.bind(b,a);angular.forEach(e,c)}return c(a),a}Object.defineProperty(c,"__esModule",{value:!0});var e=["addMarket","hasMarket","removeMarket","updateMarket","setMarketOpenBets","getMarketPosition","getRunnersPosition","calcCashoutWhatif"];d.$inject=["BetEngineLayer.Adapter"],c["default"]=d},{}],210:[function(a,b,c){"use strict";function d(){throw new Error("not implemented yet")}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],211:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./adapter/v1-adapter.js"),f=d(e),g=angular.module("betfair.bet-engine-layer.v1",[]);g.factory("BF.BetEngineV1Adapter",f["default"])},{"./adapter/v1-adapter.js":210}],212:[function(a,b,c){"use strict";function d(a,b){return Object.keys(a).reduce(function(c,d){return c[d]=a[d].bind(a,b),c},{})}function e(a,b,c,e,f,g,h){var i=[b,c,e,f,g,h];return function(b,c){var e,f=a.factory.createBetEngine({discount:b,ladders:c});return d((e=angular).extend.apply(e,[{}].concat(i)),f)}}Object.defineProperty(c,"__esModule",{value:!0}),e.$inject=["BF.BetEngineV2","BF.Private.BetEngineV2Adapter.Market","BF.Private.BetEngineV2Adapter.Bets","BF.Private.BetEngineV2Adapter.Ladder","BF.Private.BetEngineV2Adapter.Position","BF.Private.BetEngineV2Adapter.Potentials","BF.Private.BetEngineV2Adapter.Cashout"],c["default"]=e},{}],213:[function(a,b,c){"use strict";function d(){function a(a,b,c,d){return a.setMarketOpenBets(b,c,d)}return{setMarketOpenBets:a}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],214:[function(a,b,c){"use strict";function d(){function a(a,b,c,d,e){return a.calcCashoutWhatif(b,c,d,e)}return{calcCashoutWhatif:a}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],215:[function(a,b,c){"use strict";function d(){function a(a,b,c,d,e){return a.validatePrice(b,c,d,e)}function b(a,b,c,d){return a.validateSize(b,c,d)}return{validatePrice:a,validateSize:b}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],216:[function(a,b,c){"use strict";function d(){function a(a,b,c,d){return a.addMarket(b,c,d)}function b(a,b){return a.hasMarket(b)}function c(a,b){return a.removeMarket(b)}function d(a,b,c,d){return a.updateMarket(b,c,d)}return{addMarket:a,hasMarket:b,removeMarket:c,updateMarket:d}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],217:[function(a,b,c){"use strict";function d(){function a(a,b,c){return a.getMarketPosition(b,c)}function b(a,b,c){return a.getRunnersPosition(b,c)}return{getMarketPosition:a,getRunnersPosition:b}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],218:[function(a,b,c){"use strict";function d(){function a(a,b,c){return a.addPotentialBet(b,c)}function b(a,b,c,d,e){return a.removePotentialBet(b,c,d,e)}function c(a,b,c,d,e,f){return a.updatePotentialBet(b,c,d,e,f)}function d(a,b,c,d,e,f){return a.updateUnmatchedBet(b,c,d,e,f)}function e(a,b){return a.getPotentialBets(b)}function f(a,b,c,d,e){return a.nudgeDownPotentialBet(b,c,d,e)}function g(a,b,c,d,e){return a.nudgeDownPotentialSPBet(b,c,d,e)}function h(a,b,c,d,e){return a.nudgeDownUnmatchedBet(b,c,d,e)}function i(a,b,c,d,e){return a.nudgeUpPotentialBet(b,c,d,e)}function j(a,b,c,d,e){return a.nudgeUpPotentialSPBet(b,c,d,e)}function k(a,b,c,d,e){return a.nudgeUpUnmatchedBet(b,c,d,e)}function l(a,b){return a.getAllPlaceablePotentialBets(b)}return{addPotentialBet:a,removePotentialBet:b,updatePotentialBet:c,updateUnmatchedBet:d,getPotentialBets:e,nudgeDownPotentialBet:f,nudgeDownPotentialSPBet:g,nudgeDownUnmatchedBet:h,nudgeUpPotentialBet:i,nudgeUpPotentialSPBet:j,nudgeUpUnmatchedBet:k,getAllPlaceablePotentialBets:l}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],219:[function(a,b,c){"use strict";function d(a){function b(b){return a.calc.totalBookPercentage(b)}function c(b,c,d,e){return a.calc.liability(b,c,d,e)}function d(b,c,d){return a.calc.payout(b,c,d)}function e(b,c,d,e){return a.calc.profit(b,c,d,e)}return{calcTotalBookPercentage:b,calcLiability:c,calcPayout:d,calcProfit:e}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.BetEngineV2"],c["default"]=d},{}],220:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}var f=a("bet-engine"),g=e(f),h=a("./adapter/v2-adapter.js"),i=d(h),j=a("./adapter/v2-market-adapter.js"),k=d(j),l=a("./adapter/v2-potentials-adapter.js"),m=d(l),n=a("./adapter/v2-bets-adapter.js"),o=d(n),p=a("./adapter/v2-cashout-adapter.js"),q=d(p),r=a("./adapter/v2-position-adapter.js"),s=d(r),t=a("./adapter/v2-stateless-calculations-adapter.js"),u=d(t),v=a("./adapter/v2-ladder-adapter.js"),w=d(v),x=a("./ladder/v2-ladder-builder.js"),y=d(x),z=angular.module("betfair.bet-engine-layer.v2",[]);z.factory("BF.BetEngineV2",function(){return g}),z.factory("BF.BetEngineV2LadderBuilder",y["default"]),z.factory("BF.BetEngineV2StatelessCalculations",u["default"]),z.factory("BF.Private.BetEngineV2Adapter.Market",k["default"]),z.factory("BF.Private.BetEngineV2Adapter.Bets",o["default"]),z.factory("BF.Private.BetEngineV2Adapter.Position",s["default"]),z.factory("BF.Private.BetEngineV2Adapter.Potentials",m["default"]),z.factory("BF.Private.BetEngineV2Adapter.Cashout",q["default"]),z.factory("BF.Private.BetEngineV2Adapter.Ladder",w["default"]),z.factory("BF.BetEngineV2Adapter",i["default"])},{"./adapter/v2-adapter.js":212,"./adapter/v2-bets-adapter.js":213,"./adapter/v2-cashout-adapter.js":214,"./adapter/v2-ladder-adapter.js":215,"./adapter/v2-market-adapter.js":216,"./adapter/v2-position-adapter.js":217,"./adapter/v2-potentials-adapter.js":218,"./adapter/v2-stateless-calculations-adapter.js":219,"./ladder/v2-ladder-builder.js":221,"bet-engine":6}],221:[function(a,b,c){"use strict";function d(a){return{createPriceLadder:a.factory.createPriceLadder,createSizeLadder:a.factory.createSizeLadder}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.BetEngineV2"],c["default"]=d},{}]},{},[208]),!function s(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,s,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){!function d(b,c,e){function f(h,i){if(!c[h]){if(!b[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=c[h]={exports:{}};b[h][0].call(l.exports,function(a){var c=b[h][1][a];return f(c?c:a)},l,l.exports,d,b,c,e)}return c[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./providers/raf-throttle-service.js"),f=d(e),g=a("./directives/bf-below-width-directive.js"),h=d(g),i=a("./directives/bf-element-width-directive.js"),j=d(i);angular.module("bfBreakpoint",["betfair.lodash"]).directive("bfBelowWidth",h["default"]).directive("bfElementWidth",j["default"]).service("RafThrottleService",f["default"])},{"./directives/bf-below-width-directive.js":2,"./directives/bf-element-width-directive.js":3,"./providers/raf-throttle-service.js":4}],2:[function(a,b,c){"use strict";function d(a,b){return{restrict:"A",scope:{rules:"<bfBelowWidth"},link:function(c,d){function e(a,b){return a.filter(b)[0]}function f(a){return Object.keys(a).map(function(b){return[b,a[b]]})}function g(a){return f(a).sort(function(a,b){return a[1]-b[1]})}function h(a){var b=k.getBoundingClientRect();angular.equals(m,b)||i(a,k.offsetWidth),m=b}function i(a,b){a.map(function(a){return a[0]}).forEach(d.removeClass.bind(d));var c=e(a,function(a){return a[1]>=b});c&&d.addClass(c[0])}function j(){l()}var k=d[0],l=angular.noop,m=null,n=c.$watch(function(){return angular.isDefined(c.rules)},function(d){if(d){var e=5,f=c.rules;n(),a.isObject(f)&&!a.isEmpty(f)&&(f=g(f),l=b(h.bind(null,f),e))}});c.$on("$destroy",j)}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.Lodash","RafThrottleService"],c["default"]=d},{}],3:[function(a,b,c){"use strict";function d(a){return{restrict:"A",scope:{onElementWidthChange:"&bfElementWidth"},link:function(b,c){function d(a){var c=f.offsetWidth;angular.equals(h,c)||b.$applyAsync(a({width:c})),h=c}function e(){g()}var f=c[0],g=angular.noop,h=null,i=b.$watch(function(){return angular.isDefined(b.onElementWidthChange)},function(c){if(c){var e=3;i(),g=a(d.bind(null,b.onElementWidthChange),e)}});b.$on("$destroy",e)}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["RafThrottleService"],c["default"]=d},{}],4:[function(a,b,c){"use strict";function d(a){return function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,d=1e3/c,e=Date.now(),f=!1,g=void 0;return function h(){if(!f){g=a.requestAnimationFrame(h);var c=Date.now(),i=c-e;i>d&&(e=c-i%d,b())}}(),b(),function(){f=!0,a.cancelAnimationFrame(g)}}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["$window"],c["default"]=d},{}]},{},[1])},{}],2:[function(a,b,c){!function d(b,c,e){function f(h,i){if(!c[h]){if(!b[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=c[h]={
exports:{}};b[h][0].call(l.exports,function(a){var c=b[h][1][a];return f(c?c:a)},l,l.exports,d,b,c,e)}return c[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={restrict:"E",transclude:!0,templateUrl:"/views/bf-progress-bar.html",controller:"BF.ProgressBarController",controllerAs:"self",bindings:{value:"<",max:"<"}},b.exports=c["default"]},{}],2:[function(a,b,c){"use strict";function d(){var a=this,b=function(a,b){return+(100*a/b).toFixed(2)};this.$onChanges=function(){a.percent=b(a.value,a.max)}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=[],c["default"]=d,b.exports=c["default"]},{}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./bf-progress-bar-controller.js"),f=d(e),g=a("./bf-progress-bar-component.js"),h=d(g);a("./templates.js"),angular.module("BF.ProgressBar",["bfProgressBarTemplates"]).controller("BF.ProgressBarController",f["default"]).component("bfProgressBar",h["default"])},{"./bf-progress-bar-component.js":1,"./bf-progress-bar-controller.js":2,"./templates.js":4}],4:[function(a,b,c){"use strict";b.exports=angular.module("bfProgressBarTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-progress-bar.html",'<div class="progress"><div class="progress-bar" data-ng-style="{width: (self.percent < 100 ? self.percent : 100) + \'%\'}" data-ng-transclude=""></div></div>')}])},{}]},{},[3])},{}],3:[function(a,b,c){!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=1)}([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=/[^\d\.]/,e=/(\..*?)(\.)/,f=/(.*?\.\d{2})(\d*)/,g=/,/g,h=/^0+/,i=/^\.+/,j=/^0\d/;b.removeLeadingZero=function(a){return a.replace(h,"")},b.removeLeadingZeroFollowedByDigits=function(a){return a.replace(j,function(a){return a.substring(1)})},b.removeLeadingDot=function(a){return a.replace(i,"")},b.removeNotNumberOrDot=function(a){return a.replace(d,"")},b.removeSecondDot=function(a){return a.replace(e,"$1")},b.truncateToTwoDigitsAfterDot=function(a){return a.replace(f,"$1")},b.replaceLeadingDotWithZeroDot=function(a){return a.replace(i,"0.")},b.replaceCommaByDot=function(a){return a.replace(g,".")}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c(2);var e=d(c(3)),f=d(c(4));angular.module("BF.RestrictInput",["betfair.lodash"]).directive("bfRestrictProfit",e["default"]).directive("bfRestrictPrice",f["default"])},function(a,b){},function(a,b,c){"use strict";function d(a){var b=a.memoize(function(b){return a.flow([e.removeLeadingZeroFollowedByDigits,e.replaceLeadingDotWithZeroDot,e.replaceCommaByDot,e.removeNotNumberOrDot,e.removeSecondDot,e.truncateToTwoDigitsAfterDot])(b)});return{restrict:"A",require:"ngModel",link:function(a,c,d,e){e.$parsers.push(function(a){var c=b(a);c!==a&&(e.$setViewValue(c),e.$render());var d=parseFloat(c);if(!isNaN(d))return d})}}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(0);d.$inject=["BF.Lodash"],b["default"]=d},function(a,b,c){"use strict";function d(a){var b=a.memoize(function(b){return a.flow([e.removeLeadingZero,e.removeLeadingDot,e.replaceCommaByDot,e.removeNotNumberOrDot,e.removeSecondDot,e.truncateToTwoDigitsAfterDot])(b)});return{restrict:"A",require:"ngModel",link:function(a,c,d,e){e.$parsers.push(function(a){var c=b(a);c!==a&&(e.$setViewValue(c),e.$render());var d=parseFloat(c);if(!isNaN(d))return d})}}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(0);d.$inject=["BF.Lodash"],b["default"]=d}])},{}],4:[function(a,b,c){!function d(b,c,e){function f(h,i){if(!c[h]){if(!b[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=c[h]={exports:{}};b[h][0].call(l.exports,function(a){var c=b[h][1][a];return f(c?c:a)},l,l.exports,d,b,c,e)}return c[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates.js");var e=a("./components/bf-slider-component"),f=d(e),g=a("./controllers/bf-slider-controller"),h=d(g);angular.module("BF.Slider",["bfSliderTemplates"]).component("bfSlider",f["default"]).controller("BF.SliderController",h["default"])},{"./components/bf-slider-component":2,"./controllers/bf-slider-controller":3,"./templates.js":4}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={restrict:"E",templateUrl:"/views/bf-slider.html",controller:"BF.SliderController",controllerAs:"vm",bindings:{currentPosition:"<",min:"<",max:"<",steps:"<",isActive:"<",onSliderChange:"&"}};c["default"]=d},{}],3:[function(a,b,c){"use strict";function d(){var a=this,b=void 0;this.isChromeOrSafari=/(crios|chrome)/i.test(window.navigator.userAgent)||/^((?!crios|chrome).)*safari.*$/i.test(window.navigator.userAgent);var c=function(c){return b?100/a.max*c:c};this.onSliderValueChange=function(){a.currentValue=b?a.steps[a.currentPosition]:a.currentPosition,a.currentPercentage=c(a.currentPosition),a.onSliderChange({value:a.currentValue})},this.$onInit=function(){b=Array.isArray(a.steps)&&a.steps.length,b&&(a.min=0,a.max=a.steps.length-1,a.currentPercentage=c(a.currentPosition))},this.$onChanges=function(d){b?a.currentPosition=d.currentPosition.currentValue:a.currentValue=a.currentPosition,a.currentPercentage=c(a.currentPosition)}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],4:[function(a,b,c){"use strict";b.exports=angular.module("bfSliderTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-slider.html",'<input class="bf-slider" type="range" min="{{::vm.min}}" max="{{::vm.max}}" step="1" data-ng-model="vm.currentPosition" data-ng-change="vm.onSliderValueChange()" data-ng-disabled="!vm.isActive" data-ng-style="vm.isChromeOrSafari && {\n           \'background-image\': \'-webkit-gradient(\n               linear,\n               left top,\n               right top,\n               color-stop(\' + vm.currentPercentage * 0.01 + \', \' + (vm.isActive ? \'#ffb80c\' : \'#ffda80\') + \'),\n               color-stop(\' + vm.currentPercentage * 0.01 + \', #f0f1f5)\n            )\'\n        }">')}])},{}]},{},[1])},{}],5:[function(a,b,c){!function(a,c){"function"==typeof define&&define.amd?define([],function(){return a.svg4everybody=c()}):"object"==typeof b&&b.exports?b.exports=c():a.svg4everybody=c()}(this,function(){function a(a,b,c){if(c){var d=document.createDocumentFragment(),e=!b.hasAttribute("viewBox")&&c.getAttribute("viewBox");e&&b.setAttribute("viewBox",e);for(var f=c.cloneNode(!0);f.childNodes.length;)d.appendChild(f.firstChild);a.appendChild(d)}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=b._cachedDocument;c||(c=b._cachedDocument=document.implementation.createHTMLDocument(""),c.body.innerHTML=b.responseText,b._cachedTarget={}),b._embeds.splice(0).map(function(d){var e=b._cachedTarget[d.id];e||(e=b._cachedTarget[d.id]=c.getElementById(d.id)),a(d.parent,d.svg,e)})}},b.onreadystatechange()}function c(c){function e(){for(var c=0;c<o.length;){var h=o[c],i=h.parentNode,j=d(i),k=h.getAttribute("xlink:href")||h.getAttribute("href");if(!k&&g.attributeName&&(k=h.getAttribute(g.attributeName)),j&&k){if(f)if(!g.validate||g.validate(k,j,h)){i.removeChild(h);var l=k.split("#"),q=l.shift(),r=l.join("#");if(q.length){var s=m[q];s||(s=m[q]=new XMLHttpRequest,s.open("GET",q),s.send(),s._embeds=[]),s._embeds.push({parent:i,svg:j,id:r}),b(s)}else a(i,j,document.getElementById(r))}else++c,++p}else++c}(!o.length||o.length-p>0)&&n(e,67)}var f,g=Object(c),h=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,i=/\bAppleWebKit\/(\d+)\b/,j=/\bEdge\/12\.(\d+)\b/,k=/\bEdge\/.(\d+)\b/,l=window.top!==window.self;f="polyfill"in g?g.polyfill:h.test(navigator.userAgent)||(navigator.userAgent.match(j)||[])[1]<10547||(navigator.userAgent.match(i)||[])[1]<537||k.test(navigator.userAgent)&&l;var m={},n=window.requestAnimationFrame||setTimeout,o=document.getElementsByTagName("use"),p=0;f&&e()}function d(a){for(var b=a;"svg"!==b.nodeName.toLowerCase()&&(b=b.parentNode););return b}return c})},{}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates"),a("bf-progress-bar"),a("bf-slider"),a("bf-breakpoint"),a("bf-restrict-input");var e=a("svg4everybody"),f=d(e),g=a("./components/bf-cashout-component.js"),h=d(g),i=a("./controllers/bf-cashout-controller.js"),j=d(i),k=a("./constants/cashout-constants.js"),l=d(k),m=a("./providers/cashout-panel-manager-service.js"),n=d(m),o=a("./filters/cashout-monetize-filter.js"),p=d(o);(0,f["default"])(),angular.module("bfCashout",["bfCashoutTemplates","BF.ProgressBar","BF.Slider","pascalprecht.translate","bfBreakpoint","BF.RestrictInput"]).component("bfCashout",h["default"]).controller("BF.CashoutController",j["default"]).constant("BF.CashoutConstants",l["default"]).service("BF.CashoutPanelManager",n["default"]).filter("CashoutMonetizeFilter",p["default"])},{"./components/bf-cashout-component.js":7,"./constants/cashout-constants.js":8,"./controllers/bf-cashout-controller.js":9,"./filters/cashout-monetize-filter.js":10,"./providers/cashout-panel-manager-service.js":11,"./templates":12,"bf-breakpoint":1,"bf-progress-bar":2,"bf-restrict-input":3,"bf-slider":4,svg4everybody:5}],7:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={restrict:"E",templateUrl:"/views/bf-cashout.html",controller:"BF.CashoutController",controllerAs:"vm",bindings:{state:"<",onTake:"&",onConfirm:"&",onCancel:"&",onHelpPopupClick:"&",onSliderChange:"&",onButtonHoverEnter:"&",onButtonHoverLeave:"&",onSliderHoverEnter:"&",onSliderHoverLeave:"&",onDismissNotification:"&",onToggleConfirmationPreference:"&",onExpandClick:"&",onTabClick:"&",onAutoCashoutValueChange:"&",onAutoCashoutSave:"&",onAutoCashoutRemove:"&"}};c["default"]=d},{}],8:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={PANELS:{CASHOUT_PANEL:{displayCashoutPanel:!0,displayConfirmationPanel:!1,displayProgressBar:!1},CONFIRMATION_PANEL:{displayCashoutPanel:!1,displayConfirmationPanel:!0,displayProgressBar:!1,displayNotificationPanel:!1},PROGRESS_BAR:{displayCashoutPanel:!1,displayConfirmationPanel:!1,displayProgressBar:!0,displayNotificationPanel:!1},NOTIFICATION_PANEL:{displayConfirmationPanel:!1,displayProgressBar:!1,displayNotificationPanel:!0}},TABS:{AUTO:"AUTO",PARTIAL:"PARTIAL"}}},{}],9:[function(a,b,c){"use strict";function d(){var a=this;this.onKeypress=function(b){if((13===b.keyCode||13===b.which)&&a.state.autoCashout.isValid===!0)return a.onAutoCashoutSave()}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],10:[function(a,b,c){"use strict";function d(){var a="---",b="-";return function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(c=angular.isNumber(c)?c.toString():c,!angular.isString(c)||!c.length)return a;var e=c[0]===b?b:"",f=e?c.slice(1,c.length):c;return e+d+f}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],11:[function(a,b,c){"use strict";function d(a){var b=a.PANELS;this.visibleCashoutPanelState=function(){return angular.merge({},b.CASHOUT_PANEL)},this.hiddenCashoutPanelState=function(){return angular.merge({},{displayCashoutPanel:!1})},this.visibleNotificationState=function(a,c,d){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return angular.merge({notification:{type:a,closeable:c,message:d,description:e}},b.NOTIFICATION_PANEL)},this.hiddenNotificationState=function(){return angular.merge({},{displayNotificationPanel:!1})},this.confirmationState=function(){return b.CONFIRMATION_PANEL},this.progressBarState=function(a,c,d){return angular.merge({loadingPanel:{secondsRemaining:a,currentPercentage:c,maxPercentage:d}},b.PROGRESS_BAR)}}Object.defineProperty(c,"__esModule",{value:!0}),d.$inject=["BF.CashoutConstants"],c["default"]=d},{}],12:[function(a,b,c){"use strict";b.exports=angular.module("bfCashoutTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-cashout.html",'<section class="mod-cashout" data-bf-below-width="{\'narrow\': 740, \'small\': 495, \'mini\': 320}"><div src="\'/views/partials/notification-panel.html\'" data-ng-if="vm.state.displayNotificationPanel" data-ng-include=""></div><div src="\'/views/partials/cashout-button-panel.html\'" data-ng-if="vm.state.displayCashoutPanel" data-ng-include=""></div><div src="\'/views/partials/confirmation-panel.html\'" data-ng-if="vm.state.displayConfirmationPanel" data-ng-include=""></div><div class="progress-bar" src="\'/views/partials/progress-bar.html\'" data-ng-if="vm.state.displayProgressBar" data-ng-include=""></div></section>'),a.put("/views/partials/auto-cashout.html",'<div class="tabbed-container auto-cashout-container" data-ng-if="vm.state.hasAutoCashout && (vm.state.selectedTab === \'AUTO\' || !vm.state.hasPartialCashout)"><!-- VALUE INPUT --><div class="auto-cashout-label-input-container" data-ng-if="!vm.state.autoCashout.isSet && !vm.state.autoCashout.isResultMessageDisplayed"><span class="auto-cashout-label" title="{{vm.state.hasPartialCashout?\'I18N.CASHOUT.IF_PROFIT_REACHES\':\'I18N.CASHOUT.IF_PROFIT_REACHES_FULL\'|translate}}" translate="{{vm.state.hasPartialCashout?\'I18N.CASHOUT.IF_PROFIT_REACHES\':\'I18N.CASHOUT.IF_PROFIT_REACHES_FULL\'}}"></span> <input class="auto-cashout-input" placeholder="{{\'I18N.CASHOUT.AUTO_CASHOUT_PLACEHOLDER\'|translate}}" data-bf-restrict-profit="" data-ng-model="vm.state.autoCashout.value" data-ng-change="vm.onAutoCashoutValueChange({value: vm.state.autoCashout.value})" data-ng-disabled="vm.state.autoCashout.isSaveInProgress" data-ng-keypress="vm.onKeypress($event)"><div class="help-link-container"><a class="help-link" data-ng-click="vm.onHelpPopupClick()"><svg class="help-link-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-cashout_3641_.svg#icons-help-icon"/></svg></a></div></div><!-- SAVE BUTTON --><div class="auto-cashout-button-container" data-ng-if="!vm.state.autoCashout.isSet && !vm.state.autoCashout.isResultMessageDisplayed"><button class="action-button auto-cashout-button auto-cashout-save" data-ng-disabled="!vm.state.autoCashout.isValid || vm.state.autoCashout.isSaveInProgress" data-ng-click="vm.onAutoCashoutSave()"><span class="auto-cashout-button-label" title="{{\'I18N.CASHOUT.SAVE_AUTO_CASH_OUT\'|translate}}" translate="{{::\'I18N.CASHOUT.SAVE_AUTO_CASH_OUT\'}}"></span></button><div class="help-link-container"><a class="help-link" data-ng-click="vm.onHelpPopupClick()"><svg class="help-link-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-cashout_3641_.svg#icons-help-icon"/></svg></a></div></div><!-- SAVED LABEL --><div class="auto-cashout-saved-label-container" data-ng-if="vm.state.autoCashout.isSet || vm.state.autoCashout.isResultMessageDisplayed"><span class="auto-cashout-saved-label" title="{{\'I18N.CASHOUT.IF_PROFIT_REACHES\'|translate}}" translate="{{::\'I18N.CASHOUT.IF_PROFIT_REACHES\'}}"></span> <span class="auto-cashout-saved-value" title="{{::vm.state.currencySymbol + vm.state.autoCashout.value}}" data-ng-bind-template="{{::vm.state.currencySymbol + vm.state.autoCashout.value}}"></span></div><!-- REMOVE BUTTON --><div class="auto-cashout-button-container auto-cashout-remove-button-container" data-ng-if="vm.state.autoCashout.isSet && !vm.state.autoCashout.isResultMessageDisplayed"><button class="action-button auto-cashout-button auto-cashout-remove" data-ng-click="vm.onAutoCashoutRemove()" data-ng-disabled="vm.state.autoCashout.isRemoveInProgress"><span class="auto-cashout-button-label" title="{{\'I18N.CASHOUT.REMOVE\'|translate}}" translate="{{::\'I18N.CASHOUT.REMOVE\'}}"></span></button><div class="help-link-container"><a class="help-link" data-ng-click="vm.onHelpPopupClick()"><svg class="help-link-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-cashout_3641_.svg#icons-help-icon"/></svg></a></div></div><!-- SET SUCCESS MESSAGE --><div class="auto-cashout-message-container" data-ng-if="vm.state.autoCashout.isSet && vm.state.autoCashout.isResultMessageDisplayed"><svg class="auto-cashout-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-cashout_3641_.svg#icons-ac-saved"/></svg> <span class="auto-cashout-message-label" title="{{\'I18N.CASHOUT.AUTO_CASHOUT_SAVED\'|translate}}" translate="{{::\'I18N.CASHOUT.AUTO_CASHOUT_SAVED\'}}"></span></div><!-- REMOVE SUCCESS MESSAGE --><div class="auto-cashout-message-container" data-ng-if="!vm.state.autoCashout.isSet && vm.state.autoCashout.isResultMessageDisplayed"><svg class="auto-cashout-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-cashout_3641_.svg#icons-ac-removed"/></svg> <span class="auto-cashout-message-label auto-cashout-removed-message" title="{{\'I18N.CASHOUT.AUTO_CASHOUT_REMOVED\'|translate}}" translate="{{::\'I18N.CASHOUT.AUTO_CASHOUT_REMOVED\'}}"></span></div></div>'),a.put("/views/partials/cashout-button-panel.html",'<div class="cashout-button-panel" data-ng-class="{\n        \'collapsed\': vm.state.isCollapsed,\n        \'no-expandable-content\': !vm.state.hasPartialCashout && !vm.state.hasAutoCashout\n    }"><div class="cashout-button-panel-container"><div class="cashout-liability"><div class="cashout-liability-label" title="{{\'I18N.CASHOUT.LIABILITY\'|translate}}" translate="{{::\'I18N.CASHOUT.LIABILITY\'}}"></div><div class="cashout-liability-value" title="{{vm.state.values.liability | CashoutMonetizeFilter:vm.state.currencySymbol}}" data-ng-bind-template="{{vm.state.values.liability | CashoutMonetizeFilter:vm.state.currencySymbol}}"></div></div><div class="cashout-button" data-ng-click="vm.state.isActive && vm.onTake()" data-ng-class="{\'disabled\': !vm.state.isActive}" data-ng-mouseenter="vm.state.isActive && vm.onButtonHoverEnter()" data-ng-mouseleave="vm.state.isActive && vm.onButtonHoverLeave()"><div class="cashout-button-amount" title="{{\'I18N.CASHOUT.ACTION\'|translate}} {{vm.state.values.value | CashoutMonetizeFilter:vm.state.currencySymbol}}"><span class="cashout-button-amount-label" translate="{{::\'I18N.CASHOUT.ACTION\'}}"></span> <span class="cashout-button-amount-value" data-ng-bind-template="{{vm.state.values.value | CashoutMonetizeFilter:vm.state.currencySymbol}}"></span></div><div class="cashout-button-profit" title="{{\'I18N.CASHOUT.PROFIT\'|translate}} {{vm.state.values.profit | CashoutMonetizeFilter:vm.state.currencySymbol}}"><span class="cashout-button-profit-label" translate="{{::\'I18N.CASHOUT.PROFIT\'}}"></span> <span class="cashout-button-profit-value" data-ng-class="{\'negative\': vm.state.values.profit < 0}" data-ng-bind-template="{{vm.state.values.profit | CashoutMonetizeFilter:vm.state.currencySymbol}}"></span></div></div><button class="action-button expand-button" data-ng-if="vm.state.hasPartialCashout || vm.state.hasAutoCashout" data-ng-click="vm.onExpandClick()"><div class="auto-cashout-saved-dot" data-ng-if="vm.state.autoCashout.isSet"></div><svg class="expand-icon" data-ng-class="{\'auto-cashout-set\': vm.state.autoCashout.isSet}"><use xlink:href="/resources/eds/bundle/images/sprite-bf-cashout_3641_.svg#icons-expand-icon"/></svg></button><div class="help-link-container no-expandable-content"><a class="help-link" data-ng-click="vm.onHelpPopupClick()"><svg class="help-link-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-cashout_3641_.svg#icons-help-icon"/></svg></a></div></div><div class="expandable-content" data-ng-if="vm.state.hasPartialCashout || vm.state.hasAutoCashout"><div class="cashout-tabs-container" data-ng-if="vm.state.hasAutoCashout && vm.state.hasPartialCashout"><div class="tab auto-cashout-tab" title="{{\'I18N.CASHOUT.AUTO_CASHOUT\'|translate}}" translate="{{::\'I18N.CASHOUT.AUTO_CASHOUT\'}}" data-ng-class="{selected: vm.state.selectedTab === \'AUTO\'}" data-ng-click="vm.onTabClick({ tab: \'AUTO\' })"></div><div class="tab partial-cashout-tab" title="{{\'I18N.CASHOUT.PARTIAL_CASHOUT\'|translate}}" translate="{{::\'I18N.CASHOUT.PARTIAL_CASHOUT\'}}" data-ng-class="{selected: vm.state.selectedTab === \'PARTIAL\'}" data-ng-click="vm.onTabClick({ tab: \'PARTIAL\' })"></div></div><data-ng-include src="\'/views/partials/auto-cashout.html\'"></data-ng-include><div class="tabbed-container partial-cashout-container" data-ng-if="vm.state.hasPartialCashout && (vm.state.selectedTab === \'PARTIAL\' || !vm.state.hasAutoCashout)"><div class="slider-container" src="\'/views/partials/cashout-slider.html\'" data-ng-include=""></div><div class="help-link-container"><a class="help-link" data-ng-click="vm.onHelpPopupClick()"><svg class="help-link-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-cashout_3641_.svg#icons-help-icon"/></svg></a></div></div></div></div>'),a.put("/views/partials/cashout-slider.html",'<span class="slider-label min" title="{{\'I18N.CASHOUT.MIN.PROFIT\'|translate}}" translate="{{::\'I18N.CASHOUT.MIN.PROFIT\'}}"></span><data-bf-slider class="slider" current-position="vm.state.slider.currentPosition" min="vm.state.slider.min" max="vm.state.slider.max" is-active="vm.state.isActive" on-slider-change="vm.onSliderChange({value:+value})" data-ng-mouseenter="vm.state.isActive && vm.onSliderHoverEnter()" data-ng-mouseleave="vm.state.isActive && vm.onSliderHoverLeave()"></data-bf-slider><span class="slider-label max" title="{{\'I18N.CASHOUT.MAX.PROFIT\'|translate}}" translate="{{::\'I18N.CASHOUT.MAX.PROFIT\'}}"></span>'),a.put("/views/partials/confirmation-panel.html",'<div class="confirmation-panel"><div class="confirmation-panel-container"><div class="confirmation-panel-controls"><div class="action-button cashout-confirmation-cancel-button" translate="{{::\'I18N.CASHOUT.CANCEL\'}}" data-ng-click="vm.onCancel()"></div><div class="cashout-button" data-ng-click="vm.state.isActive && vm.onConfirm()" data-ng-class="{\'disabled\': !vm.state.isActive}" data-ng-mouseenter="vm.state.isActive && vm.onButtonHoverEnter()" data-ng-mouseleave="vm.state.isActive && vm.onButtonHoverLeave()"><div class="cashout-button-amount" title="{{\'I18N.CASHOUT.CONFIRM_ACTION\'|translate}} {{vm.state.values.value | CashoutMonetizeFilter:vm.state.currencySymbol}}"><span class="cashout-button-amount-label" translate="{{::\'I18N.CASHOUT.CONFIRM_ACTION\'}}"></span> <span class="cashout-button-amount-value" data-ng-bind-template="{{vm.state.values.value | CashoutMonetizeFilter:vm.state.currencySymbol}}"></span></div><div class="cashout-button-profit" title="{{\'I18N.CASHOUT.PROFIT\'|translate}} {{vm.state.values.profit | CashoutMonetizeFilter:vm.state.currencySymbol}}"><span class="cashout-button-profit-label" translate="{{::\'I18N.CASHOUT.PROFIT\'}}"></span> <span class="cashout-button-profit-value" data-ng-class="{\'negative\': vm.state.values.profit < 0}" data-ng-bind-template="{{vm.state.values.profit | CashoutMonetizeFilter:vm.state.currencySymbol}}"></span></div></div><div class="cashout-confirmation-message-container"><div class="cashout-confirmation-option"><input id="cashout-confirmation-option-checkbox" type="checkbox" class="cashout-confirmation-option-checkbox" checked="checked" data-ng-click="vm.onToggleConfirmationPreference()"><label class="cashout-confirmation-option-label" for="cashout-confirmation-option-checkbox" translate="{{::\'I18N.CASHOUT.WARNING.DONTSHOWAGAIN\'}}"></label></div></div></div><div class="cashout-confirmation-message-container compact-view"><div class="cashout-confirmation-option"><input id="cashout-confirmation-option-checkbox" type="checkbox" class="cashout-confirmation-option-checkbox" checked="checked" data-ng-click="vm.onToggleConfirmationPreference()"><label class="cashout-confirmation-option-label" for="cashout-confirmation-option-checkbox" translate="{{::\'I18N.CASHOUT.WARNING.DONTSHOWAGAIN\'}}"></label></div></div></div></div>'),a.put("/views/partials/notification-panel.html",'<div class="cashout-notification-container" data-ng-class="{\n            GENERIC: \'generic-notification\',\n            SUCCESSFUL: \'successful-notification\',\n            UNSUCCESSFUL: \'unsuccessful-notification\',\n            WARNING: \'warning-notification\'\n        }[vm.state.notification.type]"><div class="notification-content-container"><span class="cashout-notification-text cashout-notification-message" data-ng-bind="vm.state.notification.message"></span> <span class="cashout-notification-text cashout-notification-description" data-ng-bind="vm.state.notification.description"></span></div><div class="notification-close-container" data-ng-if="vm.state.notification.closeable" data-ng-click="vm.onDismissNotification()"><svg class="notification-close-icon"><use xlink:href="/resources/eds/bundle/images/sprite-bf-cashout_3641_.svg#icons-close-icon"/></svg></div></div>'),a.put("/views/partials/progress-bar.html",'<div class="progress-container"><div class="progress-message-container"><div class="message-title" translate="{{::\'I18N.CASHOUT.PLEASEWAIT\'}}"></div><div class="message" data-ng-bind="\'I18N.CASHOUT.N_SECONDS_REMAINING\' | translate:vm.state.loadingPanel"></div></div><data-bf-progress-bar class="progress-bar-container" value="vm.state.loadingPanel.currentPercentage" max="vm.state.loadingPanel.maxPercentage"></data-bf-progress-bar></div>')}])},{}]},{},[6]),!function t(a,b,c){function d(f,g){if(!b[f]){if(!a[f]){var h="function"==typeof require&&require;if(!g&&h)return h(f,!0);if(e)return e(f,!0);var i=new Error("Cannot find module '"+f+"'");throw i.code="MODULE_NOT_FOUND",i}var j=b[f]={exports:{}};a[f][0].call(j.exports,function(b){var c=a[f][1][b];return d(c?c:b)},j,j.exports,t,a,b,c)}return b[f].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}a("./templates.js");var e=a("./components/bf-slider-component"),f=d(e),g=a("./controllers/bf-slider-controller"),h=d(g);angular.module("BF.Slider",["bfSliderTemplates"]).component("bfSlider",f["default"]).controller("BF.SliderController",h["default"])},{"./components/bf-slider-component":2,"./controllers/bf-slider-controller":3,"./templates.js":4}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={restrict:"E",templateUrl:"/views/bf-slider.html",controller:"BF.SliderController",controllerAs:"vm",bindings:{currentPosition:"<",min:"<",max:"<",steps:"<",isActive:"<",onSliderChange:"&"}};c["default"]=d},{}],3:[function(a,b,c){"use strict";function d(){var a=this,b=void 0;this.isChromeOrSafari=/(crios|chrome)/i.test(window.navigator.userAgent)||/^((?!crios|chrome).)*safari.*$/i.test(window.navigator.userAgent);var c=function(c){return b?100/a.max*c:c};this.onSliderValueChange=function(){a.currentValue=b?a.steps[a.currentPosition]:a.currentPosition,a.currentPercentage=c(a.currentPosition),a.onSliderChange({value:a.currentValue})},this.$onInit=function(){b=Array.isArray(a.steps)&&a.steps.length,b&&(a.min=0,a.max=a.steps.length-1,a.currentPercentage=c(a.currentPosition))},this.$onChanges=function(d){b?a.currentPosition=d.currentPosition.currentValue:a.currentValue=a.currentPosition,a.currentPercentage=c(a.currentPosition)}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d},{}],4:[function(a,b,c){"use strict";b.exports=angular.module("bfSliderTemplates",[]).run(["$templateCache",function(a){a.put("/views/bf-slider.html",'<input class="bf-slider" type="range" min="{{::vm.min}}" max="{{::vm.max}}" step="1" data-ng-model="vm.currentPosition" data-ng-change="vm.onSliderValueChange()" data-ng-disabled="!vm.isActive" data-ng-style="vm.isChromeOrSafari && {\n           \'background-image\': \'-webkit-gradient(\n               linear,\n               left top,\n               right top,\n               color-stop(\' + vm.currentPercentage * 0.01 + \', \' + (vm.isActive ? \'#ffb80c\' : \'#ffda80\') + \'),\n               color-stop(\' + vm.currentPercentage * 0.01 + \', #f0f1f5)\n            )\'\n        }">')}])},{}]},{},[1]),!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c(1),c(2);var e=c(3),f=d(e),g=c(5),h=d(g),i=angular.module("bfSeoFooter",[]);i.component("bfSeoFooter",f["default"]),i.filter("trustAsHtml",h["default"])},function(a,b){},function(a,b){},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(4),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f={restrict:"E",templateUrl:e["default"],controllerAs:"ctrl",bindings:{viewModel:"<"}};b["default"]=f},function(a,b){var c="bf-seo-footer/bf-seo-footer.html";window.angular.module("ng").run(["$templateCache",function(a){a.put(c,'<section class=seo-footer ng-if=ctrl.viewModel><div ng-repeat="data in ::ctrl.viewModel" class=seo-footer__item><h2 class=seo-footer__title ng-bind-template={{::data.title}}></h2><p class=seo-footer__description ng-bind-html="::data.description | trustAsHtml"></p></div></section>')}]),a.exports=c},function(a,b,c){"use strict";function d(a){return function(b){return a.trustAsHtml(b)}}Object.defineProperty(b,"__esModule",{value:!0}),d.$inject=["$sce"],b["default"]=d}]),!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c(1),c(2),c(3),c(4);var e=c(5),f=d(e),g=c(7),h=d(g),i=c(9),j=d(i),k=c(11),l=d(k);(0,d(c(12))["default"])();var m=angular.module("bfRunnerTimeform",["pascalprecht.translate","betfair.lodash"]);m.component("bfRunnerTimeform",f["default"]),m.component("runnerDetails",j["default"]),m.component("runnerPastRaces",h["default"]),m.controller("RunnerPastRacesController",l["default"])},function(a,b){},function(a,b){},function(a,b){},function(a,b){},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(6),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f={restrict:"E",templateUrl:e["default"],controllerAs:"ctrl",controller:function(){var a=this;this.onArchiveVideoClickHandler=function(b,c){a.onArchiveVideoClick(b,c,a.runnerDetails)}},bindings:{runnerDetails:"<",pastRaces:"<?",videoOpensInline:"<?",videoWidth:"<?",videoHeight:"<?",onArchiveVideoClick:"<?"}};b["default"]=f},function(a,b){var c="bf-runner-timeform/bf-runner-timeform.html";window.angular.module("ng").run(["$templateCache",function(a){a.put(c,'<section class="runner-timeform-wrapper"><runner-details runner-details="ctrl.runnerDetails"></runner-details><runner-past-races past-races="ctrl.pastRaces" video-opens-inline="ctrl.videoOpensInline" video-width="ctrl.videoWidth" video-height="ctrl.videoHeight" on-archive-video-click="ctrl.onArchiveVideoClickHandler"></runner-past-races></section>')}]),a.exports=c},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(8),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f={restrict:"E",templateUrl:e["default"],controllerAs:"ctrl",controller:"RunnerPastRacesController",bindings:{pastRaces:"<?",videoOpensInline:"<?",
videoWidth:"<?",videoHeight:"<?",onArchiveVideoClick:"<?"}};b["default"]=f},function(a,b){var c="bf-runner-timeform/partials/runner-past-races-component.html";window.angular.module("ng").run(["$templateCache",function(a){a.put(c,'<section class="runner-past-races" ng-if="::(ctrl.pastRaces && ctrl.pastRaces.length > 0)"><div class="runner-past-races__row runner-past-races__row--header"><div class="runner-past-races__columns-body"><div class="runner-past-races__column runner-past-races__column--date" translate="{{::\'I18N.TIMEFORM_RUNNER_PAST_RACES.DATE\'}}"></div><div class="runner-past-races__column runner-past-races__column--course" translate="{{::\'I18N.TIMEFORM_RUNNER_PAST_RACES.COURSE\'}}"></div><div class="runner-past-races__column runner-past-races__column--distance" translate="{{::\'I18N.TIMEFORM_RUNNER_PAST_RACES.DISTANCE\'}}"></div><div class="runner-past-races__column runner-past-races__column--going" translate="{{::\'I18N.TIMEFORM_RUNNER_PAST_RACES.GOING\'}}"></div><div class="runner-past-races__column runner-past-races__column--type" translate="{{::\'I18N.TIMEFORM_RUNNER_PAST_RACES.TYPE\'}}"></div><div class="runner-past-races__column runner-past-races__column--position" translate="{{::\'I18N.TIMEFORM_RUNNER_PAST_RACES.POSITION\'}}"></div><div class="runner-past-races__column runner-past-races__column--or" translate="{{::\'I18N.TIMEFORM_RUNNER_PAST_RACES.OFFICIAL_RATING\'}}"></div><div class="runner-past-races__column runner-past-races__column--bsp" translate="{{::\'I18N.TIMEFORM_RUNNER_PAST_RACES.BSP\'}}"></div><div class="runner-past-races__column runner-past-races__column--hi-lo" translate="{{::\'I18N.TIMEFORM_RUNNER_PAST_RACES.HI_LOW\'}}"></div><div class="runner-past-races__column runner-past-races__column--jockey" translate="{{::\'I18N.TIMEFORM_RUNNER_PAST_RACES.JOCKEY\'}}"></div></div><div class="runner-past-races__column runner-past-races__column--av"></div></div><div class="runner-past-races__row" ng-repeat-start="race in ::ctrl.pastRaces"><div class="runner-past-races__columns-body"><div class="runner-past-races__column runner-past-races__column--date" ng-bind="::race.date"></div><div class="runner-past-races__column runner-past-races__column--course runner-past-races__column--course-full" ng-bind="::race.course"></div><div class="runner-past-races__column runner-past-races__column--course runner-past-races__column--course-abbr" ng-bind="::race.courseCode"></div><div class="runner-past-races__column runner-past-races__column--distance" ng-bind="::race.distance"></div><div class="runner-past-races__column runner-past-races__column--going" ng-bind="::race.going.abbr"></div><div class="runner-past-races__column runner-past-races__column--type runner-past-races__column--type-full" ng-bind="::race.raceType.full"></div><div class="runner-past-races__column runner-past-races__column--type runner-past-races__column--type-abbr" ng-bind="::race.raceType.abbr"></div><div class="runner-past-races__column runner-past-races__column--position" ng-bind="::race.position"></div><div class="runner-past-races__column runner-past-races__column--or" ng-bind="::(race.officialRating || \'-\')"></div><div class="runner-past-races__column runner-past-races__column--bsp" ng-bind="::race.bsp"></div><div class="runner-past-races__column runner-past-races__column--hi-lo" ng-bind="::(race.inPlayMax + \'/\' + race.inPlayMin)"></div><div class="runner-past-races__column runner-past-races__column--jockey" ng-bind="::race.jockey"></div></div><div class="runner-past-races__column runner-past-races__column--av runner-past-races__column--av-content" ng-click="::ctrl.archiveVideoClickHandler($index, race)"><svg class="runner-past-races__av-svg"><use xlink:href="/resources/eds/bundle/images/sprite-bf-runner-timeform_3641_.svg#live-video-icon"></use></svg></div></div><div ng-repeat-end class="runner-past-races__row-av"><div class="runner-past-races__row-av-iframe-wrapper" ng-if="ctrl.videoOpensInline && race.isVideoVisible"><iframe class="runner-past-races__row-av-iframe" scrolling="no" allowfullscreen width="{{::ctrl.videoWidth}}" height="{{::ctrl.videoHeight}}" ng-src="{{::ctrl.buildVideoUrl(race)}}"></iframe></div></div></section>')}]),a.exports=c},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(10),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f={restrict:"E",templateUrl:e["default"],controllerAs:"ctrl",bindings:{runnerDetails:"<"}};b["default"]=f},function(a,b){var c="bf-runner-timeform/partials/runner-details-component.html";window.angular.module("ng").run(["$templateCache",function(a){a.put(c,'<section class="runner-timeform-wrapper__runner-info"><div class="runner-timeform-wrapper__horse-details"><div class="runner-timeform-wrapper__details runner-timeform-wrapper__form"><strong class="runner-timeform-wrapper__details-strong" translate="{{::\'I18N.TIMEFORM_RUNNER_INFO.FORM\'}}"></strong> {{::ctrl.runnerDetails.form}}</div><div class="runner-timeform-wrapper__details runner-timeform-wrapper__trainer"><strong class="runner-timeform-wrapper__details-strong" translate="{{::\'I18N.TIMEFORM_RUNNER_INFO.TRAINER\'}}"></strong> {{::ctrl.runnerDetails.trainerName}}</div><div class="runner-timeform-wrapper__details runner-timeform-wrapper__age-weight-rating"><strong class="runner-timeform-wrapper__details-strong runner-timeform-wrapper__age-weight-rating-strong" translate="{{::\'I18N.TIMEFORM_RUNNER_INFO.AGE\'}}"></strong> {{::ctrl.runnerDetails.age}} <strong class="runner-timeform-wrapper__details-strong runner-timeform-wrapper__age-weight-rating-strong" translate="{{::\'I18N.TIMEFORM_RUNNER_INFO.WEIGHT\'}}"></strong> {{::ctrl.runnerDetails.weight}} <strong class="runner-timeform-wrapper__details-strong runner-timeform-wrapper__age-weight-rating-strong" translate="{{::\'I18N.TIMEFORM_RUNNER_INFO.OFFICIAL_RATING\'}}"></strong> {{::ctrl.runnerDetails.officialRating || \'n/a\'}}</div><div class="runner-timeform-wrapper__details runner-timeform-wrapper__equipment" ng-if="ctrl.runnerDetails.equipment"><strong class="runner-timeform-wrapper__details-strong" translate="{{::\'I18N.TIMEFORM_RUNNER_INFO.EQUIPMENT\'}}"></strong> {{::ctrl.runnerDetails.equipment}}</div><div class="runner-timeform-wrapper__details runner-timeform-wrapper__pedigree" ng-if="ctrl.runnerDetails.pedigree.sire.name && ctrl.runnerDetails.pedigree.dam.name"><strong class="runner-timeform-wrapper__details-strong" translate="{{::\'I18N.TIMEFORM_RUNNER_INFO.PEDIGREE\'}}"></strong> {{::ctrl.runnerDetails.pedigree.sire.name}} | {{::ctrl.runnerDetails.pedigree.dam.name}}</div></div><div ng-if="ctrl.runnerDetails.comment" class="runner-timeform-wrapper__horse-comments"><div class="runner-timeform-wrapper__details"><strong class="runner-timeform-wrapper__details-strong" translate="{{::\'I18N.TIMEFORM_RUNNER_INFO.RUNNER_COMMENTS\'}}"></strong></div><div class="runner-timeform-wrapper__details">{{::ctrl.runnerDetails.comment}}</div></div></section>')}]),a.exports=c},function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=this,h=f.debounce(function(){k(),c.$applyAsync()},50),i=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:480,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:290,d=a.clientWidth,e=Math.min(b,d)-10;return{width:e,height:Math.floor(e*c/b),scale:Math.round(e/b*100)/100}},j=function(a,b,c,d){angular.element(a.querySelector(".runner-past-races__row-av-iframe")).css({transform:"scale("+d+")"}),angular.element(a.querySelector(".runner-past-races__row-av-iframe-wrapper")).css({width:b+"px",height:c+"px",position:"static"})},k=function(){var a=angular.element(d[0].querySelectorAll(".runner-past-races .runner-past-races__row-av")),b=void 0;angular.forEach(a,function(a){l(a)&&(b||(b=i(a,g.videoWidth,g.videoHeight)),j(a,b.width,b.height,b.scale))},g)},l=function(a){return a&&angular.element(a).children().length};this.archiveVideoClickHandler=function(a,b){g.videoOpensInline&&(b.isVideoVisible=!b.isVideoVisible,b.isVideoVisible&&e(function(){var b=angular.element(d[0].querySelectorAll(".runner-past-races .runner-past-races__row-av"))[a],c=i(b,g.videoWidth,g.videoHeight);j(b,c.width,c.height,c.scale)},0,g)),g.onArchiveVideoClick(a,b)},this.buildVideoUrl=function(b){return a.trustAsResourceUrl(b.videoUrl+"&width="+g.videoWidth+"&height="+g.videoHeight)},this.$onInit=function(){g.pastRaces=g.pastRaces||[],g.videoOpensInline=g.videoOpensInline||!1,g.videoWidth=g.videoWidth||480,g.videoHeight=g.videoHeight||290,g.onArchiveVideoClick=g.onArchiveVideoClick||angular.noop,g.videoOpensInline&&angular.element(b).bind("resize",h)},this.$onDestroy=function(){g.videoOpensInline&&angular.element(b).unbind("resize",h)}}Object.defineProperty(b,"__esModule",{value:!0}),d.$inject=["$sce","$window","$scope","$element","$timeout","BF.Lodash"],b["default"]=d},function(a,b,c){var d,e;!function(c,f){d=[],void 0!==(e=function(){return c.svg4everybody=f()}.apply(b,d))&&(a.exports=e)}(this,function(){function a(a,b){if(b){var c=document.createDocumentFragment(),d=!a.getAttribute("viewBox")&&b.getAttribute("viewBox");d&&a.setAttribute("viewBox",d);for(var e=document.importNode?document.importNode(b,!0):b.cloneNode(!0);e.childNodes.length;)c.appendChild(e.firstChild);a.appendChild(c)}}function b(b){b.onreadystatechange=function(){if(4===b.readyState){var c=b._cachedDocument;c||(c=b._cachedDocument=document.implementation.createHTMLDocument(""),c.body.innerHTML=b.responseText,b._cachedTarget={}),b._embeds.splice(0).map(function(d){var e=b._cachedTarget[d.id];e||(e=b._cachedTarget[d.id]=c.getElementById(d.id)),a(d.svg,e)})}},b.onreadystatechange()}function c(c){function d(){for(var c=0;c<l.length;){var g=l[c],h=g.parentNode;if(h&&/svg/i.test(h.nodeName)){var i=g.getAttribute("xlink:href");if(e&&(!f.validate||f.validate(i,h,g))){h.removeChild(g);var m=i.split("#"),n=m.shift(),o=m.join("#");if(n.length){var p=j[n];p||(p=j[n]=new XMLHttpRequest,p.open("GET",n),p.send(),p._embeds=[]),p._embeds.push({svg:h,id:o}),b(p)}else a(h,document.getElementById(o))}}else++c}k(d,67)}var e,f=Object(c),g=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,h=/\bAppleWebKit\/(\d+)\b/,i=/\bEdge\/12\.(\d+)\b/;e="polyfill"in f?f.polyfill:g.test(navigator.userAgent)||(navigator.userAgent.match(i)||[])[1]<10547||(navigator.userAgent.match(h)||[])[1]<537;var j={},k=window.requestAnimationFrame||setTimeout,l=document.getElementsByTagName("use");e&&d()}return c})}]);
//# sourceMappingURL=vendor-assets-min_3641.js.map